!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("coreUtils"),require("experiment"),require("document-services-schemas"),require("utils"),require("mobileCore"),require("tpa"),require("wixappsCore"),require("layout"),require("wixCode"),require("warmupUtilsLib"),require("core"),require("santa-core-utils"),require("zepto"),require("platformEvents"),require("wixappsClassics"),require("platformInit"),require("wixappsBuilder"),require("color"),require("platformUtils"),require("mobx"),require("immutable"),require("immutableDiff"),require("wixImmutable"),require("wix-json-schema-utils"),require("speakingurl"),require("coreMultilingual"),require("wix-ui-santa/componentsMetaData.bundle"),require("editorSkinsData"),require("wix-ui-santa/components-editor-params"),require("skins"),require("wix-ui-santa/dsComponentsService.bundle"),require("pmrpc"),require("platformAPI"),require("elementory-browser-support"),require("wix-data-schemas-creator"),require("js-platform-apps-configuration-editor"),require("skinExports"),require("textCommon"),require("wix-ui-santa/componentsHooks.bundle"),require("santa-components"),require("warmupUtils"),require("image-client-api"),require("componentsCore"),require("wix-ui-santa/baseUIDSComponentsService.bundle"),require("localSiteSerializer"));else if("function"==typeof define&&define.amd)define(["lodash","coreUtils","experiment","document-services-schemas","utils","mobileCore","tpa","wixappsCore","layout","wixCode","warmupUtilsLib","core","santa-core-utils","zepto","platformEvents","wixappsClassics","platformInit","wixappsBuilder","color","platformUtils","mobx","immutable","immutableDiff","wixImmutable","wix-json-schema-utils","speakingurl","coreMultilingual","wix-ui-santa/componentsMetaData.bundle","editorSkinsData","wix-ui-santa/components-editor-params","skins","wix-ui-santa/dsComponentsService.bundle","pmrpc","platformAPI","elementory-browser-support","wix-data-schemas-creator","js-platform-apps-configuration-editor","skinExports","textCommon","wix-ui-santa/componentsHooks.bundle","santa-components","warmupUtils","image-client-api","componentsCore","wix-ui-santa/baseUIDSComponentsService.bundle","localSiteSerializer"],t);else{var n="object"==typeof exports?t(require("lodash"),require("coreUtils"),require("experiment"),require("document-services-schemas"),require("utils"),require("mobileCore"),require("tpa"),require("wixappsCore"),require("layout"),require("wixCode"),require("warmupUtilsLib"),require("core"),require("santa-core-utils"),require("zepto"),require("platformEvents"),require("wixappsClassics"),require("platformInit"),require("wixappsBuilder"),require("color"),require("platformUtils"),require("mobx"),require("immutable"),require("immutableDiff"),require("wixImmutable"),require("wix-json-schema-utils"),require("speakingurl"),require("coreMultilingual"),require("wix-ui-santa/componentsMetaData.bundle"),require("editorSkinsData"),require("wix-ui-santa/components-editor-params"),require("skins"),require("wix-ui-santa/dsComponentsService.bundle"),require("pmrpc"),require("platformAPI"),require("elementory-browser-support"),require("wix-data-schemas-creator"),require("js-platform-apps-configuration-editor"),require("skinExports"),require("textCommon"),require("wix-ui-santa/componentsHooks.bundle"),require("santa-components"),require("warmupUtils"),require("image-client-api"),require("componentsCore"),require("wix-ui-santa/baseUIDSComponentsService.bundle"),require("localSiteSerializer")):t(e.lodash,e.coreUtils,e.experiment,e["document-services-schemas"],e.utils,e.mobileCore,e.tpa,e.wixappsCore,e.layout,e.wixCode,e.warmupUtilsLib,e.core,e["santa-core-utils"],e.zepto,e.platformEvents,e.wixappsClassics,e.platformInit,e.wixappsBuilder,e.color,e.platformUtils,e.mobx,e.immutable,e.immutableDiff,e.wixImmutable,e["wix-json-schema-utils"],e.speakingurl,e.coreMultilingual,e["wix-ui-santa/componentsMetaData.bundle"],e.editorSkinsData,e["wix-ui-santa/components-editor-params"],e.skins,e["wix-ui-santa/dsComponentsService.bundle"],e.pmrpc,e.platformAPI,e["elementory-browser-support"],e["wix-data-schemas-creator"],e["js-platform-apps-configuration-editor"],e.skinExports,e.textCommon,e["wix-ui-santa/componentsHooks.bundle"],e["santa-components"],e.warmupUtils,e["image-client-api"],e.componentsCore,e["wix-ui-santa/baseUIDSComponentsService.bundle"],e.localSiteSerializer);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t,n,r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w,b,M,R,N,x,L,B,k,F,U,H,V,W,G,z,j){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=268)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var r;e.exports={VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:(r=n(1)).constants.DATA_TYPES,DEVICES:{DESKTOP:"desktop",MOBILE:"mobile"},ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}},DOM_ID_PREFIX:{DESKTOP:"",MOBILE:"mobile_"},RESIZE_SIDES:{TOP:"RESIZE_TOP",LEFT:"RESIZE_LEFT",BOTTOM:"RESIZE_BOTTOM",RIGHT:"RESIZE_RIGHT"},MOVE_DIRECTIONS:{HORIZONTAL:"HORIZONTAL_MOVE",VERTICAL:"VERTICAL_MOVE"},COMP_TYPES:{PAGE:"Page",MASTER_PAGE:"Document",HEADER:"wysiwyg.viewer.components.HeaderContainer",FOOTER:"wysiwyg.viewer.components.FooterContainer"},COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND"},MOBILE_ONLY_COMPONENTS:{TINY_MENU:"TINY_MENU",MENU_AS_CONTAINER:"MENU_AS_CONTAINER",MENU_AS_CONTAINER_TOGGLE:"MENU_AS_CONTAINER_TOGGLE",BACK_TO_TOP_BUTTON:"BACK_TO_TOP_BUTTON",MENU_AS_CONTAINER_EXPANDABLE_MENU:"MENU_AS_CONTAINER_EXPANDABLE_MENU"},MOBILE_ONLY_COMPONENT_TYPES:{BACK_TO_TOP_BUTTON:"wysiwyg.viewer.components.BackToTopButton",BACK_TO_TOP_BUTTON_LEGACY:"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton"},PERMISSIONS:{EDIT_REVISIONS:"html-editor.edit-revisions",EDIT:"html-editor.edit",SAVE:"html-editor.save",PREVIEW:"html-editor.preview",PUBLISH:"html-editor.publish",UNPUBLISH:"html-editor.unpublish",VIEW_REVISIONS:"html-editor.view-revisions"},POPUPS:{DEFAULT_DELAY:2},HERO_IMAGE:{MIN_HEIGHT:7},MENU_ITEM_TYPES:{PAGE:"page",LINK:"link",HEADER:"header"},SITE_STRUCTURE:r.siteConstants.MASTER_PAGE_ID,MASTER_PAGE_ID:r.siteConstants.MASTER_PAGE_ID,SITE_SEGMENTS_GAP_THRESHOLD:20,JSON_TYPES:{FULL:"fullJson",DISPLAYED:"siteData"},COMP_ALIGNMENT_OPTIONS:{LEFT:"left",RIGHT:"right",CENTER:"center",TOP:"top",BOTTOM:"bottom",MIDDLE:"middle"},COMP_DISTRIBUTION_OPTIONS:{BOTH:"verticalAndHorizontal",VERTICAL:"vertical",HORIZONTAL:"horizontal"},COMP_MATCH_SIZE_OPTIONS:{WIDTH:"width",HEIGHT:"height",BOTH:"heightAndWidth"},URLS:{MAX_LENGTH:40},SNAPSHOT_TAGS:{MOBILE_MERGE:"mobileMerge"},STYLES:{THEME_DATA_ID:"THEME_DATA",COMPONENT_STYLE:"ComponentStyle",TOP_LEVEL_STYLE:"TopLevelStyle",FLAT_THEME:"WFlatTheme",TYPES:{SYSTEM:"system",CUSTOM:"custom"},STYLES_PER_PAGE_VER:r.constants.STYLES_PER_PAGE_VER},MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS:{minWidth:240,maxWidth:320,minHeight:120,maxHeight:480},MEDIA_PLAYER_LAYOUT_LIMITS:{minWidth:240,maxWidth:1920,minHeight:240,maxHeight:1920},INTERACTIONS:r.loggingUtils.fedopsLogger.INTERACTIONS}},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),r=n(275),i=n(66),a=n(65),s=n(277),u=n(6),c=n(12),l=n(20),p=n(16),d=t.constants,g=d.DATA_TYPES,f=d.COMP_DATA_QUERY_KEYS_WITH_STYLE,m=l.services,v=m.dataValidators,y=m.schemasService,E={Repeater:"Repeater",VerticalAnchorsMenu:"VerticalAnchorsMenu",Anchor:"Anchor"},I={MediaContainerDesignData:!0},S={StripColumnsContainerProperties:!0,ColumnProperties:!0},h={"wysiwyg.viewer.components.StripColumnsContainer":function(t,n,r){return e.isUndefined(r.fullWidth)?c.NO:c.YES},"wysiwyg.viewer.components.VectorImage":c.DONT_CARE},P=t.constants.BASE_PROPS_SCHEMA_TYPE;function A(e,t){return l.services.createDataItemByType(t)}function T(e){return C("ObsoleteBehaviorsList",{items:e})}function O(e){return C("MobileHints",e)}function C(t,n){var r=null;return t&&(r={type:t},v.resolveDefaultItem(t,r)),r?e.assign(r,n):r}function _(e,t,n){return e&&t&&n?r.addSerializedDataItemToPage(e,n,t):null}function D(e,t,n){if(!e||!t)return null;var r=e.pointers.getInnerPointer(t,n),o=(e.dal.isExist(t)?e.dal:e.dal.full).get(r);return o?o.replace("#",""):null}function w(e,t,n,r){var o=e.pointers.getInnerPointer(t,r);e.dal.full.set(o,n)}function b(e,t,n,r){return w(e,t,n,f[r])}function M(e,t,n,r){var o=c.replaceRuntimeRefWithOriginal(e,t),i=D(e,o,n);return i?r(i,(e.pointers.full.components.getPageOfComponent(o)||e.pointers.components.getPageOfComponent(o)).id):null}function R(e,t){return M(e,t,"dataQuery",e.pointers.data.getDataItem)}function N(e,t){return M(e,t,"designQuery",e.pointers.data.getDesignItem)}function x(e,t){return M(e,t,"propertyQuery",e.pointers.data.getPropertyItem)}function L(e,t){return M(e,t,"behaviorQuery",e.pointers.data.getBehaviorsItem)}function B(e,t){return M(e,t,"connectionQuery",e.pointers.data.getConnectionsItem)}function k(e,t){return M(e,t,"mobileHintsQuery",e.pointers.data.getMobileHintsItem)}function F(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=R(e,t);return q(e,g.data,o,n,r)}function U(e,t,n){var r=N(e,t);return q(e,g.design,r,n)}function H(e,t){var n=x(e,t);return q(e,g.prop,n)}function V(e,t,n){var r=D(e,t,f[n]),o=e.pointers.full.components.getPageOfComponent(t).id,i=e.pointers.data.getItem(n,r,o);return q(e,n,i)}function W(e){if(!e||"RefArray"!==e.type)return e;var t=e.values.reduce(function(e,t){var n="BreakpointRelation"===t.type?t.ref:t,r=null;switch(n.type){case"FlexContainerLayout":case"GridContainerLayout":case"StackContainerLayout":case"OrganizerContainerLayout":r=e.containerLayouts;break;case"FlexItemLayout":case"GridItemLayout":case"StackItemLayout":case"FixedItemLayout":case"OrganizerItemLayout":r=e.itemLayouts;break;case"ComponentLayout":r=e.componentLayouts}return r.push(o({},n,{breakpoint:t.breakpoint})),e},{componentLayouts:[],containerLayouts:[],itemLayouts:[]});return{type:"LayoutData",componentLayouts:t.componentLayouts,containerLayouts:t.containerLayouts,itemLayouts:t.itemLayouts,metaData:e.metaData}}function G(e){return e.reduce(function(e,t){switch(t.type){case"FlexContainerLayout":case"GridContainerLayout":case"StackContainerLayout":case"OrganizerContainerLayout":e.containerLayout=t;break;case"FlexItemLayout":case"GridItemLayout":case"StackItemLayout":case"OrganizerItemLayout":case"FixedItemLayout":e.itemLayout=t;break;case"ComponentLayout":e.componentLayout=t}return e},{})}var z=function(e){return"BreakpointRelation"!==e.type},j=function(e){return e.values},Y=e.flow(j,function(e){return e.filter(z)},G);function K(e){if(!e||"RefArray"!==e.type)return e;var t=e.values.map(function(e){return o({},"BreakpointRelation"===e.type?e.ref:e,{breakpoint:e.breakpoint})});return{type:"StylesInBreakpoint",skin:t.length>0?t[0].skin:void 0,id:e.id,stylesInBreakpoints:t,metaData:e.metaData}}function q(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&n){var a=e.dal.full.get(n);if(a&&y.getSchema(t,a.type)){var s=r.serializeDataItem(e,t,n,o,i);return u.executeHook(u.HOOKS.DATA.AFTER_GET,a.type,[e,s]),s}}return null}var Q=function(e,t){var n=c.getComponentType(e,t);return(y.getDefinition(n).dataTypes||[]).find(function(e){return""!==e})};function X(t,n){var r=["trigger","type","part","name"];return e.isEqual(e.pick(t,r),e.pick(n,r))}function Z(t,n,r){var o=e.map(n,function(t){return{isEqualFunc:e.partial(X,t),behavior:t}}),i=t;return e.forEach(o,function(t){i=e.reject(i,t.isEqualFunc),r||(i=i.concat(t.behavior))}),i}function J(t,n,o,a){if(!t||!n)throw new Error("invalid args");var s=c.replaceRuntimeRefWithOriginal(t,n);!o.background||o.background.colorOverlay||o.background.imageOverlay||(o.dataChangeBehaviors=e.reject(o.dataChangeBehaviors,{part:"overlay"}));var l=c.getComponentType(t,s);u.executeHook(u.HOOKS.DESIGN.UPDATE_BEFORE,l,[t,s,o]),a||(o.charas=i.generateNewDesignId());var d=D(t,s,"designQuery"),g=t.pointers.full.components.getPageOfComponent(s).id,f=Boolean(d);return d=r.addSerializedDesignItemToPage(t,g,o,d,s),f||function(e,t,n){w(e,t,"#".concat(n),"designQuery")}(t,s,d),p.linkMobileComponentToDesktopDesignItem(t,n,d),u.executeHook(u.HOOKS.DESIGN.UPDATE_AFTER,l,[t,s,o]),d}function $(e,t,n){var o=D(e,t,"mobileHintsQuery"),i=!!o,a=e.pointers.full.components.getPageOfComponent(t).id,s=O(n);return o=r.addSerializedMobileHintsItemToPage(e,a,s,o,t),i||function(e,t,n){w(e,t,n,"mobileHintsQuery")}(e,t,o),o}function ee(e,n){var r=B(e,n);if(!r)return null;var o=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id)?e.pointers.components.getPageOfComponent(n):e.pointers.full.components.getPageOfComponent(n);return te(e,r,o)}function te(t,n,r){var o=e.get(q(t,g.connections,n),"items");return o=function(t,n,r){return e.map(r,function(r){if("WixCodeConnectionItem"===r.type)return r;var o=function(e,t,n){var r=ne(e,n,t);if(r)return r;if(e.pointers.components.isMasterPage(n))return null;return function(e,t){var n=e.siteDataAPI.siteData.getViewMode(),r=e.pointers.components.getMasterPage(n);return ne(e,r,t)}(e,t)}(t,r.controllerId,n),i=e.assign({},e.omit(r,"controllerId"),{controllerRef:o});return e.has(i,"config")?(i.config=JSON.parse(i.config),i):i})}(t,r,o),e.isEmpty(o)?null:o}function ne(t,n,r){var o=t.siteAPI.isMobileView();return t.pointers.components.findComponentInPage(n,o,function(t){return e.get(t,"dataQuery","").replace("#","")===r})}function re(t,n,o,i){if(!t||!n)throw new Error("invalid args");var a=c.replaceRuntimeRefWithOriginal(t,n),s=D(t,a,"propertyQuery"),l=t.pointers.full.components.getPageOfComponent(a).id,p=c.getComponentType(t,a);u.executeHook(u.HOOKS.PROPERTIES.UPDATE_BEFORE,p,[t,a,o]),o.type=o.type||function(t){var n=y.getDefinition(t);return n.propertyType||e.find(n.propertyTypes)||P}(p),e.set(o,["metaData","autoGenerated"],!1);var d=Boolean(s);return s=r.addSerializedPropertyItemToPage(t,l,o,i||s,a),d||function(e,t,n){var r=e.pointers.getInnerPointer(t,"propertyQuery");e.dal.set(r,n)}(t,a,s),u.executeHook(u.HOOKS.PROPERTIES.UPDATE_AFTER,p,[t,a,o]),s}var oe,ie=(oe="anchorQuery",function(e,t){if(!e||!t)throw new Error("invalid args");var n=e.pointers.getInnerPointer(t,oe);e.dal.full.remove(n)});var ae={extractValues:function(e){return e&&e.values},create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"RefArray",values:e.map(t,function(t){return e.isString(t)?"#".concat(t.replace("#","")):t})}},update:function(t,n){return o({},t,{values:e.map(n,function(t){return e.isString(t)?"#".concat(t.replace("#","")):t})})}},se={extractBreakpoint:function(e){return e&&e.breakpoint&&c.stripHashIfExists(e.breakpoint)},extractRef:function(e){return e&&e.ref},create:function(e,t){return{type:"BreakpointRelation",breakpoint:"#".concat(e),ref:t}}};return{shouldUpdateDataWithSingleComp:function(e,t){var n=F(e,t);return!n||!E[n.type]},shouldUpdatePropertiesWithSingleComp:function(e,t){var n=H(e,t);return!n||!S[n.type]},shouldUpdateDesignWithSingleComp:function(e,t){var n=U(e,t);return!n||!I[n.type]},shouldUpdateAnchorsAfterPropertiesUpdate:function(t,n,r){if(!t.dal.isExist(n))return c.YES;var o=c.getComponentType(t,n),i=h[o];return i?e.isFunction(i)?i.apply(this,r):i:c.NO},shouldUpdateAnchorsAfterRemove:function(e,n){return t.displayedOnlyStructureUtil.isRefPointer(n)?c.NO:c.YES},getPlatformAppConnections:function(t,n){return e.reject(function(e,t){return ee(e,t)||[]}(t,n),{type:"WixCodeConnectionItem"})},addLink:function(t,n,r,o){var i=A(t,n);return i?(r&&(e.assign(i,r),v.validateDataBySchema(i,"data")),_(t,i,o||"masterPage")):null},createDataItemByType:A,createStyleItemByType:function(e){return l.services.createStyleItemByType(e)},createDesignItemByType:function(e,t){var n=null;return y.getSchema(g.design,t)&&(n=C(t)),n},createBehaviorsItem:T,createMobileHintsItem:O,addDataItem:_,getDataItem:F,updateDesignItem:J,getRuntimeDataItem:function(e,t){return e.siteAPI.getRuntimeDal().getCompData(t.id)},updateDesignItemBehaviors:function(e,t,n){if(!e||!t)throw new Error("invalid args");var r=U(e,t);return r.dataChangeBehaviors=Z(r.dataChangeBehaviors,n,!1),J(e,t,r)},removeDesignItemBehaviors:function(e,t,n){if(!e||!t)throw new Error("invalid args");var r=U(e,t);return r.dataChangeBehaviors=Z(r.dataChangeBehaviors,n,!0),J(e,t,r)},getDesignItem:U,getRuntimeDesignItem:function(e,t){return e.siteAPI.getRuntimeDal().getCompDesign(t.id)},getDesignItemByModes:function(t,n,r){if(n){var o=function(t,n,r){if(n){var o=t.dal.full.get(t.pointers.componentStructure.getModesOverrides(n)),i=e.find(o,function(t){return r&&t.modeIds.length===r.length&&e.intersection(t.modeIds,r).length===t.modeIds.length}),a=e.get(i,"designQuery");if(!a){var s=t.pointers.getInnerPointer(n,"designQuery");a=t.dal.full.get(s)}if(a){var u=t.pointers.full.components.getPageOfComponent(n);return t.pointers.data.getDesignItem(a.replace("#",""),u.id)}}return null}(t,n,r);return q(t,g.design,o)}return null},getMediaRef:function(t){return e.get(t,"background.mediaRef")},getDataItemById:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&t){var i=e.pointers.data.getDataItem(t,n||"masterPage");return q(e,g.data,i,r,o)}return null},getDesignItemById:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&t){var o=e.pointers.data.getDesignItem(t,n||"masterPage");return q(e,g.design,o,r)}return null},getPropertiesItemById:function(e,t,n){if(e&&t){var r=e.pointers.data.getPropertyItem(c.stripHashIfExists(t),n||"masterPage");return q(e,g.prop,r)}return null},getMobileHintsItemById:function(e,t,n){if(!e||!t)return null;var r=e.pointers.data.getMobileHintsItem(t,n||"masterPage");return q(e,g.mobileHints,r)},getDataItemPointer:R,getPropertyItemPointer:x,getDesignItemPointer:N,getBehaviorsItemPointer:L,getConnectionsItemPointer:B,getMobileHintsItemPointer:k,getStyleItemPointer:function(e,t){return M(e,t,"styleId",e.pointers.data.getThemeItem)},getFirstValidDataType:Q,updateDataItem:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("invalid args");var i=c.replaceRuntimeRefWithOriginal(e,t),a=c.getComponentType(e,i);u.executeHook(u.HOOKS.DATA.UPDATE_BEFORE,a,[e,i,n]);var s=e.pointers.full.components.getPageOfComponent(i).id,l=D(e,i,"dataQuery"),p=Boolean(l);return p||n.type||(n.type=Q(e,t)),l=r.addSerializedDataItemToPage(e,s,n,l,o),p||function(e,t,n){w(e,t,"#".concat(n),"dataQuery")}(e,i,l),u.executeHook(u.HOOKS.DATA.UPDATE_AFTER,a,[e,i,n]),l},removeComponentDataItem:function(t,n){if(!t||!n)throw new Error("invalid args");var r=y.getDefinition(c.getComponentType(t,n));if(r.dataTypes&&!e.includes(r.dataTypes,""))throw new Error("component's data can't be deleted");var o=t.pointers.getInnerPointer(n,"dataQuery");t.dal.full.remove(o)},removeComponentDesignItem:function(e,t){if(!e||!t)throw new Error("invalid args");var n=e.pointers.getInnerPointer(t,"designQuery");e.dal.remove(n)},removeComponentPropertyItem:function(e,t){if(!e||!t)throw new Error("invalid args");var n=y.getDefinition(c.getComponentType(e,t));if(n.propertyType&&""!==n.propertyType)throw new Error("component's property can't be deleted");var r=e.pointers.getInnerPointer(t,"propertyQuery");e.dal.remove(r)},removeComponentMobileHintsItem:function(e,t){if(!e||!t)throw new Error("invalid args");var n=e.pointers.getInnerPointer(t,"mobileHintsQuery");e.dal.full.remove(n)},setDataItemByPointer:function(t,n,r,o){e.set(r,"metaData.isPreset",!1),v.validateDataBySchema(r,o),r.id||(r.id=n.id),t.dal.full.set(n,r),u.executeHook(u.HOOKS.DATA.SET_BY_POINTER_AFTER,"setDataItem",[t,n,r])},deleteDataItem:s.deleteDataItem,deleteDesignItem:s.deleteDesignItem,deleteMobileHintsItem:s.removeMobileHintsItem,removeDesignItemRecursively:s.removeDesignItemRecursively,removeDataItemRecursively:s.removeDataItemRecursively,removeItemRecursivelyByType:s.removeItemRecursivelyByType,getDataSchemaByType:function(e,t){if(t){var n=y.getSchema(g.data,t);return n&&n.properties}return null},createPropertiesItemByType:function(e,t){return l.services.createPropertiesItemByType(t)},getPropertiesItem:H,getRuntimePropertiesItem:function(e,t){return e.siteAPI.getRuntimeDal().getCompProps(t.id)},getPropertiesItemFields:function(t){return t?e.keys(t):[]},updatePropertiesItem:function(e,t,n){re(e,t,n)},setPropertiesItem:re,deletePropertiesItem:s.deletePropertiesItem,getPropertiesSchemaByType:function(t,n){if(n){var r=y.getSchema(g.prop,n);return e.get(r,["allOf",0],r)}return null},updateBehaviorsItem:function(e,t,n){var o=D(e,t,"behaviorQuery"),i=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(o),s=T(n);o=r.addSerializedBehaviorsItemToPage(e,i,s,o),a||function(e,t,n){w(e,t,n,"behaviorQuery")}(e,t,o);var l=c.getComponentType(e,t);return u.executeHook(u.HOOKS.BEHAVIORS.UPDATE_AFTER,l,[e]),o},getBehaviorsItem:function(t,n){var r=L(t,n);return e.get(q(t,g.behaviors,r),"items")},removeBehaviorsItem:s.removeBehaviorsItem,updateConnectionsItem:function(t,n,o){var i=D(t,n,"connectionQuery"),a=t.pointers.full.components.getPageOfComponent(n).id,s=Boolean(i),c=C("ConnectionList",{items:function(t,n){return e.map(n,function(n){if("WixCodeConnectionItem"===n.type)return n;var r=D(t,n.controllerRef,"dataQuery"),o=e.assign({},e.omit(n,"controllerRef"),{controllerId:r});if(!e.has(o,"config"))return o;try{o.config=JSON.stringify(o.config)}catch(e){throw new Error("Invalid connection configuration - should be JSON stringifiable")}return o})}(t,o)});return i=r.addSerializedConnectionsItemToPage(t,a,c,i),s||function(e,t,n){w(e,t,n,"connectionQuery")}(t,n,i),u.executeHook(u.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,"updateConnectionsItem",[t,c,n]),i},getConnectionsItem:ee,getConnectionsItemByPointer:te,removeConnectionsItem:s.removeConnectionsItem,updateMobileHintsItem:$,updateMobileHintsHidden:function(t,n,r){return $(t,n,e.pick(r,["id","type","hidden"]))},getMobileHintsItem:function(e,t){var n=k(e,t);return q(e,g.mobileHints,n)},generateNewDataItemId:i.generateNewDataItemId,generateNewPropertiesItemId:i.generateNewPropertiesItemId,generateNewDesignItemId:i.generateNewDesignId,addDeserializedStyleItemToPage:r.addDeserializedStyleItemToPage,addSerializedStyleItemToPage:r.addSerializedStyleItemToPage,addSerializedDataItemToPage:r.addSerializedDataItemToPage,addSerializedDesignItemToPage:r.addSerializedDesignItemToPage,addSerializedBehaviorsItemToPage:r.addSerializedBehaviorsItemToPage,addSerializedLayoutItemToPage:r.addSerializedLayoutItemToPage,addSerializedAnchorDataItemToPage:r.addSerializedAnchorDataItemToPage,addSerializedBreakpointItemToPage:r.addSerializedBreakpointItemToPage,addSerializedConnectionsItemToPage:r.addSerializedConnectionsItemToPage,addSerializedPropertyItemToPage:r.addSerializedPropertyItemToPage,addSerializedMobileHintsItemToPage:r.addSerializedMobileHintsItemToPage,serializeDataItem:r.serializeDataItem,executeForDataItemRefs:a.executeForDataItemRefs,isOfType:a.isOfType,isPropertiesItemValid:function(e,t,n,r){return v.isItemValid(t,n,r,"properties")},isDataItemValid:function(e,t,n,o){var i=r.deserializeDataItem(e,t,"data");return v.isItemValid(i,n,o,"data")},getComponentDataItemId:D,getComponentBreakpointsData:function(e,t){return V(e,t,g.breakpoints)},updateComponentBreakpointsData:function(t,n,o){var a=D(t,n,f[g.breakpoints]),s=t.pointers.full.components.getPageOfComponent(n).id;return o.values=o.values.map(function(t){return t.id?t:e.assign(t,{id:i.generateNewId(g.breakpoints)})}),a=r.addSerializedItemToPage(t,s,o,a,g.breakpoints),b(t,n,"#".concat(a),g.breakpoints),a},convertNewLayoutToOld:W,convertNewResponsiveStyleToOld:K,getComponentStylesData:function(e,t){return K(V(e,t,g.theme))},updateComponentStylesData:function(e,t,n){var o=e.pointers.full.components.getPageOfComponent(t).id,a=r.addSerializedStyleItemToPage(e,n,i.generateNewId(g.theme),o);return b(e,t,a,g.theme),a},getDataByPointer:q,getLayoutItem:function(e,t){return V(e,t,g.layout)},getComponentLayoutData:function(e,t){return W(V(e,t,g.layout))},updateComponentLayoutData:function(e,t,n){var o=D(e,t,f[g.layout]),i=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(o);return o=r.addSerializedLayoutItemToPage(e,i,n,o),a||b(e,t,"#".concat(o),g.layout),o},refArray:ae,breakpointRelation:se,getDefaultLayoutObject:Y,getLayoutInBreakpointObject:function(t){return function(n){return e.flow(j,function(e){return function(t){return t.filter(function(e){return function(t){return"BreakpointRelation"===t.type&&t.breakpoint.replace("#","")===e}}(e)).map(function(e){return e.ref})}}(t),G)(n)}},getComponentAnchorData:function(e,t){return V(e,t,g.anchors)},updateComponentAnchorData:function(e,t,n){var o=D(e,t,f[g.anchors]),i=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(o);return n&&(n.type="AnchorInfo"),o=r.addSerializedAnchorDataItemToPage(e,i,n,o),a||b(e,t,o,g.anchors),o},removeComponentAnchorData:ie}}()},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),i=n(124),a=n(19),s=n(12),u=n(3),c=n(75),l=n(6),p=n(74),d=n(9),g=n(121),f=n(446),m=n(10),v=n(17),y=n(31),E=n(56),I=n(33),S=n(54),h=n(26),P=n(11),A=n(15),T=n(89),O=n(90),C=n(52),_=n(22),D=n(40),w=n(5),b=n(2),M=n(16),R=n(118),N=["custom","data","props","style","design","connections","activeModes","behaviors","mobileHints","layoutResponsive","layouts","scopedLayouts","breakpoints","scopedStyles"],x="mobile_",L=["wysiwyg.viewer.components.SiteSegmentContainer","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.PageGroup","wysiwyg.viewer.components.ScreenWidthContainer","wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.Column","wysiwyg.viewer.components.SiteRegionContainer","core.components.Container","core.components.ContainerOBC","wysiwyg.viewer.components.PopupContainer","mobile.core.components.Container","wysiwyg.viewer.components.Group","wysiwyg.viewer.components.FormContainer","wixapps.integration.components.common.formcontainer.viewer.FormContainer","wixapps.integration.components.Area","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainerSlideShowSlide","platform.components.AppWidget","responsive.components.Section","responsive.components.HeaderSection","responsive.components.FooterSection","responsive.components.MembersAreaSection"],B=["mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage"],k=["wysiwyg.viewer.components.Repeater"],F=["wysiwyg.viewer.components.RefComponent"],U=s.stripHashIfExists;function H(e,n,r){var o=r||me(),i=e.pointers.components.getViewMode(n),a=t.displayedOnlyStructureUtil;if(a.isRepeatedComponent(n.id)){var s=a.getRepeaterItemId(n.id);return e.pointers.components.getUnattached(a.getUniqueDisplayedId(o,s),i)}return e.pointers.components.getUnattached(o,i)}function V(e,t,n,r){return H(e,t,r)}function W(t,n,r,o,i,s){var u=e.get(o,"componentType"),c=e.get(t.dal.get(r),"componentType");a.utils.fedopsLogger.breadcrumb("Adding comp ".concat(u,', id: "').concat(n.id,'" , to container: ').concat(c,', id: "').concat(r.id,'"')),G(t,n,r,o,i,s),Z(t,n)}function G(t,n,r,o,i,a){var s=h.getContainerToAddComponentTo(t,r),u=g.validateComponentToAdd(t,n,o,s,a);if(!u.success)throw new Error(u.error);l.executeHook(l.HOOKS.ADD_ROOT.BEFORE,o.componentType,[t,n,r,o,i,a]),Y(t,n,r,o,i,!1,{}),e.isEqual(s,r)?e.isFinite(a)&&T.moveToIndex(t,n,a):(P.adjustCompLayoutToNewContainer(t,n,s),P.addCompToContainer(t,n,s,a)),l.executeHook(l.HOOKS.ADD_ROOT.AFTER,o.componentType,[t,n])}function z(e,t,n,r){return t?u.addSerializedLayoutItemToPage(e,n,t,r):null}function j(t){return e.omit(t,N)}function Y(n,r,i,a,s,c,p,d){var f=g.validateComponentToSet(n,r,a,s,i,c);if(!f.success)throw new Error(f.error);a.layout&&delete a.layout.anchors,l.executeHook(l.HOOKS.ADD.BEFORE,a.componentType,arguments);var m,v,E,I,S=t.objectUtils.cloneDeep(a);p&&a.id&&(p[a.id]=r.id),S.id=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id),S.type||function(t){e.includes(k,t.componentType)?t.type="RepeaterContainer":e.includes(L,t.componentType)?t.type="Container":e.includes(B,t.componentType)?t.type="Page":e.includes(F,t.componentType)?t.type="RefComponent":t.type="Component"}(S),function(t){t.layout=t.layout||{};var n,r={},o=g.ALLOWED_LAYOUT_PARAMS;e.forEach(o,function(e){var n=t.layout[e];if(n){var o=g.validateLayoutParam(e,n);if(!o.success)throw new Error(o.error);r[e]=n}}),delete r.anchors,t.layout=e.assign({x:0,y:0,fixedPosition:!1,width:160,height:90,scale:1,rotationInDegrees:0},r),t.layout.docked&&(((n=t.layout).docked.right||n.docked.left||n.docked.hCenter)&&(n.docked.right&&n.docked.left&&delete n.width,delete n.x),(n.docked.top||n.docked.bottom||n.docked.vCenter)&&(n.docked.top&&n.docked.bottom&&delete n.height,delete n.y))}(S),m=S,v=e.get(m,["connections","items"],[]),e.forEach(v,function(e){var t=g.validateComponentConnection(e);if(!t.success)throw new Error(t.error)}),(d=d||{ancestorsModes:K(n,i,{}),oldModeIdsToNew:{}}).ancestorsModes=e.merge(d.ancestorsModes,(E=S,I={},e.forEach(e.get(E,"modes.definitions"),function(e){I[e.modeId]=!0}),I)),function(t,n){e.defaults(n,function(t){var n=e.get(t,"modes.definitions");if(n){var r=t.id;return e.reduce(n,function(e,t){return e[t.modeId]=y.createUniqueModeId(r),e},{})}return{}}(t)),function(t,n){t.modes&&t.modes.definitions&&(t.modes.definitions=e.map(t.modes.definitions,function(t){return e.defaults({modeId:n[t.modeId]},t)}))}(t,n),function(t,n){e.get(t,"modes.overrides")&&(t.modes.overrides=e.map(t.modes.overrides,function(t){var r=e.map(t.modeIds,function(e){return n[e]||e});return e.defaults({modeIds:r},t)}))}(t,n),function(t,n){e.get(t,"props.mobileDisplayedModeId")&&(t.props.mobileDisplayedModeId=n[t.props.mobileDisplayedModeId])}(t,n)}(S=function(n,r,o,i){var a=i.ancestorsModes;if(e.isEmpty(a))return function(n,r,o){var i=o.activeModes,a=t.fullToDisplayedJson.applyModesOnSerializedStructure(o,i);e.isEmpty(i)||(s=a,u=o.layout,s.layout.x=e.get(u,"x")||e.get(s,"layout.x"),s.layout.y=e.get(u,"y")||e.get(s,"layout.y"));var s,u;return a}(0,0,r);return function(t,n){if(t&&n){var r=e.get(t,"modes.overrides");r&&(r=e.filter(r,function(t){return e.every(t.modeIds,function(e){return n[e]})}),t.modes.overrides=r)}return t}(r,a)}(0,S,0,d),d.oldModeIdsToNew);var h=c?r.id:n.pointers.full.components.getPageOfComponent(i).id;!function(t,n,r,i,a,s,c){$(t,r,i,a,s,n),re(t,r,i,s,n),ee(t,r,i,s,n),function(t,n,r,o,i,a){if(!a.behaviors)return;e.isString(a.behaviors)&&(a.behaviors=u.createBehaviorsItem(a.behaviors));a.behaviors=function(t,n,r){if(t&&t.items){var o=t.items;e.isString(o)&&(o=JSON.parse(o));var i=e.map(o,function(t){return function(t,n){var r=e.get(t,"params.modeIds");r&&e.set(t,"params.modeIds",e.map(r,function(e){return n.oldModeIdsToNew[e]||e}))}(t,n),function(t,n){if("comp"===e.get(t,"action.type")){var r=e.get(t,"action.sourceId");e.set(t,"action.sourceId",e.get(n,r,r))}if("runCode"===e.get(t,"behavior.name")&&e.has(t,"behavior.params.compId")){var o=e.get(t,"behavior.params.compId"),i=e.get(t,"behavior.targetId");e.set(t,"behavior.params.compId",e.get(n,o,o)),e.set(t,"behavior.targetId",e.get(n,i,i))}}(t,r),t}),a=e.omit(t,"items");return a.items=JSON.stringify(i),a}return t}(a.behaviors,i,o),r=oe(o,a.behaviors,r);var s=function(e,t,n,r){return t?u.addSerializedBehaviorsItemToPage(e,n,t,r):null}(t,a.behaviors,n,r);s&&(a.behaviorQuery=s,ie(a.behaviors,s,o))}(t,r,i,s,c,n),function(e,t,n,r,o){n=oe(r,o.mobileHints,n);var i=function(e,t,n,r){return t?u.addSerializedMobileHintsItemToPage(e,n,t,r):null}(e,o.mobileHints,t,n);if(!i)return;o.mobileHintsQuery=i,ie(o.mobileHints,i,r)}(t,r,i,s,n),function(e,t,n,r,i){if(!w.isOpen("sv_newLayoutAPI"))return function(e,t,n,r,o){n=oe(r,o.layoutResponsive,n);var i=z(e,o.layoutResponsive,t,n);i&&(o.layoutQuery="#".concat(i),ie(o.layoutResponsive,i,r))}(e,t,n,r,i);var a=i.layouts,s=i.scopedLayouts;if(a||s){var u=a||s;n=oe(r,u,n);var c=function(e,t){return{type:"RefArray",values:[].concat(o(te(e)),o(ne(t)))}}(a,s),l=z(e,c,t,n);l&&(i.layoutQuery="#".concat(l),ie(u,l,r))}}(t,r,i,s,n),function(e,t,n,r,o){n=oe(r,o.breakpoints,n);var i=function(e,t,n,r){return t?u.addSerializedBreakpointItemToPage(e,n,t,r):null}(e,o.breakpoints,t,n);i&&(o.breakpointsQuery="#".concat(i),ie(o.breakpointsQuery,i,r))}(t,r,i,s,n),function(e,t,n,r,o){n=oe(r,o.anchor,n);var i=function(e,t,n,r){return t?u.addSerializedAnchorDataItemToPage(e,n,t,r):null}(e,o.anchor,t,n);i&&(o.anchorQuery="#".concat(i),ie(o.anchor,i,r))}(t,r,i,s,n),function(e,t,n){X(e,t,n.componentType,n)}(t,r,n),function(t,n,r,o,i){var a=e.get(n,"modes.overrides");e.isEmpty(a)||(e.forEach(a,function(e){X(t,r,n.componentType,e),ee(t,r,o,i,e),re(t,r,o,i,e)}),a=e.map(a,j),e.set(n,"modes.overrides",a))}(t,n,r,i,s),function(e,t,n,r,o){r=oe(o,e.connections,r);var i=function(e,t,n,r){return t?u.addSerializedConnectionsItemToPage(e,n,t,r):null}(t,e.connections,n,r);i&&(e.connectionQuery=i,ie(e.connections,i,o))}(n,t,r,i,s)}(n,S,h,s,c,p,d);var P=a.components;P&&(S.components=[]),M.resetMobileComponentsForClonedComp(n,a,S);var A=j(S);if(c)n.dal.full.set(r,A);else{var O=n.pointers.full.components.getChildrenContainer(i),C=T.getNewIndexForNewComp(n,A,i);n.dal.full.push(O,A,r,C),function(o,i){var s=n.pointers.components.getAllDisplayedOnlyComponents(r);!e.isEmpty(s)&&t.displayedOnlyStructureUtil.isRepeatedComponent(r.id)&&(i.dataQuery||i.designQuery)&&e.forEach(s,function(r){var s=t.displayedOnlyStructureUtil.getRepeaterItemId(r.id);if(i.dataQuery){var u=t.displayedOnlyStructureUtil.getUniqueDisplayedId(i.dataQuery.replace("#",""),s);n.dal.full.isExist(n.pointers.data.getDataItem(u,o))||$(n,o,u,c,p,e.clone(a))}if(i.designQuery){var l=t.displayedOnlyStructureUtil.getUniqueDisplayedId(i.designQuery.replace("#",""),s);n.dal.full.isExist(n.pointers.data.getDesignItem(l,o))||ee(n,o,l,p,e.clone(a))}})}(h,A)}J(n,P,r,p,d,S.activeModes),M.setMobileComponentChildrenDefinition(n,a,h,p,d,S.activeModes,J);var _=[n,r,S,s,p,i];return l.executeHook(l.HOOKS.ADD.AFTER,S.componentType,_),r}function K(t,n,r){for(var o=[];n;){var i=q(t,n,r);o=o.concat(i),n=t.pointers.full.components.getParent(n)}return e(o).groupBy(e.identity).mapValues(Boolean).value()}function q(t,n,r){var o=[],i=y.getComponentModes(t,n);return e.forEach(i,function(e){var t=r[e.modeId];t?o.push(t):o.push(e.modeId)}),o}function Q(n,r,o,i){if(e.isObject(i)){var a=r;if("StylesInBreakpoint"!==i.type){var s=n.runtimeConfig.stylesPerPage&&"system"!==i.styleType;a=s?r:"masterPage",e.set(i,"type",s?b.STYLES.COMPONENT_STYLE:b.STYLES.TOP_LEVEL_STYLE)}return u.addSerializedStyleItemToPage(n,i,void 0,a)}var c=i;if(!D(c)){if(w.isOpen("reportBiErrorWhenAddingCompWithCustomeStyleId"))"onboarding"===e.get(n.config,["origin"])&&!w.isOpen("reportBiErrorInADIAddingCompWithCustomeStyleId")||_.error(n,C.ADD_COMPONENT_WITH_CUSTOM_STYLE_ID,{compType:o,styleId:c});t.log.warnDeprecation("You tried to create a component with an unknown system style Id. It should be either called with a string for system style, or an object for custom style")}return d.styles.get(n,c)||v.style.createSystemStyle(n,c,o),c}function X(t,n,r,i){i.scopedStyles?i.styleId=function(t,n,r,i){var a=i.style?Q(t,n,r,i.style):null,s=e.map(i.scopedStyles,function(e,o){var i=Q(t,n,r,e);return u.addDeserializedStyleItemToPage(t,n,u.breakpointRelation.create(o,"#".concat(i)))}),c=u.refArray.create(e.compact([a].concat(o(s))));return u.addDeserializedStyleItemToPage(t,n,c)}(t,n,r,i):i.style&&(i.styleId=Q(t,n,r,i.style))}function Z(e,t){p.updateAnchors(e,t)}function J(t,n,r,o,i,a){n&&r&&e.forEach(n,function(e){var n=o&&o[e.id],s=V(t,r,0,n);e.activeModes=a,Y(t,s,r,e,n,!1,o,i),Z(t,s)})}function $(n,r,o,i,a,s){if(i)s.dataQuery="#".concat(r);else{o=oe(a,s.data,o);var c=function(n,r,o,i){var a=null;if(r)if(e.isObject(r))"RepeatedData"===r.type?(a=u.addSerializedDataItemToPage(n,o,r.original,i),e.forEach(r.overrides,function(e,r){var i=t.displayedOnlyStructureUtil.getUniqueDisplayedId(a,r);u.addSerializedDataItemToPage(n,o,e,i)})):a=u.addSerializedDataItemToPage(n,o,r,i);else if(e.isString(r)){var s=u.createDataItemByType(n,r);a=u.addSerializedDataItemToPage(n,o,s,i)}return a}(n,s.data,r,o);c&&(s.dataQuery="#".concat(c),ie(s.data,c,a))}}function ee(n,r,o,i,a){o=oe(i,a.design,o);var s=function(n,r,o,i){var a=null;if(r){if(e.isObject(r))"RepeatedData"===r.type?(a=u.addSerializedDesignItemToPage(n,o,r.original,i),e.forEach(r.overrides,function(e,r){var i=t.displayedOnlyStructureUtil.getUniqueDisplayedId(a,r);u.addSerializedDesignItemToPage(n,o,e,i)})):a=u.addSerializedDesignItemToPage(n,o,r,i);else if(e.isString(r)){var s=u.createDataItemByType(n,r);a=u.addSerializedDesignItemToPage(n,o,s,i)}a&&!e.startsWith(a,"#")&&(a="#".concat(a))}return a}(n,a.design,r,o);s&&(a.designQuery=s,ie(a.design,s,i))}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[e.componentLayout,e.itemLayout,e.containerLayout].filter(Boolean)}function ne(t){return e(t).entries().flatMap(function(e){var t=r(e,2),n=t[0];return function(e,t){return te(e).map(function(e){return{type:"BreakpointRelation",ref:e,breakpoint:"#".concat(t)}})}(t[1],n)}).value()}function re(t,n,r,o,i){r=oe(o,i.props,r);var a=function(t,n,r,o){var i=null;if(n)if(e.isObject(n))i=u.addSerializedPropertyItemToPage(t,r,n,o);else if(e.isString(n)){var a=u.createPropertiesItemByType(t,n);i=u.addSerializedPropertyItemToPage(t,r,a,o)}return i}(t,i.props,n,r);a&&(i.propertyQuery=a,ie(i.props,a,o))}function oe(t,n,r){var o=r;if(!t||!n)return o;var i=U(n.id)||"";if(t[i])o=t[i];else if(e.startsWith(i,x)){var a=t[i.substring(x.length)];a&&(o=x+a)}return o}function ie(e,t,n){if(n){var r=U(e.id)||"";t=U(t),e.id&&n&&!n[r]&&(n[r]=t)}}function ae(t,n,r){if(r=r||e.noop,y.shouldDeleteComponentFromFullJson(t,n)){if(t.pointers.components.isMobile(n))throw new Error(g.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);!function(t,n,r){r=r||e.noop,ue(t,n)?(!function(t,n){var r=se(t,n);e.forEach(r,function(e){E.isDeleteHandlerExists(e.id)&&E.executeDeleteHandler(e.id)})}(t,n),e.delay(function(){E.unRegisterHandlers(t,n.id),r()},500)):r()}(t,n,r)}else r()}function se(e,t){var n=h.getTpaChildren(e,t);return I.isTpaByCompType(h.getType(e,t))&&n.push(t),n}function ue(t,n){if(!h.isExist(t,n))return!1;var r=se(t,n);return e.some(r,function(e){return E.isDeleteHandlerExists(e.id)})}function ce(n,r){var o=[r];if(t.displayedOnlyStructureUtil.isRepeatedComponent(r.id)){var i=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id),a=n.pointers.components.getPageOfComponent(r),s=n.pointers.full.components.getComponent(i,a);n.dal.full.isExist(s)&&!n.dal.isExist(s)&&o.push(s)}var l=!n.pointers.components.isMobile(r);e.forEach(o,function(t){var r=l?t:n.pointers.components.getDesktopPointer(t);l&&(u.deleteDataItem(n,r),u.removeBehaviorsItem(n,r),u.deleteMobileHintsItem(n,r),u.deleteDesignItem(n,r),u.deletePropertiesItem(n,r),u.removeConnectionsItem(n,r),function(t,n){var r=v.style.get(t,n);if(e.get(r,"type")===b.STYLES.COMPONENT_STYLE){var o=(t.pointers.components.getPageOfComponent(n)||t.pointers.full.components.getPageOfComponent(n)).id;d.styles.remove(t,r.id,o)}}(n,r)),M.deleteForkedData(n,r,u,c)})}function le(t,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.noop,s=arguments.length>6?arguments[6]:void 0,c=t.pointers.components.getParent(n),d=h.getType(t,n);l.executeHook(l.HOOKS.REMOVE.BEFORE,d,arguments);var g=t.pointers.full.components.getChildren(n),f=i||y.shouldDeleteComponentFromFullJson(t,n);e.forEachRight(g,function(e){return s(t,e,!0,o,f)});var m=u.getDataItem(t,n),v=O.getPlatformAppConnections(t,n);t.pointers.components.isPage(n)||ce(t,n);var E=[t,n,r,o,i,m,c,v];(t.dal.isExist(n)?t.dal:t.dal.full).remove(n),l.executeHook(l.HOOKS.REMOVE.AFTER,d,E),p&&c&&!r&&t.dal.get(c)&&p.updateAnchors(t,c),a(t)}var pe=function(n,r){var o=n.pointers.full.components.getAllDisplayedOnlyComponents(r);if(t.displayedOnlyStructureUtil.isRepeatedComponent(r.id)){var i=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id),a=n.pointers.components.getPageOfComponent(r),s=n.pointers.full.components.getComponent(i,a);n.dal.isExist(s)&&o.push(s)}else n.dal.isExist(r)&&o.push(r);return e.uniqBy(o,"id")};function de(t,n,r,o,i,a){if(m.shouldRemoveAsGhost(t,n))return ve(t,n,a);var s=pe(t,n);a=a||e.noop;var u=e.after(s.length,a);e.forEach(s,function(e){!function(e,t,n,r,o,i){if(m.shouldBeRemovedByParent(e,t)&&(t=e.pointers.components.getParent(t)),o||y.shouldDeleteComponentFromFullJson(e,t)){var a=g.validateComponentToDelete(e,t,o);if(!a.success)throw new Error(a.error);le(e,t,n,r,o,i,de)}else!function(e,t,n){e.dal.remove(t),n&&n(e)}(e,t,i)}(t,e,r,o,i,u)})}function ge(t,n,r,o,i,a){var s=t.pointers.full.components.getAllDisplayedOnlyComponents(n);a=a||e.noop;var u=e.after(s.length,a);e.forEach(s,function(e){!function(e,t,n,r,o,i){var a=g.validateComponentTypeToDelete(e,t);if(!a.success)throw new Error(a.error);if(!(a=g.validateComponentExistOnFull(e,t)).success)throw new Error(a.error);le(e,t,n,r,o,i,ge)}(t,e,r,o,i,u)})}function fe(e,t){return S.getComponentLayout(e,t)}function me(){return t.guidUtils.getUniqueId("comp","-",{bucket:"componentIds"})}var ve=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.noop,o=function(e,n){u.updatePropertiesItem(t,e,n)},i=function(e,n){if(!t.pointers.components.isMobile(e)){var r=t.pointers.components.getMobilePointer(e);o(r,n)}},a={ghost:"COLLAPSED"};o(n,a),i(n,a),r()};return e.merge({initialize:function(){i.setContextProvider(null)},isContainsCompWithType:h.isContainsCompWithType,isRenderedOnSite:h.isRenderedOnSite,getComponentToAddRef:V,getComponentToDuplicateRef:function(e,t,n,r){return H(e,n,r)},add:W,addWithConstraints:function(t,n,r,o,i,a){if(function(t){if(e.isNull(t)||e.isPlainObject(t)&&e.isEmpty(t))return!0;if(!e.isObject(t))throw new Error("Non valid constraints value. Expected null or object");var n=Object.getOwnPropertyNames(t);if(1!==n.length||e.isUndefined(t.under))throw new Error('Constrains should be empty {} or have only property "under"');if(!e.isPlainObject(t.under))throw new Error('Constrains "under" property should have plain object value');if(2!==(n=Object.getOwnPropertyNames(t.under)).length||e.isUndefined(t.under.margin)||e.isUndefined(t.under.comp))throw new Error('Constraints "under" property should has the schema {comp: compRef, margin: number}');if(!e.isNumber(t.under.margin))throw new Error('Constrains "margin" should be a number')}(i),!t.pointers.components.isPage(r))throw new Error("this API works only for page parent for now");if(!P.isSimpleLayout(o.layout))throw new Error("the layout of the added comp should be simple, no fixed, docked, rotated and such");var s=o;if(!e.isEmpty(i)){var u=t.dal.get(t.pointers.getInnerPointer(i.under.comp,"layout"));if(!P.isSimpleLayout(u))throw new Error("you cannot place a component below a fixed, rotated, docked and such comps.");(s=e.clone(o)).layout=e.assign({},s.layout,function(e,t){var n=fe(e,t.under.comp);return{y:n.y+n.height+t.under.margin}}(t,i))}W(t,n,r,s,a)},addAndAdjustLayout:G,duplicate:function(e,t,n,r,o){var i=f.serializeComponent(e,n);l.executeHook(l.HOOKS.DUPLICATE.BEFORE,i.componentType,[e,n,i,r]),W(e,t,r,i,o)},serialize:f.serializeComponent,remove:function(e,t,n,r){if(e.pointers.components.isMobile(t))throw new Error(g.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);de(e,t,!1,r,!1,n)},removeFromFull:function(e,t,n,r){if(e.pointers.components.isMobile(t))throw new Error(g.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);ge(e,t,!1,r,!1,n)},deleteComponent:de,validateRemoval:function(e,t){ae(e,t,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue))},validateRemovalInternal:ae,shouldDelayDeletion:ue,getContainer:h.getContainer,getAncestors:h.getAncestors,getAncestorsFromFull:h.getAncestorsFromFull,getPage:h.getPage,getSiblings:h.getSiblings,getRepeatedComponents:h.getRepeatedComponents,getChildren:h.getChildren,getChildrenFromFull:h.getChildrenFromFull,getAllJsonChildren:h.getAllJsonChildren,getTpaChildren:h.getTpaChildren,getBlogChildren:h.getBlogChildren,getType:h.getType,getDefinition:h.getDefinition,setComponent:Y,isComponentRemovable:function(e,t){if(!m.public.isRemovable(e,t))return!1;var n=h.getType(e,t);return l.executeHook(l.HOOKS.REMOVE.IS_OPERATION_ALLOWED,n,arguments,function(e){return!1===e})},isComponentVisible:function(e,n){var r=e.dal.get(e.pointers.general.getRenderFlags()),o=e.pointers.components.getViewMode(n),i=e.dal.get(e.pointers.general.getIsCompHiddenPointer(n.id,o)),a={compId:n.id,compType:h.getType(e,n),compProperties:h.getPropertiesItem(e,n),compLayout:S.getComponentLayout(e,n),isMobile:A.isMobileView(e),isVisible:m.public.isVisible(e,n),renderFlags:r,isCompHiddenByRenderPlugin:i};return t.componentVisibility.isComponentVisible(a)},isComponentModal:function(e,t){return m.public.isModal(e,t)},isComponentUsingLegacyAppPartSchema:function(e,t){return m.public.isUsingLegacyAppPartSchema(e,t)},isComponentDuplicatable:function(e,t,n){if(!m.public.isDuplicatable(e,t,n))return!1;var r=h.getType(e,t);return l.executeHook(l.HOOKS.DUPLICATE.IS_OPERATION_ALLOWED,r,arguments,function(e){return!1===e})},isPageComponent:h.isPageComponent,generateNewComponentId:me,properties:{update:u.updatePropertiesItem,get:u.getPropertiesItem,mobile:{fork:c.splitMobileComponentProperties,join:c.resetMobileComponentProperties,isForked:c.isMobileComponentPropertiesSplit}},data:{get:u.getDataItem,update:u.updateDataItem},design:{updateDesignItem:function(t,n,r,o){var i=u.getDesignItem(t,n)||{},a=r.background&&!e.isEqual(r.background,i.background),s=u.updateDesignItem(t,n,r,o);return a&&function(t,n){var r=y.getAllCompDesignItems(t,n),o=e.map(r,function(t){return e.pick(u.getMediaRef(t),["uri","videoId","type"])});(!e.every(o,function(t){return e.isEqual(t,e.head(o))})||o.length<=1)&&y.removeDesignBehaviorsFromAllModes(t,n,["media"])}(t,n),s}},layout:{get:fe},isExist:h.isExist,getContainerToAddComponentTo:h.getContainerToAddComponentTo,applyComponentToMode:function(t,n,r){e.forEach(n,function(n){var o=n.compRef;y.removeSingleModeBehaviors(t,o);var i=t.pointers.componentStructure.getModes(o),a=t.dal.full.get(i);e.some(a.overrides,function(t){return e.includes(t.modeIds,r)})?a.overrides=a.overrides.map(function(t){return e.includes(t.modeIds,r)&&(t.isHiddenByModes=!1),t}):a.overrides.push({modeIds:[r],isHiddenByModes:!1}),t.dal.full.set(i,a);var s=e.find(n.compDefinition.modes.overrides,function(t){var r=e(n.compDefinition.activeModes).keys().head();return e.includes(t.modeIds,r)}),c=s&&s.layout?s.layout:n.compDefinition.layout,l=t.pointers.getInnerPointer(o,"layout");t.dal.set(l,c);var p=s&&s.props?s.props:n.compDefinition.props;p&&u.updatePropertiesItem(t,o,p),s&&s.style&&v.style.setId(t,o,s.previousStyleId)})},getA11ySchema:R.getA11ySchema},{modes:y})}()},function(e,t){e.exports=n},function(e,t,n){e.exports=n(276).createHandler()},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(15),o=n(21),i=n(29),a=n(11),s=n(26),u=n(120),c=n(16);function l(e,t,n){var r=t.right-t.left+1,o=t.bottom-t.top+1,i={x:t.left+r/2,y:t.top+o/2},a={A:e,B:i},s=e.y-i.y,u=e.x-i.x;a.hypotenuse=Math.pow(Math.pow(u,2)+Math.pow(s,2),.5),a.ABHorizontalXangle=0===u?s>0?Math.PI/2:-Math.PI/2:Math.atan(s/u);var c=n*Math.PI/180;a.ABComponentXangle=a.ABHorizontalXangle-c;var l=Math.abs(a.hypotenuse*Math.cos(a.ABComponentXangle)),p=Math.abs(a.hypotenuse*Math.sin(a.ABComponentXangle));return l<r/2&&p<o/2}function p(e,t,n,r,o,i,s){var u={x:t,y:a.isShowOnFixedPosition(e,s)?n-o:n,margin:r},c=function(e,t,n){return n(e,t)}(e,s,i),p=c.rotationInDegrees,d=p>0;d||(c=c.bounding);var g,f,m=isNaN(r)?0:r,v=function(e,t,n,r,o){return{left:n-o,top:r-o,right:n+e+o,bottom:r+t+o}}(c.width,c.height,c.x,c.y,m);return d?l(u,v,p):(g=u).x>(f=v).left&&g.x<f.right&&g.y>f.top&&g.y<f.bottom}function d(t,n,r,o){var i=t.siteAPI.getSiteMeasureMap(),s=o?t.pointers.full:t.pointers,u=n.reverse();return e(u).map(function(e){return s.components.getChildrenRecursivelyRightLeftRootIncludingRoot(e)}).flattenDeep().filter(r).sortBy(function(n){var r=e.get(i,["zIndex",n.id],0);return a.isFixedPosition(t,n)||a.isAncestorFixedPosition(t,n)?-1:1e3-r}).value()}function g(t,n,r){var o=r?t.dal.full:t.dal;return e.filter(n,function(e){return"platform.components.AppController"===o.get(t.pointers.getInnerPointer(e,"componentType"))})}function f(n,a,s,u){s=c.getViewMode(n,s,t);var l=u?n.pointers.full:n.pointers,p=l.components.getMasterPage(s),d=l.components.getChildren(p);if(a===p.id)return d;var f,m=a?[a]:o.getPagesList(n,!1,!0),v=e.map(m,function(e){return l.components.getPage(e,s)});if(a&&n.siteAPI.isPageLandingPage(a)){var y=l.components.getLandingPageComponents(s);return f=g(n,d,u),y.concat(v,f)}if(a&&i.isPopup(n,a))return f=g(n,d,u),v.concat(f);var E=e.findIndex(d,{id:"PAGES_CONTAINER"})+1;return d.splice.apply(d,[E,0].concat(r(v))),d}function m(t,n,r,o,i,a,c){var l,g=n,m=r,v=(l=t,u.getScroll(l));if(c){var y=t.pointers.general.getRenderFlag("siteScale"),E=t.dal.get(y);g+=v.x,m+=v.y/E}var I=e.partial(p,t,g,m,o,v.y,a);i=i||t.siteAPI.getFocusedRootId();var S=f(t,i),h=d(t,S,I);return i===t.siteAPI.getFocusedRootId()&&(h=e.reject(h,function(e){return!s.isRenderedOnSite(t,e)})),h}function v(e,n,r,o){if(!n)return null;r=r||e.siteAPI.getCurrentUrlPageId(),o=c.getViewMode(e,o,t);var i,a=e.pointers.components.getPage(r,o);if(a&&((i=a?e.pointers.components.getComponent(n,a):null)?e.dal.get(i):null))return i;return((i=(a=e.pointers.full.components.getPage(r,o))?e.pointers.full.components.getComponent(n,a):null)?e.dal.full.get(i):null)&&i}return{getComponentsAtXYRelativeToStructure:function(e,t,n,r,o){return m(e,t,n,r,o,a.getCompLayoutRelativeToStructure,!1)},getComponentsAtXYRelativeToScreen:function(e,t,n,r,o){return m(e,t,n,r,o,a.getCompLayoutRelativeToScreen,!0)},getComponentByType:function(t,n,r){var o=e.isArray(n)?n:[n],i=r?[r]:f(t,void 0,void 0,!0),a=function(t,n){return e(n).map(function(e){return t.pointers.full.components.getChildrenRecursively(e)}).flattenDeep().value()}(t,i);return a=a.concat(i),e.filter(a,function(n){var r=t.dal.full.get(t.pointers.getInnerPointer(n,"componentType"));return e.includes(o,r)})},getAllComponents:function(e,t,n,r){return d(e,f(e,t,r),n)},getAllComponentsFromFull:function(e,t,n,r){return d(e,f(e,t,r,!0),n,!0)},getComponentsUnderAncestor:function(e,t){return e.pointers.components.getChildrenRecursively(t)},getComponentById:v,getSiteHeader:function(e,t){return v(e,"SITE_HEADER","masterPage",t)},isDescendantOfComp:function(e,t,n){return n&&e.pointers.full.components.isDescendant(t,n)}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y;e.exports=(r=n(0),o=n(23),i=n(12),a=n(116),s=n(29),u=n(20),c=n(283),l=n(3),p=n(53),g=["wysiwyg.viewer.components.SiteSegmentContainer","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer"],f={"wysiwyg.viewer.components.ScreenWidthContainer":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShowSlide":!0,"wysiwyg.viewer.components.StateStrip":!0,"wysiwyg.viewer.components.StateStripState":!0},m=["wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage",d="wysiwyg.viewer.components.WSiteStructure"],v=["wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StripContainerSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.HoverBox","wysiwyg.common.components.anchor.viewer.Anchor","wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu","wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPAMultiSection","wixapps.integration.components.AppPart","platform.components.AppWidget","wixapps.integration.components.AppPart2"],y={isSiteStructure:function(e){return e===d},isSiteSegment:function(e){return r.includes(g,e)},isContainer:function(e){return u.services.isContainer(e)},isLegacyFullWidthContainer:function(e,t){var n=i.getComponentType(e,t),o=c[n];return r.isFunction(o)?o(e,t):!!o},isLegacyFullWidthContainerByType:function(e){return!(!c[e]||r.isFunction(c[e]))},isHeaderOrFooterOrPageOrMasterPage:function(e){return r.includes(m,e)},isComponentSuitableForNonRenderingState:function(e){return!r.includes(v,e)},isPopupPageOrPopupContainer:function(e,t){return s.isPopup(e,t.id)||"wysiwyg.viewer.components.PopupContainer"===i.getComponentType(e,t)},isComponentParentTypeMatchesComponentChildType:function(e,t){return a.isSlideShowComponent(e)&&a.isSlideComponent(t)&&a.getMatchingChildSlideType(e)===t},isNonContainableFullWidth:function(e){return!(!f[e]||r.isFunction(f[e]))},getComponentType:i.getComponentType,getComponentNickname:function(e,t){var n=e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"));if(!n)return"";var o=r.get(u.services.schemasService.getDefinition(n),"nickname");return o||r.camelCase(r.last(n.split(".")))},getChildrenTypesDeep:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?r.flatMap(e,function(e){var t=e.componentType,n=y.getChildrenTypesDeep(e.components);return[t].concat(n)}):[]},containableByFullWidthPopup:function(e,t,n){var r=e.pointers.components.getPageOfComponent(n);return!(s.isPopup(e,r.id)&&!s.isPopupFullWidth(e,r))},notContainableByPopup:function(e,t,n){var r=e.pointers.components.getPageOfComponent(n);return!s.isPopup(e,r.id)},isMaintainSvgAspectRatio:function(e,t){var n=e.dal.get(t),r=e.pointers.components.getPageOfComponent(t),o=e.pointers.data.getPropertyItem(i.stripHashIfExists(n.propertyQuery),r.id);return"fit"===e.dal.get(o).displayMode},isMaintainWPhotoAspectRatio:function(e,t,n){var r=o.imageTransform.fittingTypes,a=r.STRETCH,s=r.LEGACY_FULL,u=e.pointers.data.getPropertyItem(i.stripHashIfExists(t.propertyQuery),n),c=e.dal.get(u)||{},l=c.autoFill,p=c.displayMode;return!l&&p!==a&&p!==s},isMaintainVideoBoxAspectRatio:function(e){var t=r.get(e,["background","mediaRef","mediaFeatures"],[]);return r.includes(t,"alpha")},getVideoBoxAspectRatio:function(e){var t=r.get(e,["background","mediaRef","qualities"],[]),n=r.maxBy(t,"width")||{};return n.width/n.height},getControllerNickname:function(e,t){var n=l.getDataItem(e,t)||{},o=n.applicationId,i=n.controllerType,a=(p.getControllerStageData(e,t.id,i,o)||{}).nickname;return r.camelCase(a||i)}})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){var e=n(0),t=n(3),o=n(407),i=n(175),a=n(410),s=n(23),u=n(1),c=n(28),l=n(20),p=n(2),d=n(40),g=n(176),f=s.fonts,m=l.services,v=m.themeValidationHelper,y=m.schemasService,E=s.constants.DATA_TYPES,I="THEME_DATA",S=[];function h(t,n,r,o){var i=e.omit(n,["id"]);return i.styleType="custom",C(t,i,null,r,o)}function P(t,n,r,o,i){w(n,r);var a=e.omit(r,["styleType","type"]),s=t.pointers.data.getThemeItem(n,o),u=t.dal.get(s),c=e.assign(u||{},a),l=e.get(u,"styleType")||e.get(r,"styleType");!function(e,t,n,r){var o=r&&e.runtimeConfig.stylesPerPage&&t===p.STYLES.TYPES.CUSTOM;n.type=o?p.STYLES.COMPONENT_STYLE:p.STYLES.TOP_LEVEL_STYLE}(t,l,c,i),c.styleType=l,c.id=n,t.dal.set(s,c),t.setOperationsQueue.executeAfterCurrentOperationDone(Y.bind(this,{type:"STYLE",values:n}))}function A(e,t,n){P(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage",!0)}var T=e.once(function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)});var O=["system","custom"];function C(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=D(e,t,n);return _(e,i,i,r,o),i.id}function _(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o!==p.MASTER_PAGE_ID&&"system"===e.get(n,"styleType")?(o=p.MASTER_PAGE_ID,s.log.warnVerbose("You tried to add a system style with page ".concat(o,". \nPlease update API call to use the master page"))):o=t.runtimeConfig.stylesPerPage?o:p.MASTER_PAGE_ID,w(n.id,n);var a=i?t.dal.full:t.dal,u=t.pointers.data.getThemeItem(n.id,o);a.set(u,n)}function D(n,r,o){if(!e.includes(O,r.styleType))throw new Error("Unable to create a style without a styleType. styleType must be one of ".concat(JSON.stringify(O)));if("system"===r.styleType&&!function(e){return d(e)}(o))throw new Error("Unable to create a system style whose id - ".concat(o,", is not in componentDefinitionMap"));return function(n,r,o){var i=n.runtimeConfig.stylesPerPage&&r.styleType===p.STYLES.TYPES.CUSTOM?p.STYLES.COMPONENT_STYLE:p.STYLES.TOP_LEVEL_STYLE,a=t.createStyleItemByType(i);return e.merge(a,r),a.compId="",a.pageId="",a.id=o||g.getStyleIdToAdd(),a.metaData={isPreset:!1,schemaVersion:"1.0",isHidden:!1},a.style=a.style||{properties:{},propertiesSource:{}},a.type=i,a}(n,r,o)}function w(e,t){if(!e||!t)throw new Error("missing arguments - styleId: ".concat(e,", styleValue: ").concat(t));var n=function(e){if("object"!==r(e))return{success:!1,error:"received style value is not an object"};if(!e.skin)return{success:!1,error:"received style did not contain a skin property"};if(!e.type)return{success:!1,error:"received style did not contain a type property"};return{success:!0}}(t);if(!n.success)throw new Error(n.error)}function b(e){return G(e,"font")}function M(t){function n(e){var t;if(0!==e.indexOf("#")){var n=0===e.indexOf("r")?e:"rgba(".concat(e,")");t=new i(n)}else t=new i(e);return t.hexString()}return e.isArray(t)?e.map(t,n):e.isObject(t)?e.mapValues(t,n):n(t)}function R(e){return M(G(e,"color"))}function N(e,t){var n=z(e,"color",t);return n&&M(n)}var x=e.once(function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)});function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.MASTER_PAGE_ID,r=(arguments.length>3?arguments[3]:void 0)?e.dal.full:e.dal,o=e.pointers.data.getThemeItem(t,n);return r.get(o)}var B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.MASTER_PAGE_ID;return L(e,t,n,!1)},k=function(t){return t.dal.getKeys(t.pointers.page.getAllPagesPointer()).reduce(function(n,r){return e.defaults(n,t.dal.get(t.pointers.general.getAllStylesInPage(r)))},{})},F=e.once(function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)});var U=function(t){return e(t.pointers.page.getAllPagesPointer()).thru(t.dal.getKeys).reduce(function(e,n){return e.concat(t.dal.getKeys(t.pointers.general.getAllStylesInPage(n)))},[])},H=e.once(function(){var e;return(e=s.log).warnDeprecation.apply(e,arguments)});function V(e,t,n){var r=e.pointers.data.getThemeItem(I,p.MASTER_PAGE_ID);return e.pointers.getInnerPointer(r,[t,n])}function W(t,n,r){var o=G(t,n);!function(t,n,r,o){e.forEach(n,function(e,i){if(!r[i])throw new Error("Invalid Key ".concat(i));if("color"===o){var a=function(e){if(e){var t=/^(rgb|rgba)\(([0-9,\\.]*)\)$/.exec(e);e=t&&t[2]||e}return e}(e);if(!v.validateColor(a))throw new Error("color value isn't valid ".concat(e," .Please supply or hex/rgb string"));n[i]=a}"font"===o&&function(e,t){var n=v.validateFont(t,R(e));if(n.isValid)return!0;if(n.error)throw n.error}(t,e)})}(t,r,o,n),e.forEach(r,function(e,r){var o=j(r),i=V(t,n,o);t.dal.set(i,e)})}function G(t,n){var r={},o=t.pointers.data.getThemeItem(I,p.MASTER_PAGE_ID),i=t.pointers.getInnerPointer(o,n),a=t.dal.get(i);return e.forEach(a,function(e,t){r["".concat(n,"_").concat(t)]=e}),r}function z(t,n,r){var o=j(r);if(!e.isNaN(o)){var i=V(t,n,o);return t.dal.get(i)}return e.template("Non valid <%=type %> value <%=name %>")({type:n,name:r})}function j(e){return parseInt(e.split("_")[1],10)}function Y(t){e(S).filter("callback").invokeMap("callback",t).value()}var K="skins.viewer.svgshape.SvgShapeDefaultSkin";function q(t,n){return e.includes(n,"svgshape.")?o[K]:o[n]}var Q={pl:["latin-ext","latin"],ru:["cyrillic","latin"],ja:["japanese","latin"],ko:["korean","latin"]};return{colors:{update:function(e,t){if("object"!==r(t))throw new Error('Value "'.concat(t,'" is not valid.Param should be an object'));W(e,"color",t),e.setOperationsQueue.executeAfterCurrentOperationDone(Y.bind(this,{type:"COLOR",values:t}))},get:N,getAll:R,getCustomUsedInSkins:function(t,n){var r,o=k(t),i=function(t,n){var r=t.pointers.page.getAllPagesPointer(),o=t.dal.getKeys(r);return e.reduce(o,function(r,o){var i=t.pointers.data.getDesignItemsWithPredicate(n,o);return e.forEach(i,function(e){r.push(t.dal.get(e))}),r},[])}(t,function(e){return"BackgroundMedia"===e.type}),a=(r=i,e.reduce(r,function(t,n){return e(n).pickBy(function(t,r){return n[r]&&"color"===e.get(y.getSchema(E.design,"BackgroundMedia").properties[r],"format")}).forOwn(function(e){t[e]=e}),t},{})),s=function(t,n){return e.transform(n,function(n,r){var o=q(t,r.skin);if(r.type!==p.STYLES.FLAT_THEME&&o){var i=r.style&&r.style.properties||{};e(i).pickBy(function(t,n){return o[n]&&e.includes(o[n].type,"COLOR")}).forOwn(function(e){n[e]=e})}},{})}(t,o),u=e.merge(a,s),c=e.filter(u,function(t){return!e.includes(t,"color")});if(c=M(c),n){var l=R(t);c=e.difference(c,l)}return c},getColorPresets:function(){return a},getCssString:function(e){var t=e.pointers.data.getThemeItem("THEME_DATA",p.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),r=e.dal.get(n);return s.cssUtils.getColorsCssString(r)},render:function(t,n){if(e.includes(n,"color"))return N(t,n);if("#"===n.charAt(0)||e.includes(n,"rgb"))return n;var r=n.split(",");return 3===r.length?"rgb(".concat(n,")"):4===r.length?"rgba(".concat(n,")"):n}},fonts:{update:function(e,t){if("object"!==r(t))throw new Error('Value "'.concat(t,'" is not valid.Param should be an object'));W(e,"font",t),e.setOperationsQueue.executeAfterCurrentOperationDone(Y.bind(this,{type:"FONT",values:t}))},get:function(e,t){return z(e,"font",t)},getAll:b,getMap:function(t){var n=R(t),r=b(t);return e.transform(r,function(e,t,o){return e[o]=f.fontUtils.parseStyleFont(o,r,n),e},{})},getCharacterSet:function(t){var n=t.pointers.data.getDataItemFromMaster("masterPage"),r=t.dal.get(n).characterSets;return r?e.includes(r,"latin")||r.push("latin"):r=["latin"],r},getLanguageCharacterSet:function(e,t){if(t)return Q[t]},getCharacterSetByGeo:function(t){var n=[],r=c.getGeo(t);return r&&u.countryCodes.countries[r]&&(n=e.clone(u.countryCodes.countries[r].characterSets)),n.length>0&&!e.includes(n,"latin")?n.push("latin"):n=["latin"],n},updateCharacterSet:function(t,n){if(e.isArray(n)){var r=t.pointers.data.getDataItemFromMaster("masterPage"),o={characterSets:n};t.dal.merge(r,o)}},getThemeStyles:function(e){var t=e.pointers.data.getThemeItem("THEME_DATA",p.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),r=e.pointers.getInnerPointer(t,"font"),o=e.dal.get(n),i=e.dal.get(r);return f.fontUtils.getThemeFontsCss(i,o)}},styles:{updateAndWarn:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage";w(n,r);var i=B(t,n,o);"custom"===e.get(i,"styleType")&&T("You tried to update a custom style with id ".concat(n,". \nPlease use components.style.update(compPointer, style) instead. theme.style.update should only be used for theme styles"));var a=t.pointers.data.getThemeItem(n,o);if(t.dal.isExist(a)){var u=t.pointers.data.getPageIdOfData(a);u!==o&&s.log.warnVerbose("You tried to update a style with id ".concat(n," and page ").concat(o,", but the style belongs to page ").concat(u,". Please update API call to use the correct page"))}else T("You are trying to update style with id ".concat(n," and page ").concat(o,", but the style does not exist. Previously, a style would be created with this id - but this is no longer supported and will be deprecated soon."));return A(t,n,r,o)},update:A,updateWithoutChangingType:function(e,t,n){P(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage",!1)},createAndAddStyleItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID;return C(e,t,n,r,!1)},addStyleItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.MASTER_PAGE_ID;return _(e,t,n,r,!1)},createStyleItemToAdd:D,getAndWarn:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.MASTER_PAGE_ID,o=B(t,n,r);return"custom"===e.get(o,"styleType")&&x("You tried to get a custom style with id ".concat(n," and page ").concat(r,". \nPlease use components.style.get(compPointer) instead. theme.style.get should only be used for theme styles")),o},get:B,getAll:function(e,t){return t?function(e,t){return e.dal.get(e.pointers.general.getAllStylesInPage(t))}(e,t):(F("You tried to get all styles without providing pageId, which causes styles from all pages to be returned. Please use theme.styles.getAllFromAllPages instead"),k(e))},getAllFromAllPages:k,getAllIds:function(e,t){return t?function(e,t){return e.dal.getKeys(e.pointers.general.getAllStylesInPage(t))}(e,t):(H("You tried to get all styles Ids without providing pageId, which causes styles Ids from all pages to be returned. Please use theme.styles.getAllIdsFromAllPages instead"),U(e))},getAllIdsFromAllPages:U,fork:function(e,t,n){return h(e,t,n,!1)},remove:function(e,t,n){e.dal.remove(e.pointers.data.getThemeItem(t,n))},internal:{addStyleItem:_,createAndAddStyleItem:C,get:L,fork:h}},skins:{getComponentSkins:function(e,t){return l.services.getComponentSkins(t)},getSkinDefinition:function(t,n){return e.clone(q(0,n))}},getSchema:function(){return e.cloneDeep(y.getSchema(E.data,"FlatTheme").properties)},events:{onChange:{addListener:function(e,t){if("function"!=typeof t)throw new Error('Value "'.concat(t,'" is not valid.Param should be function'));var n=S.length;return S.push({listenerId:n,callback:t}),n},removeListener:function(t,n){if(e.isNil(n))throw new Error("missing argument - listenerId: ".concat(n));var r=e.findIndex(S,{listenerId:n});if(-1===r)throw new Error('Value "'.concat(n,'" is not valid.No listener with this id exist'));S.splice(r,1)},executeListeners:Y}},FONT_POSSIBLE_VALUES:v.FONT_POSSIBLE_VALUES}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(23),o=n(166),i=(n(47),n(2)),a=n(8),s=n(174),u=n(15),c=n(45),l=n(29),p=n(6),d=n(9),g=n(118),f={};function m(e,t){return a.isContainer(a.getComponentType(e,t))||e.pointers.components.isMasterPage(t)}function v(t,n,r,o){var i=m(n,o)&&(function(e,t,n,r){var o=a.getComponentType(t,r),i=e?n.componentType:a.getComponentType(t,n),s=C(t,n,e),u=C(t,r),c=a.isHeaderOrFooterOrPageOrMasterPage(o),l=a.isNonContainableFullWidth(i);return!s||u&&!l||c}(t,n,r,o)||function(e,t,n,r){var o=a.getComponentType(t,r),i=e?n.componentType:a.getComponentType(t,n);return a.isComponentParentTypeMatchesComponentChildType(o,i)}(t,n,r,o)||function(e,t){var n=a.getComponentType(e,t);return l.isPopupContainer(n)}(n,o))&&!function(t,n,r){for(var o=t.pointers.components.getParent(r);o;){if(e.isEqual(o,n))return!0;o=t.pointers.components.getParent(o)}return!1}(n,r,o);return t?i:i&&function(e,t,n){if(e.pointers.components.getPageOfComponent(t).id!==e.pointers.components.getPageOfComponent(n).id){if(!e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n))return!1;if(u.isMobileView(e))return!1}return!0}(n,r,o)}function y(e,t,n,r){return r?v(e,t,n,r):!(u.isMobileView(t)||C(t,n,e)||b(t,n))}function E(e){return!u.isMobileView(e)}f[s.MOVE_DIRECTIONS]=p.HOOKS.METADATA.MOVE_DIRECTIONS,f[s.REMOVABLE]=p.HOOKS.METADATA.REMOVABLE,f[s.DUPLICATABLE]=p.HOOKS.METADATA.DUPLICATABLE,f[s.CAN_REPARENT]=p.HOOKS.METADATA.CAN_REPARENT,f[s.ROTATABLE]=p.HOOKS.METADATA.ROTATABLE,f[s.FIXED_POSITION]=p.HOOKS.METADATA.FIXED_POSITION,f[s.RESIZABLE_SIDES]=p.HOOKS.METADATA.RESIZABLE_SIDES,f[s.CONTAINABLE]=p.HOOKS.METADATA.CONTAINABLE,f[s.LAYOUT_LIMITS]=p.HOOKS.METADATA.LAYOUT_LIMITS,f[s.SHOULD_AUTO_SET_NICKNAME]=p.HOOKS.METADATA.SHOULD_AUTO_SET_NICKNAME,f[s.A11Y_CONFIGURABLE]=p.HOOKS.METADATA.A11Y_CONFIGURABLE,f[s.HIDE_AS_GHOST]=p.HOOKS.METADATA.HIDE_AS_GHOST;var I,S={containable:y.bind(null,!1),containableByStructure:y.bind(null,!0),container:m,canContain:m,canContainByStructure:m,shouldKeepChildrenInPlace:!0,disableable:!1,isRepeater:!1,isRepeatable:!0,isContainCheckRecursive:!0,moveDirections:[i.MOVE_DIRECTIONS.HORIZONTAL,i.MOVE_DIRECTIONS.VERTICAL],resizableSides:[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.BOTTOM,i.RESIZE_SIDES.RIGHT],rotatable:!1,flippable:!1,anchors:{to:{allow:!0,lock:i.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:i.ANCHORS.LOCK_CONDITION.THRESHOLD}},canBeFixedPosition:!0,canBeStretched:!1,showMarginsIndicator:!1,removable:!0,alignable:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"layout"));return!(n.fixedPosition||n.docked)},duplicatable:E,crossSiteDuplicatable:E,hiddenable:!0,minimalChildrenNumber:0,maximumChildrenNumber:Number.MAX_VALUE,collapsible:!0,dockable:!0,fullWidth:function(e,t){var n=e.pointers.getInnerPointer(t,"layout"),o=e.dal.get(n);return r.dockUtils.isHorizontalDockToScreen(o)||a.isLegacyFullWidthContainer(e,t)},fullWidthByStructure:function(e,t){return r.dockUtils.isHorizontalDockToScreen(t.layout)||a.isLegacyFullWidthContainerByType(t.componentType)},styleCanBeApplied:!1,groupable:function(e,t){return A(e,s.CONTAINABLE,t)},hideAsGhost:!1,enforceContainerChildLimitsByWidth:!0,enforceContainerChildLimitsByHeight:!0,shouldAutoSetNickname:!0,nickname:a.getComponentNickname,layoutLimits:{minWidth:r.siteConstants.COMP_SIZE.MIN_WIDTH,minHeight:r.siteConstants.COMP_SIZE.MIN_HEIGHT,maxWidth:r.siteConstants.COMP_SIZE.MAX_WIDTH,maxHeight:r.siteConstants.COMP_SIZE.MAX_HEIGHT,aspectRatio:null},isProportionallyResizable:function(e,t){return j(e,t)&&Y(e,t)},ignoreChildrenOnProportionalResize:!1,enforceMaxDimensionsOnProportionalResize:!1,resizeOnlyProportionally:!1,isVisible:!0,enforceResizableCorners:!1,forceMaintainIDsOnSerialize:!1,canReparent:!0,heightAuto:!1,widthAuto:!1,a11yConfigurable:!0},h=function(t,n){var r=e.get(o,[t,"isExternal"],!1),i=e.get(o,[t,n]);return r&&!e.isUndefined(i)};function P(t,n){var r=e.get(o,[t,n]);return e.isUndefined(r)?S[n]:r}function A(t,n,r){for(var o=a.getComponentType(t,r),i=P(o,n),s=arguments.length,u=new Array(s>3?s-3:0),c=3;c<s;c++)u[c-3]=arguments[c];var l=[r].concat(u);if(e.isFunction(i)){var d;if(h(o,n)){if(!I)return S[n];d=I(t,r)}else d=t;var g=[d].concat(l);i=i.apply(this,g)}return f[n]?p.executeHookAndUpdateValue(t,f[n],o,l,i):i}function T(t,n,r){var o=P(r.componentType,n);if(e.isFunction(o)){for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];o=o.apply(void 0,[t,r].concat(a))}return o}function O(e,t){return A(e,s.RESIZABLE_SIDES,t)}function C(e,t,n){return n?T(e,s.FULL_WIDTH_BY_STRUCTURE,t):A(e,s.FULL_WIDTH,t)}function _(e,t){return A(e,s.CONTAINER,t)}function D(e,t){return!!A(e,s.MOVE_DIRECTIONS,t).length}function w(t){return e.isObject(t)&&0!==t.rotationInDegrees}function b(e,t){var n=e.pointers.getInnerPointer(t,"layout"),o=e.dal.get(n);return r.dockUtils.isHorizontalDockToScreen(o)}function M(e,t){var n=a.getComponentType(e,t);return a.isLegacyFullWidthContainer(e,t)||l.isPopupContainer(n)}function R(e,t,n,r){for(var o,i=!0,a=n;n&&i;)o=A(e,s.IS_CONTAIN_CHECK_RECURSIVE,n),i=r(e,t,n,a),n=o?e.pointers.components.getParent(n):null;return i}function N(e,t,n,r){return A(e,s.CAN_CONTAIN,n,t,r)}var x=function(e,t){return A(e,s.IS_REPEATER,t)},L=function(e){return P(e,s.IS_REPEATABLE)},B=function(t,n){var r=t.pointers.full.components.getChildren(n);return e.size(r)>0},k=function t(n,r){var o=function(e,t){return A(e,s.IS_REPEATABLE,t)}(n,r),i=n.pointers.components.getChildren(r);return o&&e.every(i,function(e){return t(n,e)})},F=function(e,t,n){var r=x(e,n);return(!r||!B(e,n))&&(!(r||V(e,n))||k(e,t))};function U(e,t){return A(e,s.CAN_REPARENT,t)}function H(t,n,o,i){if(function(t,n,r,o){if(!(o.id===r.id))return!1;var i=x(t,o);if(i&&B(t,o))return!0;if(i||V(t,o)){var s=a.getChildrenTypesDeep([n]);return!e.every(s,L)}return!1}(t,n,o,i))return!1;var u=A(t,s.CAN_CONTAIN_BY_STRUCTURE,o,n,i);r.dockUtils.isHorizontalDockToScreen(n.layout)&&(u=u&&M(t,o));var c=T(t,s.CONTAINABLE_BY_STRUCTURE,n,o);return Boolean(u&&c)}function V(e,n){return t.displayedOnlyStructureUtil.isRepeatedComponent(n.id)}function W(e,t){return A(e,s.ENFORCE_CONTAINER_CHILD_LIMITS_BY_WIDTH,t)}function G(e,t){return A(e,s.ENFORCE_CONTAINER_CHILD_LIMITS_BY_HEIGHT,t)}function z(t,n){var r=e.defaults(A(t,s.LAYOUT_LIMITS,n),S.layoutLimits);return!e.isNull(r.aspectRatio)}function j(t,n){return!!e.intersection(O(t,n),[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]).length||z(t,n)}function Y(t,n){return!!e.intersection(O(t,n),[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.BOTTOM]).length||z(t,n)}return{init:function(e){I=e},public:{isContainable:function(e,n,r){return!!(r&&_(e,r)&&F(e,n,r))&&(!(!U(e,n)&&function(e,t,n){return!e.pointers.isSamePointer(e.pointers.components.getParent(t),n)}(e,n,r))&&(A(e,s.CONTAINABLE,n,r)&&R(e,n,r,N)&&function(e,n,r){return!u.isMobileView(e)||(!V(e,n)&&!V(e,r)||t.displayedOnlyStructureUtil.getRepeaterItemId(n.id)===t.displayedOnlyStructureUtil.getRepeaterItemId(r.id))}(e,n,r)&&(!b(e,n)||M(e,r))))},isContainableByStructure:function(e,t,n){return R(e,t,n,H)},isContainer:_,isAlignable:function(e,t){return A(e,s.ALIGNABLE,t)&&D(e,t)},isMovable:D,isHorizontallyMovable:function(t,n){return e.includes(A(t,s.MOVE_DIRECTIONS,n),i.MOVE_DIRECTIONS.HORIZONTAL)},isVerticallyMovable:function(t,n){return e.includes(A(t,s.MOVE_DIRECTIONS,n),i.MOVE_DIRECTIONS.VERTICAL)},getMobileConversionConfig:function(t,n,r){var a=n.componentType||n.documentType,u=e.get(o,[a,s.MOBILE_CONVERSION_CONFIG]),c=e.mapValues(u,function(o){return e.isFunction(o)?o(t,n,r):o}),l=e.get(o,[a,s.LAYOUT_LIMITS]);if(e.isFunction(l)){var p=t.pointers.components.getPage(r,i.VIEW_MODES.DESKTOP),d=t.pointers.components.getComponent(n.id,p);l=d&&t.dal.isExist(d)?l(t,d):l}var g=e.get(o,[a,s.HIDDENABLE],!0);return e.defaults(c,l?{layoutLimits:l}:{},{hiddenable:g})},getMobileConversionConfigByName:function(t,n,r,i){var a=n.componentType||n.documentType,u=e.get(o,[a,s.MOBILE_CONVERSION_CONFIG,r]);return e.isFunction(u)?u(t,n,i):u},getMinimalChildrenNumber:function(e,t){return A(e,s.MINIMAL_CHILDREN_NUMBER,t)},allowedToContainMoreChildren:function(e,t){var n=A(e,s.MAXIMUM_CHILDREN_NUMBER,t);return n===Number.MAX_VALUE||n>e.pointers.components.getChildren(t).length},getDefaultMobileProperties:function(t,n,r){var o=P(n.componentType,s.DEFAULT_MOBILE_PROPERTIES);return e.isFunction(o)?o(t,n,r):o},getResizableSides:function(e,t){return O(e,t)},isHorizontallyResizable:j,isVerticallyResizable:Y,isProportionallyResizable:function(e,t){return A(e,s.IS_PROPORTIONALLY_RESIZABLE,t)},isIgnoreChildrenOnProportionalResize:function(e,t){return A(e,s.IGNORE_CHILDREN_ON_PROPORTINAL_RESIZE,t)},enforceMaxDimensionsOnProportionalResize:function(e,t){return A(e,s.ENFORCE_MAX_DIM_ON_PROPORTIONAL_RESIZE,t)},isResizable:function(e,t){return!!O(e,t).length},isRotatable:function(e,t){return A(e,s.ROTATABLE,t)&&!function(e,t){var n=e.pointers.getInnerPointer(t,"layout"),o=e.dal.get(n);return r.dockUtils.isStretched(o)}(e,t)},isFlippable:function(e,t){return A(e,s.FLIPPABLE,t)},isGroupable:function(e,t){return A(e,s.GROUPABLE,t)&&U(e,t)},canBeFixedPosition:function(e,t){return A(e,s.FIXED_POSITION,t)},isModal:function(e,t){return!!A(e,s.MODAL,t)},isMobileOnly:function(e,t){return!!A(e,s.MOBILE_ONLY,t)},isUsingLegacyAppPartSchema:function(e,t){return!!A(e,s.USING_LEGACY_APP_PART_SCHEMA,t)},canBeStretched:function(e,t){var n=e.pointers.components.getPageOfComponent(t);return!(l.isPopup(e,n.id)&&!l.isPopupFullWidth(e,n))&&(A(e,s.CAN_BE_STRETCHED,t)&&!function(e,t){var n=e.pointers.getInnerPointer(t,"layout");return w(e.dal.get(n))}(e,t))},canBeStretchedByStructure:function(e,t){return T(e,s.CAN_BE_STRETCHED,t)&&!w(t.layout)},resizeOnlyProportionally:z,enforceResizableCorners:function(e,t){return A(e,s.ENFORCE_RESIZABLE_CORNERS,t)},isRepeatedComponent:V,isEnforcingContainerChildLimitations:function(e,t){return W(e,t)||G(e,t)},isEnforcingContainerChildLimitationsByWidth:W,isEnforcingContainerChildLimitationsByHeight:G,isFullWidth:function(e,t){return C(e,t,!1)},isFullWidthByStructure:function(e,t){return C(e,t,!0)},isRemovable:function(e,t){return A(e,s.REMOVABLE,t)},isDuplicatable:function(e,t,n){return A(e,s.DUPLICATABLE,t,n)},isCrossSiteDuplicatable:function(e,t){return A(e,s.CROSS_SITE_DUPLICATABLE,t)},isCrossSiteDuplicatableByStructure:function(e,t){return T(e,s.CROSS_SITE_DUPLICATABLE,t)},isStyleCanBeApplied:function(e,t){return A(e,s.STYLE_CAN_BE_APPLIED,t)},getLayoutLimits:function(t,n,r){var o=e.defaults(A(t,s.LAYOUT_LIMITS,n,r),S.layoutLimits),i=t.pointers.components.isMobile(n)&&c.isWidgetPage(t,e.get(t.pointers.components.getParent(n),"id"));return o.maxWidth=Math.min(o.maxWidth,S.layoutLimits.maxWidth,i?320:Number.MAX_SAFE_INTEGER),o.maxHeight=Math.min(o.maxHeight,S.layoutLimits.maxHeight),o.minWidth=Math.max(o.minWidth,S.layoutLimits.minWidth),o.minHeight=Math.max(o.minHeight,S.layoutLimits.minHeight),o},isHiddenable:function(e,t){return A(e,s.HIDDENABLE,t)},isCollapsible:function(e,t){return A(e,s.COLLAPSIBLE,t)},isDockable:function(e,t){return A(e,s.DOCKABLE,t)},isDisableable:function(e,t){return!!A(e,s.DISABLEABLE,t)},isAnchorableFrom:function(t,n){var o=a.getComponentType(t,n),i=r.getComponentsAnchorsMetaData();return e.get(i[o],"from.allow",i.default.from.allow)},isAnchorableTo:function(t,n){var o=a.getComponentType(t,n),i=r.getComponentsAnchorsMetaData();return e.get(i[o],"to.allow",i.default.to.allow)},isVisible:function(e,t){return A(e,s.VISIBLE,t)},isPotentialContainerForScreenWidthComp:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return M(e,t)}),canReparent:U,heightAuto:function(e,t){return A(e,s.HEIGHT_AUTO,t)},heightAutoByStructure:function(e,t){return T(e,s.HEIGHT_AUTO,t)},widthAuto:function(e,t){return A(e,s.WIDTH_AUTO,t)},widthAutoByStructure:function(e,t){return T(e,s.WIDTH_AUTO,t)},isA11yConfigurable:function(e,t){return A(e,s.A11Y_CONFIGURABLE,t)&&!!g.getA11ySchema(e,t)}},getShouldKeepChildrenInPlace:function(e,t){return A(e,s.SHOULD_KEEP_CHILDREN_IN_PLACE,t)},getAnchorableHeight:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"layout.height"));if(!_(e,t))return n;var o=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),r=e.pointers.components.getPageOfComponent(t).id;return n?d.styles.get(e,n,r):null}(e,t),i=o&&o.skin||e.dal.get(e.pointers.getInnerPointer(t,"skin"));return n-r.layoutAnchors.getNonAnchorableHeightForSkin(i,o)},getDefaultNickname:function(e,t){return A(e,s.NICKNAME,t)},shouldAutoSetNickname:function(e,t){return A(e,s.SHOULD_AUTO_SET_NICKNAME,t)},shouldForceMaintainIDsOnSerialize:function(e,t){return A(e,s.FORCE_MAINTAIN_IDS_ON_SERIALIZE,t)},shouldBeRemovedByParent:function(e,t){var n=e.pointers.components.getParent(t),r=n&&a.getComponentType(e,n);return!!r&&"wysiwyg.viewer.components.RefComponent"===r},shouldRemoveAsGhost:function(e,t){return A(e,s.HIDE_AS_GHOST,t)},getComponentType:a.getComponentType}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(23),r=n(89),o=n(68),i=n(74),a=n(10),s=n(26),u=n(119),c=n(31),l=n(54),p=n(177),d=(n(2),n(3)),g=n(428),f=n(123),m=n(6),v=n(94),y=n(120),E=n(72),I=n(181),S=n(91),h=n(39),P=n(36),A=n(16),T=["x","y","width","height","rotationInDegrees","scale","fixedPosition","aspectRatio"],O=["bounding","anchors"],C="ANY",_={x:C,y:C,width:C,height:C,anchors:C,bounding:C,rotationInDegrees:0,scale:1,fixedPosition:!1},D={"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":!0};function w(t,n,r){var o=t.pointers.components.getParent(n);if(!t.pointers.components.isPage(o)){var i=s.getPage(t,n);i=s.getContainerToAddComponentTo(t,i);var a=r?function(t,n,r){var o=p.getCompLayoutRelativeToStructure(t,n),i=p.getCompLayoutRelativeToStructure(t,r),a=e.pick(o,["x","y"]);return a.y-=i.y,a}(t,n,i):null;ne(t,n,i),r&&V(t,n,a)}}function b(n,r,o){var i=n.pointers.getInnerPointer(r,"layout");o=o||n.dal.get(i);var a=l.getPositionAndSize(n,r,e.omit(o,"aspectRatio")),s=t.layout.calcAspectRatio(a.width,a.height),u=n.pointers.getInnerPointer(i,"aspectRatio");n.dal.set(u,s)}function M(e,n){var r=e.pointers.getInnerPointer(n,"layout"),o=e.dal.get(r);return t.layout.isAspectRatioOn(o)}var R=function(e){return e.dal.get(e.pointers.getInnerPointer(function(e){return e.pointers.data.getDataItemFromMaster("masterPage")}(e),"layoutSettings"))},N=function(t,n){var o=t.pointers.components.getParent(n);(function(e,t){return e.pointers.isSamePointer(t,e.pointers.components.getMasterPage(t.type))})(t,o)&&function(t){return e.get(R(t),"soapCompsAroundPagesContainer",!1)}(t)&&r.fixIndexForMasterPageChild(t,n)};function x(e){var t=e?W:V;return function(e,n,r){t(e,n,r,!0)}}var L=function(e){return e.dal.get(e.pointers.general.getRenderFlag("enforceShouldKeepChildrenInPlace"))},B=function(e){return e.dal.get(e.pointers.general.getRenderFlag("preserveCompLayoutOnReparent"))};function k(t,n,r,o,i){var u=t.pointers.getInnerPointer(n,"layout"),c=t.dal.get(u),p=s.getType(t,n),d=x(o);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,p,[t,n,r,d,i,c]);var g=I.getValidLayoutToUpdate(t,n,r);if(f.constrainByDimensionsLimits(t,n,g),f.constrainByDockingLimits(g),a.public.isContainer(t,n)&&a.public.isEnforcingContainerChildLimitations(t,n)){var v=a.public.isEnforcingContainerChildLimitationsByWidth(t,n),y=a.public.isEnforcingContainerChildLimitationsByHeight(t,n);f.constrainByChildrenLayout(t,n,g,!v,!y)}f.constrainBySpecificType(t,n,g),f.constrainsByContainer(t,n,g,c);var E=l.getPositionAndSize(t,n);if(t.dal.set(u,g),e.has(g,"aspectRatio")&&b(t,n,g),a.getShouldKeepChildrenInPlace(t,n)&&L(t)){var S=l.getPositionAndSize(t,n),h=function(e,t){return t.width!==e.width&&t.x!==e.x}(E,g),P=function(e,t){return t.height!==e.height&&t.y!==e.y}(E,g);(h||P)&&function(t,n,r,o){var i=t.pointers.components.getChildren(n),a=(o.x||0)-(r.x||0),s=(o.y||0)-(r.y||0);e.forEach(i,function(e){var n=t.pointers.getInnerPointer(e,"layout"),r=t.dal.get(n);l.isHorizontallyDocked(r)||(r.x-=a),l.isVerticallyDocked(r)||(r.y-=s),t.dal.merge(n,r)})}(t,n,E,S)}m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,p,[t,n,g,d,i,c])}function F(t,n,r){if(re(t,n)){var o=E.applyPositionAndSizeOnCurrentLayoutSchema(t,n,r);return e.assign(o,r)}return r}function U(e,n){if(e.siteAPI.getLayoutMechanism()===t.constants.LAYOUT_MECHANISMS.MESH&&e.dal.set(e.pointers.layoutAdjustment.getLayoutAdjustmentPointer(),{id:null}),v.isGroupedComponent(e,n)){var r=s.getContainer(e,n);i.updateAnchors(e,n,r)}else i.updateAnchors(e,n)}function H(t,n,r,o,i){var a,s=(a=r,e.omit(a,O));e.isEmpty(s)||(!function(t){var n=e.omit(t,T);if(!e.isEmpty(n))throw new Error("updateCompLayout: new layout properties are not supported")}(s),k(t,n,F(t,n,s),o,i))}function V(e,t,n,r){H(e,t,n,!1,r),U(e,t)}function W(e,n,r,o){e.dal.set(e.pointers.layoutAdjustment.getLayoutAdjustmentPointer(),n),H(e,n,r,!0,o),e.siteAPI.getLayoutMechanism()===t.constants.LAYOUT_MECHANISMS.ANCHORS&&e.setOperationsQueue.executeAfterCurrentOperationDone(function(){i.updateAnchorsForCompChildren(e,n)})}function G(e,n){var r=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id),o=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id);return!r&&o}function z(e,n){var r=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id),o=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id);return r&&!o}function j(e){return!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)}function Y(e,n,r){var o=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(r.id),i=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id);if(o&&i){var a=s.getAncestorByPredicate(e,n,j),u=s.getAncestorByPredicate(e,r,j);return!e.pointers.isSamePointer(a,u)}return!1}function K(e,t,n){var r=e.pointers.components.getParent(t);return e.pointers.components.isPage(r)&&e.pointers.components.isMasterPage(n)||e.pointers.components.isPage(n)&&e.pointers.components.isMasterPage(r)}function q(t,n,r){var o=c.getComponentModes(t,n);if(!o||0===o.length){var i=function(t,n){var r=P.getComponentBehaviors(t,n),o=["modeChange","modeIn","modeOut"];return e.filter(r,function(t){return e.includes(o,t.action)})}(t,r);e.forEach(i,function(e){P.removeComponentSingleBehavior(t,r,e.name,e.action)})}var a=t.pointers.full.components.getPageOfComponent(r),s=t.pointers.full.components.getPageOfComponent(n);e.isEqual(a,s)||function(t,n){var r=[n];for(;!e.isEmpty(r);){var o=r.pop();Q(t,o);var i=t.pointers.full.components.getChildren(o);r=r.concat(i)}}(t,r)}function Q(t,n){var r=c.getComponentModes(t,n);e.forEach(r,function(e){t.siteAPI.deactivateMode(n,e.modeId)})}function X(e,t){return Boolean(u.getShowOnSomePagesRoot(e,t))}var Z=function(e,t,n){return e.dal.isExist(t)&&e.dal.isExist(n)?a.public.isContainable(e,t,n)?function(e,t){return a.public.allowedToContainMoreChildren(e,t)}(e,n)?"":"maximum number of child components reached":"component isn't containable in container: ".concat(n.id):"invalid component ref or new parent container ref"};function J(e,t,n){if(!(B(e)||p.isFixedPosition(e,t)&&K(e,t,n))){var r=oe(e,t);r||ae(e,t);var o=e.pointers.getInnerPointer(t,"layout"),i=p.getCompLayoutRelativeToScreenConsideringScroll(e,t,!0),a=p.getCompLayoutRelativeToScreenConsideringScroll(e,n,!0),s={x:i.x-a.x,y:i.y-a.y};r&&delete s.x,e.dal.merge(o,s)}}function $(t,n){var r=t.pointers.components.getAllDisplayedOnlyComponents(n);e.forEach(r,function(e){d.deleteDataItem(t,e),d.deleteDesignItem(t,e)})}function ee(n,r,o,i,a){var s=[r].concat(a);e.forEach(s,function(r){!function(n,r,o,i){var a=n.dal.get(r),s=a.dataQuery&&t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.dataQuery.replace("#","")),u=a.designQuery&&t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.designQuery.replace("#","")),c=n.pointers.components.getAllDisplayedOnlyComponents(o),l=s&&d.getDataItemById(n,s,i,!0),p=u&&d.getDesignItemById(n,u,i,!0);(l||p)&&e.forEach(c,function(e){var r=t.displayedOnlyStructureUtil.getRepeaterItemId(e.id);if(l){var o=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s.replace("#",""),r);d.addSerializedDataItemToPage(n,i,l,o)}if(p){var a=t.displayedOnlyStructureUtil.getUniqueDisplayedId(u.replace("#",""),r);d.addSerializedDesignItemToPage(n,i,p,a)}})}(n,r,o,i)})}function te(e,n,r,o){if(r.dataQuery){var i=d.getDataItem(e,n,!0),a=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.dataQuery).replace("#",""),s=e.pointers.data.getDataItem(a,o.id);d.removeDataItemRecursively(e,s),d.addSerializedDataItemToPage(e,o.id,i,a)}if(r.designQuery){var u=d.getDesignItem(e,n,!0),c=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.designQuery).replace("#",""),l=e.pointers.data.getDesignItem(c,o.id);d.removeDesignItemRecursively(e,l),d.addSerializedDesignItemToPage(e,o.id,u,c)}}function ne(n,i,a,s,u){var c=u||i,p=n.pointers.components.getPageOfComponent(i),g=n.pointers.components.getPageOfComponent(a);p.id!==g.id&&function n(r,o,i,a){var s=t.constants.DATA_TYPES;var u=r.runtimeConfig.stylesPerPage?t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE:t.constants.COMP_DATA_QUERY_KEYS;function c(n,o){var s=u[o],c=r.pointers.getInnerPointer(n,s);if(s&&r.dal.full.isExist(c)){var p=t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(c.id)?r.dal.get:r.dal.full.get,g=p(c).replace("#",""),f=r.pointers.data.getItem(o,g,a.id);f.useOriginalLanguage=!0,function t(n,r,o,i){var a=r&&n.dal.full.get(r);if(a&&l.canMoveDataItemToAnotherPage(a,i)){var s=n.pointers.data.getPageIdOfData(r);d.executeForDataItemRefs(i,a,function(r){if(e.isString(r)){var a=n.pointers.data.getItem(i,r.replace("#",""),s);t(n,a,o,i)}}),n.dal.full.remove(r);var u=n.pointers.data.getItem(i,r.id,o);n.dal.full.set(u,a)}}(r,f,i.id,o)}}e.forEach(s,function(e){c(o,e)});var p=r.pointers.page.getPageTranslations(a.id,r.siteAPI.isExperimentOpen.bind(r.siteAPI));var g=r.dal.full.get(p);var f=r.pointers.getInnerPointer(o,"dataQuery");if(r.dal.full.isExist(f)){var m=r.dal.full.get(f).replace("#","");e.forEach(g,function(e,t){var n=r.pointers.multilingualTranslations.translationDataItem(a.id,t,m);if(r.dal.full.isExist(n)){var o=r.dal.full.get(n),s=r.pointers.multilingualTranslations.translationDataItem(i.id,t,m);r.dal.fullJsonDal.remove(n),r.dal.fullJsonDal.set(s,o)}}),r.siteDataAPI.createDisplayedPages()}!function(){var t=r.pointers.componentStructure.getModesOverrides(o);if(t&&r.dal.full.isExist(t)){var n=r.dal.full.get(t);e.forEach(n,function(e,n){var o=r.pointers.getInnerPointer(t,n);c(o,s.design),c(o,s.prop)})}}();var v=r.pointers.full.components.getChildren(o);var y=r.pointers.components.getChildren(o);var E=e.unionBy(v,y,function(e){return e.id});e.forEach(E,function(e){n(r,e,i,a)})}(n,i,g,p);var f=n.pointers.components.getChildrenRecursively(i),m=n.dal.full.get(i),v=n.dal.get(i),y=G(i,a),E=z(i,a),I=Y(n,i,a);I?(te(n,i,v,g),$(n,i),ee(n,i,a,g.id,f)):y?(te(n,i,v,g),$(n,i)):E&&ee(n,i,a,g.id,f);var S=r.getNewIndex(n,i,a,s);n.dal.full.remove(i),(y||E||I)&&A.removeComponentByDesktopComp(n,i,!0);var h=n.pointers.full.components.getChildrenContainer(a),P=n.pointers.getOriginalPointerFromInner(h),T=t.displayedOnlyStructureUtil.getRepeaterTemplateId(c.id);v="bolt"===n.runtimeConfig.viewerName?t.displayedOnlyStructureUtil.getOriginalStructure(m):t.displayedOnlyStructureUtil.getOriginalStructure(v);var O=o.adjustModesToNewContainer(n.pointers,n.dal.fullJsonDal,n.dal.displayedJsonDal,P,e.assign(m,e.omit(v,["components","modes","parent","id","componentType","skin"]),{id:T}));n.dal.full.push(h,O,c,S)}function re(e,t){return!!ie(e,t)}function oe(e,n){return t.dockUtils.isHorizontalDockToScreen(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))}function ie(e,t){var n=e.pointers.getInnerPointer(t,["layout","docked"]);return e.dal.get(n)}function ae(t,n){if(re(t,n)){var r=E.getPositionAndSize(t,n),o=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(o);e.assign(i,r),delete i.docked,t.dal.set(o,i)}}function se(e,t,n){var r=e.pointers.getInnerPointer(t,"layout"),o=e.dal.get(r),i=I.getValidLayoutToUpdate(e,t,{docked:n}),a=s.getType(e,t);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,a,[e,t,i,V,!1,o]),f.constrainByDockingLimits(i),e.dal.set(r,i),M(e,t)&&b(e,t),m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,a,[e,t,i,V,!1,o]),U(e,t)}return{initialize:function(t){g.initialize(t);var n=S.createInitialGapMap(t);e.some(n,function(e){return e>0})&&t.siteAPI.reportBI(h.SITE_GAPS_MAP,{above_header:n.aboveHeader,above_page:n.abovePagesContainer,above_footer:n.aboveFooter})},getDockedStyle:function(e,n){return t.dockUtils.applyDockedStyleWithMargins(n,{width:n.width,height:n.height},e.siteAPI.getPageMargins(),e.siteAPI.getScreenWidth(),e.siteAPI.getSiteWidth(),e.siteAPI.getSiteX())},unDock:function(e,t){ae(e,t),U(e,t)},updateDock:se,setDock:function(e,t,n){ae(e,t),se(e,t,n)},getDock:ie,isHorizontallyStretchedToScreen:oe,isHorizontallyStretchedToScreenByStructure:function(e,n){return t.dockUtils.isHorizontalDockToScreen(n.layout)},getPositionAndSize:l.getPositionAndSize,updateCompLayout:V,getProportionStructure:function(t,n,r){var o=function t(n,r){var o,i,a=n.pointers.components.getChildren(r),s=n.pointers.components.getParent(r),u=l.getComponentLayout(n,s),c=l.getComponentLayout(n,r);return{component:r,proportions:(i=u,{x:(o=c).x/i.width,y:o.y/i.height,width:o.width/i.width,height:o.height/i.height}),children:e.map(a,function(e){return t(n,e)})}}(t,n);return f.addCompMinLayout(t,o,r),o},updateCompLayoutAndAdjustLayout:W,updateAndPreserveProportions:function t(n,r,o,i){var u=a.public.isIgnoreChildrenOnProportionalResize(n,o.component),c=a.public.enforceMaxDimensionsOnProportionalResize(n,o.component),p=o.children,d=n.dal.get(n.pointers.getInnerPointer(o.component,"layout"));f.constrainProportionalResize(n,o,r,i,c),f.constrainsByContainer(n,o.component,r,d,!0),e.isArray(u)&&(p=l.getChildrenToPreserveProportionsByType(n,a,p,u)),!0===u||e.isEmpty(p)||e.forEach(p,function(o){var i,a,s,u=(i=r,a=o.proportions,s={x:i.width*a.x,y:i.height*a.y,width:i.width*a.width,height:i.height*a.height},s=e(s).pickBy(e.isFinite).mapValues(Math.round).value());t(n,u,o,!1)}),r=e.pick(r,["x","y","width","height"]),function(e,t,n){var r=e.pointers.getInnerPointer(t,"layout"),o=e.dal.get(r);n=F(e,t,n);var i=s.getType(e,t),a=x(!1);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,i,[e,t,n,a,!1,o]);var u=I.getValidLayoutToUpdate(e,t,n);e.dal.set(r,u),m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,i,[e,t,u,V,!1,o])}(n,o.component,r),U(n,o.component)},canSetContainer:function(t,n,r){return e.isEmpty(Z(t,n,r))},setContainer:function(t,n,r,o){!function(t,n,r){var o=Z(t,n,r);if(!e.isEmpty(o))throw new Error(o)}(t,r,o);var a=s.getContainerToAddComponentTo(t,o);J(t,r,a),function(e,t,n){if(p.isFixedPosition(e,t)&&!K(e,t,n)){var r=e.pointers.getInnerPointer(t,"layout.fixedPosition");e.dal.set(r,!1)}}(t,r,a);var u=t.pointers.components.getParent(r),c=s.getType(t,r);return m.executeHook(m.HOOKS.CHANGE_PARENT.BEFORE,c,[t,r,o]),q(t,o,r),ne(t,r,a,void 0,n),m.executeHook(m.HOOKS.CHANGE_PARENT.AFTER,c,[t,r,o]),i.updateAnchors(t,r,u),n},getNewComponentPointerAfterReparent:function(n,r,o){var i=e.clone(r);if(Y(n,r,o)){var a=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id),s=t.displayedOnlyStructureUtil.getRepeaterItemId(o.id);i.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(a,s)}else if(G(r,o))i.id=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id);else if(z(r,o)){var u=t.displayedOnlyStructureUtil.getRepeaterItemId(o.id);i.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(r.id,u)}var c=n.pointers.components.getViewMode(o);return n.pointers.components.getUnattached(i.id,c)},isShowOnAllPages:function(e,t){return e.pointers.components.isInMasterPage(t)&&!X(e,t)},isShowOnSomePages:X,getCompLayoutRelativeToStructure:p.getCompLayoutRelativeToStructure,getCompLayoutRelativeToScreen:p.getCompLayoutRelativeToScreen,getCompLayoutRelativeToScreenConsideringScroll:p.getCompLayoutRelativeToScreenConsideringScroll,addCompToContainer:ne,isFixedPosition:p.isFixedPosition,isAncestorFixedPosition:function(e,t){var n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!p.isFixedPosition(e,n));return!0},isRenderedInFixedPosition:p.isRenderedInFixedPosition,isAncestorRenderedInFixedPosition:p.isAncestorRenderedInFixedPosition,getClosestAncestorRenderedInFixedPosition:p.getClosestAncestorRenderedInFixedPosition,isShowOnFixedPosition:p.isShowOnFixedPosition,isDocked:re,isDockedToScreen:function(e,n){return t.layout.isDockToScreen(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isRotated:function(e,t){var n=e.pointers.getInnerPointer(t,["layout","rotationInDegrees"]);return 0!==e.dal.get(n)},getDeprecatedMinDimensions:function(){return{width:0,height:0}},getSiteHeight:function(e){var n=e.siteAPI.getSiteMeasureMap();if(n){var r=e.siteAPI.getCurrentPopupId();if(r)return n.height[r];var o=e.pointers.general.getRenderFlag("extraSiteHeight");return n.height[t.siteConstants.MASTER_PAGE_ID]+(e.dal.get(o)||0)}return 0},getSiteWidth:function(e){return e.siteAPI.getSiteWidth()},setScroll:y.setScroll,isScrollingEnabled:function(e){return!e.siteAPI.isSiteScrollingBlocked()},getScroll:y.getScroll,setScrollAndScale:function(e,t,n,r,o,i){var a=e.pointers.general.getRenderFlag("siteScale");e.dal.set(a,r),y.setScrollAndScale(e,t,n,r,o,i)},animateScroll:y.animateScroll,updateFixedPosition:function(t,n,r){var o=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(o);r!==i.fixedPosition&&(!function(t,n,r,o){var i={fixedPosition:r};if(r){var a=p.getCompLayoutRelativeToScreen(t,n);e.assign(i,e.pick(a,["x","y"])),i.y-=y.getScroll(t).y}else{var s=t.pointers.components.getParent(n),u=p.getCompLayoutRelativeToScreen(t,s,!0);e.assign(i,{y:o.y-u.y+y.getScroll(t).y,x:o.x-u.x})}V(t,n,i)}(t,n,r,i),r?w(t,n):N(t,n))},reparentComponentToPage:w,getEffectiveTextDimensions:function(e,t){var n=e.pointers.general.getTextRuntimeOverallBorders(),r=e.pointers.getInnerPointer(n,t.id);if(r)return e.dal.get(r)},updateAspectRatio:b,removeAspectRatio:function(t,n){var r=t.pointers.getInnerPointer(n,"layout"),o=t.dal.get(r);e.isUndefined(o.aspectRatio)||(delete o.aspectRatio,t.dal.set(r,o))},getSiteX:p.getSiteX,isAspectRatioOn:M,shouldUpdateSingleComp:function(e,t){var n=a.getComponentType(e,t);return!D[n]},adjustCompLayoutToNewContainer:J,isHorizontallyStretched:function(e,n){return t.dockUtils.isHorizontallyStretched(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isVerticallyStretched:function(e,n){return t.dockUtils.isVerticallyStretched(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isSimpleLayout:function(t){if(!t)return!0;var n=!0;return e.forOwn(t,function(t,r){var o=_[r];if(e.isUndefined(o)||o!==C&&t!=o)return n=!1,!1}),n},isSiteLayoutMesh:function(e){return R(e).mechanism===t.constants.LAYOUT_MECHANISMS.MESH},migrateToMeshLayout:function(n){var r=n.pointers.getInnerPointer(n.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=n.dal.get(r);n.dal.set(r,e.assign({},o,{mechanism:t.constants.LAYOUT_MECHANISMS.MESH}))}}}()},function(e,t,n){var r,o,i,a,s,u;e.exports=(i=n(0),a=n(1),s=n(5),u={masterPage:"wysiwyg.viewer.components.WSiteStructure"},{YES:"yes",NO:"no",DONT_CARE:"don't care",stripHashIfExists:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e:null;return i.isString(e)?e.replace("#",""):t},getComponentType:function(e,t){if(t){var n=u[t.id];if(n)return n;if(t===r)return o;var i=e.pointers.getInnerPointer(t,"componentType"),a=e.dal.full.get(i)||e.dal.get(i);if(a||e.dal.full.isExist(t))return r=t,o=a,a}throw new Error("non existing component pointer: ".concat(function(e){if(!e)return"(null)";var t="type: ".concat(e.type," id: ").concat(e.id);return"innerPath"in e&&(t+=" inner: ".concat(e.innerPath)),t}(t)))},replaceRuntimeRefWithOriginal:function(e,t){if(!e||!t||!function(e){return s.isOpen("sv_livePreview")&&"appBuilder"!==e.config.origin}(e))return t;var n=a.displayedOnlyStructureUtil.getRepeaterItemId(t.id);if(n&&function(e,t){var n=e.siteAPI.getRuntimeDal().getAllCompsRuntimeData();return i(n).values().map(function(e){return i.get(e,["items"])}).flatten().compact().includes(t)}(e,n)){var r=e.pointers.full.components.getPageOfComponent(t)||e.pointers.components.getPageOfComponent(t);if(r)return e.pointers.full.components.getComponent(a.displayedOnlyStructureUtil.getRepeaterTemplateId(t.id),r)}return t}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d;e.exports=(r=n(44),o=n(163),i=n(269),a=n(270),s=n(271),u=n(28),c=n(272),l=n(273),p=n(274),d=n(88),{PROPERTY_NAMES:r.PROPERTY_NAMES,getProperty:r.getProperty,setProperty:r.setProperty,getRevertibleMetaDataInfo:r.getRevertibleMetaDataInfo,getNonRevertibleMetaDataInfo:r.getNonRevertibleMetaDataInfo,seo:o,social:i,favicon:a,premiumFeatures:s,generalInfo:u,siteName:c,statistics:l,compatibility:p,language:d})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y;e.exports=(r=n(0),o=n(13),i=n(34),a=n(33),s=n(7),u=n(4),c=!1,l=function(e,t,n){return(i.getAppData(e,t).widgets||{})[n]||null},p=function(e){var t=e.published,n=e.santaEditorPublished;return t||n},d=function(e,t){var n=t&&t.widgets;return n=r.filter(n,function(e){return r.isNil(e.appPage)}),c||(n=r.filter(n,p)),n},g=function(e,t){var n=t&&t.widgets;return n=r.filter(n,function(e){return!r.isNil(e.appPage)}),c||(n=r.filter(n,p)),n},f=function(e){return!r.isUndefined(e)&&!r.isUndefined(e.appType)&&"Hybrid"===e.appType},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appType;return"Hybrid"===t||"Editor"===t},v=function(e){return e.permissions&&r.isBoolean(e.permissions.revoked)&&e.permissions.revoked},y=function(e,t){var n=g(0,t);return r.find(n,function(e){return!e.appPage.hidden})},{registerAppData:i.registerAppData,getAppData:i.getAppData,getAppDataByAppDefinitionId:i.getAppDataByAppDefinitionId,getAppsData:i.getAppsData,filterApps:function(e){return r.pickBy(e,function(e){return a.isTpaByAppType(e.type)&&(r.isUndefined(e.appType)||m(e))})},getLargestApplicationId:function(e){var t=i.getAppsData(e);return r(t).keys().map(function(e){return parseInt(e,10)}).compact().concat(0).max()},getWidgetData:l,getExtensionsWidgets:d,isHybridAppAndEditorPartNotDismissed:function(e){return f(e)&&(r.isUndefined(e.editorPartDismissed)||!1===e.editorPartDismissed)},isHybridApp:function(e,t){var n=t&&i.getAppData(e,t);return f(n)},isHybridAppFromAppData:f,isDashboardAppOnly:function(e){return!r.isUndefined(e)&&!r.isUndefined(e.appType)&&"Dashboard"===e.appType},isEditorOrHybridApp:m,setAppsData:function(e,t){o.setProperty(e,o.PROPERTY_NAMES.CLIENT_SPEC_MAP,t)},isAppPermissionsIsRevoked:v,isAppActive:function(e){return!r.isUndefined(e)&&!v(e)&&"REMOVE"!==e.pendingAction},isAppAutoRevoked:function(e){return!r.has(e,"appFields.platform.studio")},isPremiumApp:function(e,t){var n=i.getAppData(e,t);return!!n&&!!n.vendorProductId},hasPremiumOffering:function(e,t){var n=i.getAppData(e,t);return!!n&&r.size(n.vendorProducts)>0},hasHiddenPages:function(e,t){var n=i.getAppData(e,t),o=g(0,n),a=r.filter(o,"appPage.hidden");return r.size(a)>0},getAppSections:g,getAppSectionsToInstall:function(e,t){var n=i.getAppData(e,t),o=g(0,n);return o=r.filter(o,{autoAddToSite:!0}),r.sortBy(o,"appPage.order")},widgetsToAutoAddToSite:function(e,t){var n=d(0,t);return r.filter(n,"autoAddToSite")},getWidgetDataFromTPAPageId:function(e,t,n){var o=g(0,i.getAppDataByAppDefinitionId(e,t));return r.find(o,{appPage:{id:n}})},getWidgetDataFromTPAWidgetId:function(e,t,n){var o=d(0,i.getAppDataByAppDefinitionId(e,t));return r.find(o,{tpaWidgetId:n})},setIsInDevMode:function(e){c=e},isWidgetHasMobileUrl:function(e,t,n){if(!t||!n)return!1;var o=l(e,t,n);if(o&&o.mobileUrl){var i=o.mobileUrl,a=o.mobilePublished&&r.isBoolean(o.mobilePublished)&&o.mobilePublished;return!r.isEmpty(i)&&(c||a)}return!1},isAppPermissionsIsGranted:function(e){return e.permissions&&r.isBoolean(e.permissions.revoked)&&!e.permissions.revoked},hasSections:function(e,t){var n=g(0,t);return!r.isEmpty(n)},isAppProvisionedOnServer:function(e,t){return!i.getAppData(e,t).notProvisioned},hasMainSection:function(e,t){var n=g(0,t);return r.some(n,function(e){return!e.appPage.hidden})},getMainSectionWidgetData:y,getMainSectionWidgetDataFromApplicationId:function(e,t){return y(0,i.getAppData(e,t))},getSectionsWidgetIdsToPreFetch:function(e){return r(e.widgets).filter("preFetch").filter("appPage").filter(p).map("widgetId").value()},isDemoAppAfterProvision:function(e){var t=r.get(e,"instance");if(!r.isEmpty(t)){var n=e.instance.split("."),o=JSON.parse(atob(n[1]));return!r.isEmpty(o.originInstanceId)}},isSuperAppByCompId:function(e,t){var n=s.getComponentById(e,t),o=u.data.get(e,n),a=r.get(o,"applicationId");return i.getAppData(e,a).isWixTPA},getDependentApps:function(){return[]},hasEditorPlatformPart:function(e){return!!r.get(e,"appFields.platform.editorScriptUrl")},isPageMarkedAsAutoAddToSite:function(e,t){var n=i.getAppData(e,r.get(t,"tpaApplicationId")),o=g(0,n),a=r.find(o,{appPage:{id:r.get(t,"tpaPageId")}});return r.get(a,"autoAddToSite")},isPageMarkedAsShouldDeleteAppWhenDeleted:function(e,t){var n=i.getAppData(e,r.get(t,"tpaApplicationId")),o=g(0,n),a=r.find(o,{appPage:{id:r.get(t,"tpaPageId")}});return r.get(a,"componentFields.shouldDeleteAppWhenDeleted")},computeHidePage:function(e,t,n){var o=r.defaultTo(t,r.get(e,"componentFields.hiddenInPagesPanel"));return o=r.defaultTo(o,n)},isMultiSectionInstanceEnabled:function(e,t){if(!t)return!1;var n=r.get(e,["widgets",t]);return r.get(n,"appPage.multiInstanceEnabled")}})},function(e,t,n){var r;e.exports=(r=n(2),{getViewMode:function(e){return e.siteAPI.isMobileView()?r.VIEW_MODES.MOBILE:r.VIEW_MODES.DESKTOP},isMobileView:function(e){return e.siteAPI.isMobileView()}})},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(2),i=n(5),a=n(1),s=n(12),u=function(e){return!e||e.runtimeConfig.supportMobile},c=s.stripHashIfExists,{isMobileSupported:u,syncMobileAndDesktopStyleId:function(e,t,n,r){if(u(e)){var i=r?e.dal.full:e.dal,a=r?e.pointers.full:e.pointers,s=t.type===o.VIEW_MODES.DESKTOP?a.components.getMobilePointer(t):a.components.getDesktopPointer(t);if(i.isExist(s)){var c=e.pointers.getInnerPointer(s,"styleId");i.set(c,n)}}},syncMobileAndDesktopSkin:function(e,t,n){if(u(e)){var r=e.pointers.components.getMobilePointer(t),o=e.pointers.getInnerPointer(r,"skin");e.dal.get(o)&&e.dal.set(o,n)}},deleteForkedData:function(e,t,n,o){if(u(e)){var i=e.pointers.components.getMobilePointer(t);if(e.dal.isExist(i)){var a=!("bolt"===e.runtimeConfig.viewerName||r.isEqual(n.getDesignItemPointer(e,t),n.getDesignItemPointer(e,i))),s=o.isMobileComponentPropertiesSplit(e,i);a&&n.deleteDesignItem(e,i),s&&n.deletePropertiesItem(e,i)}}},serializeMobileStructure:function(e,t,n,a,s,l,p,d,g,f){var m=f.componentStructureInfo,v=f.mobileConversionFacade,y=f.dataModel;if(u(e)){var E=r.get(n,["mobileStructure","propertyQuery"]);if(E)!function(e,t,n,i,a){if(a!==r.get(t,["propertyQuery"])){var s=c(a),u=e.pointers.data.getPropertyItem(s,n);t.mobileStructure.props=i.serializeDataItem(e,o.DATA_TYPES.prop,u,!1),delete t.mobileStructure.propertyQuery}}(e,n,a,y,E);else{var I=e.pointers.components.getMobilePointer(t);if(i.isOpen("presetUploaderAddOn"))m.isExist(e,I)&&(n.mobileStructure=g(e,I,null,null,l,{ignoreChildren:!0,maintainIdentifiers:!1}));else if(!e.pointers.components.isPage(t)){var S=s[t.id];if(S&&!S.isCustomPreset)return d(e,S,void 0,p,a,l),void(n.mobileStructure={layout:r.cloneDeep(S.layout),props:r.cloneDeep(S.props)});p.shouldAddMobilePresets&&v.createMobilePreset(e,a,t,n)}}}},linkMobileComponentToDesktopDesignItem:function(e,t,n){if(u(e)&&t.type!==a.constants.VIEW_MODES.MOBILE){var o,i,s,c,l,p=(i=e.pointers.componentStructure.getModesOverrides(t),s=e.dal.full.isExist(i)&&e.dal.full.get(i),c=r.map(s,"designQuery"),l=e.pointers.getInnerPointer(t,"designQuery"),o=a.displayedOnlyStructureUtil.isDisplayedOnlyComponent(t.id)?e.dal.get(l):e.dal.full.get(l),c.concat(o)),d=e.pointers.components.getMobilePointer(t);if(e.dal.isExist(d)){var g=e.pointers.getInnerPointer(d,"designQuery"),f=e.dal.get(g);r.includes(p,f)||e.dal.set(g,"#".concat(n))}}},removeComponentByDesktopComp:function(e,t,n){if(u(e)){var r=n?e.pointers.full:e.pointers,o=n?e.dal.full:e.dal,i=r.components.getMobilePointer(t);o.isExist(i)&&o.remove(i)}},syncDockData:function(e,t,n,r){u(e)&&r.setDock(e,e.pointers.components.getMobilePointer(t),n)},prepareComponentStructureForMobileAlgorithm:function(e,t,n){if(u(e)){var r=t.getCompMobileMode(e,n);t.activateComponentMode(e,n,r.modeId);var o=e.pointers.components.getMobilePointer(n);if(e.dal.isExist(o)){var i=e.dal.get(e.pointers.getInnerPointer(n,"designQuery"));e.dal.set(e.pointers.getInnerPointer(o,"designQuery"),i)}}},setMobileHiddenComponentListIfNeeded:function(e,t,n,o,i,a){if(u(e)&&i.mobileComponents){var s=a.hiddenComponents.get(e,t),c=r(o).pick(s).values().value();a.hiddenComponents.set(e,n,c)}},serializeMobileChildren:function(e,t,n,i,a,s,c,l){if(u(e)&&e.pointers.page.isExists(t.id)){var p=e.pointers.components.getPage(n,o.VIEW_MODES.MOBILE),d=e.pointers.full.components.getChildren(p);t.mobileComponents=r.map(d,function(t){return l(e,t,null,a,s,i,c)})}},getChildComponent:function(e,t){return u(e)&&t.mobileComponents&&!r.isEmpty(t.mobileComponents)?t.mobileComponents:[]},resetMobileComponentsForClonedComp:function(e,t,n){u(e)&&t.mobileComponents&&(n.mobileComponents=[])},setMobileViewMode:function(e,t){u(e)&&t.executeHook(t.HOOKS.SWITCH_VIEW_MODE.MOBILE)},setMobileComponentChildrenDefinition:function(e,t,n,r,o,i,a){if(u(e)){var s=t.mobileComponents;if(s){var c=e.pointers.components.getPage(n,"MOBILE");a(e,s,c,r,o,i)}}},getViewMode:function(e,t,n){return u(e)?t||n.getViewMode(e):o.VIEW_MODES.DESKTOP},getSupportedViewModes:function(e){return u(e)?[o.VIEW_MODES.DESKTOP,o.VIEW_MODES.MOBILE]:[o.VIEW_MODES.DESKTOP]},wPhoto:{removeMobileCropOverrideIfNeeded:function(e,t,n,o){var i=o.dataModel,a=o.component;if(u(e)){var s=e.pointers.components.getMobilePointer(t);if(n&&a.isExist(e,s)){var c=i.getPropertiesItem(e,s);i.setPropertiesItem(e,s,r.assign(c,{overrideCrop:null}))}}}},page:{initMobileComponents:function(e,t){if(u(e)){var n=e.pointers.getInnerPointer(t,"mobileComponents");e.dal.full.isExist(n)||e.dal.full.set(n,[])}}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(426),r=n(74),o=n(8),i=n(121),a=n(2),s=n(9),u=n(20),c=n(40),l=n(16),p=n(22),d=n(39),g=n(5);function f(t,n,r){var i=null;t&&n&&(i=(r?t.dal.full:t.dal).get(t.pointers.getInnerPointer(n,"styleId")),i=function(t,n,r,i){if(i){if(!g.isOpen("fixStyleIdForMissingStyle"))return i;var s=!t.runtimeConfig.stylesPerPage||c(i)?a.MASTER_PAGE_ID:e.get(t.pointers.components.getPageOfComponent(n),"id"),l=t.pointers.data.getThemeItem(i,s);if(!t.dal.isExist(l)){var f=o.getComponentType(t,n),m=u.services.schemasService.getDefinition(f).styles,v=e.keys(m).sort()[0];y(t,n,v,e.noop,r);var E={dsOrigin:t.config.origin,componentType:f,componentId:n.id,style:i};return p.event(t,d.FIX_MISSING_COMPONENT_STYLE,E),v}return i}}(t,n,r,i));return i}var m=function(e,t,n,r){var i=(r?e.pointers.full:e.pointers).components.getPageOfComponent(t).id,a=n||_(e,t,r);a.componentClassName=a.componentClassName||o.getComponentType(e,t);var u=s.styles.internal.fork(e,a,i,r);return y(e,t,u,void 0,r),u},v=function(e,t,n){return m(e,t,n,!1)};function y(e,t,n,r,u){var c=a.MASTER_PAGE_ID;if(e.runtimeConfig.stylesPerPage){var p=u?e.pointers.full:e.pointers;c=p.components.getPageOfComponent(t).id}var d=s.styles.internal.get(e,n,c,u);d||(n=I(e,n,o.getComponentType(e,t)),d=s.styles.internal.get(e,n,a.MASTER_PAGE_ID,u));var g=i.validateSetStyleIdParams(e,n,c);if(!g.success)throw new Error(g.error);l.syncMobileAndDesktopStyleId(e,t,n,u),(u?e.dal.full:e.dal).set(e.pointers.getInnerPointer(t,"styleId"),n),e.setOperationsQueue.executeAfterCurrentOperationDone(function(){r&&r({styleProperties:s.styles.internal.get(e,n,c,u).style.properties}),s.events.onChange.executeListeners({type:"STYLE",values:n})}),h(e,t,d.skin,u)}var E=function(e,t,n,r){return y(e,t,n,r,!1)};function I(e,t,n){var r=u.services.schemasService.getDefinition(n);if(!r)throw new Error("Component of type - ".concat(n," is not listed in componentsDefinitionsMap"));var o=r.styles[t];if(!o)throw new Error("Style id - ".concat(t," is not a known system style id."));var i=function(e,t,n){return{compId:"",componentClassName:n,pageId:"",styleType:"system",type:"TopLevelStyle",skin:t,style:{groups:{},properties:S(e,t),propertiesSource:{}}}}(e,o,n);return s.styles.createAndAddStyleItem(e,i,t,a.MASTER_PAGE_ID)}function S(t,n){return e.mapValues(s.skins.getSkinDefinition(t,n),"defaultValue")}function h(e,t,n,r){var o=e.pointers.getInnerPointer(t,"skin");(r?e.dal.full:e.dal).set(o,n)}function P(t,n){return e.mapValues(n,function(t){return e.isNumber(t)||e.isBoolean(t)||e.isString(t)&&(e.includes(t,"#")||e.includes(t,"rgb"))?"value":/^(font|color)_[0-9]+$/.test(t)?"theme":"value"})}function A(e,t,n,o){T(e,t,n,o,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),r.updateAnchors(e,t)}function T(t,n,r,o,a){var u=i.validateExistingComponent(t,n,a);if(!u.success)throw new Error(u.error);var c,l=D(t,n);if(l)if(c=l.id,"system"===l.styleType)c=v(t,n,r);else{var p=t.pointers.components.getPageOfComponent(n).id;r.componentClassName=r.componentClassName||l.componentClassName,e.set(r,"style.propertiesSource",P(0,r.style.properties)),s.styles.update(t,l.id,r,p)}else c=m(t,n,r,a);t.setOperationsQueue.executeAfterCurrentOperationDone(function(){o&&o({styleProperties:r.style.properties}),s.events.onChange.executeListeners({type:"STYLE",values:c})}),h(t,n,r.skin,a)}function O(e,t){var n=null;if(t){var r=D(e,t);n=r&&r.skin?r.skin:e.dal.get(e.pointers.getInnerPointer(t,"skin"))}return n}function C(e,n){var r=O(e,n);return t.params.getSkinDefaultParams(r)}function _(e,t,n){var r=f(e,t,n);if(r){var o=(n?e.pointers.full:e.pointers).components.getPageOfComponent(t).id;return s.styles.internal.get(e,r,o,n)}return null}var D=function(e,t){return _(e,t,!1)};return{style:{setId:E,getId:function(e,t){return f(e,t,!1)},get:D,setCustom:function(t,n,r,a,u){if(!t.dal.isExist(r))throw new Error("component param does not exist");var c=i.validateComponentCustomStyleParams(t,a,u);if(!c.success)throw new Error(c.error);var l,p,d=r.id,g=o.getComponentType(t,r);if(u)p=P(t,l=u);else if(a)l={},p={};else{var f=D(t,r);l=e.get(f,"style.properties",{}),p=e.get(f,"style.propertiesSource",{})}var m=t.pointers.components.getPageOfComponent(r).id,v={id:n,compId:d,componentClassName:g,pageId:"",styleType:"custom",type:"TopLevelStyle",skin:a||O(t,r),style:{groups:{},properties:l,propertiesSource:p}};s.styles.update(t,n,v,m),E(t,r,n||"")},update:function(e,t,n,r){return A(e,t,n,r,!1)},updateAndAdjustLayout:T,createSystemStyle:I,connectToThemeStyle:function(e,t,n,r){if(!c(n))throw new Error("connectToThemeStyle called with custom style");E(e,t,n,r)},fork:v,internal:{setId:y,getId:f,get:_,fork:m,update:A,generateStylePropertiesSource:P,createComponentStyleDef:function(e,t,n){return{compId:"",componentClassName:n,pageId:"",styleType:a.STYLES.TYPES.CUSTOM,type:a.STYLES.COMPONENT_STYLE,skin:t,style:{groups:{},properties:S(e,t),propertiesSource:{}}}}}},skin:{set:function(e,t,n){var r=i.validateSetSkinParams(e,t,n);if(!r.success)throw new Error(r.error);h(e,t,n)},get:O,getComponentSkinExports:function(e,n){var r=O(e,n);return t.params.getSkinExports(r)},getComponentSkinDefaults:C,getCompSkinParamValue:function(t,n,r){var o=D(t,n).style.properties||{},i=C(t,n);return e.isArray(i[r])&&1===i[r].length?o[i[r]]:i[r]}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=(n(64),n(101)),o=n(6),i=n(130),a=n(36),s=n(2),u=n(4),c=n(7),l=n(17),p=(n(3),n(87)),d=n(29),g=n(21),f=n(186),m=n(30),v=n(15),y=n(131),E=n(96),I=n(41),S=n(472),h=n(134),P=n(14),A=n(5),T=n(67),O=n(16),C=n(19),_=n(79),D=n(187),w="wysiwyg.viewer.components.PopupContainer";function b(t,n,r,o,i){var a=c.getComponentByType(t,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",n),s=n.id;e.forEach(a,function(n){!function(t,n,r,o){var i,a=e.findKey(o,function(e){return e===r}),s=u.data.get(t,n);i=a?function(t,n){return e.compact(e.map(t,function(e){return n[e]}).concat(e.includes(t,"PAGE_TOP_ANCHOR")?"PAGE_TOP_ANCHOR":null))}(s.hiddenAnchorIds[a],o):[];s.hiddenAnchorIds[r]=i,u.data.update(t,n,s)}(t,n,s,i)})}function M(t){if(!e.isString(t))throw Error("pageId to remove should be a string ".concat(t));return t.replace("#","")}function R(n,r,i,a){var c,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=r.id,f=h.getBlankPageStructure(n,d);!function(e,t){var n=e.pointers.components.getPage(e.siteAPI.getPrimaryPageId(),s.VIEW_MODES.DESKTOP),r=l.style.get(e,n),o=l.skin.get(e,n);t.style=r,t.skin=o}(n,f),a&&(c=e.cloneDeep(a),e.defaultsDeep(c,f)),(c=c||f).data.title=i||c.data.title;var m=c.data;m.id=d,g.addPageData(n,d,m,p);var v,I,S,P,A,T,C=(v=n,I=c.data.title,S=c.data.pageUriSEO,P=v.dal,A=v.pointers,(T={data:{component_properties:{},document_data:{},theme_data:{},behaviors_data:{},connections_data:{},mobile_hints:{},design_data:{}},pageUriSEO:S,structure:{},title:I}).translations=t.multilingual.generatePageTranslationsData({dal:P,pointers:A}),T),_=n.pointers.page.getNewPagePointer(d);n.dal.full.set(_,C);var D=c.mobileComponents&&{};u.setComponent(n,r,null,c,d,!0,D),E.markPageAsInitialized(n,d),o.executeHook(o.HOOKS.ADD_PAGE.AFTER,c.componentType,[n,r]);var w=n.pointers.components.getDesktopPointer(_);o.executeHook(o.HOOKS.ADD_ROOT.AFTER,c.componentType,[n,w]),O.setMobileHiddenComponentListIfNeeded(n,c.id,r.id,D,y)}function N(e,t){var n=M(t),r=F(e,n);if(!r.success)throw new Error(r.description);var o=e.pointers.components.getPage(n,s.VIEW_MODES.DESKTOP);u.validateRemovalInternal(e,o)}function x(e,t,n){var r=H(e,t),o=e.pointers.data.getDataItemFromMaster(t);n=n||!1;var i=u.serialize(e,r,o,!1,n,!1,void 0,!0);return i.data=g.getPageDataWithoutIds(e,t,!0),i}function L(e,t,n){var r=H(e,t);return u.isContainsCompWithType(e,r,n)}function B(t,n){var r=function(e){return"string"==typeof e?{pageId:e}:e}(n);return r.pageId&&t.siteAPI.getFocusedRootId()!==r.pageId||function(t,n){var r=t.siteAPI.getRootNavigationInfo();return!e.isEqual(n.routerDefinition,r.routerDefinition)||n.innerRoute!==r.innerRoute}(t,n)}function k(t,n,r){var i=function(t,n){if(e.isString(n))return{pageId:n};if("PageLink"===n.type){var r=g.getPageData(t,n.pageId);return{pageId:r.id,title:r.pageUriSEO}}if("DynamicPageLink"===n.type){var o=T.get.byId(t,n.routerId);if(!o)return;var i=n.innerRoute;return{routerDefinition:o,innerRoute:i,pageAdditionalData:i&&"/"!==i?"".concat(o.prefix,"/").concat(i):o.prefix}}}(t,n);if(i){if(i.pageId&&!i.routerDefinition){var a=T.getRouterDataForPageIfExist(t,i.pageId);a&&(i=e.assign(i,{routerDefinition:a}))}B(t,i)?(A.isOpen("ds_updateAnchorsOnlyOnNavigation")&&function(t,n){var r=t.siteDataAPI,o=t.siteDataAPI.siteData.anchorsMap,i=t.siteDataAPI.siteData.getViewMode();e.has(o,[n,i])||r.anchors.createPageAnchors(n)}(t,n),r&&t.setOperationsQueue.waitForChangesApplied(r),t.siteAPI.navigateToPage(i),o.executeHook(o.HOOKS.PAGE.AFTER_NAVIGATE_TO_PAGE,n,[t])):r&&r()}}function F(e,t){var n=M(t);return p.isMasterPage(e,n)?{success:!1,description:"It is not allowed to remove masterPage"}:g.doesPageExist(e,n)?p.isHomepage(e,n)?{success:!1,description:"It is not allowed to delete homePage (".concat(n,"), please set a new page as homePage (page.setAsHomepage) and try again")}:e.siteAPI.getPrimaryPageId()===n?{success:!1,description:"It is not allowed to delete current page (".concat(t,"), please navigate to another page (page.navigateTo) and try again")}:e.siteAPI.getCurrentPopupId()===n?{success:!1,description:"It is not allowed to delete open popup (".concat(n,"), please close the popoup nand try again")}:{success:!0,description:""}:{success:!1,description:'Page with id "'.concat(n,'" does not exist')}}function U(t,n){var r=M(n),o=g.getPageData(t,r),i=L(t,r,[m.COMP_TYPES.TPA_MULTI_SECTION,m.COMP_TYPES.TPA_SECTION]),a=o&&o.appInnerID&&P.getAppData(t,o.appInnerID)&&"blog"===P.getAppData(t,o.appInnerID).packageName;return p.isMasterPage(t,r)?{success:!1,description:"It is not allowed to duplicate masterPage"}:g.doesPageExist(t,r)?i?{success:!1,description:"It is not allowed to duplicate TPA pages"}:a?{success:!1,description:"It is not allowed to duplicate Blog pages"}:"AppPage"===e.get(o,"type")?{success:!1,description:"It is not allowed to duplicate Old blog page"}:{success:!0,description:""}:{success:!1,description:'Page with id "'.concat(r,'" does not exist')}}function H(e,t){return e.pointers.components.getPage(t,v.getViewMode(e))}function V(e,t){return S.isPageProtected(e,t)}function W(e,t,n,r,o){return S.duplicatePagePassword(e,t,n,r,o)}o.registerHook(o.HOOKS.ADD.AFTER,b,"mobile.core.components.Page");var G={shouldDelayDeletion:function(e,t){var n=e.pointers.components.getPage(t,v.getViewMode(e));return u.shouldDelayDeletion(e,n)},initialize:function(n){try{t.loggingUtils.performance.start(t.loggingUtils.performanceMetrics.PAGE.INITIALIZE),C.utils.fedopsLogger.interactionStarted(s.INTERACTIONS.PAGE.INITIALIZE);var r=g.getPagesList(n);e.forEach(r,function(t){var r=g.getPageData(n,t);(function(t){return!!e.get(t,"pageSecurity.passwordDigest")})(r)&&(function(e,t){S.setPagePassword(e,t.id,{value:t.pageSecurity.passwordDigest,isHashed:!0})}(n,r),function(e,t){g.setPageData(e,t.id,{pageSecurity:{requireLogin:!1,dialogLanguage:t.pageSecurity.dialogLanguage}})}(n,r)),function(t,n){if(n.tpaApplicationId>0&&n.tpaPageId){var r=P.getAppData(t,n.tpaApplicationId),o=P.getWidgetDataFromTPAPageId(t,r.appDefinitionId,n.tpaPageId);e.isBoolean(e.get(o,"appPage.indexable"))&&e.get(o,"appPage.indexable")!==n.indexable&&n.indexable&&g.setPageData(t,n.id,{indexable:e.get(o,"appPage.indexable")})}}(n,r)}),C.utils.fedopsLogger.interactionEnded(s.INTERACTIONS.PAGE.INITIALIZE),t.loggingUtils.performance.finish(t.loggingUtils.performanceMetrics.PAGE.INITIALIZE)}catch(e){C.utils.fedopsLogger.captureError(e,{tags:{pageInitializationFailed:!0}})}},getPageBottomByComponents:function(e,t){return e.siteAPI.getSiteMeasureMap().pageBottomByComponents[t]},getPageIdToAdd:function(e){var n=e.pointers.page.getAllPagesPointer(),r=e.pointers.general.getDeletedPagesMapPointer(),o=e.dal.getKeys(n).concat(e.dal.getKeys(r)),i=t.guidUtils.generateNewPageId(o);return e.pointers.components.getNewPage(i)},add:R,duplicate:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=M(n),s=e.pointers.page.getPagePointer(a);if(!s)throw new Error("page does not exist ".concat(n));var u=U(e,n);if(!u.success)throw new Error(u.description);var c=e.dal.get(e.pointers.getInnerPointer(s,"title"));I.runPartialConversionAllPages(e);var l=x(e,a,!0);l.data.pageUriSEO=g.getValidPageUriSEO(e,"",l.data.pageUriSEO),o.executeHook(o.HOOKS.DUPLICATE_ROOT.BEFORE,l.componentType,[e,l]),R(e,t,c,l,r),g.copyTranslationData(e,a,t.id,d.isPopup(e,a)),V(e,n)&&W(e,t.id,n),o.executeHook(o.HOOKS.DUPLICATE_ROOT.AFTER,l.componentType,[e,t.id,a,i])},remove:function(t,n,r){r=r||e.noop;var o=M(n),a=t.pointers.components.getPage(o,s.VIEW_MODES.DESKTOP);u.deleteComponent(t,a),t.siteDataAPI.removeResolvedDataMapForPage(o),function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),r=e.pointers.page.getPagePointer(t);g.removePageData(e,n),e.dal.full.remove(r),function(e,t){var n=e.pointers.general.getDeletedPagesMapPointer(),r={};r[t]=!0,e.dal.merge(n,r)}(e,t)}(t,o),function(e,t){var n=i.getPagesGroupByPageId(e,t);n&&i.removePageFromPagesGroup(e,n,t)}(t,o),r(t)},validatePageRemoval:function(e,t){N(e,t),e.setOperationsQueue.asyncPreDataManipulationComplete()},validatePageRemovalInternal:N,navigateTo:k,scrollToComponent:function(e,t,n){e.siteAPI.scrollToComponent(t,n)},navigateToPageAndScrollToAnchor:function(e,n,r,o){var i=t.scrollAnchors.isSpecialAnchor(r),a=e.siteAPI.scrollToAnchor.bind(e.siteAPI,r,o);i?a():k(e,n,a)},willNavigateNavigateAndScroll:function(e,n,r){return!t.scrollAnchors.isSpecialAnchor(r)&&B(e,n)},willNavigateNavigateToPage:B,isRemovable:function(e,t){return F(e,t).success},isDuplicable:function(e,t){return U(e,t).success},isLandingPage:function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),r=e.pointers.getInnerPointer(n,"isLandingPage"),o=e.pointers.getInnerPointer(n,"isMobileLandingPage"),i=e.siteAPI.isMobileView(),a=e.dal.isExist(r)&&e.dal.get(r),s=i&&e.dal.isExist(o)&&e.dal.get(o),u=e.pointers.getInnerPointer(n,"metaData"),c=e.dal.isExist(u)&&e.dal.get(u);return c&&"2.0"===c.schemaVersion?i?s:a:a||s},isPageContainsCompWithType:L,getSocialUrl:function(e,t,n){var r=e.pointers.general.getPublicUrl(),o=e.dal.get(r);return n?p.getMainPageUrl(e,t,o):p.getCurrentUrl(e,t,o)},getPageUrl:function(e,t,n,r){var o=g.getPageUriSEO(e,t);return n=n||e.dal.get(e.pointers.general.getPublicUrl()),p.getPageUrl(e,{pageId:t,title:o},r,n)},getPageTitle:function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),r=e.pointers.getInnerPointer(n,"title");return e.dal.get(r)||""},getPage:H,getPageIdList:g.getPagesList,getPagesDataItems:g.getPagesDataItems,getLayout:function(e,t){var n=H(e,t),r=u.layout.get(e,n),o=e.siteAPI.getSiteWidth();return r.width=o,r},getReference:H,serializePage:x,homePage:{set:function(e,t){if(t=M(t),!e.pointers.page.isExists(t))throw Error("pageId ".concat(t," does not exist. cannot set as home page."));if(d.isPopup(e,t))throw Error("Can't set popup page as home page.");var n=e.pointers.data.getDataItemFromMaster(s.MASTER_PAGE_ID),r=e.pointers.getInnerPointer(n,"mainPage"),o=e.pointers.getInnerPointer(n,"mainPageId");e.dal.set(r,"#".concat(t)),e.dal.set(o,t)},get:p.getHomepageId},data:{set:g.setPageData,get:g.getPageData,update:function(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.pointers.components.getPage(n,v.getViewMode(t)),s=t.dal.get(a),u=s.managingAppDefId,c=s.title;g.setPageData(t,n,o,i);var l=e.get(o,"title");if(c!==l){var p=T.getRouterDataForPageIfExist(t,n);if(u||p){var d=e.get(p,"appDefinitionId",u),f=_.getAppDataByAppDefId(t,d).applicationId;D.notifyApplication(t,f,r.factory.pageRenamed({title:l}))}}}},style:{setId:function(e,t,n){var r=H(e,t);l.style.setId(e,r,n)},connectToThemeStyle:function(e,t,n){var r=H(e,t);l.style.connectToThemeStyle(e,r,n)},getId:function(e,t){var n=H(e,t);return l.style.getId(e,n)},setCustom:function(e,t,n,r,o,i){var a=H(e,n);l.style.setCustom(e,t,a,r,o,i)}},background:{get:g.getBgDataItem,update:g.updateBgDataItem},getPageAnchors:function(n,r,o){var i=n.pointers.data.getDataItemsWithPredicate({type:"Anchor"},r).map(n.dal.get),a=t.scrollAnchors.getPageTopAnchor(r,o);i.push(a);var s=n.pointers.components.getPage(r,"DESKTOP"),u=e.keyBy(n.pointers.components.getChildren(s),"id");return e.sortBy(i,function(e){var r=t.scrollAnchors.SCROLL_PAGE_TOP_Y_POS,o=u[e.compId];if(o){var i=n.pointers.getInnerPointer(o,"layout.y");r=n.dal.get(i)}return r})},permissions:{hasPassword:V,updatePassword:function(n,r,o){e.isObject(o)?(t.log.warnDeprecation("pages.permissions.updatePassword: Pass password as a string and not an object"),S.setPagePassword(n,r,o)):S.setPagePassword(n,r,{value:o,isHashed:!1})},removePassword:function(e,t){S.setPageToNoRestriction(e,t)},isPagesProtectionOnServerOn:function(e){return t.log.warnDeprecation("pages.permissions.isPagesProtectionOnServerOn: Use true instead of calling this function, because it always returns true"),S.isPagesProtectionOnServerOn(e)},duplicatePagePassword:W},properties:{get:f.getPageProperties,update:f.updatePageProperties}};return G.popupPages={open:k,close:function(e,t){var n=e.siteAPI.getRootNavigationInfo();n&&G.navigateTo(e,n.pageId,t)},getCurrentPopupId:function(e){return e.siteAPI.getCurrentPopupId()},getCurrentMainContainer:function(e,t){var n={id:G.popupPages.getCurrentPopupId(e),type:O.getViewMode(e,t,v)};return d.getPopupContainer(e,n)},add:function(n,r,o,i){i?function(t){if(!e.find(t.components,{componentType:w}))throw new Error("Can't create a popup page. Main container inside the popup was not found")}(i):i=h.getBlankPopupPageStructure(n),i.data.pageUriSEO=i.data.pageUriSEO||t.siteConstants.DEFAULT_POPUP_URI_SEO_PREFIX+r.id,R(n,r,o,i),function(e,t){var n=H(e,e.siteAPI.getPrimaryPageId()),r=H(e,s.MASTER_PAGE_ID),o=a.getActionDefinition(e,"load"),i=a.getBehaviorDefinition(e,"openPopup");if(a.hasBehavior(e,n,o,null,i))return;if(a.hasBehavior(e,r,o,null,i))return;a.updateBehavior(e,n,o,t,i)}(n,r)},getPopupIdToAdd:function(n){var r=n.pointers.page.getAllPagesPointer(),o=n.pointers.general.getDeletedPagesMapPointer(),i=n.dal.getKeys(r),a=i.concat(n.dal.getKeys(o)),s=e.filter(i,e.partial(d.isPopup,n)),u=t.guidUtils.generateNewPopupId(a,s);return n.pointers.components.getNewPage(u)},getDataList:g.getPopupsDataItems,isPopup:function(e,t){return d.isPopup(e,t)},isPopupOpened:function(e){return e.siteAPI.isPopupOpened()}},G}()},function(e,t,n){var r,o;e.exports=(r=n(1),o=n(23),{actions:{sendHttpRequest:function(e,t,n,r,o,i){throw new Error("contextAdapter.actions.sendHttpRequest was called before an implementation was registered")}},utils:{fedopsLogger:{interactionStarted:r.loggingUtils.fedopsLogger.interactionStarted,interactionEnded:r.loggingUtils.fedopsLogger.interactionEnded,breadcrumb:o.integrations.ravenUtils.breadcrumb,captureError:o.integrations.ravenUtils.captureError}}})},function(e,t){e.exports=r},function(e,t,n){e.exports=function(){var e=n(0),t=(n(64),n(23)),r=n(3),o=n(87),i=n(29),a=n(2),s=n(67),u=n(6),c=n(88),l=n(71),p=t.constants.DATA_TYPES,d=["desktop","mobile"];function g(t,n,r){var o=t.pointers.page.getNonDeletedPagesPointers(n);return e(o).map("id").filter(function(e){var n=i.isPopup(t,e);return r?n:!n}).value()}function f(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.pointers.data.getDataItemFromMaster(n),s=r.serializeDataItem(t,p.data,a,o,i);return s&&s.pageBackgrounds&&e.forEach(d,function(e){var n=s.pageBackgrounds[e];if(n&&n.ref){var a=t.pointers.data.getDataItemFromMaster(n.ref.replace("#",""));n.ref=r.serializeDataItem(t,p.data,a,o,i)}}),s}function m(t,n,r){if(function(e,t){return!!s.get.byPrefix(e,t)}(t,r))return!0;var o=D.getPagesList(t,!1);return e(o).pull(n).some(function(e){return D.getPageUriSEO(t,e)===r})}function v(e,t,n){var r=D.getForbiddenPageUriSEOs(e);return delete r[D.getPageUriSEO(e,t)],r.hasOwnProperty(n.toLowerCase())}function y(t,n){return n=n||0,e.size(t)>a.URLS.MAX_LENGTH-n}function E(e){return/[A-Z]/.test(e)}function I(e){return!/^[a-z0-9\-]+$/.test(e)}function S(t,n){return e.chain(t).find(function(e){return e[0](n)}).get(1,"").value()}function h(e,t,n){return S([[m.bind(null,e,t),"pageUriSEO is invalid: not unique across site"],[v.bind(null,e,t),"pageUriSEO is invalid: reserved word"]],n)}function P(e,n,r){var o=e.pointers.general.getUrlFormat();return e.dal.get(o)===t.siteConstants.URL_FORMATS.HASH_BANG?"":h(e,n,r)||function(e){return S([[y,"pageUriSEO is invalid: over ".concat(a.URLS.MAX_LENGTH," chars")],[E,"pageUriSEO is invalid: all letters must be lowercase"],[I,"pageUriSEO is invalid: must only be alphanumeric or hyphen"]],e)}(r)}var A=5;function T(e,t,n){y(n=o.convertPageNameToUrl(e,n),A)&&(n=n.slice(0,a.URLS.MAX_LENGTH-A));for(var r=n,i=1;h(e,t,r);i++)r="".concat(n,"-").concat(i);return r}function O(t,n,o){return e.isString(o.pageUriSEO)&&e.isEmpty(o.pageUriSEO)&&(o.pageUriSEO=T(t,n,o.title)),o.pageUriSEO&&(!function(t,n,r){var o=P(t,n,r);if(!e.isEmpty(o))throw new Error(o)}(t,n,o.pageUriSEO),e.get(o,["translationData","uriSEOTranslated"])||(o.translationData={uriSEOTranslated:!1})),function(t,n,o){var i=t.pointers.data.getDataItemFromMaster(n),a=r.serializeDataItem(t,p.data,i,!1);return o.pageBackgrounds&&(e.forEach(d,function(e){var i,s,u=o.pageBackgrounds[e];u&&u.ref&&(a?(s=a.pageBackgrounds&&a.pageBackgrounds[e]&&a.pageBackgrounds[e].ref,i=o.pageBackgrounds[e]&&o.pageBackgrounds[e].ref&&o.pageBackgrounds[e].ref.id||s&&a.pageBackgrounds[e].ref.replace("#","")):i="".concat(n,"_").concat(e,"_bg"),u.ref="#".concat(r.addSerializedDataItemToPage(t,"masterPage",u.ref,i)))}),o.pageBackgrounds=e.assign(a&&a.pageBackgrounds||{},o.pageBackgrounds)),o}(t,n,o)}function C(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(n=O(e,t,n)).pageUriSEO&&c.patchPageTranslations(e,t,{pageUriSEO:n.pageUriSEO}),r.addSerializedDataItemToPage(e,"masterPage",n,t,o)}function _(t,n){return e(t.pointers.components.getChildrenRecursively(n)).map(function(e){return r.getComponentDataItemId(t,e,"dataQuery")}).reject(e.isNull).value()}var D={getPagesDataItems:function(t){var n=D.getPagesList(t,!1);return e.map(n,function(e){return D.getPageData(t,e)})},getPopupsDataItems:function(e){return D.getPopupsList(e).map(function(t){return D.getPageData(e,t)})},getNumberOfPages:function(e){return D.getPagesList(e,!1).length},getPagesList:function(t,n,r){return r?function(t,n){var r=t.pointers.page.getNonDeletedPagesPointers(n);return e.map(r,"id")}(t,n):g(t,n,!1)},getPopupsList:function(e){return g(e,!1,!0)},doesPageExist:function(e,t){var n=e.pointers.page.getPagePointer(t);return Boolean(n)},addPageData:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];C(e,t,n),o.executePageAddedCallback(e,t,r)},setPageData:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];C(e,t,n,r),o.executePageDataChangedCallback(e,t,n,r)},getPageData:function(e,t){return f(e,t,!1)},getPageDataWithoutIds:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(e,t,!0,!0,n)},getBgDataItem:function(t,n,r){if(!e.includes(d,r))throw new Error("unknown device for background");return D.getPageData(t,n).pageBackgrounds[r]},updateBgDataItem:function(t,n,r,o){if(!e.includes(d,o))throw new Error("unknown device for background");var i={pageBackgrounds:{}};i.pageBackgrounds[o]=e.cloneDeep(r),D.setPageData(t,n,i),u.executeHook(u.HOOKS.SITE_BACKGROUND_UPDATE.AFTER,null,[t,n,o])},removePageData:function(t,n){var o=t.dal.get(n),i=t.pointers.data.getPageIdOfData(n);o.pageBackgrounds&&e.forEach(d,function(e){var n=o.pageBackgrounds[e];if(n&&n.ref){var a=t.pointers.data.getDataItem(n.ref.replace("#",""),i);r.removeDataItemRecursively(t,a)}}),r.removeDataItemRecursively(t,n)},getPageUriSEO:function(e,t){var n=e.pointers.data.getDataItemFromMaster(t),r=e.pointers.getInnerPointer(n,"pageUriSEO");return e.dal.get(r)},getForbiddenPageUriSEOs:function(e){var t=e.pointers.general.getForbiddenPageUriSEOs();return e.dal.get(t)||{}},isDuplicatePageUriSeo:m,isForbiddenPageUriSeo:v,getValidPageUriSEO:T,isPageUriSeoTooLong:y,copyTranslationData:function(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(c.multilingual.isEnabled(t)){var s=t.dal.full.get(t.pointers.data.getDataItemFromMaster(o)),u={id:o,pageBackgrounds:e.cloneDeep(s.pageBackgrounds)};c.copyDataItemTranslations(t,a.MASTER_PAGE_ID,n,a.MASTER_PAGE_ID,u),function(t,n,r){var o=t.pointers.components.getPage(n,a.VIEW_MODES.DESKTOP),i=t.pointers.components.getPage(r,a.VIEW_MODES.DESKTOP),s=e.zipObject(_(t,o),_(t,i)),u=c.component.getTranslations(t,o);c.copyTranslationData(t,i,u,s)}(t,n,o),function(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=t.dal.full.get(t.pointers.data.getDataItemFromMaster(n)).pageBackgrounds,u=t.dal.full.get(t.pointers.data.getDataItemFromMaster(o)).pageBackgrounds,l=i?n:a.MASTER_PAGE_ID,d=i?o:a.MASTER_PAGE_ID;e.forEach(a.DEVICES,function(n){if(s[n]&&s[n].ref){var o=s[n].ref.replace("#",""),i={id:u[n].ref.replace("#","")};c.copyDataItemTranslations(t,l,o,d,i),function(t,n){c.patchDataItemTranslations(t,a.MASTER_PAGE_ID,n,function(n){if(!n.mediaRef)return n;var o=n.mediaRef.replace("#",""),i=t.pointers.data.getDataItem(o,a.MASTER_PAGE_ID);if(!t.dal.fullJsonDal.isExist(i))return n;var s=r.serializeDataItem(t,p.data,i,!0),u=r.addSerializedDataItemToPage(t,a.MASTER_PAGE_ID,s);return e.assign({},n,{mediaRef:"#".concat(u)})})}(t,i.id)}})}(t,n,o,i),i||function(e,t,n){var r=l.getPageMenuItemPointer(e,t),o=l.getPageMenuItemPointer(e,n),i={id:o.id,link:l.getLinkIdByMenuItemId(e,o.id)};c.copyDataItemTranslations(e,a.MASTER_PAGE_ID,r.id,a.MASTER_PAGE_ID,i)}(t,n,o)}},convertPageNameToUrl:o.convertPageNameToUrl};return D}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=window.parent.location.search.replace(/^\??/,""),n=t.urlUtils.parseUrlParams(e).editorSessionId;return r=function(){return n},n});function o(e){return e.siteAPI.getEditorSessionId()||r()}function i(e){return e.siteAPI.isMobileView()?"mobile":"desktop"}function a(t){for(var n,r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return a[0]=e.defaults({},a[0],{src:38,endpoint:"editor",sampleRatio:0}),a[1]=e.defaults({},a[1],{esi:o(t),editor_working_mode:i(t)}),!t.runtimeConfig.viewerName||40!==a[0].src&&38!==a[0].src||(a[0].viewerName=t.runtimeConfig.viewerName,a[0].viewerVersion=t.runtimeConfig.viewerVersion),(n=t.siteAPI).reportBI.apply(n,a)}function s(t){var n=t.reportDefCollection,r=t.packageName,o=t.shouldMutate;return n=!0===(void 0!==o&&o)?n:e.cloneDeep(n),e.forOwn(n,function(e,t){e.packageName=r,e.errorName=t}),n}return{event:a,error:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r[0]=e.defaults(r[0],{endpoint:"trg",evid:10}),r[1]=e.defaults(r[1],{dsOrigin:t.config.origin}),a.apply(void 0,[t].concat(r))},formatErrorEvents:s,register:function(e,t,n){"error"===t&&s({packageName:e,reportDefCollection:n,shouldMutate:!0})}}}()},function(e,t){e.exports=o},function(e,t){var n,r,o,i,a,s,u;e.exports=(r=(n=["wixCode"]).concat("nonUndoable"),o=n.concat("undoable"),a=(i=["rendererModel","wixCodeModel"]).concat("appData"),s=a.concat("codeAppId"),u=r.concat("isAppReadOnly"),{paths:{BASE:n,NON_UNDOABLE_BASE_PATH:r,UNDOABLE_BASE_PATH:o,DUPLICATED_FILES_INFO:r.concat("duplicatedFilesInfo"),LOADED_FILE_CONTENTS:r.concat("loadedFileContents"),MODIFIED_FILE_CONTENTS:r.concat("modifiedFileContents"),UNDOABLE_MODIFIED_FILE_CONTENTS:o.concat("modifiedFileContents"),FILE_PATH_TO_ID_MAP:r.concat("filePathToIdMap"),LOADED_CHILDREN:r.concat("loadedChildren"),ARE_CHILDREN_LOADED:r.concat("areChildrenLoaded"),WIX_CODE_MODEL:i,WIX_CODE_APP_DATA:a,GRID_APP_ID:s,IS_APP_READ_ONLY:u,DIRECTORY_FLAG_BY_DELETED_PATH:r.concat("directoryFlagByDeletedPath")},WIX_CODE_APP_ID:"wixCode",WIX_CODE_SERVICE_URL_KEY:"wixCodeServiceUrl",WIX_CODE_SPEC_TYPE:"siteextension",PAGES_ROOT:"pages",JS_EXTENSION:".js"})},function(e,t,n){e.exports=function(){var e=n(0),t=["wixapps"],r=t.concat("appbuilder"),o=r.concat("descriptor"),i={VIEWS:o.concat("views"),TYPES:o.concat("types"),PARTS:o.concat("parts"),DATA_SELECTORS:o.concat("dataSelectors"),PAGES:o.concat("pages"),ITEMS:r.concat("items"),DELETED_ITEMS:r.concat("deletedItems")};function a(e,t){if(!e)throw new Error(t)}return{initBasePaths:function(n){var a=[t,r,o].concat(e.values(i));e.forEach(a,function(e){n.dal.isPathExist(e)||n.dal.full.setByPath(e,{})})},getBaseItemsPath:function(e){return e?i.ITEMS.concat(e):i.ITEMS},getItemPath:function(e,t,n){a(e,"Must provide a type ID"),a(t,"Must provide an item ID");var r=this.getBaseItemsPath(e).concat(t);return n&&(r=r.concat(n)),r},getBaseDeletedItemsPath:function(e){return e?i.DELETED_ITEMS.concat(e):i.DELETED_ITEMS},getDeletedItemPath:function(e,t){return a(e,"Must provide a type ID"),a(t,"Must provide an item ID"),this.getBaseDeletedItemsPath(e).concat(t)},getBaseTypesPath:function(){return i.TYPES},getTypePath:function(e){return a(e,"Must provide a type ID"),this.getBaseTypesPath().concat(e)},getBasePartsPath:function(){return i.PARTS},getPartPath:function(e){return a(e,"Must provide a part ID"),this.getBasePartsPath().concat(e)},getBaseViewsPath:function(){return i.VIEWS},getViewPath:function(e){return a(e,"Must provide a view ID"),this.getBaseViewsPath().concat(e)},getBaseDataSelectorsPath:function(){return i.DATA_SELECTORS},getDataSelectorPath:function(e){return a(e,"Must provide a data selector ID"),this.getBaseDataSelectorsPath().concat(e)},getPagePath:function(e){return a(e,"Must provide a page ID"),i.PAGES.concat(e)},getApplicationInstanceVersionPath:function(){return o.concat(["applicationInstanceVersion"])},getOffsetFromServerTimePath:function(){return o.concat(["offsetFromServerTime"])},getRepoPath:function(){return o},getAppbuilderPath:function(){return r},getPackageMetaDataPath:function(){return r.concat(["metadata"])},getAppbuilderMetadataPath:function(t){return e.compact(r.concat(["metadata","appbuilder_metadata"].concat(t)))},getAppPart2MetadataPath:function(e){return r.concat(["metadata",e])}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(10),o=(n(8),n(3),n(6)),i=n(33),a=n(12),s=n(20);function u(e,t){var n=null;return e&&t&&(n=e.pointers.components.isMasterPage(t)?"wysiwyg.viewer.components.WSiteStructure":r.getComponentType(e,t)),n}function c(e,t){return e.pointers.components.getParent(t)}function l(e,t){return e.pointers.full.components.getParent(t)}function p(e,t,n){for(var r=n(e,t),o=[];null!==r;)o.push(r),r=n(e,r);return o}function d(e,t,n){return n?e.pointers.components.getChildrenRecursively(t):e.pointers.components.getChildren(t)}return{buildDefaultComponentStructure:function(e,t){return s.services.buildDefaultComponentStructure(t)},getType:u,getDefinition:function(e,t){return s.services.schemasService.getDefinition(t)},getPropertiesItem:function(e,t){var n=e.pointers.getInnerPointer(t,"propertyQuery"),r=n&&e.dal.get(n),o=e.pointers.components.getPageOfComponent(t),i=o&&o.id,s=r&&e.pointers.data.getPropertyItem(a.stripHashIfExists(r),i);return s&&e.dal.get(s)},getPage:function(e,t){return e.pointers.full.components.getPageOfComponent(t)},getContainerToAddComponentTo:function(e,t){var n=u(e,t),r=o.executeHooksAndCollectValues(o.HOOKS.ADD_ROOT.GET_CONTAINER_TO_ADD_TO,n,[e,t]);if(r.length>1)throw new Error("you can't have more that one hook returning a container");return r[0]||t},getContainer:c,getAncestors:function(e,t){return p(e,t,c)},getAncestorsFromFull:function(e,t){return p(e,t,l)},getSiblings:function(t,n){var r=t.pointers.components.getParent(n),o=d(t,r);return e.remove(o,{id:n.id}),o},getRepeatedComponents:function(e,n){return t.displayedOnlyStructureUtil.isRepeatedComponent(n.id)?e.pointers.components.getAllDisplayedOnlyComponents(n):[]},getChildren:d,getChildrenFromFull:function(e,t,n){return n?e.pointers.full.components.getChildrenRecursively(t):e.pointers.full.components.getChildren(t)},getAllJsonChildren:function(e,t){return d(e,t,!1)},getTpaChildren:function(t,n){var r=t.pointers.components.getChildrenRecursively(n);return e.filter(r,function(e){var n=u(t,e);return i.isTpaByCompType(n)})},getBlogChildren:function(t,n){var r=t.pointers.components.getChildrenRecursively(n);return e.filter(r,function(e){return"wixapps.integration.components.AppPart"===u(t,e)})},getAncestorByPredicate:function(e,t,n){return e.pointers.components.getAncestorByPredicate(t,n)},isRenderedOnSite:function(e,t){return e.siteAPI.isComponentRenderedOnSite(t.id)},isContainsCompWithType:function(t,n,r){r=e.isArray(r)?r:[r];for(var o,i=t.pointers.components.getChildrenRecursively(n),a=0;a<i.length;a++)if(o=u(t,i[a]),e.includes(r,o))return!0;return!1},isExist:function(e,t){return e.dal.isExist(t)},isPageComponent:function(e,t){return e.pointers.components.isPage(t)}}}()},function(e,t){e.exports=i},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(44),o=n(63).urlUtils;function i(e){return r.getProperty(e,r.PROPERTY_NAMES.SITE_ID)}function a(e){return r.getProperty(e,r.PROPERTY_NAMES.ORIGINAL_TEMPLATE_ID)}function s(e){var n=e.pointers.general.getUrlFormat();return e.dal.get(n)||t.siteConstants.URL_FORMATS.HASH_BANG}function u(e,t){return s(e)===t}return{getUserInfo:function(e){return r.getProperty(e,r.PROPERTY_NAMES.USER_INFO)},isHttpsEnabled:function(e){return!!r.getProperty(e,r.PROPERTY_NAMES.IS_HTTPS_ENABLED)},getPublicUrl:function(e){return r.getProperty(e,r.PROPERTY_NAMES.PUBLIC_URL)},setPublicUrl:function(e,t){r.setProperty(e,r.PROPERTY_NAMES.PUBLIC_URL,t)},getSiteId:i,getMetaSiteId:function(e){return r.getProperty(e,r.PROPERTY_NAMES.META_SITE_ID)},getSiteOriginalTemplateId:a,getLanguage:function(e){return r.getProperty(e,r.PROPERTY_NAMES.LANGUAGE_CODE)||"en"},getCurrency:function(e){return r.getProperty(e,r.PROPERTY_NAMES.CURRENCY)},getTimeZone:function(e){return r.getProperty(e,r.PROPERTY_NAMES.TIME_ZONE)},getLocale:function(e){return r.getProperty(e,r.PROPERTY_NAMES.LOCALE)},getRegionalLanguage:function(e){return r.getProperty(e,r.PROPERTY_NAMES.REGIONAL_LANGUAGE)},getGeo:function(e){return r.getProperty(e,r.PROPERTY_NAMES.GEO)},isFirstSave:function(e){return r.getProperty(e,r.PROPERTY_NAMES.NEVER_SAVED)||!1},isTemplate:function(e){return i(e)===a(e)},getDocumentType:function(e){return r.getProperty(e,r.PROPERTY_NAMES.DOCUMENT_TYPE)},isSitePublished:function(e){var t=r.getProperty(e,r.PROPERTY_NAMES.IS_PUBLISHED);return null===t||t},getUrlFormat:s,isUsingUrlFormat:u,isUsingSlashUrlFormat:function(e){return u(e,t.siteConstants.URL_FORMATS.SLASH)},getPossibleUrlFormats:function(){return e.clone(t.siteConstants.URL_FORMATS)},pendingApps:function(e){return r.getProperty(e,r.PROPERTY_NAMES.PENDING_APPS)},isSiteFromOnBoarding:function(t){var n=t.siteAPI.getClientSpecMap(),o=e.find(n,{type:"onboarding"}),i=!0===e.get(o,"inUse",!1),a=r.getProperty(t,r.PROPERTY_NAMES.USE_ONBOARDING);return i&&(e.isUndefined(a)||a)},setUseOnBoarding:function(e,t){r.setProperty(e,r.PROPERTY_NAMES.USE_ONBOARDING,t)},getUserPermissions:function(e){return r.getProperty(e,r.PROPERTY_NAMES.PERMISSIONS)},isOwner:function(e){return r.getProperty(e,r.PROPERTY_NAMES.IS_OWNER)},getSiteToken:function(e){return r.getProperty(e,r.PROPERTY_NAMES.SITE_TOKEN)},getMediaSiteUploadToken:function(e){return r.getProperty(e,r.PROPERTY_NAMES.MEDIA_SITE_UPLOAD_TOKEN)},getMediaUserUploadToken:function(e){return r.getProperty(e,r.PROPERTY_NAMES.MEDIA_USER_UPLOAD_TOKEN)},getUserId:function(e){return r.getProperty(e,r.PROPERTY_NAMES.USER_ID)},getCurrentRevisionPublicUrl:function(e){var t=r.getProperty(e,r.PROPERTY_NAMES.PUBLIC_URL),n=r.getProperty(e,r.PROPERTY_NAMES.SITE_REVISION);return o.setUrlParams(t,{siteRevision:n})}}}()},function(e,t,n){e.exports=function(){var e=n(1),t=n(3),r="wysiwyg.viewer.components.PopupContainer";function o(e,t){var n=e.pointers.components.getChildren(t);if(n.length>1)throw new Error("More than one child of the popup page was found. A popup page must have only single direct child of type ".concat(r));if(n.length<1)throw new Error("No direct child of the popup page was found");var o=n[0],i=e.dal.get(e.pointers.getInnerPointer(o,"componentType"));if(i!==r)throw new Error("Direct child of the popup is of type ".concat(i,". Expected type: ").concat(r));return o}return{getPopupContainer:o,isPopupContainer:function(t){return t===e.constants.POPUP.POPUP_CONTAINER.COMPONENT_TYPE},isPopupFullWidth:function(e,n){var r=o(e,n);return"fullWidth"===t.getPropertiesItem(e,r).alignmentType},isPopup:function(e,t){if("masterPage"===t)return!1;var n=e.pointers.data.getDataItemFromMaster(t);return e.dal.get(e.pointers.getInnerPointer(n,"isPopup"))}}}()},function(e,t){e.exports={TYPE:{TPA_SECTION:"TPASection",TPA_MULTI_SECTION:"TPAMultiSection",TPA_WIDGET:"TPAWidget",TPA_GLUED_WIDGET:"TPAGluedWidget"},DATA_TYPE:{TPA_SECTION:"TPA",TPA_MULTI_SECTION:"TPAMultiSection",TPA_WIDGET:"TPAWidget"},COMP_TYPES:{TPA_SECTION:"wysiwyg.viewer.components.tpapps.TPASection",TPA_MULTI_SECTION:"wysiwyg.viewer.components.tpapps.TPAMultiSection",TPA_WIDGET:"wysiwyg.viewer.components.tpapps.TPAWidget",TPA_GLUED_WIDGET:"wysiwyg.viewer.components.tpapps.TPAGluedWidget"},TPA_COMP_TYPES:{TPA_SECTION:"tpa.viewer.components.tpapps.TPASection",TPA_MULTI_SECTION:"tpa.viewer.components.tpapps.TPAMultiSection",TPA_WIDGET:"tpa.viewer.components.tpapps.TPAWidget",TPA_GLUED_WIDGET:"tpa.viewer.components.tpapps.TPAGluedWidget"},SKINS:{TPA_SECTION:"wysiwyg.viewer.skins.TPASectionSkin",TPA_WIDGET:"wysiwyg.viewer.skins.TPAWidgetSkin"},APP_MARKET:{EDITOR_BASE_URL:"http://editor.wix.com/app-market-editor",DOMAIN:"http://editor.wix.com/"},STYLE:{TPA_WIDGET:"tpaw0",TPA_GLUED_WIDGET:"tpagw0",TPA_SECTION:"tpas0"},CYCLE:{MONTHLY:"monthly",YEARLY:"yearly",ONE_TIME:"oneTime"},APP_DEF_ID:{CHAT:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(12),o=n(15),i=n(68),a=n(3),s=n(36),u=n(26),c=n(6),l="isHiddenByModes",p="wysiwyg.viewer.components.SiteRegionContainer",d=t.siteConstants.COMP_MODES_TYPES,g={SHOW_ON_SOME_PAGES:{mobileConversionConfig:"copyOverrides"},POPOVER:{mobileConversionConfig:"copyOverrides"},HOVER:{mobileConversionConfig:"chooseMobileMode"}};function f(t,n){if(e.isEmpty(n))return null;var r=t.pointers.componentStructure.getModesDefinitions(n);return t.dal.full.get(r)}function m(t,n){var r=f(t,n);return function(t,n,r){var o=e.find(n,{type:d.HOVER});if(o){var i,s=t.pointers.full.components.getDesktopPointer(r),u=a.getPropertyItemPointer(t,s);if(u){var c=t.dal.get(u).mobileDisplayedModeId;i=c&&e.find(n,{modeId:c})}return i||o}}(t,r,n)||function(t,n){return e(n).filter(function(t){return"copyOverrides"===e.get(g,[t.type,"mobileConversionConfig"])}).find({type:d.POPOVER})}(0,r)}function v(t,n,r){if(!r)return null;var o=f(t,n);return e.filter(o,{type:r})}function y(e,t){return S(t.id)}function E(t,n,r,o,i,a){if(s=o,!e.includes(e.values(d),s))throw new Error("added component mode is invalid");var s;!function(e,t){var n=e.pointers.componentStructure.getModes(t),r=e.pointers.componentStructure.getModesDefinitions(t),o=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(n)?(e.dal.full.isExist(o)||e.dal.full.set(o,[]),e.dal.full.isExist(r)||e.dal.full.set(r,[])):e.dal.full.set(n,{definitions:[],overrides:[]})}(t,r);var u=I(r.id,o,i,n,a),c=function(t,n,r){var o=t.pointers.componentStructure.getModesDefinitions(n),i=t.dal.full.get(o);switch(r.type){case d.DEFAULT:case d.HOVER:return function(t,n,r){var o=e.find(t,{type:d.DEFAULT}),i=e.find(t,{type:d.HOVER}),a=n.type===d.DEFAULT,s=n.type===d.HOVER;if(a&&o||s&&i||o&&i)return t;if(a)return t.concat(n,I(r,d.HOVER));if(s)return t.concat(n,I(r,d.DEFAULT));return t}(i,r,n.id);case d.SCROLL:return function(t,n,r){if(e.isUndefined(n.settings.scrollPos))throw new Error("scroll mode must have a scroll pos");var o=[],i=e.filter(t,{type:d.SCROLL});e.find(i,"settings.scrollPos",0)||0===n.settings.scrollPos||(o=[I(r,d.SCROLL,{scrollPos:0})]);if(!e.find(i,["settings.scrollPos",n.settings.scrollPos]))return o.concat(n,t);return o.concat(t)}(i,r,n.id);case d.WIDTH:return function(t,n,r){if(e.isUndefined(n.settings.width))throw new Error("width mode must have a width pos");var o=[],i=e.filter(t,{type:d.WIDTH});e.find(i,"settings.width",0)||0===n.settings.width||(o=[I(r,d.WIDTH,{width:0})]);if(!e.find(i,["settings.width",n.settings.width]))return o.concat(n,t);return o.concat(t)}(i,r,n.id);case d.APPLICATIVE:return function(e,t){return[t].concat(e)}(i,r);case d.SHOW_ON_SOME_PAGES:return function(t,n,r,o){if(!t.pointers.components.isMasterPage(n))throw new Error("SOSP mode can be added only to masterPage");if(e.isUndefined(o.settings.pagesGroupId))throw new Error("SOSP mode must have a pagesGroupId");return[o].concat(r)}(t,n,i,r)}}(t,r,u),l=t.pointers.componentStructure.getModesDefinitions(r);t.dal.full.set(l,c),u.type===d.SHOW_ON_SOME_PAGES&&t.siteAPI.updateActiveSOSPModes()}function I(e,t,n,r,o){return{modeId:r||S(e.id),type:t,label:o||null,settings:n||null}}function S(e){var n="".concat(e?"".concat(e,"-"):"","mode");return t.guidUtils.getUniqueId(n,"-",{bucket:"componentModeId"})}function h(e,n){if(!n)return null;var r=e.siteAPI.getActiveModes(),o=e.pointers.components.getPageOfComponent(n)||e.pointers.full.components.getPageOfComponent(n),i=f(e,n);return t.modesUtils.getActiveComponentModeIds(r[o.id],i)}function P(e,t,n){e.siteAPI.deactivateMode(t,n)}function A(e,t){var n=e.pointers.componentStructure.getModesOverrides(t);return e.dal.full.isExist(n)&&e.dal.full.get(n)}function T(e,t){s.removeComponentsBehaviorsWithFilter(e,t,{action:"modeOut"}),s.removeComponentsBehaviorsWithFilter(e,t,{action:"modeIn"})}function O(t,n){for(var r=t.pointers.full.components.getParent(n),o=h(t,r);r&&e.isEmpty(o);)o=(r=t.pointers.components.getParent(r))?h(t,r):null;return r}function C(t,n,r){if(!e.isEmpty(r)&&n){var o,i,a=t.pointers.componentStructure.getModes(n),s=t.dal.full.get(a)||{};s.isHiddenByModes=!0,s.overrides=function(t,n){t=t||[];var r=e.find(t,function(e){return w(e.modeIds,n)});r||(r={modeIds:n},t.push(r));return r.isHiddenByModes=!1,t}(s.overrides,r),s.overrides=(o=s.overrides,i=r,e.filter(o,function(e){return w(e.modeIds,i)})),t.dal.full.set(a,s)}}function _(e,t){var n=i.getSospModeByPagesGroup(e,t);return n?n.modeId:function(e,t){var n=o.getViewMode(e),r=e.pointers.components.getMasterPage(n),i=y(0,r),a={pagesGroupId:"#".concat(t.id)};return E(e,i,r,d.SHOW_ON_SOME_PAGES,a,function(e,t){var n=e.dal.get(t);return"SOSP-".concat(n.groupName)}(e,t)),i}(e,t)}function D(e,t,n){if(!e.dal.isExist(n))throw new Error("componentModes: pagesGroup not exist");if(!function(e,t){return r.getComponentType(e,t)===p&&e.pointers.components.isInMasterPage(t)}(e,t))throw new Error("componentModes: cant show component only on some pages")}function w(t,n){return t.length===n.length&&e.intersection(t,n).length===t.length}function b(e,t){var n=O(e,t);return n?h(e,n):{}}function M(t,n){var r=function(t,n){var r=h(t,n);return e.isEmpty(r)?b(t,n):r}(t,n),o=A(t,n),i=e.findIndex(o,function(t){return e.every(t.modeIds,function(e){return r[e]})});if(i>=0){var a=t.pointers.componentStructure.getModesOverrides(n);return t.pointers.getInnerPointer(a,i)}return null}function R(t,n,r){if(!n)throw new Error("missing component pointer");r&&!e.isArray(r)&&(r=[r]);var o=A(t,n),i=e.find(o,function(t){return e.isEqual(e.sortBy(t.modeIds),e.sortBy(r))});if(i&&!e.isUndefined(i[l]))return!i[l];var a=t.dal.full.get(t.pointers.componentStructure.getModes(n));return!(a&&!e.isUndefined(a[l]))||!a[l]}function N(e,t){return e.dal.isExist(t)}function x(t,n,r,o){var i=a.getDesignItemByModes(t,n,r),s=t.pointers.components.getPageOfComponent(n).id,u=function(t,n){return t.dataChangeBehaviors&&(t.dataChangeBehaviors=e.reject(t.dataChangeBehaviors,function(t){return e.includes(n,t.part)}),e.set(t,"background.mediaTransforms",{scale:1})),t}(i,o);a.addSerializedDesignItemToPage(t,s,u,u.id)}return{addModeDefinition:E,getComponentModeById:function(t,n,r){var o=f(t,n);return o&&r?e.find(o,{modeId:r}):null},getModeTypes:function(){return e.cloneDeep(d)},getComponentModes:f,getComponentModesByType:v,removeComponentMode:function(t,n,r){h(t,n)[r]&&P(t,n,r);var o=u.getType(t,n);c.executeHook(c.HOOKS.REMOVE_COMP_MODE.BEFORE,o,[t,n,r]);var i=t.pointers.componentStructure.getModesDefinitions(n),a=t.dal.full.get(i),s=e.reject(a,{modeId:r});t.dal.full.set(i,s)},getComponentActiveModeIds:h,resetAllActiveModes:function(e){e.siteAPI.resetAllActiveModes()},activateComponentMode:function(e,t,n){e.siteAPI.activateMode(t,n)},deactivateCompMode:P,createUniqueModeId:S,showComponentOnlyOnPagesGroup:function(e,t,n){D(e,t,n),C(e,t,[_(e,n)])},overrides:{getAllOverrides:A,removeAllOverrides:function(e,t){var n=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(n)&&e.dal.full.set(n,[])},getOverridePointerByActiveModes:M,applyCurrentToAllModes:function(t,n){var r=t.pointers.componentStructure.getModes(n),o=t.dal.full.get(r),i=M(t,n);if(i){var a=e.omit(t.dal.full.get(i),["isHiddenByModes","modeIds"]);t.dal.full.merge(n,a)}T(t,n),o&&t.dal.full.set(r,e.assign(o,{isHiddenByModes:!1,overrides:[]}))},updateComponentOverrides:function(e,t,n){var r=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(r)&&e.dal.full.set(r,n)},showComponentOnlyInModesCombination:C},getFirstAncestorActiveModes:b,getFirstAncestorWithActiveModes:O,isComponentDisplayedByDefault:function(t,n){var r=O(t,n);if(r){var o=e.head(v(t,r,d.DEFAULT));return!!o&&R(t,n,[o.modeId])}return!0},isComponentDisplayedInModes:R,isComponentCurrentlyDisplayed:N,shouldDeleteComponentFromFullJson:function(n,r){if(!N(n,r)&&n.dal.full.isExist(r))return!0;var o=O(n,r);if(!o)return!0;var i=e(h(n,o)).keys().head();return!t.modesUtils.isCompVisibleAfterRemovalFromMode(n.pointers,n.dal.full,r,o,i)},getModeToAddId:y,getComponentModesAvailableInView:function(e,t){return e.pointers.components.isMobile(t)?[m(e,t)]:f(e,t)},getCompMobileMode:m,removeDesignBehaviorsFromAllModes:function(t,n,r){var o=f(t,n);e.forEach(o,function(e){x(t,n,[e.modeId],r)})},getAllCompDesignItems:function(t,n){var r=t.pointers.componentStructure.getModes(n),o=t.pointers.components.getPageOfComponent(n),i=t.pointers.getInnerPointer(n,"designQuery"),s=t.dal.full.get(i).replace("#",""),u=a.getDesignItemById(t,s,o.id);if(!t.dal.full.isExist(r))return[u];var c=[],l=t.dal.full.get(r),p=l.overrides,d=l.definitions||[],g=e.filter(p,"designQuery");return g.length!==d.length&&c.push(u),c=c.concat(e.map(g,function(e){return a.getDesignItemByModes(t,n,e.modeIds)}))},getMobileActiveModesMap:function(n,r){var o=n.pointers.components.getPage(r,t.constants.VIEW_MODES.DESKTOP),i=e.filter(f(n,o),function(t){return"copyOverrides"===e.get(g,[t.type,"mobileConversionConfig"])}),a=e.map(n.pointers.components.getChildrenRecursively(o),e.partial(m,n));return e(a).concat(i).map("modeId").compact().uniq().map(function(e){return[e,!0]}).fromPairs().value()},removeSingleModeBehaviors:T,metaData:g,getModesIdsAndParentNeededToShowComp:function(t,n){var r,o;if(!t.dal.isExist(n)&&t.dal.full.isExist(n)){var i=t.pointers.componentStructure.getModes(n),a=t.pointers.full.components.getParent(n);for(t.dal.full.isExist(i)&&(r=t.dal.full.get(i),o=n);!r&&a;)t.dal.full.isExist(a)&&(i=t.pointers.componentStructure.getModes(a),t.dal.full.isExist(i)&&(r=t.dal.full.get(i),o=a)),r||(a=t.pointers.full.components.getParent(a));return{modeIdsToActivate:function(t){return e.get(e.find(t.overrides,{isHiddenByModes:!1}),"modeIds")}(r),parentWithModesDef:function(t,n){var r=t.pointers.componentStructure.getModes(n),o=t.dal.full.get(r),i=o&&o.definitions&&!e.isEmpty(o.definitions);if(i)return n;for(var a=t.pointers.full.components.getParent(n);!i&&a;)r=t.pointers.componentStructure.getModes(a),(i=(o=t.dal.full.get(r))&&o.definitions&&!e.isEmpty(o.definitions))||(a=t.pointers.full.components.getParent(a));return a}(t,o)}}}}}()},function(e,t){e.exports={Intents:{PLATFORM_WORKER:"PLATFORM_WORKER"},AppIds:{EDITOR:"editor"},MessageTypes:{WORKER_ALIVE:"workerAlive",SDK_READY:"sdkReady",SET_MANIFEST:"setManifest",TRIGGER_EVENT:"triggerEvent",ADD_APPS:"addApps",NOTIFY_APP_UPDATED:"notifyAppUpdated",VIEWER_INFO_CHANGED:"viewerInfoChanged",ADD_APP_COMPLETED:"addAppCompleted",APP_UPDATE_COMPLETED:"appUpdateCompleted",REMOVE_APP:"notifyRemoveApp",REMOVE_APP_COMPLETED:"notifyRemoveAppCompleted",MIGRATE:"notifyMigrate",MIGRATE_COMPLETED:"notifyMigrateCompleted",GET_INSTALLED_APPS:"getInstalledApps",SET_APP_PUBLIC_API:"setAppPublicAPI",GET_IS_PLATFORM_APP_INSTALLED:"getIsPlatformAppInstalled",ADD_ALL_APPS_COMPLETED:"addAllAppsCompleted"},EVENTS:{COMPONENT_DELETED:"componentDeleted"},Controller:{DEFAULT_STATE:"default",CONNECTIONS:"connections",WILDCARD_ROLE:"*"},Page:{DEFAULT_STATE:"default"},APPS:{DATA_BINDING:{appDefId:"dataBinding"},DYNAMIC_PAGES:{appDefId:"wix-code"},SANTA_MEMBERS:{appDefId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"},WIX_CODE:{appDefId:"675bbcef-18d8-41f5-800e-131ec9e08762"},META_SITE:{applicationId:"-666"}},APP_ACTION_TYPES:{REMOVE:"REMOVE",UPDATE:"UPDATE"},SESSION_STATE_TYPES:["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateStripState"],CONTROLLER_TYPES:{APP_CONTROLLER:"platform.components.AppController",APP_WIDGET:"platform.components.AppWidget"}}},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(38),i=n(1),n(2),a=n(28),s=n(30),u=n(3),{isSiteSaved:function(e){return!a.isFirstSave(e)},isTpaByCompType:function(e){return r.includes(s.COMP_TYPES,e)||r.includes(s.TPA_COMP_TYPES,e)},isTpaByAppType:i.coreTpaUtils.isTpaByAppType,isTpaByDataType:function(e){return r.includes(s.DATA_TYPE,e)},sendBIEvent:function(e,t,n){var r=e.pointers.components.getViewMode(e.siteAPI.getFocusedRootId()),i=e.pointers.components.getPage(e.siteAPI.getFocusedRootId(),r),a=e.pointers.components.getComponent(t.compId,i),s=u.getDataItem(e,a);o.common.bi.sendBIEvent(t,n,s,e.siteAPI.getClientSpecMap(),e.siteAPI.reportBI.bind(e.siteAPI))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(13);function r(e){return t.getProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP)||{}}function o(e,n){var o=r(e);o[n.applicationId]=n,t.setProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP,o)}function i(e,t){return r(e)[t]||{}}return{registerAppData:o,updateAppInstance:function(e,t,n){var r=i(e,t);r&&(r.instance=n,o(e,r))},getAppData:i,getAppDataByAppDefinitionId:function(t,n){var o=r(t);return e.find(o,{appDefinitionId:n})},getAppsData:r,filterAppsDataByType:function(t,n){var o=r(t);return e.filter(o,{type:n})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(135),r=n(6),o=n(34),i=n(136),a=n(137),s=n(188),u=n(79),c=n(495),l=n(200),p=n(14),d=n(99),g=n(202),f=n(496),m=n(32),v=n(203),y=n(187),E=n(5);function I(t,n){var r=p.getLargestApplicationId(t),i=d.generateAppFlowsLargestAppId(r),a={type:"Application",displayName:n.appDefinitionId,appDefinitionId:n.appDefinitionId,applicationId:i,editorArtifact:n.editorArtifact,appFields:{platform:{editorScriptUrl:e.get(n,"appFields.platform.editorScriptUrl")}}};return e.get(n,"appFields.platform.viewerScriptUrl")&&e.set(a,"appFields.platform.viewerScriptUrl",n.appFields.platform.viewerScriptUrl),o.registerAppData(t,a),a}function S(t){var n=o.getAppsData(t);return e.filter(n,P)}function h(t,n,r,o){var i=n.id,a=t.pointers.platform.getPagesPlatformApplicationPointer(r),s=t.dal.full.get(a)||{};delete s[i],o&&e.set(s,i,!0),e.isEmpty(s)&&"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"===r?t.dal.full.isExist(a)&&t.dal.full.remove(a):t.dal.full.set(a,s)}function P(t){return e.get(t,"appFields.platform.editorScriptUrl")&&p.isAppActive(t)}return{init:function(n,s,c,l){var d=i.isInitiated();a.setOrigin(e.get(l,"origin")),function(t){var n=t.pointers.platform.getPlatformPointer(),r=t.pointers.platform.getPagesPlatformApplicationsPointer(),o=t.dal.full.get(n);t.dal.full.set(n,e.assign({appState:{},appManifest:{},appPublicApiName:{}},o)),t.dal.full.isExist(r)||t.dal.full.set(r,{})}(n),i.init(n,s,c),function(n){var r=n.dal.get(n.pointers.general.getServiceTopology()),o=e(p.getAppsData(n)).filter(P).map(function(e){return t.specMapUtils.resolveEditorScriptUrl(e,{clientSpec:e,serviceTopology:r})}).map(function(e){return e.origin=a.getOrigin(),e.firstInstall=!1,e}).value();if(o.length){if(E.isOpen("platformPrefetchEditorScripts")){var s=o.map(function(e){return{id:e.applicationId,url:e.appFields.platform.editorScriptUrl}});u=s,e.forEach(u,function(e){var t="prefetch-editor-".concat(e.id);if(!window.document.getElementById(t)){var n=window.document.createElement("link");n.setAttribute("rel","prefetch"),n.setAttribute("href",e.url),n.setAttribute("id",t),window.document.head.appendChild(n)}})}i.addApps(n,o)}var u}(n),n.siteAPI.registerToNotifyApplicationRequestFromViewerWorker(function(t,r){var o=e.get(u.getAppDataByAppDefId(n,t),"applicationId");y.notifyApplication(n,o,r)}),n.siteAPI.registerToAppInstanceUpdate(function(t){!function(t,n){e.forEach(n,function(e,n){o.updateAppInstance(t,n,e),y.notifyApplication(t,n,{eventType:"instanceChanged",eventPayload:{instance:e}})}),e.invoke(t.dal,"commitTransaction")}(n,t)}),d||(r.registerHook(r.HOOKS.REMOVE.AFTER,g.getOnDeleteHook(y.notifyApplication)),r.registerHook(r.HOOKS.METADATA.DUPLICATABLE,g.isDuplicatable),r.registerHook(r.HOOKS.METADATA.CAN_REPARENT,g.canReparent),r.registerHook(r.HOOKS.METADATA.ROTATABLE,g.isRotatable),r.registerHook(r.HOOKS.METADATA.FIXED_POSITION,g.canBeFixedPosition),r.registerHook(r.HOOKS.METADATA.RESIZABLE_SIDES,g.isResizableSides),r.registerHook(r.HOOKS.METADATA.LAYOUT_LIMITS,g.layoutLimitsHook),r.registerHook(r.HOOKS.METADATA.CONTAINABLE,g.isContainable),function(e){r.registerHook(r.HOOKS.PLATFORM.APP_UPDATED,f.removeGhostStructureForApp),r.registerHook(r.HOOKS.SAVE.SITE_SAVED,function(t){t&&f.notifyOnFirstSaved(e,S(e),y.notifyApplication)})}(n)),v.isActive(n)&&(v.init(n),v.autoRun(n))},setManifest:u.setManifest,registerToManifestAdded:u.registerToManifestAdded,initApp:function(t,n,r){var o=p.getAppDataByAppDefinitionId(t,n.appDefinitionId);o||(o=I(t,n)),i.isInitiated()&&(r&&(o.appUrlQueryParams=r),o.firstInstall=!0,o.origin=a.getOrigin(),i.addApp(t,o));var s=function(t){function n(e){return"http://localhost:".concat(e.port,"/").concat(e.path)}function r(n){var r=t.siteAPI.getCurrentUrl(),o=e.get(r,["query",n]);return e(o||"").split(",").invokeMap("split",":").fromPairs().value()}var o=r("editorPlatformAppSources"),i=r("viewerPlatformAppSources"),a=o.id;if(a)return{appDefinitionId:a,appFields:{platform:{viewerScriptUrl:n(i),editorScriptUrl:n(o)}}}}(t);if(s){var u=I(t,s);i.addApp(t,u)}},remove:function(t,n){return i.notifyRemoveApp(n).then(function(r){if(!e.get(r,"success"))throw new Error("Failed to remove applicationId ".concat(n));var i=p.getAppData(t,n);o.registerAppData(t,e.defaults({pendingAction:m.APP_ACTION_TYPES.REMOVE},i))})},migrate:function(t,n,r){var o=u.getAppDataByAppDefId(t,n);return o?i.notifyMigrate(o.applicationId,r).then(function(t){if(!1===e.get(t,"success"))throw new Error("Failed to migrate applicationId ".concat(o.applicationId))}):Promise.reject(new Error("Migration failed: Unknown appDefinitionId: ".concat(n)))},notifyApplication:y.notifyApplication,getAPIForSDK:function(e,t){return s.getAPIForSDK(t)},getInstalledAppsData:function(e){return[u.getAppDataByAppDefId(e,m.APPS.DATA_BINDING.appDefId)]},pageHasPlatformApp:function(e,t,n){var r=e.pointers.platform.getPagesPlatformApplicationPointer(n);return!!(e.dal.full.get(r)||{})[t]},updatePagePlatformApp:h,removePageFromPlatformApps:function(t,n){var r=t.pointers.platform.getPagesPlatformApplicationsPointer(),o=t.dal.full.get(r);e.forEach(o,function(e,r){h(t,n,r,!1)})},getAppManifest:u.getAppManifest,hasAppManifest:u.hasAppManifest,getAppDataByAppDefId:u.getAppDataByAppDefId,getAppDataByApplicationId:u.getAppDataByApplicationId,getAppsContainer:i.getAppsContainer,getInstalledEditorApps:S,notifyAppsOnCustomEvent:function(e,t){var n=t.eventType,r=t.eventPayload;return c.notifyAppsOnCustomEvent(e,n,r,y.notifyApplication)},registerAppToCustomEvents:function(e,t,n){return c.registerAppToEvents(t,n)},registerToPublicApiSet:u.registerToPublicApiSet,isPlatformAppInstalled:u.isPlatformAppInstalled,getPagesDataFromAppManifest:function(t,n,r,o,i){var a=u.getAppManifest(t,n),s=i?l.getState(t,i):"default",c=!!e.get(a,["pages",r,s]),p=e.get(a,["pages",r,c?s:"default"]),d=!!e.get(p,["defaultValues"]),g=d?e.get(p,"defaultValues"):p,f=d?e.get(p,"overrides"):e.get(a,["pages",r,"overrides"]);return e.isEmpty(f)?g:e.reduce(f,function(t,n){return e.isMatch(o,n.condition)&&(e.isArray(n.override)?t=n.override:e.assign(t,n.override)),t},g)},registerToAppsCompleted:function(e,t){i.registerToAppsCompleted(t)},getEditorSdkUrl:i.getEditorSdkUrl,setGhostStructure:function(t,n){var r=t.pointers.general.getGhostStructure(),o=t.dal.get(r);t.dal.set(r,e.defaults(n,o))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(412),r=n(413),o=n(414),i=n(415),a=n(26),s=n(2),u=n(3),c=n(1),l=["sourceId","type","name"],p=["targetId","type","name","part","viewMode"],d=["action","targetId","name","duration","delay","params","playOnce","type","viewMode"];function g(){return e.sortBy(e.keys(r.getSchema()))}function f(n,i,a){var s=o;if(i){var u=e.last(i.split(".")),c=t.getSchema()[u]||t.getSchema().AllComponents;s=e.isEmpty(c)?[]:e.filter(s,function(t){return e(t.groups).difference(c).isEmpty()})}return a&&(s=e.filter(s,function(t){return e(r.getSchema()[a].groups).difference(t.groups).isEmpty()})),e(s).map("name").sortBy().value()}function m(e,t){if(c.displayedOnlyStructureUtil.isRepeatedComponent(t.id)){var n=c.displayedOnlyStructureUtil.getRepeaterTemplateId(t.id),r=e.pointers.components.getPageOfComponent(t);return e.pointers.full.components.getComponent(n,r)}return t}function v(t,n){var r=P(t,n);return e.isEmpty(r)?null:r}function y(t,n){return e.get(n,"type")===s.VIEW_MODES.MOBILE&&t.dal.isExist(E(n))}function E(t){return e.defaults({type:s.VIEW_MODES.DESKTOP},t)}function I(t){return"animation"===e.get(t,"type","animation")}function S(t,n){return e.isEqual(e.pick(t,p),e.pick(n,p))}function h(t,n){return r=t.action,o=n.action,e.isEqual(e.pick(r,l),e.pick(o,l))&&S(t.behavior,n.behavior);var r,o}function P(e,t){var n=m(e,t),r=u.getBehaviorsItem(e,n);return r?JSON.parse(r):[]}function A(t,n,r){var o=JSON.stringify(r);e.isEmpty(r)?u.removeBehaviorsItem(t,n):u.updateBehaviorsItem(t,n,o)}function T(e,t){var n=e.pointers.components.getMasterPage(t),r=e.pointers.components.getComponent(s.COMP_IDS.PAGE_GROUP,n),o=u.getPropertyItemPointer(e,r);return e.pointers.getInnerPointer(o,"transition")}function O(){return e.sortBy(e.map(i,"legacyName"))}function C(e,t,n,r){var o=e.pointers.components;return e.siteAPI.previewAnimation(t.id,o.getPageOfComponent(t).id,n,r)}function _(e,t,n){e.siteAPI.stopPreviewAnimation(t,n)}return{getActionNames:g,getActionDefinition:function(t,n){if(e.has(r.getSchema(),n))return{type:"comp",name:n}},getBehaviorDefinition:function(t,n){return e.cloneDeep(e.find(o,{name:n}))},getBehaviorNames:f,isBehaviorable:function(t,n,r){var o=a.getType(t,n);return!e.isEmpty(f(0,o,r))},getComponentBehaviors:v,setComponentBehavior:function t(n,r,o,i){i&&(o.action=i);var u=function(t,n,r){var o={type:"ok",message:""},i=f(0,r);if(e.includes(i,n.name))if(e.isPlainObject(n))if(e.isEmpty(n))o.type="error",o.message+="Behavior can not be empty\n";else{var a=g();e.includes(a,n.action)||(o.type="error",o.message+="Action of type ".concat(n.action," does not exist\n"));var u=f(0,null,n.action);e.includes(u,n.name)||(o.type="error",o.message+="Behavior of type ".concat(n.name," is not allowed on action ").concat(n.action)),I(n)&&e.isNaN(Number(n.duration))&&e.isNaN(Number(n.params.duration))&&(o.type="error",o.message+="Animation duration must be a number\n"),I(n)&&e.isNaN(Number(n.delay))&&e.isNaN(Number(n.params.delay))&&(o.type="error",o.message+="Animation delay must be a number\n"),!n.viewMode||e.isString(n.viewMode)&&e.includes(s.VIEW_MODES,n.viewMode)||(o.type="error",o.message+="Behavior viewMode must be undefined or a string: 'DESKTOP', 'MOBILE' or 'BOTH' \n"),n.params&&!e.isPlainObject(n.params)&&(o.type="error",o.message+="Animation params property are optional, but if they exist params must be an object\n"),n.playOnce&&!e.isBoolean(n.playOnce)&&(o.type="error",o.message+="Animation playOnce property is optional, but if is exists playOnce must be a boolean\n");var c=e.difference(e.uniq(e.keys(n).concat(d)),d);e.isEmpty(c)||(o.type="error",o.message+="The keys [".concat(c,"] are not allowed values of a Behavior"))}else o.type="error",o.message+="Each behavior should be an object\n";else o.type="error",o.message+="Behavior of type ".concat(n.name," is not allowed on component of type ").concat(r);return o}(0,o,a.getType(n,r));if("error"===u.type)throw new Error(u.message);"screenIn"===o.action&&e.set(o,["params","doubleDelayFixed"],!0),y(n,r)&&t(n,E(r),o,i);var c=v(n,r)||[],l=e.partial(S,o);A(n,r,(c=e.reject(c,l)).concat(o))},removeComponentSingleBehavior:function t(n,r,o,i){y(n,r)&&t(n,E(r),o,i);var a=v(n,r),s={action:i};e.isString(o)?s.name=o:e.isObject(o)&&(s=e.assign(s,o)),A(n,r,a=a?e.reject(a,s):[])},removeComponentBehaviors:function(e,t){A(e,t,[])},removeComponentsBehaviorsWithFilter:function t(n,r,o){y(n,r)&&t(n,E(r),o);var i=v(n,r);A(n,r,i=i?e.reject(i,o):[])},updateBehavior:function(t,n,r,o,i){var a=m(t,n),s=P(t,a),u={action:e.defaults({sourceId:a.id},r),behavior:e.defaults({targetId:o.id},i)},c=e.partial(h,u);A(t,a,e.reject(s,c).concat(u))},removeBehavior:function(t,n,r,o,i){var a=m(t,n),s=P(t,a),u={action:e.defaults({sourceId:a.id},r),behavior:e.defaults({targetId:o.id},i)},c=e.partial(h,u),l=e.reject(s,c);l.length!==s.length&&A(t,a,l)},getBehaviors:P,hasBehavior:function(t,n,r,o,i){var a=m(t,n),s=P(t,a),u={action:e(a&&{sourceId:a.id}).defaults(r).pick(l).value(),behavior:e(o&&{targetId:o.id}).defaults(i).pick(p).value()};return e.some(s,u)},getPageTransitionsNames:O,getPagesTransition:function(e){var t=T(e,s.VIEW_MODES.DESKTOP);return e.dal.get(t)},setPagesTransition:function(t,n){if(!e.includes(O(),n))throw new Error("No such transition ".concat(n));var r=T(t,s.VIEW_MODES.DESKTOP);t.dal.set(r,n)},executeAction:function(e,t){e.siteAPI.executeAction(t)},deprecatedPreviewAnimation:function(e,t,n,r,o){return C(e,t,n,o)},deprecatedStopPreviewAnimation:function(e,t,n){_(e,n)},previewAnimation:C,previewTransition:function(t,n,r,o,i){var a=t.pointers.components,s=e.isArray(n)?n:[n],u=e.isArray(r)?r:[r],c=s.length>0?s[0]:u[0];return t.siteAPI.previewTransition(e.map(s,"id"),e.map(u,"id"),a.getPageOfComponent(c).id,o,i)},stopPreviewAnimation:_,executeAnimationsInPage:function(e){e.siteAPI.reloadPageAnimations()},stopAndClearAllAnimations:function(e){e.siteAPI.stopAndClearAllAnimations()}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C;e.exports=(r=n(0),o=n(5),i=n(18),n(3),a=n(4),s=n(14),u=n(80),n(81),c=n(30),l=n(2),p=n(32),d=n(33),g=n(79),f=n(190),m=function(e,t,n){var o=r.filter(e,function(e){return function(e,t){return e.pendingAction===p.APP_ACTION_TYPES.REMOVE||s.isAppAutoRevoked(e)&&E(e,t)&&!S(e)&&!u.isPending(void 0,e)}(e,t)});return n&&r.isBoolean(n.excludeHybrid)&&n.excludeHybrid?r.filter(o,function(e){return s.isHybridAppAndEditorPartNotDismissed(e)}):o},v=function(e){return r.get(e,"appFields.platform.editorScriptUrl")&&!r.get(e,"appFields.platform.viewerScriptUrl")&&r.isEmpty(e.widgets)},y=function(e,t){return r.filter(e,function(e){return I(e,t)||function(e){return e.notProvisioned&&v(e)}(e)})},E=function(e,t){return s.isEditorOrHybridApp(e)&&s.isAppPermissionsIsGranted(e)&&!r.includes(r.invokeMap(t,"toString"),e.applicationId.toString())&&!v(e)},I=function(e,t){return s.isEditorOrHybridApp(e)&&s.isAppPermissionsIsRevoked(e)&&r.includes(r.invokeMap(t,"toString"),e.applicationId.toString())},S=function(e){return r.isBoolean(e.preInstalled)&&e.preInstalled},P=function(e,t,n){var o,a=i.getPageIdList(e,!0,!0),s=r.find(a,function(i){var a=O(e,i);return o=r.find(a,function(e){return e.applicationId.toString()===t.toString()&&n(e)}),!r.isUndefined(o)});return s?{pageId:s,compId:o.id}:null},A=function(e,t){t=t||-1;var n=i.getPageIdList(e,!0,!0);return r.some(n,function(n){return T(e,n,t)})},T=function(e,t,n){var o=e.pointers.page.getPageData(t),i=e.dal.get(o);return r.some(i,function(e){return r.get(e,"applicationId","").toString()===n.toString()})},C=function(e){if(!e||!e.size)return!1;var t=!1,n=e.getIn(["data","document_data"]);return n&&n.forEach(function(e){t=t||d.isTpaByDataType(e.get("type"))}),t},{isMultiSectionPage:function(e,t){var n=r.get(t,"tpaApplicationId"),o=r.get(t,"tpaPageId"),i=s.getAppData(e,n);if(i&&i.appDefinitionId){var a=s.getWidgetDataFromTPAPageId(e,i.appDefinitionId,o);return r.get(a,"appPage.hidden")}return!1},getInstalledAppsOnPage:h=function(e,t){var n=e.pointers.page.getPageData(t),o=e.dal.get(n),i=r(o).filter(function(e){return d.isTpaByDataType(e.type)}).map("applicationId").uniq().value(),a=s.getAppsData(e);return r(a).pick(i).values().value()},getAllTpaCompsOnPage:O=function(e,t){var n=i.getPage(e,t),o=a.getTpaChildren(e,n);return r.map(o,function(n){return r.assign(a.data.get(e,n),{id:n.id,pageId:t})})},isMainSectionInstalled:function(e,t){var n=i.getPageIdList(e,!0);return r.some(n,function(n){var o=O(e,n);return r.some(o,function(e){return e.applicationId.toString()===t.toString()&&e.type===c.DATA_TYPE.TPA_SECTION})})},getWidgetsByAppId:function(e,t){var n=[],o=i.getPageIdList(e,!0,!0);return r.forEach(o,function(o){var i=O(e,o);n=r.union(n,r.filter(i,function(e){return e.applicationId.toString()===t.toString()&&e.type===c.DATA_TYPE.TPA_WIDGET}))}),r.isEmpty(n)?null:n},getAllAppCompsByAppId:function(e,t){var n=[];r.isArray(t)||(t=[t]),t=r(t).compact().invokeMap("toString").value();var o=i.getPageIdList(e,!0,!0);return r.forEach(o,function(o){var i=O(e,o);n=r.union(n,r.filter(i,function(e){return e&&e.applicationId&&r.includes(t,e.applicationId.toString())}))}),r.isEmpty(n)?null:n},isMultiSectionInstalled:function(e,t){var n=[];t=t||-1;var o=i.getPageIdList(e,!0);return r.forEach(o,function(o){var i=O(e,o);n=r.union(n,r.filter(i,function(e){return e&&e.applicationId&&e.applicationId.toString()===t.toString()&&e.type===c.DATA_TYPE.TPA_SECTION}))}),r.size(n)>1},getHiddenSections:function(e,t){var n=[],o=i.getPageIdList(e,!0);return r.forEach(o,function(o){var i=O(e,o);n=r.union(n,r.filter(i,function(e){return e.applicationId.toString()===t.toString()&&e.type===c.DATA_TYPE.TPA_MULTI_SECTION}))}),r.isEmpty(n)?null:n},getFirstAppCompPageId:function(e,t,n){var o=s.getAppDataByAppDefinitionId(e,t),i=r.get(o,"applicationId",null),a=i&&function(e,t){return P(e,t,function(e){return e.type===c.DATA_TYPE.TPA_SECTION})}(e,i);return!a&&n&&(a=function(e,t){var n=r.find(t.widgets,{default:!0});return n?P(e,t.applicationId,function(e){return e.widgetId===n.widgetId}):null}(e,o)),a=i&&(a||P(e,i,function(){return!0}))},isApplicationIdExists:A,isAppInstalledBy:function(e,t,n){var r=s.getAppDataByAppDefinitionId(e,t);if(r){var o=A(e,r.applicationId);return n?o&&!r.demoMode:o}return!1},isAppInstalledOnPage:function(e,t,n,r){var o=s.getAppDataByAppDefinitionId(e,n);if(o){var i=T(e,t,o.applicationId);return r?i&&!o.demoMode:i}return!1},getDeletedAppsIds:function(e){var t=s.getAppsData(e);if(o.isOpen("ds_publicMethodInit")){var n=function(e){var t=i.getPageIdList(e,!0,!0);return r.reduce(t,function(t,n){var o=e.pointers.page.getPageData(n),i=e.dal.get(o),a=r(i).map(function(e){return r.get(e,"applicationId","").toString()}).compact().value();return t=t.concat(a)},[])}(e);return r(t).filter(function(e){return!r.includes(n,e.applicationId.toString())&&s.isEditorOrHybridApp(e)}).map("applicationId").value()}return r(t).filter(function(t){return!A(e,t.applicationId)&&s.isEditorOrHybridApp(t)}).map("applicationId").value()},getAppsDefIdToProvisionOnSiteLoad:function(e){var t=s.getAppsData(e);return r(t).filter(function(t){return t.demoMode&&(A(e,t.applicationId)||g.isPlatformAppInstalled(e,t.appDefinitionId))}).map("appDefinitionId").value()},getAppsToGrantAndRevoke:function(e,t,n,r){var o=f.getAllAppIdsInstalledOnPages(t,e,r);return{revoke:m(e,o,n),grant:y(e,o)}},getAllAppIdsInstalledOnPages:f.getAllAppIdsInstalledOnPages,areTpaCompsWereUnInstalled:function(e,t,n,o){if(function(e){var t=!1;return e&&e.forEach(function(e){t=t||C(e)}),t}(n))return!0;var i=f.getAllAppIdsInstalledOnPages(e)||[],a=f.getAllAppIdsInstalledOnPages(t)||[],u=i.length===a.length&&!r.isEqual(i,a);return i.length>a.length||u||function(e,t,n,o){if(e.get(l.MASTER_PAGE_ID)){var i=r.find(o,{appDefinitionId:c.APP_DEF_ID.CHAT});return i&&s.isAppPermissionsIsGranted(i)&&!r.includes(t,i.appDefinitionId)&&!r.includes(n,i.appDefinitionId)}return!1}(t,i,a,o)},getAppsToGrantPermissions:y,getAppPages:function(e,t){var n=i.getPageIdList(e,!1,!1);return r(n).map(function(t){return r.merge(i.data.get(e,t),{pageId:t})}).filter({tpaApplicationId:parseInt(t,10)}).value()},getPagesByApplicationIds:function(e,t){var n=i.getPagesDataItems(e);return r.filter(n,function(e){return r.includes(t,e.tpaApplicationId)})},isAppComponentInstalled:function(e,t){var n=i.getPageIdList(e,!0,!0);return r.some(n,function(n){var o=e.pointers.page.getPageData(n),i=e.dal.get(o);return r.some(i,{widgetId:t})})},isSectionInstalledByTpaPageId:function(e,t,n){var o=i.getPagesDataItems(e);return r.some(o,{tpaApplicationId:t,tpaPageId:n})},isPlatformOnlyAppReinstalled:function(e,t,n){var o=r.filter(t,function(t){return!!s.hasEditorPlatformPart(t)&&!0===r.get(t.permissions,"revoked")&&f.isPlatformAppActive(t,e,n)});return!r.isEmpty(o)},isPlatformOnlyAppUninstalled:function(e,t,n){var o=r.filter(t,function(t){return!!s.hasEditorPlatformPart(t)&&!1===r.get(t.permissions,"revoked")&&!f.isPlatformAppActive(t,e,n)});return!r.isEmpty(o)},getInstalledDependentAppsData:function(e,t){var n=s.getAppData(e,t),o=r.get(n,"appDefinitionId"),a=s.getDependentApps(e,o);if(!r.isEmpty(a)){var u=function(e){var t=i.getPageIdList(e,!0,!0),n=r.reduce(t,function(t,n){var o=r.map(h(e,n),"applicationId");return r.union(t,o)},[]);return r.uniq(n)}(e);return r.reduce(a,function(t,n){var o=s.getAppDataByAppDefinitionId(e,n);return function(e,t){return s.isAppAutoRevoked(t)?r.includes(e,r.get(t,"applicationId")):s.isAppActive(t)}(u,o)&&t.push(o),t},[])}return[]}})},function(e,t){e.exports=a},function(e){e.exports=JSON.parse('{"SITE_GAPS_MAP":{"eventId":356,"params":["above_header","above_page","above_footer"]},"MESH_MIGRATION":{"eventId":410,"params":["status","reasonid","pages_count"]},"MESH_MIGRATION_PRESAVE":{"eventId":424,"params":["status","reasonid","pages_count"]},"MESH_MIGRATION_WIZARD":{"eventId":426,"params":["status","reasonid","pages_count"]},"AUTO_SAVE_DIFFS_RESTORED":{"eventId":623,"params":[]},"FULL_DOCUMENT_SAVE_ATTEMPTED_AFTER_PARTIAL_FAILURE":{"eventId":632,"params":["endpoint"]},"DATA_ITEM_REFS_SAVE_DATAFIXER":{"src":38,"eventId":659,"params":{"dataType":"dataType","dataItemType":"dataItemType"}},"PLATFORM_API_CALL":{"endpoint":"platform","src":79,"evid":24,"params":["app_name","module","function","arguments","pageId"]},"SECTION_LAYOUT_MIGRATION_REPARENT":{"endpoint":"editor","src":38,"evid":753,"params":["component_id","z_index_changed","new_container_id"]},"SECTION_LAYOUT_MIGRATION_CLOSE_GAP":{"endpoint":"editor","src":38,"evid":754,"params":["gap_size","gap_type","is_closed"]},"SECTION_LAYOUT_MIGRATION_RUN":{"endpoint":"editor","src":38,"evid":757,"params":[]},"SOAP_ORDER_FIXER":{"endpoint":"editor","src":38,"evid":842,"params":["is_changed","soap_order_before","soap_order_after","components_attached_to_header"]},"EDITOR_PLATFORM_APPS_LOADED":{"endpoint":"platform","src":79,"evid":25,"params":["app_list","number_of_apps"]},"MOVE_STYLE_TO_PAGES_MIGRATION":{"endpoint":"document","src":40,"evid":101,"params":["mp_styles_before","mp_styles_after","page_styles_after","errorReason","duration","esi","dsOrigin"]},"REMOVE_BADLY_DUPLICATED_PAGES":{"endpoint":"document","src":40,"evid":104,"params":["numberOfInvalidPages","errorReason","duration","esi","dsOrigin"]},"PREVIEW_SITE_READY":{"endpoint":"document","eventId":103,"src":40,"params":["dsOrigin","esi"]},"DOCUMENT_SERVICES_LOADED":{"endpoint":"document","eventId":102,"src":40,"params":["dsOrigin","esi"]},"DEPRECATED_PUBLIC_API_CALL":{"endpoint":"document","eventId":105,"src":40,"params":["methodName","dsOrigin"]},"FIX_MISSING_COMPONENT_STYLE":{"endpoint":"document","eventId":106,"src":40,"params":["dsOrigin","componentType","style"]},"INPUT_WRONG_PLACEHOLDER":{"eventId":535,"src":42,"params":["comp_id"]}}')},function(e,t,n){var r;e.exports=(r=n(20).services.schemasService,function(e){return!!r.isSystemStyle(e)})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(27),i=n(1),a=n(447),s=n(125),u=n(2),{runMobileConversionOnPage:function(e,t){a.mobileConversion({ps:e}).runMobileConversionOnPage(t)},runMobileConversionOnAllPages:function(e,t){var n=r.get(t,"heuristicStrategy");return"minimal"===n?a.mobileConversion({ps:e}).syncMobileSite():a.mobileConversion({ps:e,heuristicStrategy:n}).runMobileConversionOnAllPages()},prepareForConversion:function(e,t){var n=e.dal.get(e.pointers.page.getAllPagesPointer()),o=r.mapValues(n,function(t,n){return e.dal.get(e.pointers.page.getPagePointer(n))}),s=a.mobileConversion({ps:e});return t&&(o=r.pick(o,t)),r.mapValues(o,function(e,t){var n=e.structure.DESKTOP,r=i.mobileUtils.buildDeepStructure(n[t],n);return s.prepareConversion(r)})},applyConversion:function(e,t){var n=r.mapValues(t,o.conversionUtils.getChildren);a.mobileConversion({ps:e}).applyConvertedComponentsMap(n)},execConversion:function(e,t,n){var o={ps:e,heuristicStrategy:n},i=a.mobileConversion(o);r.forEach(t,function(e){return i.executeConversion(e)})},runMobileMergeOnPage:function(e,t,n,r){a.mobileConversion({ps:e}).runMobileMergeOnPage(t,n,r)},addMobileOnlyComponent:function(e,t,n){var r=e.pointers.page.getComponentsMapPointer("masterPage",u.VIEW_MODES.MOBILE),s=e.dal.get(r,!0),c=i.mobileUtils.buildDeepStructure(s.masterPage,s);c.mobileComponents=c.children;var l=a.mobileConversion({ps:e});l.prepareConversion(c),o.mobileOnlyComponents.addComponent(c,t),l.applyConvertedComponentsToPage(o.conversionUtils.getChildren(c),c.id,n)},syncMobileSite:function(e){a.mobileConversion({ps:e}).syncMobileSite()},runPartialConversionAllPages:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.config.disableMobileConversion?a.mobileConversion({ps:e}).syncMobileSite():a.mobileConversion({ps:e}).runMobileMergeOnAllPages(t)},inspect:function(e,t){return a.mobileConversion({ps:e}).inspect(t)},getComponentsOrder:function(e,t){return a.mobileConversion({ps:e}).getComponentsOrder(t)},shouldCreateMobilePreset:s.shouldCreateMobilePreset,createMobilePreset:s.createMobilePreset})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(34),i=n(48),a=n(24),{getExistingWixCodeAppFromPS:function(e){return r.head(o.filterAppsDataByType(e,a.WIX_CODE_SPEC_TYPE))},getExistingWixCodeAppFromSnapshot:function(e){var t=i.extractFromSnapshot(e,["rendererModel","clientSpecMap"],!0);return r.find(t,{type:a.WIX_CODE_SPEC_TYPE})}})},function(e,t){e.exports=s},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(162),i=n(1),a=o,{getRevertibleMetaDataInfo:function(){return r.filter(a,{revertible:!0})},getNonRevertibleMetaDataInfo:function(){return r.filter(a,{revertible:!1})},getProperty:function(e,t){var n=e.pointers.metadata.getSiteMetaDataPointer(t);return n?e.dal.get(n):(i.log.error("SiteMetaData getProperty was called with an invalid metadata property"),null)},setProperty:function(e,t,n){var r=e.pointers.metadata.getSiteMetaDataPointer(t);r?e.dal.set(r,n):i.log.error("SiteMetaData setProperty was called with an invalid metadata property")},PROPERTY_NAMES:r.mapValues(a,function(e,t){return t})})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(21),o={},i={};var a=function(e,t){return e.pointers.data.getDataItemFromMaster(t)},s=function(e,t){return e.pointers.data.getDataItemFromMaster(t)};function u(e){return(r.getPageData(e,t.siteConstants.MASTER_PAGE_ID)||{}).appStudioData}function c(t){var n=u(t)||{};return e.map(n.widgets,function(e){var n=a(t,e.id),r=t.dal.get(n);return{pointer:n,name:r.name,variations:r.variations}})}function l(t,n){var r=c(t);return e.find(r,function(e){var r=t.dal.get(e.pointer);return r&&r.rootCompId==="#".concat(n)})||e.get(p(t,n),"widget")}function p(t,n){var r,o=c(t),i=e.find(o,function(o){return r=e.find(o.variations,function(r){var o=t.pointers.data.getDataItemFromMaster(e.replace(r,"#","")),i=t.dal.get(o);return e.get(i,"rootCompId")==="#".concat(n)})});return{variationId:r,widget:i}}function d(t,n){return!!r.doesPageExist(t,n)&&(e.isUndefined(i[n])&&(i[n]=Boolean(e.get(p(t,n),"variationId"))),i[n])}return{isWidgetPage:function(t,n){return!!r.doesPageExist(t,n)&&(e.isUndefined(o[n])&&(o[n]=Boolean(l(t,n))),o[n]||d(t,n))},isVariationPage:d,getWidgetPointerByWidgetId:a,findWidgetByPageId:l,findVariationByPageId:p,getAllWidgets:c,getAppStudioData:u,getAppStudioMetaData:function(t){var n=u(t);return n?e.pick(n,["name","description"]):void 0},getAllSerializedWidgets:function(t){return e.map(c(t),function(n){var r=t.dal.get(n.pointer),o=e.pick(r,"name","widgetApi","rootCompId");return o.variations=e.map(r.variations,function(n){var r=t.pointers.data.getDataItemFromMaster(e.replace(n,"#","")),o=t.dal.get(r);return e.pick(o,["rootCompId","name"])}),o})},getAllCustomDefinitions:function(t){var n=u(t)||{};return e.map(n.customDefinitions,function(n){var r=s(t,n.id),o=n.structure,i=e.head(e.keys(o));return{pointer:r,name:i,title:o[i].title,type:o[i].$ref||o[i].type}})},getAllSerializedCustomDefinitions:function(t){var n=u(t)||{};return e.map(n.customDefinitions,"structure")},getSerializedCustomDefinition:function(t,n){return e.get(t.dal.get(n),"structure")},cleanCache:function(){o={},i={}}}}()},function(e,t,n){e.exports=(n(5),{disableable:!0})},function(e,t){e.exports=u},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(78),o=function(t){return e.get(t,"getResponseHeader")};function i(n){return new Promise(function(i,a){n.success=i,n.error=function(e,t){var i=r.build({errorType:t,xhr:e});i.request=n,o(e)?a(i):e.text().then(function(e){i.xhr.responseText=e,a(i)})},n.data&&!e.isString(n.data)&&(n.data=JSON.stringify(n.data)),t.ajaxLibrary.ajax(n)})}return{sendRequest:function(e,t,n){var r={type:t,url:e,dataType:"json",contentType:"application/json"};return n&&(r.data=JSON.stringify(n)),i(r)},sendRequestObj:i,extractFromSnapshot:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.getIn(t);return n&&(r=r.toJS()),r},requestTypes:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(57),r=n(42),o=n(48),i=n(24),a=n(480),s=function(e){return{getBaseUrl:function(){var t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,"wixCodeMonitoringHubUrl"))},getAppId:function(){return t.getGridAppId(e)},getMetaSiteId:function(){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)},getInstanceId:function(){var t=r.getExistingWixCodeAppFromPS(e);return t?t.instanceId:""}}},u=function(e){return{getBaseUrl:function(){return e.getIn(["serviceTopology","wixCodeMonitoringHubUrl"])},getAppId:function(){return o.extractFromSnapshot(e,i.paths.GRID_APP_ID)},getMetaSiteId:function(){return o.extractFromSnapshot(e,["rendererModel","metaSiteId"])},getInstanceId:function(){var t=r.getExistingWixCodeAppFromSnapshot(e);return t?t.instanceId:""}}};function c(t,n){var r=function(t,n){var r={appId:t.getAppId()||"",params:{metaSiteId:t.getMetaSiteId(),instanceId:t.getInstanceId()}};return e.merge({},r,n)}(t,n),o=t.getBaseUrl();return a.trace(r,o)}return{levels:a.levels,trace:function(e,t){return c(s(e),t)},traceWithSnapshot:function(e,t){return c(u(e),t)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(3),o=n(26),i=n(124),a=n(196),s=n(18),u=n(10),c=n(60),l=n(15),p=n(6),d=n(16),g=128,f={VALID:"VALID",ALREADY_EXISTS:"ALREADY_EXISTS",TOO_SHORT:"TOO_SHORT",TOO_LONG:"TOO_LONG",INVALID_NAME:"INVALID_NAME"},m="originalNicknameContext";function v(t,n,r){return e(n).map(function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T(e,t),r=_(c.get(e,t),n),i=o.getType(e,t),s=a.getCustomGetter(i);if(s)return s(e,t,r,n);return r?(u={},l=t.id,p=r,l in u?Object.defineProperty(u,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[l]=p,u):{};var u,l,p}(t,e,r)}).reduce(e.assign)}function y(e,t){return e.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot(t)}function E(t,n,r){return r?e.reject(y(t,r),r):y(t,n)}function I(t,n,r){var o=T(t,r),i=E(t,r,o),a=v(t,i,o),s=S(t,i,e.assign({},a,n),o);return e.assign(a,v(t,s,o))}function S(t,n,r,o){var i=e.groupBy(n,function(e){return u.getDefaultNickname(t,e)});return e.flatMap(i,function(n,i){var a=function(t,n){var r=new RegExp("".concat(t,"(\\d+)"));return e(n).map(function(t){var n=r.exec(t);return n?e.parseInt(n[1]):null}).concat(0).max()+1}(i,r);return function(t,n,r,o,i){return e(n).filter(function(e){return x(t,e,i)}).map(function(e){var n=r+o++;return b(t,e,n,i),e}).value()}(t,n,i,a,o)})}function h(t,n,r){var o=t.pointers.components.getPage("masterPage",r),i=v(t,y(t,o),null),a=e.reduce(n,function(n,o){var a=t.pointers.components.getPage(o,r),s=I(t,i,a);return e.assign(n,s)},{});I(t,a,o)}function P(n,r,o){e.includes(r,"masterPage")?A(n,o):(o=d.getViewMode(n,o,l),h(n,r,t.VIEW_MODES.DESKTOP),o!==t.VIEW_MODES.DESKTOP&&(!function(n,r,o){e(r).concat("masterPage").uniq().forEach(function(r){var i=n.pointers.components.getPage(r,o),a=T(n,i),s=y(n,i),u=n.pointers.components.getPage(r,t.VIEW_MODES.DESKTOP);e(s).filter(function(e){return x(n,e,a)}).forEach(function(e){var t=n.pointers.components.getComponent(e.id,u);if(t){var r=D(n,t,a);r&&b(n,e,r,a)}})})}(n,r,o),h(n,r,o)))}function A(t,n){var r=e.map(s.popupPages.getDataList(t),"id");P(t,s.getPageIdList(t).concat(r),n)}function T(e,t){return i.getNicknameContext(e,t)}function O(t,n){return t?e.find(n,{controllerRef:{id:t.id}}):w(n)}function C(t,n,o){if(n){var i=(r.getDataItem(t,n)||{}).id;if(i)return e.find(o,{controllerId:i})}return w(o)}function _(e,t){var n=O(t,e);if(n)return n.role}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T(e,t);return _(c.get(e,t),n)}function w(t){return e.find(t,{type:"WixCodeConnectionItem"})}function b(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T(t,n);if(N(t,n,o)!==f.VALID)throw new Error("The new nickname you provided is invalid");if(p.executeHook(p.HOOKS.WIX_CODE.SET_NICKNAME_BEFORE,"updateConnectionsItem",[t,n,o]),e.get(n,"id")===e.get(i,"id"))throw new Error("Cannot set nickname of context component to itself");var a=c.get(t,n),s=O(i,a);s?s.role=o:a=[function(e,t){return e?{type:"ConnectionItem",role:t,controllerRef:e,isPrimary:!0}:{type:"WixCodeConnectionItem",role:t}}(i,o)].concat(a);r.updateConnectionsItem(t,n,a),p.executeHook(p.HOOKS.WIX_CODE.SET_NICKNAME_AFTER,"updateConnectionsItem",[t,n,o])}function M(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T(t,n),i=c.get(t,n),a=O(o,i);a&&(e.remove(i,a),i.length>0?r.updateConnectionsItem(t,n,i):r.removeConnectionsItem(t,n))}function R(t,n,r,o){if(!r)return!1;o=o?t.pointers.full.components.getComponent(o.id,n):void 0;var i=function(t,n){var r=n.type;if("masterPage"===n.id){var o=t.pointers.page.getNonDeletedPagesPointers(!0);return e.map(o,function(e){return t.pointers.full.components.getPage(e.id,r)})}return[n,t.pointers.full.components.getMasterPage(r)]}(t,n);return e.some(i,function(n){var i=T(t,n),a=t.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot(n);return!e(a).thru(function(e){return v(t,e,i)}).pickBy(function(e,t){return!o||o.id!==t}).pickBy(function(e){return e===r}).isEmpty()})}function N(t,n,r){return e.isEmpty(r)?f.TOO_SHORT:r.length>g?f.TOO_LONG:R(t,o.getPage(t,n),r,n)?f.ALREADY_EXISTS:function(e){return!/^[a-zA-Z0-9]+$/.test(e)}(r)?f.INVALID_NAME:f.VALID}function x(e,t,n){return!e.pointers.components.isMasterPage(t)&&!D(e,t,n)&&u.shouldAutoSetNickname(e,t)}return{getNicknameByConnectionPointer:function(e,t,n,r){return _(c.getByConnectionPointer(e,t,n),r)},generateNicknamesForComponents:function(e,t,n,r){var o=T(e,n),i=e.pointers.components.getPage("masterPage",r);S(e,t,v(e,E(e,n,o).concat(E(e,i,o)),o),o)},generateNicknamesForSite:A,getNickname:D,setNickname:b,removeNickname:M,removeNicknameFromComponentIfInvalid:function(t,n,r){var i=o.isPageComponent(t,r)?r:o.getPage(t,r),a=T(t,i);e.forEach(t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(n),function(e){var n=D(t,e,a);R(t,i,n,e)&&M(t,e,a)})},updateConnectionsIfNeeded:function(t,n,o,i){var a=t.pointers.full.components.getPageOfComponent(o),s=T(t,a);!function(t,n,o){var i=e.get(o,["connections","items"],[]),a=e.find(i,{type:"WixCodeConnectionItem"});if(n&&a){var s=a.role,u=r.getDataItem(t,n).id,l=c.createConnectionItem(s,u);o.connections.items=e(i).without(a).concat([l]).value()}}(t,s,i),function(t,n,r,o,i){var a=C(t,r,o.connections.items);a&&R(t,i,a.role,n)&&e.remove(o.connections.items,a)}(t,n,s,i,a)},updateNicknameContextByNewContainer:function(t,n,o,i){var a=e.get(o,["connections","items"]);if(!e.isEmpty(a)){var s=e.get(o,["custom",m]);if(s){var u=C(t,s,a);if(u){var c=function(t,n){var o=T(t,n);return e.get(r.getDataItem(t,o),"id")}(t,i);u.controllerId=c}}}},setOriginalContextToSerializedComponent:function(e,t,n){var r=T(e,t);r&&(n[m]=r)},validateNickname:N,generateNicknamesForPages:P,hasComponentWithThatNickname:R,getComponentsInPage:y,VALIDATIONS:f}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(25),r=n(220),o={String:1,"wix:Date":2,"wix:RichText":3,"String|AsPrice":4,"wix:Image":5,"wix:Video":6,"String|AsButton":7},i=/(.*)_\d+$/;function a(t){t&&t.fields&&(t.fields=e.sortBy(t.fields,function(t){return"title"===t.name?Number.MIN_VALUE:o[function(t){var n=t.metadata&&t.metadata.showAsHint;return e.compact([t.type,n]).join("|")}(t)]||Number.MAX_VALUE}))}function s(n){var r=n.dal.getByPath(t.getBaseTypesPath());return e.forEach(r,a),r}function u(n,r){var o=i.exec(r),a=o?o[1]:r,s=function(t,n){var r=new RegExp("".concat(t,"_(\\d+)$"));return e(n).map(function(t){var n=r.exec(t);return n?e.parseInt(n[1]):null}).concat(0).max()+1}(a,n.dal.getKeysByPath(t.getBaseTypesPath()));return"".concat(a,"_").concat(s)}return{getType:function(e,n){var r=e.dal.getByPath(t.getTypePath(n));return a(r),r},getAllTypes:s,createType:function(n,o){o=o||{};var i={};return i.name=u(n,o.name||"type"),i.displayName=function(t,n){var o=e.map(s(t),"displayName"),i=n;for(;e.includes(o,i);)i=r.incNumberSuffix(i);return i}(n,o.displayName||i.name),i.version=0,i.baseTypes=o.baseTypes||[],i.fields=o.fields||[],n.dal.full.setByPath(t.getTypePath(i.name),i),function(e,n){e.dal.full.setByPath(t.getBaseItemsPath(n),{})}(n,i.name),i.name}}}()},function(e,t,n){var r;e.exports=(r=n(161),n(22).register("documentServices","error",r),r)},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(3),o=n(32),i=n(12),a=n(6),s=n(90),u="platform.components.AppController",c="platform.components.AppWidget";function l(e,t){var n=i.getComponentType(e,t);if(n!==u&&n!==c)throw new Error("controllerRef component type is invalid - should be an AppController or AppWidget")}function p(e,t){return l(e,t),r.getDataItem(e,t)}function d(e,t){var n=p(e,t);return n.settings?JSON.parse(n.settings):{}}function g(e,t,n){l(e,t),r.updateDataItem(e,t,n)}function f(e,t,n){var r;try{r=JSON.stringify(n)}catch(e){throw new Error("Invalid settings item - should be JSON stringifiable")}g(e,t,{settings:r})}function m(e,n){var r=e.pointers.platform.getAppStatePointer(),i=e.dal.get(e.pointers.getInnerPointer(r,n));if(i)return i;var a=t.displayedOnlyStructureUtil.getReferredCompId(n);return a&&e.dal.get(e.pointers.getInnerPointer(r,a))||o.Controller.DEFAULT_STATE}function v(e,t){var n=e.pointers.platform.getAppManifestPointer(t);return e.dal.isExist(n)}function y(t,n,r,i){var a;if(!v(t,i))return{behavior:a={duplicatable:!1,canReparent:!1,rotatable:!1,pinnable:!1,resizable:!1,toggleShowOnAllPagesEnabled:!1},connections:{"*":{behavior:a}}};var s=function(t){var n=e.get(t,o.Controller.CONNECTIONS),r=e.get(n,o.Controller.WILDCARD_ROLE);return r&&e.set(t,o.Controller.CONNECTIONS,e.mapValues(n,function(t){return e.defaults({},t,r)})),t},u=m(t,n),c=t.pointers.platform.getControllerStageDataPointer(i,r,u),l=s(t.dal.get(c));if(u===o.Controller.DEFAULT_STATE)return l;var p=t.pointers.platform.getControllerStageDataPointer(i,r,o.Controller.DEFAULT_STATE);return function(t,n){var r=e.get(t,o.Controller.CONNECTIONS),i=e.get(n,o.Controller.CONNECTIONS);if(r&&i){var a=e.mapValues(r,function(t,n){return e.defaults({},t,i[n])});e.set(t,o.Controller.CONNECTIONS,e.defaults(a,i))}return e.defaults({},t,n)}(l,s(t.dal.get(p)))}function E(t,n,r){if(n&&r){var i=p(t,n),a=i.applicationId,s=i.controllerType;return function(t,n,r,i,a){if(!v(t,i))return null;var s=function(n){var s=t.pointers.platform.getControllerRolePointer(i,r,n,a),u=t.pointers.platform.getControllerRolePointer(i,r,n,o.Controller.WILDCARD_ROLE),c=t.dal.get(s),l=t.dal.get(u);return c||l?e.defaults({},c,l):null},u=m(t,n),c=s(u);if(u===o.Controller.DEFAULT_STATE)return c;var l=s(o.Controller.DEFAULT_STATE);return c||l?e.defaults({},c,l):null}(t,n.id,s,a,r)}}return{setSettings:f,getSettings:d,setSettingsIn:function(t,n,r,o){var i=d(t,n);e.set(i,r,o),f(t,n,i)},getSettingsIn:function(t,n,r){var o=d(t,n);return e.get(o,r)},getName:function(t,n){return e.get(p(t,n),"name")},setName:function(e,t,n){g(e,t,{name:n})},setState:function(t,n){var r=t.pointers.platform.getAppStatePointer();e.forEach(n,function(n,o){e.forEach(n,function(e){t.dal.full.set(t.pointers.getInnerPointer(r,e.id),o)})}),a.executeHook(a.HOOKS.PLATFORM.AFTER_CONTROLLERS_SET_STATE,"controller",[n])},getState:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return m(e,t.id)}),getControllerStageDataByControllerRef:function(e,t){if(t){var n=p(e,t),r=n.applicationId,o=n.controllerType;return y(e,t.id,o,r)}},getControllerRoleStageDataByControllerRefAndRole:E,getConnectedComponentStageData:function(t,n){var r=s.getPrimaryConnection(t,n);if(r){var i=e.get(r,["role"],o.Controller.WILDCARD_ROLE);return E(t,r.controllerRef,i)}},getControllerStageData:y}}()},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(1),i=n(72),a=["MAIN_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENUS","masterPage"],{isHorizontallyDocked:o.layoutUtils.isHorizontallyDocked,isVerticallyDocked:o.layoutUtils.isVerticallyDocked,getBoundingY:o.boundingLayout.getBoundingY,getBoundingX:o.boundingLayout.getBoundingX,getBoundingHeight:o.boundingLayout.getBoundingHeight,getBoundingWidth:o.boundingLayout.getBoundingWidth,getBoundingLayout:i.getBoundingLayout,getLayoutFromBoundingLayout:function(e,t,n){return o.boundingLayout.getLayoutFromBoundingLayout(t,n)},canMoveDataItemToAnotherPage:function(e,t){switch(t){case o.constants.DATA_TYPES.data:return n=e.id,!r.includes(a,n);case o.constants.DATA_TYPES.theme:return"system"!==e.styleType}var n;return!0},ensureWithinLimits:function(e,t,n){if((t=r.isUndefined(t)?e:t)>(n=r.isUndefined(n)?e:n))throw new Error("min limit is greater than max limit");return e<t?t:e>n?n:e},getChildrenToPreserveProportionsByType:function(e,t,n,o){return r.reject(n,function(n){var i=t.getComponentType(e,n.component);return r.includes(o,i)})},getComponentLayout:i.getComponentLayout,getPositionAndSize:i.getPositionAndSize})},function(e,t,n){e.exports=function(){var e=n(0),t=n(6),r=n(1),o=n(31),i=n(95),a=n(2),s=!0;function u(e){var t=e.pointers.general.getCommittedMobilePages();e.dal.set(t,null)}function c(t,n){var r=e.keys(n);return e.pickBy(t,function(t,n){return e.includes(r,n)})}function l(t){var n=t.pointers.page.getNonDeletedPagesPointers(s);return i.hasMobileStructure(t)?e.filter(n,function(e){return t.dal.wasValueChangedSinceLastSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE,e)}):n}function p(t,n){var i=t.pointers.page.getPagePointer(n),a=o.getMobileActiveModesMap(t,n),s=e.set({},n,a);return r.fullToDisplayedJson.getDisplayedJson(t.dal.full.get(i),s,n).structure}return{initialize:function(e){t.unregisterHooks([t.HOOKS.PUBLISH.BEFORE]),t.registerHook(t.HOOKS.PUBLISH.BEFORE,function(){return u(e)}),e.dal.full.immutable.getLastSnapshotByTagName(a.SNAPSHOT_TAGS.MOBILE_MERGE)||e.dal.takeSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE)},getAggregatedPages:function(t){var n=function(t){var n=l(t);return e.transform(n,function(n,r){var o=r.id,i=p(t,o);e.set(n,o,i)},{})}(t);if(e.isEmpty(n))return null;var o=t.pointers.general.getCommittedMobilePages(),i=t.dal.get(o)||{};return e.forOwn(n,function(t,n){if(!i[n]){var o=r.objectUtils.cloneDeep(t);e.set(o,o.components?"components":"children",t.mobileComponents||[]),i[n]=o}}),t.dal.set(o,i),{desktop:n,mobile:c(i,n)}},getChangedPagesPointers:l,getPage:p,commitResults:function(e){u(e),e.dal.takeSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE)},getCommittedMobileComponent:function(t,n,o){if(!n||!o)return null;var i=t.pointers.general.getCommittedMobilePages(),a=t.dal.get(i),s=e.get(a,n);return e.isEmpty(s)?t.siteAPI.getDeepStructure?t.siteAPI.getDeepStructure(o):t.dal.full.get(o):r.dataUtils.findCompInStructure(s,!1,function(e){return e.id===o.id})}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y;e.exports=(r=n(0),o=n(9),i={},a={},s={},u={},c={},l={},p={},d={},g={},f={},m=[],v=[],{supportedEvents:["COMPONENT_DELETED","EDIT_MODE_CHANGE","SITE_PUBLISHED","SETTINGS_UPDATED","WINDOW_PLACEMENT_CHANGED","THEME_CHANGE","DEVICE_TYPE_CHANGED","STYLE_PARAMS_CHANGE","SITE_SAVED","ON_MESSAGE_RESPONSE","PUBLIC_DATA_CHANGED"],unRegisterHandlers:function(e,t){i=r.omit(i,t),a=r.omit(a,t),s=r.omit(s,t),u=r.omit(u,t),c=r.omit(c,t),l=r.omit(l,t),d=r.omit(d,t),g=r.omit(g,t),r.isUndefined(p[t])||(o.events.onChange.removeListener(e,p[t]),p=r.omit(p,t))},registerEditModeChangeHandler:function(e,t){i[e]=t},registerSettingsUpdatedHandler:function(e,t){s[e]=t},registerWindowPlacementChangedHandler:function(e,t){u[e]=t},registerSitePublishedHandler:function(e,t){c[e]=t},registerDeviceTypeChangeHandler:function(e,t){l[e]=t},registerSiteSavedHandler:function(e,t){d[e]=t},registerCompLoaded:function(e){r.forEach(v,function(t){e({compPointer:t})}),m.push(e)},callCompLoaded:function(e){v.push(e),r.forEach(m,function(t){t({compPointer:e})})},editModeChange:function(e){r.forEach(i,function(t){t(e)})},sitePublished:function(){r.forEach(c,function(e){e()})},siteSaved:function(){r.forEach(d,function(e){e()})},deviceTypeChange:function(e){r.forEach(l,function(t){t(e)})},triggerOnWindowPlacementChanged:function(e){var t=e.data.placement,n=e.compId,r=u[n];r&&r(t)},registerThemeChangeHandler:function(e,t,n){if(r.isUndefined(p[t])){var i=o.events.onChange.addListener(e,n);p[t]=i}},callSettingsUpdateCallback:function(e,t){var n=s[e];n&&n(t)},registerDeleteCompHandler:function(e,t){g[e]=t},executeDeleteHandler:function(e){y(e)&&(g[e](),delete g[e])},isDeleteHandlerExists:y=function(e){return!r.isUndefined(g[e])},registerPublicDataChangedHandler:function(e,t,n){f[t]||(f[t]={}),f[t][e]=n},callPublicDataChangedCallback:function(e,t,n){var o=f[t],i=r.get(o,e);i&&i(n)},callPublicDataChangedCallbackForAllAppRegisteredComps:function(e,t){var n=f[e];r.forEach(n,function(e){e(t)})},registerEditorEventHandler:function(e,t){a[e]=t},triggerEditorEvent:function(e){r.forEach(a,function(t){t(e)})}})},function(e,t,n){var r;e.exports=(r=n(6),{setWixCodeModel:function(e,t){var n=t.gridAppId,o=e.pointers.wixCode.getGridAppId();e.dal.set(o,n),r.executeHook(r.HOOKS.AUTOSAVE.ACTION)},getGridAppId:function(e){var t=e.pointers.wixCode.getGridAppId();return e.dal.get(t)}})},function(e,t){e.exports=c},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function c(e,t,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e.exports=function(){var e=n(0),t=n(1),r=!1,c=Promise.resolve();function l(){r=!1}function d(e){return r=!0,e()}function g(e){var t=r?c.then(function(){return d(e)}):d(e);return c=t.then(l,l),t}var f=function(e){function t(e){var n;return i(this,t),(n=a(this,p(t).call(this,"Document save has failed"))).name="PrimaryTaskError",n.reason={document:e},n}return s(t,u(Error)),t}(),m=function(e){function t(e){var n;return i(this,t),(n=a(this,p(t).call(this,"One or more Secondary save tasks have failed"))).name="SecondarySaveError",n.reason=e,n}return s(t,u(Error)),t}(),v=function(e){function t(e){var n;return i(this,t),(n=a(this,p(t).call(this,"One or more required save tasks have failed"))).name="RequiredTaskSaveError",n.reason=e,n}return s(t,u(Error)),t}();function y(e,t,n){var r=new Promise(function(r,o){var i=e.args().concat([r,o,t,n]);e.execute.apply(null,i)});return e.onTaskFailure&&r.catch(e.onTaskFailure),e.onTaskSuccess?r.then(e.onTaskSuccess):r}function E(t,n,r,o){var i=e.transform(t,function(e,t){var o,i;e[t.name]=(o=y(t,n,r),i=t.name,new Promise(function(e){return o.then(e).catch(function(t){e({error:!0,name:i,result:t})})}))},{});return Promise.all(e.values(i)).then(function(t){var n={};if(t.filter(function(e){return e&&e.error}).forEach(function(e){n[e.name]=e.result}),0!==e.keys(n).length)throw new o(n);return i})}function I(t,n,r,i){var a=this;this.name=n,this.execute=r,this.onTaskSuccess=function(r){if(r&&r.historyAlteringChanges){var s,u=function(e,t,n){var r=t+n[0],o=this.currentState;e.takeSnapshot(r);var i=e.full.immutable.getLastSnapshotByTagName(r);return e.removeLastSnapshot(r),o.equals(i)}.call(a,t,n,i);if(function(t,n,r,o){e.forEach(o,function(e){var o=r+e;t.duplicateLastSnapshot(o,n)})}(t,r.historyAlteringChanges,n,i),u)(s=r.changes).push.apply(s,o(r.historyAlteringChanges));r=e.omit(r,"historyAlteringChanges")}return h(t,e.get(r,"changes")),r&&r.result}}function S(t,n,r,o){I.call(this,t,n,o,r),this.lastSavedState=t.full.immutable.getLastSnapshotByTagName(n+r[0])||t.full.immutable.getInitialSnapshot(),e.forEach(r,function(e){t.takeSnapshot(n+e)}),this.currentState=t.full.immutable.getLastSnapshotByTagName(n+r[0]),this.args=function(){return[this.lastSavedState,this.currentState]};var i=function(o){e.forEach(r,function(e){t.removeLastSnapshot(n+e)}),o&&!e.isEmpty(o.changes)&&(e.forEach(r,function(e){t.duplicateLastSnapshot(n+e,o.changes)}),h(t,o.changes))};this.onTaskFailure=i,this.cancel=i}function h(t,n){e.forEach(n,function(n){var r=n.path,o=n.value;e.isUndefined(o)?t.full.removeByPathInHostModel(r):t.full.setByPath(r,o)})}function P(n,r,o,i,a,s,u,c){var l=E(i,u,c,v).catch(function(t){throw r.cancel(),e.invokeMap(o,"cancel"),t}).then(function(){return y(r,u,c).catch(function(t){throw e.invokeMap(o,"cancel"),new f(t)}).then(function(t){return function(t,n){e.forOwn(n,function(e){e.currentState&&(e.currentState=e.currentState.withMutations(function(e){return e.set("documentServicesModel",t.full.immutable.getByPath(["documentServicesModel"])).set("rendererModel",t.full.immutable.getByPath(["rendererModel"]))}))})}(n,o),E(o,u,c,m).then(function(){return t})})});return l.then(function(t){e.invoke(n,"commitTransaction"),e.invoke({onSuccess:a},"onSuccess",t)}).catch(function(e){if(t.log.error("Save has failed - please see the failure details below:",e),s){var n=e.reason||{documentServicesInternalError:e};s(n)}}),l}function A(t,n){var r=t.getSnapshotTags(n);return r&&e.isArray(r)&&!e.isEmpty(r)||(r=[""]),r}function T(t,n,r,o,i,a,s,u){return g(function(){var c=r.primaryTask.getTaskName(),l=A(r.primaryTask,t),p=new n(o,c,l,r.primaryTask[t]);function d(e){return new n(o,e.getTaskName(),e.getSnapshotTags(t),e[t])}var g=e.map(r.requiredTasks,d),f=e.map(r.secondaryTasks,d);return P(o,p,f,g,i,a,s,u)})}return{runPartialSaveTasks:T.bind(null,"partialSave",S),runFullSaveTasks:T.bind(null,"fullSave",S),runFirstSaveTasks:T.bind(null,"firstSave",S),runSaveAsTemplate:T.bind(null,"saveAsTemplate",S),runPublishTasks:T.bind(null,"publish",function(e,t,n,r){I.call(this,e,t,r,n);var o=e.full.immutable.getLastSnapshotByTagName(t+n[0])||e.full.immutable.getInitialSnapshot();this.currentState=function(e,t){var n=e.getByPath(["rendererModel"]);return t.mergeIn(["rendererModel"],{metaSiteId:n.metaSiteId,siteInfo:{siteId:n.siteInfo.siteId}})}(e,o),this.args=function(){return[this.currentState]}}),runAutosaveTasks:T.bind(null,"autosave",function(e,t,n,r){var o=this;S.call(this,e,t,n,r),this.onTaskSuccess=function(t){t&&(o.currentState.getIn(["documentServicesModel","version"])===e.full.getByPath(["documentServicesModel","version"])&&h(e,t.changes))}}),runFunctionInSaveQueue:g,shouldSaveBeforePublish:function(e,t){var n=e.primaryTask,r=function(e,t,n){return e.full.immutable.getLastSnapshotByTagName(t.getTaskName()+A(t,n)[0])||e.full.immutable.getInitialSnapshot()}(t,n,"partialSave"),o=t.full.immutable.getCurrentSnapshot();return n.shouldRun&&n.shouldRun(r,o,"partialSave")}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(90),o=n(4),i=n(6),a=n(7),s="platform.components.AppController",u="platform.components.AppWidget",c="*";function l(e){return e===s||e===u}return{connect:function(n,i,p,d,g,f){var m=o.getType(n,p);if(m===u){if(!a.isDescendantOfComp(n,i,p))throw new Error("cannot connect to app widget from the outside");!1!==f&&(f=!0)}else{if(m!==s)throw new Error("controllerRef component type is invalid - should be a controller or current context");f=f||!1}if(f&&l(o.getType(n,i)))throw new Error("cannot connect to another controller with a primary connection");if(d===c)throw new Error("invalid connection role - cannot be *");var v={type:"ConnectionItem",controllerRef:p,role:d,isPrimary:f};g&&(v.config=g);var y=r.getConnections(n,i),E=e.reject(y,{controllerRef:p,role:d});if(v.isPrimary&&e.some(E,{isPrimary:!0}))throw new Error("Primary connection is already connected to the component");t.updateConnectionsItem(n,i,E.concat(v))},disconnect:function(n,o,a,s){var u=r.getConnections(n,o),c={controllerRef:a};s&&(c.role=s);var l=e.reject(u,c);e.isEmpty(l)?t.removeConnectionsItem(n,o):t.updateConnectionsItem(n,o,l),i.executeHook(i.HOOKS.CONNECTION.AFTER_DISCONNECT,"connection",[n,o,a,s])},createConnectionItem:function(e,t){return{type:"ConnectionItem",role:e,controllerId:t,isPrimary:!(arguments.length>2&&void 0!==arguments[2])||arguments[2]}},get:r.getConnections,getByConnectionPointer:r.getConnectionsByPointer,getPlatformAppConnections:r.getPlatformAppConnections,getPrimaryConnection:r.getPrimaryConnection,getConnectedComponents:function(e,t){var n=e.pointers.full.components.getPageOfComponent(t);if(!n)return[];var o=e.pointers.full.components.isMasterPage(n)?null:n.id;return a.getAllComponentsFromFull(e,o,function(n){return r.isCompConnectedToController(e,n,t)})},getControllerConnections:function(t,n){var o=t.pointers.full.components.getPageOfComponent(n);if(!o)return[];var i=t.pointers.full.components.isMasterPage(o)?null:o.id,s=a.getAllComponentsFromFull(t,i);return e.flatMap(s,function(o){return e(r.getConnections(t,o)).reject({type:"WixCodeConnectionItem"}).filter(["controllerRef.id",n.id]).map(function(e){return{componentRef:o,connection:{config:e.config,controllerRef:e.controllerRef,role:e.role,isPrimary:e.isPrimary}}}).value()})},isAppControllerType:function(e){return e===s},isControllerType:l}}()},function(e,t,n){e.exports=function(){var e=n(5),t=n(0),r=n(1),o=n(58),i=n(6),a=n(77),s=n(140),u=n(142),c=n(139),l=n(57),p=n(502),d=n(103),g=n(104),f=n(107),m=n(205),v=n(105),y=n(78),E=n(141),I=n(35),S=n(2),h=n(24),P=n(49),A=n(206),T=n(42),O=n(48),C=f.getCodeAppInfoFromPS;function _(e,t){if(d.isPageFile(t)){var n=d.getFileName(t).replace(".js",""),r=e.pointers.components.getPage(n,S.VIEW_MODES.DESKTOP);r&&I.updatePagePlatformApp(e,r,h.WIX_CODE_APP_ID,!0)}}function D(e,t){return k(e,d.getParentFolderPath(t),!0)}function w(e,t){var n=D(e,t);n===t||M(e,n)||w(e,n),u.addChild(e,n.location,t)}function b(e,t){var n=D(e,t);u.removeChild(e,n.location,t)}function M(e,t){if(d.isSystemFolder(t))return!0;if(u.isChildrenExists(e,t.location))return!0;var n=D(e,t);return!!u.hasKnownChild(e,n.location,t)}var R={COLLECTION_DOES_NOT_EXIST:"WD_SCHEMA_DOES_NOT_EXIST",COLLECTION_IS_DELETED:"WD_COLLECTION_DELETED"};function N(e,n,r){var o=t.map(n,function(e,n){return s.getVirtualDescriptor("".concat(r,"/").concat(n),(o=e,!t.isString(o)));var o});u.loadChildren(e,"".concat(r,"/"),o)}function x(n,r){if(!d.isFile(r))return Promise.reject(new g.ArgumentError("fileDescriptor","filesAPI.readFile",r.location));var o=P.trace(n,{action:"DSFS.readFile",message:{file:r.location}});if(u.isFileReadable(n,r.location))return o({message:"read file from cache"}),Promise.resolve(u.readFile(n,r.location));var i=u.getSourceFilePath(n,r.location),a=s.getVirtualDescriptor(i,!1),c=v.isSchemaFile(r.location);return(c?A.get(C(n),v.getSchemaIdFromFilePath(r.location)).then(function(t){if(e.isOpen("ds_useNewWixDataSchemasClient")&&!t){var n=new Error;throw n.code=R.COLLECTION_DOES_NOT_EXIST,n}return JSON.stringify(t)}):s.readFile(C(n),a)).catch(function(e){return(c?[R.COLLECTION_DOES_NOT_EXIST,R.COLLECTION_IS_DELETED].includes(e.code):function(e){return 404===t.get(e,"xhr.status")}(e))&&u.isFileExists(n,r.location)?null:Promise.reject(e)}).then(function(e){return u.loadFileContent(n,r.location,e),u.updateDuplicates(n,r.location,e),o({message:"read file from server"}),u.readFile(n,r.location)},function(e){throw o(e.code===R.COLLECTION_IS_DELETED?{level:P.levels.INFO,message:e.message}:{level:P.levels.ERROR,message:e}),e})}function L(e,n){var r=P.trace(e,{action:"DSFS.getChildren",message:{parent:n.location}});return function(){if(u.areChildrenLoaded(e,n.location))return Promise.resolve({didExistInCache:!0});return(v.isSchemaFile(n.location)?A.list(C(e)).then(function(n){var r="".concat(E.SCHEMAS,"/");function o(e){return"".concat(r+e.id,".json")}t(n).tap(function(n){t.forEach(n,function(t){u.loadFileContent(e,o(t),JSON.stringify(t))})}).groupBy(function(e){return e.namespace?"".concat(r+e.namespace,"/"):r}).mapValues(function(n){return t.map(n,function(t){return k(e,o(t),!1)})}).tap(function(n){var o=t(n).keys().without(r).value(),i=t.map(o,function(t){return k(e,t,!0)}),a=t.get(n,r,[]);n[r]=i.concat(a)}).forEach(function(t,n){u.loadChildren(e,n,t)})}):U(e,{origin:j.GET_CHILDREN}).then(function(){return s.getChildren(C(e),n)}).then(function(t){u.loadChildren(e,n.location,t)})).then(function(){return{didExistInCache:!1}})}().then(function(t){return{children:u.getChildren(e,n.location),didExistInCache:t.didExistInCache}}).then(function(e){var n=e.didExistInCache?"read from cache":"read from server";return r({message:{message:n,first10Children:t.take(e.children,10)}}),e.children},function(e){throw r({message:e,level:P.levels.ERROR}),e})}function B(){return s.getRoots()}function k(e,t,n){return s.getVirtualDescriptor(t,n)}function F(e){var t=e.pointers.wixCode.getWixCodeModel(),n=e.dal.get(t),r=T.getExistingWixCodeAppFromPS(e),i=e.siteAPI.getAllRenderedRootIds().filter(function(t){return I.pageHasPlatformApp(e,t,h.WIX_CODE_APP_ID)});return Promise.all(i.map(function(t){var i="".concat(t,".js"),a={wixCode:e.dal.get(e.pointers.wixCode.getRoot()),serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),viewMode:"preview"},s=o.wixCodeUserScriptsService.getUserCodeUrl(i,t,n,r,a);return O.sendRequestObj({url:s,headers:{Accept:"*/*"},type:"GET",dataType:"text"}).catch(function(){})}))}function U(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).origin,n=void 0===t?"MISSING":t,r=P.trace(e,{action:"DSFS.flush",params:{flushOrigin:n}});return new Promise(function(t,n){e.setOperationsQueue.flushQueueAndExecute(function(){var i=u.getChanges(e);if(u.isChangesEmpty(i))return r({message:"no changes"}),void t();a.ensureAppIsWriteable(e),p.save(e).then(function(){return F(e)}).then(o,s).then(t,n)})});function o(){i.executeHook(i.HOOKS.WIX_CODE.FLUSH),r()}function s(t){throw function(t){var n=y.safeGetStatusCode(t),r=y.safeGetErrorCode(t);400===n&&10009===r&&a.handleAppIsReadOnlyServerError(e)}(t),r({message:t,level:P.levels.ERROR}),t}}var H=function(e){!function(e){u.deleteFolder(e,E.SCHEMAS)}(e),z(e).forEach(function(e){e()})},V=function(e){u.deleteFile(e,"backend/authorization-config.json")};function W(e,t){var n=z(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}var G=new r.SiteDataPrivates;function z(e){var t=e.siteDataAPI.siteData;return G.has(t)||G.set(t,[]),G.get(t)}var j={ROUTERS_PAGE:"ROUTERS_PAGE",ROUTERS_ROUTES:"ROUTERS_ROUTES",MOVE_FILE:"MOVE_FILE",GET_CHILDREN:"GET_CHILDREN",DELETE_ITEM:"DELETE_ITEM",LOCAL_MODE_INIT_EDIT:"LOCAL_MODE_INIT_EDIT"};return{copyFile:function(e,t,n,r){if(!d.isFile(t))return Promise.reject(new g.ArgumentError("fileDescriptor","filesAPI.copyFile",t.location));if(!d.isFolder(n))return Promise.reject(new g.ArgumentError("targetFolderDescriptor","filesAPI.copyFile",n.location));var o=n.location+r,i=s.getVirtualDescriptor(o,!1);if(_(e,i),u.isFileExists(e,t.location)){var c=u.readFile(e,t.location);u.writeFile(e,o,c)}else u.markFileForDuplication(e,t.location,o);return w(e,i),a.ensureAppIsWriteable(e)},writeFile:function(e,t,n){var r=n||"",o=t.location==="".concat(E.SCHEMAS,"/$commands/invalidateCache"),s=t.location==="".concat(E.BACKEND,"/$commands/invalidateAuthorizationConfig");if(o)return H(e),Promise.resolve();if(s)return V(e),Promise.resolve();if(!d.isFile(t))return Promise.reject(new g.ArgumentError("fileDescriptor","filesAPI.writeFile",t.location));if(v.isSchemaFile(t.location)&&!v.isValidContent(r))return Promise.reject(new Error("Invalid file content"));var c=D(e,t);if(!M(e,c)&&d.isInsideFolder(B().pages,t))return Promise.reject(new Error("cannot write to unknown folder: ".concat(c.location)));_(e,t);var l=u.isFileExists(e,t.location);return u.writeFile(e,t.location,r),w(e,t),Promise.all([!l&&m.isUndoableFile(t.location)?x(e,t):Promise.resolve(),a.ensureAppIsWriteable(e)]).then(function(){return i.executeHook(i.HOOKS.WIX_CODE.FILE_CONTENT_CHANGED,void 0,[e,t]),t})},loadAllFiles:function(e){return s.readAllFiles(C(e)).then(function(n){var r=n.filter(function(e){var t=e.path;return!v.isSchemaFile(t)}),o=t.reduce(r,function(e,n){var r=n.path,o=n.content;return t.set(e,r.split("/"),o)},{});t.map(["public","backend"],function(n){return function e(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;r=o,t.isString(r)?u.loadFileContent(n,i,o):(N(n,o,i),t.keys(o).forEach(function(t){return e(n,o[t],"".concat(i,"/").concat(t))}))}(e,o[n],[n])})})},readFile:x,move:function(e,n,r,o){if(!d.isFile(n))return Promise.reject(new g.ArgumentError("fileDescriptor","filesAPI.moveFile",n.location));if(!d.isInsideFolder(r,n))return Promise.reject(new g.FileSystemError("Cannot move files between folders"));if(d.isPageFile(n))return Promise.reject(new g.FileSystemError("Cannot move page files"));var i=P.trace(e,{action:"DSFS.moveFile",message:{file:n.location,newName:o}});return c.notifyItemModified(e,n),a.ensureAppIsWriteable(e).then(t.partial(U,e,{origin:j.MOVE_FILE})).then(function(){return s.move(C(e),n,r,o)}).then(function(t){return u.moveFile(e,n.location,t.location),w(e,t),b(e,n),i({message:{newFile:t.location}}),t},function(e){throw i({message:e,level:P.levels.ERROR}),e})},deleteItem:function(e,n){if(d.isPageFile(n))return Promise.reject(new g.FileSystemError("Cannot delete page files"));if(d.isSystemFolder(n))return Promise.reject(new g.FileSystemError("Cannot delete system folders"));var r=P.trace(e,{action:"DSFS.deleteItem",message:{item:n.location}});return c.notifyItemModified(e,n),u.markPathAsDeleted(e,n.location,n.directory),a.ensureAppIsWriteable(e).then(t.partial(U,e,{origin:j.DELETE_ITEM})).then(function(t){if(d.isFolder(n)?u.deleteFolder(e,n.location):u.deleteFile(e,n.location),b(e,n),v.isSchemaFile(n.location)){var o=D(e,n),i=u.getChildren(e,o.location);void 0!==i&&0===i.length&&(u.deleteFolder(e,o.location),b(e,o))}return r({message:t}),t},function(t){throw u.clearDeletedPath(e,n.location),r({message:t,level:P.levels.ERROR}),t})},createFolder:function(e,t,n){var r=P.trace(e,{action:"DSFS.createFolder",message:{name:t,parent:n.location}});return a.ensureAppIsWriteable(e).then(function(){return s.createFolder(C(e),t,n)}).then(function(t){return w(e,t),r({message:{newFolder:t.location}}),t},function(e){throw r({message:e,level:P.levels.ERROR}),e})},getChildren:L,findByExtension:function(e,n,r){var o=P.trace(e,{action:"DSFS.findByExtension",message:{parent:n.location,extension:r}});return s.findByExtension(C(e),n,r).then(function(e){return o({message:{first10Results:t.take(e,10)}}),e},function(e){throw o({message:e,level:P.levels.ERROR}),e})},flush:U,loadAllFilesFromGrid:function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.values(B());return Promise.all(r.map(function(t){return t.directory?L(n,t).then(function(t){return e(n,t)}):x(n,t).then(function(e){return{path:t.location,content:e}})})).then(function(e){return t.flatten(e)})},prefetchUserCode:F,getRoots:B,getViewerInfo:function(e){return{gridAppId:l.getGridAppId(e)}},getVirtualDescriptor:k,handleSchemaInvalidationActions:function(){i.registerHook(i.HOOKS.ADD_TPA.AFTER,H),i.registerHook(i.HOOKS.PLATFORM.APP_PROVISIONED,H),i.registerHook(i.HOOKS.PLATFORM.APP_UPDATED,H)},subscribeToSchemasInvalidation:function(e,n){return z(e).push(n),t.once(t.partial(W,e,n))},FLUSH_ORIGINS:j}}()},function(e,t,n){e.exports=n(39)},function(e,t){e.exports=l},function(e,t){e.exports=p},function(e,t,n){e.exports=function(){var e=n(0),t=n(20).services.schemasService;function r(n,o,i){if(!n)return null;if(n.$ref)return r(t.getSchema(i,n.$ref),o,i);if(n.properties)return n.properties[o];if(n.allOf){var a=e.find(n.allOf,function(e){return r(e,o,i)});return a&&r(a,o,i)}}var o=function(t,n,o,i){var a=r(n,o,t);return!a||e.isString(a)?a&&a===i||!1:("list"===i&&(i="array"),e.includes(a.pseudoType,i)||e.includes(a.type,i)||a.type===i)};return{isOfType:function(e,n,r,i){var a=t.getSchema(e,n);return o(e,a,r,i)},getPropertyDefinition:r,executeForDataItemRefs:function(n,r,i){var a=t.getSchema(n,r.type);a&&e.forOwn(r,function(t,r){return o(n,a,r,"ref")?i(t):o(n,a,r,"refList")?e.map(t,function(e){return i(e)}):void 0})}}}()},function(e,t,n){e.exports=function(){var e=n(1);function t(t){return e.guidUtils.getUniqueId(t,"-",{bucket:"generateItemIdWithPrefix_".concat(t)})}function r(){return t("dataItem")}function o(){return t("propItem")}return{generateNewId:function(e){switch(e){case"data":return r();case"props":case"properties":return o();case"design":return r();case"behaviors":return t("behavior");case"connections":return t("connection");case"style":case"mobileHints":case"layout":case"anchors":case"breakpoints":return t(e);default:return null}},generateNewDataItemId:r,generateNewPropertiesItemId:o,generateNewDesignId:function(){return t("design")}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(e){var t=e.pointers.routers.getRoutersConfigMapPointer();return e.dal.get(t)}function r(n,r){var o=t(n);return e.findKey(o,{prefix:r})}function o(e,t){var n=e.pointers.routers.getRouterPointer(t);return e.dal.get(n)}return{get:{all:t,byApp:function(n,r){return e.filter(t(n),{appDefinitionId:r})},byRef:function(e,t){var n=e.dal.get(t);return n&&n.config&&(n.config=JSON.parse(n.config),n.id=r(e,n.prefix)),n||null},byId:o,byPrefix:function(e,t){var n=r(e,t);return n&&e.pointers.routers.getRouterPointer(n)},byPage:function(n,r){var o=e.get(n.dal.get(r),"id"),i=t(n),a=e.findKey(i,function(t){return t.pages&&e.includes(e.values(t.pages),o)});return a&&n.pointers.routers.getRouterPointer(a)}},getRouterDataForPageIfExist:function(n,r){r=e.startsWith(r,"#")?r.substr(1):r;var i=t(n),a=e.findKey(i,function(t){return t.pages&&e.includes(e.values(t.pages),r)});return a?e.assign(o(n,a),{routerId:a}):null}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(15),o={};function i(t,n){return e.every(n.modeIds,function(e){return!!t[e]})}function a(e,t,n){var r=e.componentStructure.getModesDefinitions(n);return t.get(r)}function s(n,r,o,s){for(var u=t.objectUtils.cloneDeep(o),c=function(t,n,r){for(var o={};null!==r;){var i=a(t,n,r),s=e.map(i,"modeId");o=e.merge(o,e.zipObject(s,s)),r=t.components.getParent(r)}return o}(n,r,s),l=[u];!e.isEmpty(l);){var p=l.pop(),d=e.get(p,"modes.definitions"),g=e.map(d,"modeId");c=e.merge(c,e.zipObject(g,g));var f=e.get(p,"modes.overrides");if(f){var m=e.filter(f,e.partial(i,c));e.set(p,"modes.overrides",m),e.isEmpty(m)&&delete p.modes.isHiddenByModes}l=l.concat(p.components||[])}return u}function u(n){var o=function(t){var n=r.getViewMode(t),o=t.pointers.components.getMasterPage(n),i=t.pointers.componentStructure.getModes(o);return i?e.get(t.dal.get(i),"definitions",[]):[]}(n);return e.filter(o,{type:t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES})}function c(){return{isHiddenByModes:!1,definitions:[],overrides:[]}}function l(t,n,r,o,i){if(!o)return null;for(var a=i?o:t.full.components.getParent(o);a;){if(!e.isEmpty(g(t,n,r,a)))return a;a=t.components.getParent(a)}return null}function p(t,n,r,o,i){var a=l(t,n,r,o,i);return a?e.head(g(t,n,r,a)):null}function d(e,t){var n={isHiddenByModes:(!1,!0),definitions:[],overrides:[]};return n.overrides.push({modeIds:e,isHiddenByModes:!1,layout:t}),n}function g(n,r,i,a){var s=n.components.getPageOfComponent(a);if(s){var u=function(t,n,r){var o=t.general.getActiveModes(),i=n.get(o);return r&&i[r]?e.omitBy(i[r],function(e){return!e}):{}}(n,i,s.id),c=n.componentStructure.getModesDefinitions(a),l=e.reject(r.get(c),function(e){return o[e.type]});return e.keys(t.modesUtils.getActiveComponentModeIds(u,l))}return[]}return o[t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES]=!0,{adjustModesToNewContainer:function(t,n,r,o,i){i=s(t,n,i,o);var a=p(t,n,r,o)||e.head(g(t,n,r,o));if(a){var u=d([a],i.layout);if(i.modes){i.modes.isHiddenByModes=!0,i.modes.overrides=i.modes.overrides||[];var c=e.find(i.modes.overrides,function(t){return e.isEqual(t.modeIds,[a])});c?c.isHiddenByModes=!1:i.modes.overrides.push(u.overrides[0])}else i.modes=u}return i},createEmptyModesObject:c,getFirstAncestorModeToGenerateOverrides:p,createModesObjectForCompAddedInMode:d,getComponentModesToGenerateOverrides:g,getSospModeByPagesGroup:function(t,n){if(t.dal.isExist(n)){var r=u(t);return e.find(r,["settings.pagesGroupId","#".concat(n.id)])}},getFirstAncestorWithModesToGenerateOverrides:l,getSOSPModes:u}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w,b,M,R,N,x,L,B,k,F,U,H,V,W,G;e.exports=(r=n(0),o=n(1),i=n(216),a=n(14),s=n(13),u=n(33),c=n(80),l=n(37),p=n(99),d=n(32),g=n(59),f=r.template("<%= provisionServerBaseUrl %>/editor/pre-save-add-apps/template/<%= metaSiteId %>?"),m=r.template("<%= provisionServerBaseUrl %>/editor/pre-save-add-app/<%= metaSiteId %>?appDefId=<%= appDefinitionId %>"),v=r.template("<%= provisionServerBaseUrl %>/editor/settle/<%= metaSiteId %>?context=<%= context %>&editorSessionId=<%= editorSessionId %>"),y=r.template("<%= provisionServerBaseUrl %>/editor/provision-from-source-template/<%= metaSiteId %>?appDefId=<%= appDefinitionId %>&sourceTemplateId=<%= sourceTemplateId %>"),E="save",I="load",S="firstSave",h=function(e,t,n){var o=t.payload;r.forEach(o,function(t){U(e,t),n&&n(t)})},P=function(e,t,n,r,o,a){if(u.isSiteSaved(e)){var c=s.getProperty(e,s.PROPERTY_NAMES.META_SITE_ID),l=s.getProperty(e,s.PROPERTY_NAMES.SITE_REVISION),p=V(e,m,t,c),d=new i(p).addAcceptJson().addAppVersionAndSiteRevision(o,String(l)).build();a?G(e,d,"GET",{},n,r):g.runFunctionInSaveQueue(function(){return new Promise(function(t,o){return G(e,d,"GET",{},function(){n.apply(void 0,arguments),t()},function(){r.apply(void 0,arguments),o.apply(void 0,arguments)})})})}else{T(e,[t],function(t){t&&t.success?h(e,t,n):r(t)},r)}},A=function(e,t,n,r,o){var a=s.getProperty(e,s.PROPERTY_NAMES.META_SITE_ID),u=e.pointers.general.getServiceTopology(),c=e.dal.get(e.pointers.getInnerPointer(u,"appStoreUrl")),l=y({provisionServerBaseUrl:c,metaSiteId:a,appDefinitionId:t,sourceTemplateId:n}),p=new i(l).addAcceptJson().build();G(e,p,"POST",{},r,o)},T=function(e,t,n,r){var o=s.getProperty(e,s.PROPERTY_NAMES.META_SITE_ID),a=e.pointers.general.getServiceTopology(),u=e.dal.get(e.pointers.getInnerPointer(a,"appStoreUrl")),c=f({provisionServerBaseUrl:u,metaSiteId:o}),l=new i(c).addAcceptJson().build();G(void 0,l,"POST",{guids:t},n,r)},O=function(e,t){return e.filter(function(e,n){return!!t.get(n)})},C=function(e){var t=e.get("pagesData"),n=a.filterApps(e.getIn(["rendererModel","clientSpecMap"]).toJS()),o=r.invoke(e.getIn(["routers","configMap"]),"toJS");return F(n,t,o)},_=function(e,t,n,r,o){var i=R(e,n);G(null,i,"POST",t,r,o)},D=function(e,t){var n=t.get("pagesData"),o=t.getIn(["rendererModel","clientSpecMap"]).toJS(),i=e.get("pagesData"),s=b(i,n),u=M(i,n),c=O(i,s),p=O(n,s),d=l.areTpaCompsWereUnInstalled(c,s,u,o),g=r.invoke(t.getIn(["routers","configMap"]),"toJS"),f=l.isPlatformOnlyAppUninstalled(p,o,g),m=d||function(e){return r.some(e,{shouldTriggerFullSave:!0})}(o)||f,v=a.filterApps(o);return m?F(v,n,g):w(s,v,g)},w=function(e,t,n){var o=l.getAllAppIdsInstalledOnPages(e,t,n),i=r.concat(r.filter(t,"notProvisioned"),c.getAppsToAdd(),l.getAppsToGrantPermissions(t,o)),s=function(e,t){return r(e).filter(function(e){return r.includes(t,r.toString(e.applicationId))||a.isDemoAppAfterProvision(e)||a.hasEditorPlatformPart(e)}).map(function(e){var t=e.appDefinitionId,n=e.applicationId,o=e.instanceId,i=e.version;return r.omitBy({type:"add",appDefId:t,applicationId:r.toString(n),instanceId:o,appVersion:i},r.isUndefined)}).value()}(i,o),u=B(),p=N(t,i);return r.concat(s,u,p)},b=function(e,t){return t.filter(function(t,n){return function(e,t,n){var r=t.get("structure");return!e&&r||!r.equals(e.getIn([n,"structure"]))}(e,t,n)})},M=function(e,t){return e.filter(function(e,n){return!t.getIn([n,"structure"])})},R=function(e,t){var n=e.getIn(["serviceTopology","appStoreUrl"]),r=e.getIn(["rendererModel","metaSiteId"]),o=e.getIn(["documentServicesModel","editorSessionId"]),a=W(n,v,r,o,t);return new i(a).addAcceptJson().build()},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r(e).filter(function(e){var o=e.pendingAction,i=e.applicationId;return o===d.APP_ACTION_TYPES.UPDATE&&!r.some(t,{applicationId:i})&&!r.some(n,{applicationId:i})}).map(function(e){return{type:"update",appDefId:e.appDefinitionId,applicationId:r.toString(e.applicationId),instanceId:e.instanceId,appVersion:e.version}}).value()},x=function(e,t){return r(e).reject(function(e){var n=e.applicationId;return r.some(t,{applicationId:n})}).map(function(e){var t=e.appDefinitionId,n=e.applicationId,o=e.instanceId,i=e.version;return r.omitBy({type:"add",appDefId:t,applicationId:r.toString(n),instanceId:o,appVersion:i},r.isUndefined)}).value()},L=function(e){return r.map(e,function(e){var t=e.applicationId;return{type:"remove",applicationId:r.toString(t)}})},B=function(){return r.map(c.getAppsToDismiss(),function(e){return{type:"dismiss",appDefId:e}})},k=function(e,t,n,o){var i=r.invoke(e.getIn(["routers","configMap"]),"toJS"),a=l.getAppsToGrantAndRevoke(n,t,{excludeHybrid:!0},i),s=a.grant,u=a.revoke,c=x(s,u),p=L(u),d=B(),g=N(n,s,u),f=e.getIn(["documentServicesModel","revision"]),m={actions:r.concat(c,p,d,g),siteRevision:f};r.isEmpty(m.actions)||_(e,m,I,o)},F=function(e,t,n){var o=l.getAppsToGrantAndRevoke(e,t,{},n),i=r.concat(r.filter(e,"notProvisioned"),c.getAppsToAdd(),o.grant),a=o.revoke,s=x(i,a),u=L(a),p=B(),d=N(e,i,a);return r.concat(s,u,p,d)},U=function(e,t){if(r.includes([void 0,-1],t.applicationId))t.applicationId=H(e),t.notProvisioned=!0;else{var n=a.getAppDataByAppDefinitionId(e,t.appDefinitionId),o=n&&n.demoMode&&!t.demoMode;c.isPremiumPendingApp(e,t.applicationId)?c.add(t):!o&&n||(t.notProvisioned=!0)}e.setOperationsQueue.executeAfterCurrentOperationDone(function(){u.isTpaByAppType(t.type)&&p.cacheAppMarketDataAfterProvision(e,t)})},H=function(e){var t=a.getLargestApplicationId(e);return p.generateAppFlowsLargestAppId(t)},V=function(e,t,n,r){var o=e.pointers.general.getServiceTopology();return t({provisionServerBaseUrl:e.dal.get(e.pointers.getInnerPointer(o,"appStoreUrl")),metaSiteId:r,appDefinitionId:n})},W=function(e,t,n,r,o){return t({provisionServerBaseUrl:e,metaSiteId:n,editorSessionId:r,context:o})},G=function(e,t,n,i,a,s){var u={type:n,url:t,dataType:"json",contentType:"application/json",success:function(t){e?function(e,t,n){var r=n.payload;U(e,r),t(r)}(e,a,t):a(t)},error:s};i&&!r.isEmpty(i)&&(u.data=JSON.stringify(i)),"POST"===n&&(u.xhrFields={withCredentials:!0}),o.ajaxLibrary.ajax(u)},{preSaveAddApp:P,settleOnSave:function(e,t,n,o){var i={actions:D(e,t),siteRevision:t.getIn(["documentServicesModel","revision"])};r.isEmpty(i.actions)?n():_(t,i,E,n,o)},settleOnFirstSave:function(e,t,n,r){var o={actions:C(t),siteRevision:t.getIn(["documentServicesModel","revision"])};_(t,o,S,n,r)},getSettleActionsForFullSave:C,getSettleActionsForSave:D,settleOnLoad:function(e){e.dal.takeSnapshot("tpa-settle-on-load");var t=e.dal.full.immutable.getLastSnapshotByTagName("tpa-settle-on-load");e.dal.removeLastSnapshot("tpa-settle-on-load");var n=t.get("pagesData"),r=a.filterApps(t.getIn(["rendererModel","clientSpecMap"]).toJS());k(t,n,r,function(t){t&&t.success&&a.setAppsData(e,t.payload.clientSpecMap)})},preSaveAddAppsOnLoad:function(e){var t=l.getAppsDefIdToProvisionOnSiteLoad(e);r.isEmpty(t)||(u.isSiteSaved(e)?function(e,t){var n=function(t){t&&(t.shouldTriggerFullSave=!0,a.registerAppData(e,t),r.invoke(e.dal,"commitTransaction"))},o=function(){};r.forEach(t,function(t){P(e,t,n,o,null,!0)})}(e,t):function(e,t){r.isEmpty(t)||T(e,t,function(t){t&&t.success&&(h(e,t),r.forEach(t.payload,function(t){a.registerAppData(e,t)}),r.invoke(e.dal,"commitTransaction"))},function(){})}(e,t))},provisionAppFromSourceTemplate:function(e,t,n,r,o){u.isSiteSaved(e)?A(e,t,n,r,o):o({success:!1})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(25),o=n(220),i=n(51),a=n(85),s=n(110),u=n(86),c=n(677),l="List does not exist",p="Data selector does not exist",d="Type does not exist",g="List views do not exist",f="View is not valid",m="New List";function v(e){throw new Error(e)}function y(e,t){return e.dal.getByPath(r.getPartPath(t))}function E(t,n){var r=y(t,n)||v(l),o=h(t,n);if(!o)throw new Error(p);if("ManualSelectedList"!==o.type)throw new Error("Only manual lists are supported");return e(a.getAllItemsOfType(t,r.type)).pick(o.itemIds).values().value()}function I(e,t){var n=y(e,t)||v(l);return i.getType(e,n.type)}function S(e,t){var n=y(e,t)||v(l);return u.getAllViewsByName(e,n.viewName)}function h(e,t){var n=y(e,t)||v(l);return s.getSelector(e,n.dataSelector)}function P(e){return e.dal.getByPath(r.getBasePartsPath())}function A(t,n){for(var r=e.map(P(t),"displayName"),i=n;e.includes(r,i);)i=o.incNumberSuffix(i);return i}function T(t,n,r){var o=y(t,n)||v(l),i=S(t,n),a=e.findKey(i,function(t){return t.forType===o.type&&(r?t.format===r:e.isEmpty(t.format))});return[a,i[a]]}function O(e,t){var n=e.pointers.wixapps.getPackageCounterData("appbuilder");e.dal.isExist(n)||e.dal.set(n,{});var r=y(e,t),o=e.pointers.wixapps.getCounterData("appbuilder",r.type),i=e.dal.get(o)||0;e.dal.set(o,i+1)}return{markDataAsUpdated:O,getListDef:y,getDisplayName:function(e,t){return y(e,t).displayName},getItems:E,getHiddenItems:function(t,n){var r=y(t,n)||v(l),o=E(t,n),i=a.getAllItemsOfType(t,r.type);return e(i).omit(e.map(o,"_iid")).values().value()},getType:I,getViews:S,getSelector:h,setManualSelector:function(e,t,n){var r=y(e,t)||v(l);s.setManualSelector(e,r.dataSelector,n)},getAllLists:P,createList:function(n,o){if(!i.getType(n,o.type))throw new Error(d);if(!s.getSelector(n,o.dataSelector))throw new Error(p);if(e.isEmpty(u.getAllViewsByName(n,o.viewName)))throw new Error(g);var a={displayName:A(n,o.displayName||m),dataSelector:o.dataSelector,type:o.type,viewName:o.viewName,version:c.LIST_VERSION},l="list_".concat(t.guidUtils.getUniqueId());return n.dal.full.setByPath(r.getPartPath(l),a),l},getTypeName:function(e,t){return I(e,t).name},rename:function(e,t,n){var o=y(e,t);o.displayName=n,e.dal.full.setByPath(r.getPartPath(t),o)},getVersion:function(e,t){return y(e,t).version||"1.0"},replaceItemView:function(t,n,r){e.isEmpty(r)&&v(f);var o=e.head(T(t,n,r.format));u.replaceView(t,o,r),O(t,n)},getItemView:function(t,n,r){return e.last(T(t,n,r))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(3),o=n(67),i=n(88);function a(e){return e.replace("#","")}function s(t,n){return e.every(n,function(n,r){var o=t[r];return e.isObject(o)?e.isEqual(n,"#".concat(o.id)):e.isEqual(n,o)})}function u(e,t){var n=c(e,t),r=e.pointers.getInnerPointer(n,"link");return e.dal.get(r)}function c(e,t){return t=a(t),e.pointers.data.getDataItem(t,"masterPage")}function l(t,n,r,o){var i=o.items.map(e.partial(l,t,n,r)),a=t.pointers.multilingualTranslations.translationDataItem("masterPage",n,o.id),s=t.dal.full.get(a);return s&&(s.items=i,r?t.dal.set(a,s):t.dal.fullJsonDal.set(a,s)),"#".concat(e.get(s,"id")||o.id)}return{getIndexOfItemInParent:function(e,t,n){var r=c(e,t),o=e.dal.get(e.pointers.getInnerPointer(r,"items")).indexOf("#".concat(n));if(o<0)throw new Error("Cannot find item #".concat(n," at parent #").concat(t));return o},getItemIdAndParent:function e(t,n){for(var r,o,i=t.items,u=0;u<i.length;u++){if((r=i[u]).link&&s(r.link,n))return{parentId:t.id?a(t.id):null,itemId:r.id?a(r.id):null};if(o=e(r,n))return o}return null},getLinkItemByMenuItemId:function(e,t){var n=u(e,t);if(!n)return null;var r=c(e,n);return e.dal.get(r)},getLinkIdByMenuItemId:u,getParentItemId:function e(t,n){var r,o,i=t.items;for(r=0;r<i.length;r++){if((o=i[r]).id===n)return t.id;var a=e(o,n);if(a)return a}return null},getSiteMenu:function(e){var n={getDataByQuery:function(t,n){return r.getDataItemById(e,t,n)},getRouters:function(){return o.get.all(e)}};return t.menuUtils.getSiteMenuWithoutRenderedLinks(n,!0)},sanitizeHash:a,validateParent:function(t,n,r,o){if(n=n?a(n):"CUSTOM_MAIN_MENU",(r=r&&a(r))&&r===n)throw new Error("menu item ".concat(r," cannot be a parent for itself"));var i=c(t,n);if(!t.dal.isExist(i))throw new Error('Parent "'.concat(n,'" does not exist'));var s=t.dal.get(t.pointers.getInnerPointer(i,"type"));if("BasicMenuItem"!==s&&"CustomMenu"!==s)throw new Error('Parent of type "'.concat(s,'" is not a legal parent. Please provide parent of types "BasicMenuItem" or "CustomMenu" only'));if(function(t,n,r){if(function(e,t){var n=e.pointers.getInnerPointer(e.pointers.data.getDataItem(t,"masterPage"),"type");return"CustomMenu"===e.dal.get(n)}(t,n))return!1;r=r||"CUSTOM_MAIN_MENU";var o=t.dal.get(c(t,r));return!e.includes(o.items,"#".concat(n))}(t,n,o))throw new Error("Cannot add/move items into a sub item");if(r){var u=c(t,r),l=t.pointers.getInnerPointer(u,"items"),p=t.dal.get(l);if(p&&p.length>0&&!e.includes(["CUSTOM_MAIN_MENU",o],n))throw new Error("Cannot move item with sub items (#".concat(r,") to anything other than  #CUSTOM_MAIN_MENU"))}},getMenuDataItemPointer:c,getPageMenuItemPointer:function(e,t){for(var n,r=e.pointers.data.getDataItemsWithPredicate({type:"PageLink",pageId:"#".concat(t)}),o=0;r.length;o++)if(n=e.pointers.data.getDataItemWithPredicate({type:"BasicMenuItem",link:"#".concat(r[o].id)}))return n},updateTranslatedMenuItems:function(e,t){if(i.multilingual.isEnabled(e)){var n=i.current.get(e);i.getFull(e).forEach(function(r){var o=r.code===n;l(e,r.code,o,t)})}}}}()},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){var e=n(0),t=n(1);function o(e,n){return t.boundingLayout.getBoundingLayout(n)}function i(t){return e.includes(["vw","pct"],t)}function a(t,n,r){var o=e.keys(t);if(e.includes(o,"px"))t.px+=n;else{var a=e.find(o,i);t[a]+=n/r*100,t[a]=parseFloat(t[a].toFixed(2))}}var s=function(){function n(t,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.ps=t,this.compPointer=r;var i=u(t,r);this.newPositionAndSize=e.assign({},i,o),this.positionAndSizeDiff=function(t,n){return e.mapValues(t,function(t,r){return e.isFinite(n[r])?n[r]-t:0})}(i,o),this.compLayout=t.dal.get(t.pointers.getInnerPointer(r,"layout"))}var o,i,s;return o=n,(i=[{key:"value",value:function(){return this.compLayout}},{key:"updateVerticalLayout",value:function(){if(0===this.positionAndSizeDiff.y&&0===this.positionAndSizeDiff.height)return this;if(t.layoutUtils.isVerticallyDocked(this.compLayout)&&!t.layoutUtils.isVerticallyStretchedToScreen(this.compLayout)){var e=function(e,t,n){if(n.fixedPosition)return e.siteAPI.getSiteMeasureMap().clientHeight;var r=e.pointers.components.getParent(t);return e.siteAPI.getSiteMeasureMap().height[r.id]}(this.ps,this.compPointer,this.compLayout);!function(e,t,n){var r=e.docked;if(r.top&&t.y&&a(r.top,t.y,n),r.bottom){var o=-1*(t.y+t.height);o&&a(r.bottom,o,n)}if(r.vCenter){var i=t.height/2+t.y;i&&a(r.vCenter,i,n)}r.top&&r.bottom||(e.height+=t.height)}(this.compLayout,this.positionAndSizeDiff,e)}else this.compLayout.y+=this.positionAndSizeDiff.y,this.compLayout.height+=this.positionAndSizeDiff.height;return this}},{key:"updateHorizontalLayout",value:function(){if(0===this.positionAndSizeDiff.x&&0===this.positionAndSizeDiff.width)return this;if(t.layoutUtils.isHorizontallyDocked(this.compLayout)){var e=function(e,n,r){if(r.fixedPosition||t.dockUtils.isHorizontalDockToScreen(r))return e.siteAPI.getSiteMeasureMap().clientWidth;var o=e.pointers.components.getParent(n);return e.siteAPI.getSiteMeasureMap().width[o.id]}(this.ps,this.compPointer,this.compLayout);!function(e,t,n){var r=e.docked;if(r.left&&t.x&&a(r.left,t.x,n),r.right){var o=-1*(t.x+t.width);o&&a(r.right,o,n)}if(r.hCenter){var i=t.width/2+t.x;i&&a(r.hCenter,i,n)}r.left&&r.right||(e.width+=t.width)}(this.compLayout,this.positionAndSizeDiff,e)}else this.compLayout.x+=this.positionAndSizeDiff.x,this.compLayout.width+=this.positionAndSizeDiff.width;return this}},{key:"keepAspectRatioIfNeeded",value:function(){return t.layoutUtils.isAspectRatioOn(this.compLayout)&&(this.compLayout.aspectRatio=t.layoutUtils.calcAspectRatio(this.newPositionAndSize.width,this.newPositionAndSize.height)),this}}])&&r(o.prototype,i),s&&r(o,s),n}();function u(n,r,o){var i=o||n.dal.get(n.pointers.getInnerPointer(r,"layout"));if(!i.docked)return e.pick(i,["x","y","width","height"]);var a=function(e,t){var n=e.pointers.components.getParent(t),r=e.siteAPI.getSiteMeasureMap();return{width:r.width[n.id],height:r.height[n.id]}}(n,r),s=n.siteAPI.getScreenSize(),u=n.siteAPI.getSiteMeasureMap(),c=n.pointers.components.getPageOfComponent(r),l=t.layoutUtils.getRootWidth(u,c.id,n.siteAPI.getSiteWidth()),p=n.siteAPI.getSiteX(),d=t.layoutUtils.getRootLeft(u,c.id,p);return t.positionAndSize.getPositionAndSize(i,a,s,l,d)}return{applyPositionAndSizeOnCurrentLayoutSchema:function(e,t,n){return function(e,t,n){return new s(e,t,n)}(e,t,n).updateVerticalLayout().updateHorizontalLayout().value()},getBoundingLayout:o,getComponentLayout:function(t,n){var r=t.dal.get(t.pointers.getInnerPointer(n,"layout"));return r?(r.docked&&(e.assign(r,u(t,n)),delete r.docked),e.merge(r,{bounding:o(0,r)})):null},getPositionAndSize:u}}()},function(e,t){e.exports=d},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(2),o=n(26);function i(e,t){var n=e.pointers.components.getPageOfComponent(t).id,o=e.dal.get(t),i=e.pointers.components.getViewMode(t)===r.VIEW_MODES.MOBILE;e.siteAPI.createChildrenAnchors(o,n,{forceMobileStructure:i})}function a(t,n){var r=t.pointers.general.getCompsToUpdateAnchors(),o=t.dal.get(r);o?o.find(function(t){return e.isEqual(n,t)})||t.dal.set(r,o.concat(n)):t.dal.set(r,[n])}return e.mapValues({updateAnchors:function(e,t,n){t&&a(e,t),n&&a(e,n)},updateAnchorsForCompChildren:i,updateAnchorsForMultipleComps:function(n){var r=n.pointers.general.getCompsToUpdateAnchors(),a=n.dal.get(r)||[];e(a).concat(function(n,r){return e.transform(r,function(e,r){if(!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(r.id)){var o=n.pointers.full.components.getParent(r);o&&e.push(o)}},[])}(n,a)).map(function(e){return t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)?function(e,n){return o.getAncestorByPredicate(e,n,function(e){return!t.displayedOnlyStructureUtil.isDisplayedOnlyComponent(e.id)})}(n,e):e}).uniqBy("id").compact().filter(function(e){var t=n.pointers.components.getPageOfComponent(e);return!!t&&n.siteAPI.isComponentRenderedOnSite(t.id)}).forEach(e.partial(i,n)),n.dal.set(r,[])}},function(e){return function(t){if(t.runtimeConfig.adapterUpdatesAnchors){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.apply(void 0,[t].concat(r))}}})}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(10),o=n(2),i=n(20).services.schemasService;function a(e,t){return e.pointers.full.components.getDesktopPointer(t)}function s(e,t){return!r.public.isMobileOnly(e,t)}return{getComponentDataSchemasByType:function(n,r){if(n&&r){var o=i.getDefinition(r);if(!o)throw new Error("component type: ".concat(r," is unsupported"));var a=o.dataTypes||[];return e.map(a,function(e){return t.getDataSchemaByType(n,e)})}return null},getComponentPropertiesByType:function(e,n){if(e&&n){var r=i.getDefinition(n);if(!r)throw new Error("component type: ".concat(n," is unsupported"));var o=r.propertyType;if(o)return t.getPropertiesSchemaByType(e,o)}return null},resetMobileComponentProperties:function(e,n){if(e&&n&&s(e,n)){var r=a(e,n),o=t.getPropertiesItem(e,r);t.deletePropertiesItem(e,n),t.updatePropertiesItem(e,n,o)}},splitMobileComponentProperties:function(e,n){if(e&&n&&s(e,n)){var r=a(e,n),i=t.getPropertiesItem(e,r),u=e.dal.full.get(e.pointers.getInnerPointer(r,"propertyQuery")),c=u&&u.replace("#",""),l=o.DOM_ID_PREFIX.MOBILE+c;t.setPropertiesItem(e,n,i,l),e.dal.set(e.pointers.getInnerPointer(n,"propertyQuery"),l)}},isMobileComponentPropertiesSplit:function(n,o){if(r.public.isMobileOnly(n,o))return!0;var i=a(n,o),s=t.getPropertyItemPointer(n,o),u=t.getPropertyItemPointer(n,i),c=s&&s.id,l=u&&u.id;return!e.isEqual(c,l)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(3),o=n(4),i=n(9),a=n(127),s=t.constants;function u(t){!function(e){e.text=e.text.slice(0,a.QUICK_ACTION_ITEM_MAX_LENGTH)}(t),function(t){if(!e.includes(a.actionTypesMap,t.itemType))throw new Error('"'.concat(t.itemType,'" is an unsupported action'))}(t),"custom"!==t.itemType&&function(t){var n=a.quickActionIconsData[t.itemType];e.assign(t,{icon:n.hash,color:n.color})}(t)}function c(e){return e.pointers.components.getPage("masterPage",s.VIEW_MODES.MOBILE)}function l(e){return e.pointers.components.getComponent("QUICK_ACTION_BAR",c(e))}function p(t){var n=l(t);return!e.isNull(n)&&o.isExist(t,n)}function d(t,n){u(n);var i=e.merge(e.clone(a.defaultSerializedQuickActionBarItem),{data:e.assign(r.createDataItemByType(t,"QuickActionBarItem"),e.pick(n,["link","itemType","text","icon"])),style:e.set({},"style.properties",e.pick(n,["color"]))}),s=l(t),c=o.getComponentToAddRef(t,s,null);o.add(t,c,s,i)}function g(t){if(!p(t))return[];var n=function(t){var n=t.pointers.components.getChildren(l(t));return e.map(n,function(n){var r=o.data.get(t,n),a=t.dal.get(n).styleId,s=i.styles.get(t,a);return e.assign({pointer:n},e.pick(r,["text","icon","link","itemType"]),e.pick(s.style.properties,["color"]))})}(t),r=function(t){var n=e(t.siteDataAPI.siteData.getClientSpecMap()).reject(function(t){return e.get(t,["permissions","revoked"],!1)}).map("appDefinitionId").value();return e(s.SUPPORTED_DYNAMIC_ACTIONS).map(function(t){return e.assign({},t,{isDynamic:!0})}).filter(function(t){return e.includes(n,t.appId)}).value()}(t);return e.concat(n,r)}return{getQuickActionBarPointer:l,hasQuickActionBar:p,addAction:d,addQuickActionBar:function(t,n,i){var s=p(t),u=e(g(t)).reject("isDynamic").isEmpty();if(!s||u){if(!s){var l=e.merge(e.clone(n||a.defaultSerializedFAB),{props:r.createPropertiesItemByType(t,"QuickActionBarProperties")}),f=c(t),m=o.getComponentToAddRef(t,f,null,"QUICK_ACTION_BAR");o.add(t,m,f,l)}e.forEach(i,e.partial(d,t,e))}},removeQuickActionBar:function(e){p(e)&&o.deleteComponent(e,l(e))},getActions:g,clearActions:function(t){if(p(t)){var n=t.pointers.components.getChildren(l(t));e.forEach(n,function(e){return o.deleteComponent(t,e)})}},getAllTypes:function(){return a.actionTypesMap},validateActionItemData:u,getIconsMap:function(){return a.quickActionIconsData}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(48),r=n(24),o=n(34),i=n(14),a=n(42),s=n(99),u=n(49),c=(n(58),n(57)),l=n(138),p=n(194),d="/appStore/wix-code/",g="save",f="wixCodeNotProvisioned";function m(e,t){var n=i.getLargestApplicationId(e),a={type:r.WIX_CODE_SPEC_TYPE,appDefinitionId:t.appDefinitionId,instance:t.dsi,instanceId:t.instanceId,applicationId:s.generateAppFlowsLargestAppId(n)};return a[f]=!0,o.registerAppData(e,a),a}function v(e,t){return c.setWixCodeModel(e,{gridAppId:t.gridAppId}),t}function y(e){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}function E(e){return t.extractFromSnapshot(e,["rendererModel","clientSpecMap"],!0)}function I(e){return function(e){return!!a.getExistingWixCodeAppFromPS(e)}(e)&&function(e){return!!c.getGridAppId(e)}(e)}return{provision:function(t){var n=u.trace(t,{action:"createApp"}),r=a.getExistingWixCodeAppFromPS(t);return I(t)?(n({message:"wix code is already provisioned"}),Promise.resolve(r)):function(t,n){var r={baseUrl:l.getBaseUrlFromPS(t),metasiteId:y(t),signedInstance:n?n.instance:null};return l.create(r).then(e.partial(v,t)).then(function(e){return p.setAppWriteable(t),e}).then(n?e.constant(n):e.partial(m,t))}(t,r).then(function(e){return n({message:e}),e}).catch(function(e){return n({message:e,level:u.levels.ERROR}),Promise.reject(e)})},isProvisioned:I,save:function(n,o,i){var a=function(e){return t.extractFromSnapshot(e,["serviceTopology","appStoreUrl"])+d}(n)+g,s=function(e){return t.extractFromSnapshot(e,["rendererModel","metaSiteId"])}(n),u=e(n).thru(E).filter(f).map(function(e){return{applicationId:e.applicationId.toString(),instanceId:e.instanceId,signedInstance:e.instance,gridAppId:t.extractFromSnapshot(n,r.paths.GRID_APP_ID)}}).value();if(u.length>0){var c={metaSiteId:s,codeAppSpec:u[0]};t.sendRequest(a,t.requestTypes.POST,c).then(function(t){o(function(t){if(!t.success)return t;var n={};return n[t.payload.applicationId]=t.payload,e.assign({},t,{payload:{clientSpecMap:n}})}(t))}).catch(function(e){i(e)})}else o()},ensureAppIsWriteable:p.ensureAppIsWriteable,handleAppIsReadOnlyServerError:p.handleAppIsReadOnlyServerError}}()},function(e,t,n){var r,o,i;e.exports=(r=n(185),i=function(e){var t,n=e.errorType,i=e.xhr;return n===o.ABORT?r.buildAbortedError():n===o.TIMEOUT?((t=new Error("Request timed out")).name="RequestTimeoutError",t):r.buildServerError(i.status,i.responseText)},{build:function(e){var t=e.errorType,n=e.xhr,r=i({errorType:t,xhr:n});return r.xhr=n,r},errorTypes:o={ABORT:"abort",TIMEOUT:"timeout",PARSE:"parseerror"},safeGetErrorCode:function(e){try{return JSON.parse(e.xhr.responseText).errorCode}catch(e){return null}},safeGetStatusCode:function(e){try{return e.xhr.status}catch(e){return null}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(135),r=n(34),o=n(14),i=n(473),a=[],s=[];function u(e,n){var r=e.dal.get(e.pointers.general.getServiceTopology());return t.specMapUtils.resolveEditorScriptUrl(n,{clientSpec:n,serviceTopology:r})}function c(e,t){return u(e,o.getAppDataByAppDefinitionId(e,t))}function l(e,t){var n=e.pointers.platform.getAppManifestPointer(t);return e.dal.get(n)}return{registerToManifestAdded:function(t,n){a.push(n);var o=function(t){var n=r.filterAppsDataByType(t,"Application");return e.compact(e.map(n,function(e){return l(t,e.appDefinitionId)}))}(t);e.isEmpty(o)||o.forEach(function(e){n(e)})},setManifest:function(t,n,r){var o=t.pointers.platform.getAppManifestPointer(n),i=c(t,n);t.dal.set(o,r),e.forEach(a,function(e){e(r,i)})},getAppManifest:l,getAppDataByAppDefId:c,getAppDataByApplicationId:function(e,t){return u(e,o.getAppData(e,t))},setAppPublicAPI:function(t,n,r){var o=t.pointers.platform.appPublicApiNamePointer(n);t.dal.set(o,r),e.forEach(s,function(e){return e({apiName:r})})},registerToPublicApiSet:function(t,n){s.push(n);var o=function(t){var n=r.filterAppsDataByType(t,"Application");return e.compact(e.map(n,function(e){return function(e,t){var n=e.pointers.platform.appPublicApiNamePointer(t);return e.dal.get(n)}(t,e.appDefinitionId)}))}(t);e.isEmpty(o)||o.forEach(function(e){return n({apiName:e})})},isPlatformAppInstalled:function(e,t){var n=e.pointers.platform.getPagesPlatformApplicationsPointer(),r=e.dal.get(n),o=c(e,t);return i.isPlatformAppInstalled(r,o)},hasAppManifest:function(e,t){var n=e.pointers.platform.getAppManifestPointer(t);return e.dal.isExist(n)}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g;e.exports=(r=n(0),o=n(14),i=n(13),a=[],s=[],u=[],c=function(e){var t=o.getAppsData(e);return r.filter(t,function(t){return g(e,t)&&l(t)&&p(t)})},l=function(e){return r.has(e,"appDefId")?!r.includes(a,e.appDefId):!r.includes(a,e.appDefinitionId)},p=function(e){return r.has(e,"appDefId")?!r.some(s,{appDefinitionId:e.appDefId}):!r.some(s,{appDefinitionId:e.appDefinitionId})},{getPendingApps:c,getPendingAppsFromSiteMetaData:function(e){var t=(i.getProperty(e,i.PROPERTY_NAMES.PENDING_APPS)||[]).slice(0).concat(u),n=r.uniqBy(t,"appDefId");return r.filter(n,function(e){return l(e)&&p(e)})},getPendingAppsCount:function(e){var t=c(e);return r.size(t)},getPremiumPendingApps:function(e){var t=o.getAppsData(e),n=r.map(t,"appDefinitionId"),a=i.getProperty(e,i.PROPERTY_NAMES.PENDING_APPS)||[],s=r.filter(a,function(e){return r.has(e,"appDefId")&&r.has(e,"vendorProductId")});return r.filter(s,function(e){return!r.includes(n,e.appDefId)})},isPending:g=function(e,t){return e&&t?t.requiresEditorComponent&&o.isHybridApp(e,t.applicationId):!(!r.isUndefined(e)||!t)&&d(t)},isPendingAppData:d=function(e){return e.requiresEditorComponent&&o.isHybridAppFromAppData(e)},dismiss:function(e,t){r.some(s,{appDefinitionId:t})||(r.includes(a,t)||a.push(t),u=r.reject(u,{appDefId:t}))},add:function(e){s.push(e),r.includes(a,e.appDefinitionId)&&(a=r.without(a,e.appDefinitionId))},addPendingDashboardApp:function(e,t){if(!r.isEmpty(t)){var n={appDefId:t};u.push(n),a=r.without(a,t)}},getAppsToDismiss:function(){return a},getAppsToAdd:function(){return s},isPremiumPendingApp:function(e,t){var n=i.getProperty(e,i.PROPERTY_NAMES.PENDING_APPS)||[];return r.some(n,function(e){return r.has(e,"appDefId")&&"Premium"===e.reason&&e.applicationId===t})},onSave:function(){a=[],s=[]}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o={},i={},{registerOnAppDeleted:function(e,t){r.isUndefined(o[e])&&(o[e]=[]),o[e].push(t)},registerOnAppInstalled:function(e,t){r.isUndefined(i[e])&&(i[e]=[]),i[e].push(t)},invokeDeleteAppCallbacks:function(e){o[e]&&r.forEach(o[e],function(e){e()})},invokeAddAppCallbacks:function(e){i[e]&&r.forEach(i[e],function(e){e()})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(28),o=n(18),i=n(23);function a(e,n,r){var o=[e,n,r],i={methodName:"components.data.update",singleComp:t.shouldUpdateDataWithSingleComp(e,n)};e.setOperationsQueue.runSetOperation(t.updateDataItem,o,i)}function s(e,n,r){var o=t.getDataItem(e,n);o&&o.urlFormat!==r&&(o.urlFormat=r,a(e,n,o))}return{updateUrlFormatIfNeeded:s,upgradeUrl:function(n,u,c,l){var p=r.getPossibleUrlFormats(),d=o.getSocialUrl(n,p.HASH_BANG,l&&l.forceMainPage);r.isHttpsEnabled(n)&&function(e,n){var r=t.getDataItem(e,n);r&&(r.isHttpsEnabled=!0,a(e,n,r))}(n,u),r.isUsingUrlFormat(n,p.HASH_BANG)?s(n,u,p.HASH_BANG):c&&e.get(i.socialAPI,c)(d,function(e){s(n,u,e?p.HASH_BANG:p.SLASH)})}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(524),o=n(525),i=n(13),{save:r,build:o,seo:i.seo.ERRORS,social:{facebook:i.social.facebook.ERRORS},favicon:i.favicon.ERRORS,siteName:i.siteName.ERRORS})},function(e,t){e.exports=g},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(148),o=n(534),i=n(25),a=n(535),s=n(51),u=n(110),c="Type does not exist",l="Item does not match schema",p="Item does not exist",d="Deleted item does not exist",g={DRAFT:"Draft",SAVED:"Saved",PUBLISHED:"Published",MODIFIED:"Modified"};function f(e){throw new Error(e)}function m(t,n){return e.isObject(t)?(e.isArray(t)?e.map:e.mapValues)(t,function(t){return e.isObject(t)?n(t):t}):t}function v(t,n){var r=t;return e.has(t,"links")&&((r=e.clone(t)).links=m(t.links,n)),e.forEach(r,function(t,o){e.has(t,"links")&&(r[o]=e.clone(t),r[o].links=m(t.links,n))}),r}function y(t,n){return v(n,e.partial(o.convertWixappsDataToWLink,t))}function E(e){return v(e,o.convertWLinkToWixappsData)}function I(t,n,r){var o=s.getType(t,n)||f(c),i=e.map(e.filter(o.fields,S),"name"),a=e.keys(r);return 0===e.difference(a,i).length}function S(t){return e.isUndefined(t.computed)||!t.computed}function h(e,t,n){return e.dal.getByPath(i.getItemPath(t,n))}function P(t,n){return e.mapValues(n,function(e){return"wix:Image"===e._type?r.resolveImageData(e,t):e})}return{STATES:g,createItem:function(n,r,o){var u=t.guidUtils.getUniqueId(),p=function(e,t,n){return{_iid:e,_type:t,_createdAt:n,_updatedAt:n,_state:g.DRAFT}}(u,r,a.getCurrentTime(n)),d=e.omit(e.cloneDeep(o)||{},e.keys(p).concat("_permissions"));if(!I(n,r,d=E(d)))throw new Error(l);return d=e.assign(function(t,n){var r={},o=s.getType(t,n)||f(c);return e.forEach(o.fields,function(t){e.isUndefined(t.defaultValue)||(r[t.name]=e.clone(t.defaultValue))}),r}(n,r),d,p),n.dal.full.setByPath(i.getItemPath(r,d._iid),d),u},updateItem:function(t,n,r,o){if(!I(t,n,o))throw new Error(l);o=E(o);var s=h(t,n,r)||f(p);e.forOwn(o,function(t,n){s[n]=e.isString(t)?t:e.defaults(t,s[n])}),s._updatedAt=a.getCurrentTime(t),s._state===g.PUBLISHED&&(s._state=g.MODIFIED),t.dal.full.setByPath(i.getItemPath(n,r),s)},deleteItem:function(e,t,n){h(e,t,n)||f(p),e.dal.full.removeByPath(i.getItemPath(t,n)),u.deleteItemFromAllManualDataSelectors(e,n)},restoreItem:function(e,t,n){var r=e.dal.getByPath(i.getDeletedItemPath(t,n))||f(d);delete r._deletedAt,e.dal.full.removeByPath(i.getDeletedItemPath(t,n)),e.dal.full.setByPath(i.getItemPath(t,n),r)},setAllItemsOfType:function(e,t,n){e.dal.full.setByPath(i.getBaseItemsPath(t),n)},getAllItemsOfType:function(t,n){var r=t.dal.get(t.pointers.general.getServiceTopology()),o=t.dal.getByPath(i.getBaseItemsPath(n))||{};return e(o).mapValues(e.partial(P,r)).mapValues(e.partial(y,t)).value()}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(25),o=n(51),i=n(43),a="Type does not exist",s="Cannot created multiple views with the same type, name & format",u="View does not exist",c="Must provide a view definition",l="Array";function p(e){throw new Error(e)}function d(t,n,i){if(n.forType!==l&&!o.getType(t,n.forType))throw new Error(a);var s=e.cloneDeep(n);f(s,n.name,i),s.name=i;var u=g(s.forType,s.name,s.format);return t.dal.full.setByPath(r.getViewPath(u),s),u}function g(e,t,n){return i.viewsUtils.getViewId(e,t,n)}function f(t,n,r){e.forEach(t,function(o,i){e.isObject(o)?f(o,n,r):o===n&&(t[i]=r)})}function m(t,n){var o=t.dal.getKeysByPath(r.getBaseViewsPath());return e.filter(o,function(e){return i.viewsUtils.getViewNameFromId(e)===n})}function v(e,t){return e.dal.getByPath(r.getViewPath(t))}return{getAllViewsByName:function(t,n){var o=m(t,n),i=e.map(o,function(e){return t.dal.getByPath(r.getViewPath(e))});return e.zipObject(o,i)},createView:function(e,n){return d(e,n,"".concat(n.name||"viewDef","_").concat(t.guidUtils.getUniqueId()))},createViewsWithSameName:function(n,r){var o="".concat(r[e.keys(r)[0]].name||"viewDef","_").concat(t.guidUtils.getUniqueId());return function(t,n){var r=e.map(t,function(e){return g(e.forType,n,e.format)});if(e.uniq(r).length<r.length)throw new Error(s)}(r,o),e.map(r,function(e){return d(n,e,o)})},getViewById:v,getView:function(e,t,n,r){return v(e,g(t,n,r))},deleteAllViewsByName:function(t,n){var o=m(t,n);e.forEach(o,function(e){t.dal.full.removeByPath(r.getViewPath(e))})},replaceView:function(e,t,n){n||p(c);var o=v(e,t)||p(u);f(n,n.name,o.name),n.forType=o.forType,e.dal.full.setByPath(r.getViewPath(t),n)},setValueInView:function(e,t,n,o,i,a){var s=g(t,n,a),u=r.getViewPath(s);e.dal.full.setByPath(u.concat(o),i)}}}()},function(e,t,n){e.exports=function(){var e,t,r=n(279),o=n(67);function i(e){return e.siteAPI.getMainPageId()}function a(e,t,n,r){return e.siteAPI.getPageUrl(t,n,r)}return{getHomepageId:i,isMasterPage:function(e,t){return"masterPage"===t},isHomepage:function(e,t){return t===i(e)},registerPageDataChangedCallback:function(t){e=t},executePageDataChangedCallback:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e(t,n,r,o)},registerPageAddedCallback:function(e){t=e},executePageAddedCallback:function(e,n,r){t(e,n,r)},convertPageNameToUrl:function(e,t){return r(t,{custom:{_:"-"},symbols:!1})||"blank"},getCurrentUrl:function(e,t,n){return a(e,{pageId:e.siteAPI.getCurrentUrlPageId()},t,n)},getMainPageUrl:function(e,t,n){return a(e,{pageId:i(e)},t,n)},getPageUrl:a,isDynamicPage:function(e,t){return!!o.get.byPage(e,e.pointers.data.getDataItemFromMaster(t))}}}()},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),o=n(280),i=n(6),a=o.languageStatus,s=e.property("languageCode");function u(t,n){return e(t).map(s).includes(s(n))}function c(e){return t.multilingual.getCurrentLanguageCode(e)}function l(n,r){I(n,{languageCode:r})&&(t.multilingual.setCurrentLanguage(e.pick(n,["siteAPI","siteDataAPI","pointers","dal"]))(r),i.executeHook(i.HOOKS.MULTILINGUAL.AFTER_CHANGE_LANGUAGE,null,[n,r]))}function p(n,o){var i=n.dal.get(n.pointers.page.getAllPagesPointer());e.forEach(i,function(i,a){var u=r({},s(o),e.cloneDeep(t.multilingual.EMPTY_TRANSLATION_DATA)),c=n.pointers.page.getPageTranslations(a,n.siteAPI.isExperimentOpen.bind(n.siteAPI)),l=n.dal.fullJsonDal.get(c),p=e.assign(u,l);n.dal.fullJsonDal.set(c,p)})}function d(t){return!e.isEmpty(m(t))}function g(t,n,r){var o=m(t);if(u(o,n)){var i=e.assign({},n,{status:r});if(v(t,o.map(function(e){return s(e)===s(n)?i:e})),r===a.DELETED&&c(t)===n.languageCode)l(t,f(t).languageCode)}}function f(e){var t=e.dal,n=e.pointers;return t.get(n.multilingual.originalLanguage())}function m(e){var t=e.dal,n=e.pointers;return t.get(n.multilingual.translationLanguages())}function v(e,t){var n=e.dal,r=e.pointers;return n.set(r.multilingual.translationLanguages(),t)}function y(t){var n=t.dal,r=t.pointers;return e.reject(m({dal:n,pointers:r}),{status:a.DELETED})}function E(t){return e.concat(f(t),y(t))}function I(e,t){return u(E(e),t)}function S(e,t){var n=e.pointers.components.getPageOfComponent(t);return e.dal.fullJsonDal.get(n).id}function h(t,n,r,o){e.forEach(m(t),function(i){var a=i.languageCode,s=t.pointers.multilingualTranslations.translationDataItem(n,a,r);if(t.dal.fullJsonDal.isExist(s)){var u=t.dal.fullJsonDal.get(s),c=e.isFunction(o)?o(u):e.merge(u,o);t.dal.fullJsonDal.set(s,c)}})}return{multilingual:{isEnabled:d},current:{get:c,set:l},original:{get:f,set:function(e,t){if(!I(e,t)){var n=s(f(e));t.status=a.ACTIVE;var r=e.dal,o=e.pointers;r.set(o.multilingual.originalLanguage(),t),c(e)===n&&l(e,s(t))}}},public:{get:function(t,n){return u(function(t){return e.filter(E(t),{status:a.ACTIVE})}(t),n)}},status:{set:g},get:y,getFull:m,add:function(e,t){I(e,t)||(v(e,m(e).concat(t)),p(e,t))},remove:function(t,n){var r=m(t),o={languageCode:s(n)};if(e.find(r,o)){var i=e.reject(r,o),u=e.filter(i,{status:a.ACTIVE});e.isEmpty(u)&&g(t,f(t),a.ACTIVE);var c=t.dal,l=t.pointers;c.set(l.multilingual.translationLanguages(),i)}},init:function(t,n){var r=n.originalLanguage,o=n.translationLanguages;t.dal.set(t.pointers.multilingual.originalLanguage(),r),t.dal.set(t.pointers.multilingual.translationLanguages(),o),function(t){var n=t.dal.get(t.pointers.page.getAllPagesPointer());e.forEach(n,function(n,r){var o=t.pointers.page.getPageTranslations(r,t.siteAPI.isExperimentOpen.bind(t.siteAPI)),i=t.dal.fullJsonDal.get(o);e.isUndefined(i)&&t.dal.fullJsonDal.set(o,{})})}(t),e.forEach(o,e.partial(p,t)),l(t,s(r)||null)},copyTranslationData:function(t,n,r,o){var i=S(t,n);e.forEach(r,function(n,r){e.forEach(n,function(n,a){if(o[a]){var s=e.cloneDeep(n);s.id=o[a];var u=t.pointers.multilingualTranslations.translationDataItem(i,r,s.id);t.dal.fullJsonDal.set(u,s)}})}),t.siteDataAPI.createDisplayedNode(n)},patchPageTranslations:function(e,t,n){h(e,"masterPage",t,n)},patchDataItemTranslations:function(e,t,n,r){h(e,t,n,r)},copyDataItemTranslations:function(t,n,r,o,i){e.forEach(m(t),function(a){var s=a.languageCode,u=t.pointers.multilingualTranslations.translationDataItem(n,s,r);if(t.dal.fullJsonDal.isExist(u)){var c=t.dal.fullJsonDal.get(u),l=e.assign({},e.cloneDeep(c),i),p=t.pointers.multilingualTranslations.translationDataItem(o,s,l.id);t.dal.fullJsonDal.set(p,l)}})},isCurrentLanguageSecondary:function(e){return d(e)&&f(e).languageCode!==c(e)},component:{getTranslations:function(t,n){var o=S(t,n),i=t.pointers.page.getPageTranslations(o,t.siteAPI.isExperimentOpen.bind(t.siteAPI)),a=t.dal.fullJsonDal.get(i),s=e.concat(n,t.pointers.components.getChildrenRecursively(n));return e.reduce(a,function(n,i,a){return e.forEach(s,function(i){var s=function(t,n){var r=t.pointers.getInnerPointer(n,"dataQuery"),o=t.dal.fullJsonDal.get(r);return e.isUndefined(o)?null:o.replace("#","")}(t,i);if(!e.isNull(s)){var u=t.pointers.multilingualTranslations.translationDataItem(o,a,s);if(t.dal.fullJsonDal.isExist(u)){var c=t.dal.fullJsonDal.get(u);e.merge(n,r({},a,r({},s,c)))}}}),n},{})}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(164),o=n(165),i=n(411),a=function(e,t,n){return e.pointers.getInnerPointer(t,n)};function s(e,t,n,r){var o=e.pointers.full.components.getChildrenContainer(t),i=a(e,o,n),s=a(e,o,r),u=e.dal.full.get(i),c=e.dal.full.get(s);e.dal.transaction(function(){e.dal.full.set(i,c)}),e.dal.full.set(s,u)}var u=function(e,t,n,r){return i.shouldUseMasterPageArrangement(e,n)?i.findValidIndexForChild(e,t,n,r):r};function c(t,n){var a=t.pointers.components.getParent(n);if(i.shouldUseMasterPageArrangement(t,a))return i.getNextCompIndexInDisplayedJson(t,n);var s=t.pointers.components.getChildren(a),u=e.findIndex(s,{id:n.id});return r.findNext(s,function(e){return o.canSwapComponents(t,n,e)},u)}function l(t,n){var a=t.pointers.components.getParent(n);if(i.shouldUseMasterPageArrangement(t,a))return i.getPrevCompIndexInDisplayedJson(t,n);var s=t.pointers.components.getChildren(a),u=e.findIndex(s,{id:n.id});return r.findPrev(s,function(e){return o.canSwapComponents(t,n,e)},u)}var p=function(e){return function(t,n){return!!o.isCompArrangeable(t,n)&&e(t,n)>-1}},d=p(l),g=p(c);return{getNewIndex:u,getNewIndexForNewComp:function(e,t,n){return i.shouldUseMasterPageArrangement(e,n)?i.findValidIndexForNewChild(e,t,n):null},moveToIndex:function(t,n,r){if(!function(t,n,r){if(!o.isCompArrangeable(t,n))return!1;var i=t.pointers.components.getParent(n),a=t.pointers.components.getChildren(i);return e.isFinite(r)&&r>=0&&r<a.length}(t,n,r))throw new Error("index is out of children's bounds, cannot move to index");var i=t.pointers.full.components.getParent(n),a=t.pointers.full.components.getChildrenContainer(i),s=t.pointers.full.components.getChildren(i);if(e.findIndex(s,{id:n.id})!==r){var c=u(t,n,i,r),l=t.dal.full.get(n);t.dal.full.remove(n),t.dal.full.push(a,l,n,c)}},moveBackward:function(n,r){if(!d(n,r))throw new Error("component is the bottom one, cannot move backward");var o=n.pointers.components.getParent(r);if(i.shouldUseMasterPageArrangement(n,o)&&i.isMasterPageSection(n,r))return i.moveMasterPageSectionBackward(n,r);var a=function(e,t){var n=e.pointers.components.getParent(t),r=l(e,t);return e.pointers.components.getChildren(n)[r]}(n,r),u=n.pointers.full.components.getChildren(o);s(n,o,e.findIndex(u,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id)}),e.findIndex(u,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.id)}))},moveForward:function(n,r){if(!g(n,r))throw new Error("component is the top one, cannot move forward");var o=n.pointers.components.getParent(r);if(i.shouldUseMasterPageArrangement(n,o)&&i.isMasterPageSection(n,r))return i.moveMasterPageSectionForward(n,r);var a=function(e,t){var n=e.pointers.components.getParent(t),r=c(e,t);return e.pointers.components.getChildren(n)[r]}(n,r),u=n.pointers.full.components.getChildren(o);s(n,o,e.findIndex(u,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id)}),e.findIndex(u,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(a.id)}))},canMoveForward:g,canMoveBackward:d,moveToFront:function(e,t){if(!g(e,t))throw new Error("component is the top one, cannot move to front");var n=e.pointers.full.components.getParent(t);if(i.shouldUseMasterPageArrangement(e,n))return i.moveMasterPageChildToFront(e,t);var r=e.dal.full.get(t);e.dal.full.remove(t);var o=e.pointers.full.components.getChildrenContainer(n);e.dal.full.push(o,r,t)},moveToBack:function(n,r){if(!d(n,r))throw new Error("component is the bottom one, cannot move to back");var o=n.pointers.full.components.getParent(r);if(i.shouldUseMasterPageArrangement(n,o))return i.moveMasterPageChildToBack(n,r);var a=n.pointers.full.components.getChildrenContainer(o),s=n.dal.full.get(a),u=e.findIndex(s,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id)}),c=s.splice(u,1)[0];s.unshift(c),n.dal.full.set(a,s)},fixIndexForMasterPageChild:function(n,r){var o=n.pointers.full.components.getParent(r);if(i.shouldUseMasterPageArrangement(n,o)){var a=function(n,r){var o=n.pointers.full.components.getParent(r),i=n.pointers.full.components.getChildren(o);return e.findIndex(i,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id)})}(n,r),s=n.pointers.full.components.getChildrenContainer(o),c=u(n,r,o,a);if(a!==c){var l=n.dal.full.get(r);n.dal.full.remove(r),n.dal.full.push(s,l,r,c)}}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3);function r(e,n){return t.getConnectionsItem(e,n)||[]}function o(t,n){return e.reject(r(t,n),{type:"WixCodeConnectionItem"})}return{getConnections:r,getConnectionsByPointer:function(e,n,r){return t.getConnectionsItemByPointer(e,n,r)},getPlatformAppConnections:o,isCompConnectedToController:function(t,n,o){return e.some(r(t,n),{controllerRef:o})},getPrimaryConnection:function(t,n){return e.find(o(t,n),{isPrimary:!0})}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(15),o=n(54),i={},{createInitialGapMap:function(e){var t=e.siteAPI.getSiteId();return i[t]||(i[t]=function(e){var t=r.getViewMode(e),n=e.pointers.components.getHeader(t),i=e.pointers.components.getFooter(t),a=e.pointers.components.getPagesContainer(t),s=o.getComponentLayout(e,n),u=o.getComponentLayout(e,a),c=o.getComponentLayout(e,i),l=s.y+s.height,p=u.y+u.height;return{aboveHeader:s.y,abovePagesContainer:u.y-l,aboveFooter:c.y-p}}(e)),i[t]},getInitialGapMap:function(e){return i[e.siteAPI.getSiteId()]}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(15),r={SINGLE_POST:"7326bfbb-4b10-4a8e-84c1-73f776051e10",FEED:"79f391eb-7dfc-4adf-be6e-64434c4838d9"};function o(t,n,r){var o=e(n).thru(t.pointers.data.getDataItem).thru(t.dal.get).value();return o&&"AppPage"===o.type&&"AppPage"===o.appPageType&&o.appPageId===r}return{isSinglePost:function(e,t){return o(e,t,r.SINGLE_POST)},isFeed:function(e,t){return o(e,t,r.FEED)},isBlogPage:function(e,n){var r=t.getViewMode(e),o=e.pointers.components.getPage(n,r),i=e.pointers.getInnerPointer(o,"componentType");return"wixapps.integration.components.AppPage"===e.dal.get(i)}}}()},function(e,t){e.exports=function(e,t){var n=e.isMobileView();return{x:n?t.x:0,width:n?e.getSiteWidth():e.getSiteMeasureMap().clientWidth}}},function(e,t,n){e.exports=function(){var e=n(26),t="wysiwyg.viewer.components.Group";function r(n,r){return e.getType(n,r)===t}return{isGroup:r,isGroupedComponent:function(t,n){return r(t,e.getContainer(t,n))},getGroupComponentType:function(){return t}}}()},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(27),i=n(1),a=n(10),s=n(2),u=n(31),c=function(e,t,n){return!!a.public.getMobileConversionConfigByName(e,n,"desktopOnly",t)},{getHiddenAndShownComponents:function(e,t){var n=e.pointers.components.getPage(t,s.VIEW_MODES.MOBILE),l=u.getMobileActiveModesMap(e,t),p=r.set({},t,l),d=e.siteAPI.getDeepPageStructure?e.siteAPI.getDeepPageStructure(t):e.dal.full.get(n),g=i.fullToDisplayedJson.getDisplayedJson(d,p,t).structure;if(g.mobileComponents){var f=i.dataUtils.getAllCompsInStructure(g,!1,r.negate(c.bind(null,e,t))),m=i.dataUtils.getAllCompsInStructure(g,!0,r.negate(function(e,t,n){var o=e.pointers.full.components.getComponent(n.id,t);return r.get(a.public.isMobileOnly(e,o),"mobileOnly",!1)}.bind(null,e,n)));return{hiddenComponents:o.structuresComparer.getComponentIdsAddedToDesktopStructure(f,m),shownComponents:r.intersection(r.keys(m),r.keys(f))}}},hasMobileStructure:function(e){var t=e.pointers.components.getMasterPage(s.VIEW_MODES.MOBILE);return!r.isEmpty(e.pointers.components.getChildren(t))}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(95),o=n(2),i=n(3),a=n(10),s=n(22),u=n(52),c=(n(1),n(5)),l=n(126),p=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.VIEW_MODES.DESKTOP;return e.pointers.full.components.getComponent(t,e.pointers.components.getPage(n,r))},d=function(e,t){return a.public.isHiddenable(e,t)},g=function(t,n){return e.get(i.getMobileHintsItem(t,n),"hidden",!1)},f=function(t){return e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id")};function m(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(r&&!l.isMobileOnlyComponent(t,r.id)){s=s||t.pointers.full.components.getPageOfComponent(r).id;var u=!n.hidden||d(t,r),c=g(t,r)!==n.hidden;if(u&&c&&i.updateMobileHintsItem(t,r,n),a.updateChildren)!function(t,n,r,o,i){var a=t.pointers.full.components.getChildren(r);e.forEach(a,function(e){var r=p(t,e.id,i);m(t,n,r,o,i)})}(t,n,a.childrenSourceView===o.VIEW_MODES.MOBILE?p(t,r.id,s,o.VIEW_MODES.MOBILE):r,a,s)}}var v=function(e,t,n,r){var o=p(e,t,n);(function(e,t){return e.dal.displayedJsonDal.isExist(t)})(e,o)&&m(e,{hidden:r},o)};function y(n,i){var a=t.getHiddenAndShownComponents(n,i);a&&(!function(t,n,i){if(n===o.MASTER_PAGE_ID){var a=["SITE_FOOTER","PAGES_CONTAINER","SITE_PAGES","SITE_HEADER"],c=e.remove(i.hiddenComponents,function(t){return e.includes(a,t)});if(!e.isEmpty(c)){var l;(l=i.shownComponents).push.apply(l,r(c));var p=(new Error).stack;s.error(t,u.MOBILE_STRUCTURE_MANDATORY_ELEMENT_MISSING,{missingComponents:c.toString(),stack:p})}}}(n,i,a),e.forEach(a.hiddenComponents,function(e){return v(n,e,i,!0)}),e.forEach(a.shownComponents,function(e){return v(n,e,i,!1)}))}function E(e,t){var n=e.pointers.components.getPage(t,o.VIEW_MODES.DESKTOP),r=e.pointers.getInnerPointer(n,"mobileHintsQuery");return!!e.dal.get(r)}function I(n){if(t.hasMobileStructure(n)){var r=function(e){if(c.isOpen("sv_patchDataDisablesMobileHintsInit")){var t=e.pointers.general.getAutoSaveInnerPointer("changesApplied")||!1;return t&&e.dal.get(t)}return!1}(n),o=f(n);e.forEach(o,function(e){var t=E(n,e);r&&t||(y(n,e),S(n,e))})}}function S(e,t){if(!E(e,t)){var n=e.pointers.components.getPage(t,o.VIEW_MODES.DESKTOP);i.updateMobileHintsItem(e,n,{hidden:!1})}}return{initialize:function(e){I(e)},updateProperty:m,updateHiddenComponentsOnPage:y,updateHiddenComponents:function(n,r){t.hasMobileStructure(n)&&(r=r||f(n),e.forEach(r,function(e){return y(n,e)}))},markPageAsInitialized:S,testAPI:{initializeMobileHints:I}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(5),i={conversionType:"FULL",heuristicStrategy:"default"},a={default:{detectSemanticGroups:!0,fixMasterPageStructureOrder:!1},appbuilder:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,keepInvisibleComponents:!0},onboarding:{detectSemanticGroups:!1},accessibility:{keepNotRecommendedMobileComponents:!0,detectSemanticGroups:!1,analyzeOnly:!0}},s={FULL:{},MERGE_ALL_PAGES:{keepEmptyTextComponents:!1,keepNotRecommendedMobileComponents:!1,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1},MERGE_UNHIDE:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,keepInvisibleComponents:!0,fixMasterPageStructureOrder:!1},MERGE_PRESET:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1},MERGE_DISPLAY_MODE:{keepEmptyTextComponents:!1,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1}},{getConversionSettings:function(e){return e=r.defaults({},e,i),r.assign({applySemanticRules:!0,useOverlapRules:o.isOpen("sv_mobileOverlapRules"),reparentMobileSOAP:o.isOpen("sv_reparentMobileSOAP")},s[e.conversionType],a[e.heuristicStrategy])}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),r=n(10),o=n(461),i={"wysiwyg.viewer.components.BoxSlideShow":o,"wysiwyg.viewer.components.StateBox":o,"wysiwyg.viewer.components.StateStrip":o,"wysiwyg.viewer.components.StripContainerSlideShow":o};function a(e,t,n){if(!e||!e.dal.isExist(t)||!function(e,t){return i[r.getComponentType(e,t)]}(e,t))throw new Error("invalid args");var o=r.getComponentType(e,t);return i[o][n].call(this,e,t,o)}function s(e,t,n,r){if(!e||!e.dal.isExist(t)||!i[n])throw new Error("invalid args");return i[n][r].call(this,e,t,n)}function u(e,t,n){return s(e,t,n,"canBeMasterChild")}return{getMasterChildren:function(e,t){return a(e,t,"getMasterChildren")},getNonMasterChildren:function(e,t){return a(e,t,"getNonMasterChildren")},isMasterChild:function(e,t,n){return s(e,t,n,"isMasterChild")},toggleMasterChild:function(e,t,n){if(!u(e,t,n))throw new Error("component can't be shown on all states");return s(e,t,n,"toggleMasterChild")},canBeMasterChild:u,getParentCompWithOverflowHidden:function(n,o){var a=function(n,o){if(n.pointers.components.isPage(o))return null;for(var a=t.getContainer(n,o);a;){var s=r.getComponentType(n,a);if(e.includes(e.keys(i),s))return s;a=t.getContainer(n,a)}return null}(n,o);return!!a&&s(n,o,a,"getParentCompWithOverflowHidden")}}}()},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(1),i=n(100),a=n(192),{cacheAppMarketDataAfterProvision:function(e,t){i.getAppMarketDataAsync(e,t.appDefinitionId).catch(function(){e.siteAPI.reportBI(a.FAIL_TO_GET_APP_MARKET_DATA)})},generateAppFlowsLargestAppId:function(e){var t=999*o.guidUtils.random()+1+99*o.guidUtils.random()+1|0;return r.max([e,999])+t}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(13),r=n(30),o=n(465),i=n(37),a=n(478),s=n(1),u=n(191),c=n(19),l=n(2),p=e.template("<%= appMarketEditorAPIUrl %><%= appDefinitionId %>/priced-app?metaSiteId=<%= metaSiteId %>&lang=<%= lang %>"),d=e.template("<%= appMarketEditorAPIUrl %>?market=related_apps&fields=appDefinitionId,slug,name,appIcon,colorSvgIcon,weights,categories,by,relatedAppsTeaser,hasSection,widgets.defaultWidth,widgets.defaultHeight"),g=e.template("<%= appMarketEditorAPIUrl %>?id=<%= appDefinitionIds %>"),f=e.template("<%= appMarketEditorAPIUrl %>page-apps?fields=widgets.title,widgets.widgetId,appDefinitionId&lang=<%= lang %>"),m=e.template("<%= premiumBaseUrl %>?appInstanceId=<%= instanceId %>&appDefinitionId=<%= appDefinitionId %>&paymentCycle=<%= cycle %>&vendorProductId=<%= vendorProductId %>"),v=function(e){var t=e.pointers.general.getServiceTopology(),n=e.pointers.getInnerPointer(t,"appMarketEditorApiUrl");return"".concat(e.dal.get(n),"/")};function y(e,n,r){var o=t.getProperty(e,t.PROPERTY_NAMES.META_SITE_ID),i=t.getProperty(e,t.PROPERTY_NAMES.LANGUAGE_CODE)||"en",a=p({appMarketEditorAPIUrl:v(e),appDefinitionId:n,metaSiteId:o,lang:i});return r&&(a+="&currency=".concat(r)),a}var E=function(t,n,r,o,i){c.utils.fedopsLogger.interactionStarted(l.INTERACTIONS.APP_MARKET_SERVICE.CALL_SERVER),a.lock(n),s.ajaxLibrary.ajax({type:"GET",url:y(t,n,e.get(r,"currency")),success:function(t){if(function(t){return!e.get(t,"currency")}(r))t=a.set(n,t);else{var i=a.get(n);i&&(t=e.merge({},i,t))}a.unlock(n),o&&o(t),c.utils.fedopsLogger.interactionEnded(l.INTERACTIONS.APP_MARKET_SERVICE.CALL_SERVER)},error:function(e,t,r){c.utils.fedopsLogger.captureError(new Error("Error with calling server: Type: ".concat(t,", Error: ").concat(r)),{tags:{appMarketCallServer:!0,appDefinitionId:n}}),a.unlock(n);var s="app market response error for appDefinitionId: ".concat(n);o?o({error:s,errorType:t,errorMessage:r}):i&&i({error:s,errorType:t,errorMessage:r})}})},I=function(t,n,r){return new Promise(function(o,i){if(e.isUndefined(n))i({error:"appDefinitionId was not given"});else{var s=a.get(n);s&&h(s)&&!e.get(r,"currency")?o(s):E(t,n,r,o,i)}})},S=function(t,n,r){e.isNil(n)&&c.utils.fedopsLogger.captureError(new Error("getAppMarketData was called with nil appDefinitionId"));var o=a.get(n);return P(n)&&E(t,n,r),o},h=function(e){return e&&e.price},P=function(t){var n=a.get(t);return 1!==a.isLocked(t)&&(e.isUndefined(n)||!h(n))},A=function(n,r){var i=n.pointers.general.getServiceTopology(),a=n.pointers.getInnerPointer(i,"appMarketEditorNewUrl"),s=n.dal.get(a);s=e.replace(s,"wix-app-market","one-app-market");var u=new o(s),c=t.getProperty(n,t.PROPERTY_NAMES.LANGUAGE_CODE)||"en",l=t.getProperty(n,t.PROPERTY_NAMES.META_SITE_ID),p=t.getProperty(n,t.PROPERTY_NAMES.SITE_ID);return u.addOriginParam(r.origin).addModalParams(r.modalName,r.appName,r.tab).addDevAppParam(r.appDefinitionId).addLangParam(c).addAppMarketTests(r.tests).addCompIdParam("MarketPanel").addMetaSiteIdParam(l).addSiteIdParam(p).addTagsParam(r.query).addOpenAppParam(r.openAppDefId).addAppMarketParams(r.appMarketParams).addNewWixStores("true").addCategoryParam(r.categorySlug).addBiReferralInfoParam(r.openMarketOrigin).addBiReferralInfoCategoryParam(r.referralInfoCategory).addBiSectionParam(r.section).addAddingMethodParam(r.addingMethod).addStateParam(r.state).build()},T=function(t){return e.isArray(t)||(t=[t]),t};return{getAppMarketDataAsync:I,getAppMarketData:S,getAppMarketDataForPage:function(t,n,r,o){if(e.isUndefined(n))o&&o({error:"pageId was not given"});else{var u=function(t,n){var r=i.getInstalledAppsOnPage(t,n),o=e.map(r,"appDefinitionId"),s=a.keys();return e.remove(o,function(t){return!e.includes(s,t)})}(t,n);if(e.isEmpty(u))return;var c=function(e,t){var n=v(e);return g({appMarketEditorAPIUrl:n,appDefinitionIds:t.toString()})}(t,u);s.ajaxLibrary.ajax({type:"GET",url:c,success:function(t){e.forEach(t,function(e){a.set(e.appDefinitionId,e)}),r&&r(t)},error:function(){r?r({error:"app market response error for appDefinitionIds: ".concat(u.toString())}):o&&o({error:"app market response error for appDefinitionIds: ".concat(u.toString())})}})}},getAppMarketUrl:A,getAppMarketInfoUrl:function(e,t,n){return t.appName=n,t.modalName="app-modal",A(e,t)},getAppReviewsUrl:function(e,t,n){return t.appName=n,t.modalName="app-modal",t.tab="reviews",A(e,t)},getAppMarketPermissionsUrl:function(e,t){return t.modalName="permissions-modal",A(e,t)},getPackages:function(t,n,o,i){return new Promise(function(a,s){I(t,n,i).then(function(t){if(t.error)s(t);else{var i=t.purchaseStartUrl,u=e.pick(t.price,"currencyCode","currencySymbol"),c=e.map(t.packages,function(t){var a=e.assign(e.cloneDeep(t),u);return e.forEach(r.CYCLE,function(t){!function(t,n,o,i,a){t.hasOwnProperty(a)&&(t[a].hasOwnProperty("price")?t[a].url=m({premiumBaseUrl:n,instanceId:o,appDefinitionId:i,cycle:e.findKey(r.CYCLE,function(e){return e===a}),vendorProductId:t.id}):delete t[a])}(a,i,o,n,t)}),a});a(c)}}).catch(function(e){s(e)})})},getPremiumApps:function(t,n,r,o){u.getPremiumApps(t,n,function(n){!function(t,n,r){e.forEach(n.tpaPackages,function(e){a.get(e.appDefinitionId)?a.set(e.appDefinitionId,{upgradedToYearly:u.isYearly(e)}):E(t,e.appDefinitionId,{},function(){a.set(e.appDefinitionId,{upgradedToYearly:u.isYearly(e)})})}),e.isFunction(r)&&r(n.tpaPackages)}(t,n,r)},o)},getRelatedApps:function(e,t,n){var r=function(e){var t=v(e);return d({appMarketEditorAPIUrl:t})}(e);s.ajaxLibrary.ajax({type:"GET",url:r,dataType:"json",contentType:"application/json",success:function(e){t(T(e))},error:n})},getSectionsTranslatedPageTitles:function(e){return new Promise(function(n,r){var o=function(e){var n=v(e),r=t.getProperty(e,t.PROPERTY_NAMES.LANGUAGE_CODE)||"en";return f({appMarketEditorAPIUrl:n,lang:r})}(e);s.ajaxLibrary.ajax({type:"GET",url:o,success:function(e){n(e)},error:r})})},requestAppMarketDataToBeCached:S}}()},function(e,t){e.exports=f},function(e,t,n){e.exports=function(){var e=n(0),t=n(6),r=n(500),o=n(77),i=n(139),a=n(49),s=n(61),u=n(513),c=n(514),l=n(209),p=n(35),d=n(24),g=n(34),f=n(22),m=n(39),v=n(58),y=n(1),E=n(42),I=n(57),S=n(28),h=n(108),P=n(50);var A=y.urlUtils.joinURL;function T(e){s.handleSchemaInvalidationActions(),function(e){p.initApp(e,D(e,"dbsm-viewer-app","dbsm-editor-app","dataBinding",!0))}(e),function(e){p.initApp(e,D(e,"","wix-code-editor-app","wix-code",!1))}(e)}function O(e){e.siteAPI.reloadAppsContainer()}var C=function(e){return new Promise(function(t,n){var r=S.isFirstSave(e),o=e.siteAPI.isQaMode();if(r||o)return t();h.save(e,t,n,!1)})},_=function(e){return function(t){return P.generateNicknamesForSite(e),t}};function D(t,n,r,i,a){function s(t){return e(t||"").split(",").invokeMap("split",":").fromPairs().value()}function u(e,t,n){var r=A(e.scriptsDomainUrl,"services",t);return n?A(r,n):e.scriptsLocationMap[t]}if(o.isProvisioned(t)){var c=t.pointers.general.getServiceTopology(),l=t.dal.get(c),p=t.siteAPI.getCurrentUrl(),d=s(e.get(p,["query","viewerPlatformAppSources"]))[i],g=s(e.get(p,["query","editorPlatformAppSources"]))[i],f={appDefinitionId:i};return n&&e.set(f,"appFields.platform.viewerScriptUrl",A(u(l,n,d),"/app".concat(a?".verbose":"",".js"))),r&&(e.set(f,"appFields.platform.editorScriptUrl",A(u(l,r,g),"/editorAppModule.js")),f.editorArtifact=r),f}}return t.registerHook(t.HOOKS.PLATFORM.APP_PROVISIONED,O),t.registerHook(t.HOOKS.PLATFORM.APP_UPDATED,O),{initializeWixCode:function(t){r.initPaths(t),i.init(t),o.isProvisioned(t)&&(T(t),s.prefetchUserCode(t));var n=t.pointers.wixCode.getIsAppReadOnly();t.dal.set(n,!function(){try{return t.siteAPI.wasCodeAppIdValueChangedSinceLastSnapshot?t.siteAPI.wasCodeAppIdValueChangedSinceLastSnapshot("before-autosave-apply",t.pointers.wixCode.getGridAppId()):t.dal.wasValueChangedSinceLastSnapshot("before-autosave-apply",t.pointers.wixCode.getGridAppId())}catch(e){return!1}}()),function(t){var n=e(t).thru(g.getAppsData).filter("platformApp").map("displayName").value();e.isEmpty(n)||f.event(t,m.EDITOR_PLATFORM_APPS_LOADED,{app_list:n,number_of_apps:n.length})}(t)},provision:function(t,n){var r=a.trace(t,{action:"provision"});return n=e.defaults({},n,{onSuccess:e.noop,onError:e.noop}),o.provision(t).then(_(t)).then(function(e){return T(t),O(t),e}).then(function(e){return t.setOperationsQueue.asyncPreDataManipulationComplete(),C(t).then(function(){r({message:e}),n.onSuccess(e)})}).catch(function(e){t.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Wix Code provision failed: ".concat(e))),r({level:a.levels.ERROR,message:e}),n.onError(e)})},isProvisioned:o.isProvisioned,getClientSpec:function(t){return e.head(g.filterAppsDataByType(t,d.WIX_CODE_SPEC_TYPE))},getWidgetRef:function(e,t){var n=e.pointers.components,r=n.getPageOfComponent(t);return r?n.isMasterPage(r)?function(e,t){var n=e.siteAPI.getCurrentUrlPageId(),r=y.constants.VIEW_MODES,o=e.siteAPI.isMobileView()?r.MOBILE:r.DESKTOP;return t.getPage(n,o)}(e,n):r:null},duplicatePageCode:function(e,t,n){o.isProvisioned(e)&&c.duplicatePageCode(e,t,n)},getCompSdkType:l.getCompSdkType,log:{levels:a.levels,trace:a.trace},codeIntelligence:l,fileSystem:s,pages:u,userScripts:{isUserCodeUrl:function(e,t){var n=E.getExistingWixCodeAppFromPS(e),r={wixCode:e.dal.get(e.pointers.wixCode.getRoot()),serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),viewMode:"preview"};return v.wixCodeUserScriptsService.isUserCodeUrl(t,n,r)},getSourceMapUrl:function(e,t){var n=I.getGridAppId(e),r=E.getExistingWixCodeAppFromPS(e),o={wixCode:e.dal.get(e.pointers.wixCode.getRoot()),serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),viewMode:"preview"};return v.wixCodeUserScriptsService.getSourceMapUrl(t,n,r,o)}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(141);function r(t){return e.isObject(t)&&t.name&&t.location}function o(e){return r(e)&&e.directory}function i(e){return r(e)&&!e.directory}function a(t){return e.last(t.location.split("/"))}function s(n){return i(n)&&3===n.location.split("/").length&&e.startsWith(n.location,t.PAGES)}return{isFileSystemItem:r,isFolder:o,isFile:i,isInsideFolder:function(e,t){return o(e)&&0===t.location.indexOf(e.location)},getFileName:a,isPagesFolder:function(n){return o(n)&&e.startsWith(n.location,t.PAGES)},isPageFile:s,isSystemFolder:function(n){return o(n)&&e.includes(e.values(t),n.location.toLowerCase().replace(/\/*$/,""))},getParentFolderPath:function(e){var t=e.location.replace(/\/$/,"").split("/");return t.pop(),t.join("/")},getPageId:function(e){if(s(e))return a(e).replace(".js","")}}}()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e.exports={ArgumentError:function(e){function t(e,n,i,a){var s;r(this,t),s=o(this,c(t).call(this));var u=a?" Expecting ".concat(a,"."):"";return s.name="ArgumentError",s.message="Illegal Argument '".concat(e,"' in ").concat(n,". '").concat(i,"' is invalid.").concat(u),s.stack=(new Error).stack,s}return i(t,a(Error)),t}(),FileSystemError:function(e){function t(e){var n;return r(this,t),(n=o(this,c(t).call(this))).name="FileSystemError",n.message=e,n.stack=(new Error).stack,n}return i(t,a(Error)),t}(),WixCodeNotWriteableError:function(e){function t(){var e;return r(this,t),(e=o(this,c(t).call(this))).name="WixCodeNotWriteableError",e.message="Wix Code App is not writeable",e.stack=(new Error).stack,e}return i(t,a(Error)),t}()}},function(e,t,n){e.exports=function(){var e=n(0),t=n(141);function r(e){return"pagelink"===e.type&&"dataBinding"===e.plugin}function o(t,n){var o=e.keys(n),i=e.assign({},t,n);return e.omitBy(i,function(t,n){return r(t)&&!e.includes(o,n)})}return{assembleSchema:function(t,n,i){var a=JSON.parse(t||"{}"),s=n?JSON.parse(n):a,u=i?JSON.parse(i):a,c=e.pickBy(u.fields,r);return JSON.stringify(e.assign({},s,{fields:o(s.fields,c)}))},isSchemaFile:function(n){return e.startsWith(n,"".concat(t.SCHEMAS,"/"))},isSchemasDirectory:function(e){return e==="".concat(t.SCHEMAS,"/")},isValidContent:function(t){try{var n=JSON.parse(t);return e.isObject(n)}catch(e){return!1}},getSchemaIdFromFilePath:function(e){var n="".concat(t.SCHEMAS,"/").length,r=e.length-".json".length;return e.substring(n,r)}}}()},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(143),i=n(140),a=n(58),s=n(107),u=n(24),c=n(105),l=n(42),p=n(104),d=n(142),g=n(206),f=n(139),m=n(49),v=n(103),y=a.wixCodeUserScriptsService;function E(t,n,a,E){if(l.getExistingWixCodeAppFromSnapshot(n)){var S=m.traceWithSnapshot(n,{action:"saveCode"});Promise.resolve().then(function(){return function(t,n){var a=d.getChangesBetweenSnapshots(t,n);if(d.isChangesEmpty(a))return Promise.resolve({message:"no changes"});var f=a.toSave.map(function(e){return e.fileId}),m={filesToSave:JSON.stringify(f),filesToCopy:JSON.stringify(a.toCopy),filesToDelete:JSON.stringify(a.toDelete)};try{if(n.getIn(u.paths.IS_APP_READ_ONLY))throw new p.WixCodeNotWriteableError;var y=function(e){var t=l.getExistingWixCodeAppFromSnapshot(e),n=(o=e,o.getIn(["serviceTopology","wixCodeIdeServerUrl"])),r=e.getIn(u.paths.GRID_APP_ID);var o;return s.createCodeAppInfo({baseUrl:n,appId:r,signedInstance:t.instance,instanceId:t.instanceId})}(n),E=function(t,n){var a=o(e.partition(n,function(e){return c.isSchemaFile(e.fileId)}),2),s=a[0],u=a[1],l=s.map(function(e){return function(e,t,n){if(c.isSchemaFile(t))return g.save(e,c.getSchemaIdFromFilePath(t),JSON.parse(n)).then(function(e){return e?{modifiedSchemas:e}:e});var r=i.getVirtualDescriptor(t,!1);return i.writeFile(e,r,n)}(t,e.fileId,e.content)});if(e.isEmpty(u))return l;var p=i.bulkWrite(t,u);return[].concat(r(l),[p])}(y,a.toSave),I=function(t,n){return e.map(n,function(e){return function(e,t,n){var r=i.getVirtualDescriptor(t,!1),o=i.getVirtualDescriptor(n,!1),a=n.lastIndexOf("/"),s=n.substr(0,a),u=i.getVirtualDescriptor(s,!0),c=n.substr(a+1);return i.copy(e,r,u,c).catch(function(e){return 404===e.xhr.status&&v.isPageFile(r)?Promise.resolve({pagesWithoutCode:[r,o].map(v.getPageId)}):Promise.reject(e)})}(t,e.srcFileId,e.destFileId)})}(y,a.toCopy),S=function(t,n){return e.map(n,function(e,n){return function(e,t,n){if(!n&&c.isSchemaFile(t))return g.remove(e,c.getSchemaIdFromFilePath(t)).then(function(e){return e?{modifiedSchemas:e}:e});var r=i.getVirtualDescriptor(t,n);return i.deleteItem(e,r)}(t,n,e)})}(y,a.toDelete),h=E.concat(I,S);return Promise.all(h).then(function(t){var n=e(t).filter("modifiedSchemas").flatMap("modifiedSchemas").value(),r=e(t).filter("pagesWithoutCode").flatMap("pagesWithoutCode").value();return{message:"changes saved",params:m,savedPaths:f,modifiedSchemas:n,directoryFlagByDeletedPath:a.toDelete,pagesWithoutCode:r}}).catch(function(e){throw{error:e,params:m}})}catch(e){return Promise.reject({error:e,params:m})}}(t,n)}).then(function(t){var r=t.message,o=t.params,i=t.savedPaths,s=t.modifiedSchemas,l=t.directoryFlagByDeletedPath,p=t.pagesWithoutCode;S({message:r,params:o}),a(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=function(t,n){if(t){var r=function(t){return e.reduce(t,function(e,t,n){return!t&&c.isSchemaFile(n)?e.concat(c.getSchemaIdFromFilePath(n)):e},[])}(n),o=e.filter(t,function(t){return!e.includes(r,t.id)});return e.reduce(o,function(e,t){return e.concat({path:u.paths.MODIFIED_FILE_CONTENTS.concat(".schemas/".concat(t.id,".json")),value:JSON.stringify(t)})},[])}}(r,o),s=function(t,n){var r=n.filter(function(e){return y.filePathAffectsBundles(e)});if(e.isEmpty(r))return;if(e.every(r,function(e){return y.filePathAffectsSingleBundle(e)}))return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(t,n){var r=y.bundleIdFromFilePath(n),o=y.paths.CACHE_KILLERS_MAP.concat(r),i=e.getIn(o);return t.push({path:o,value:f.getNewCacheKillerValue(i)}),t},[])}(t,r);return function(e){var t=[],n=e.getIn(y.paths.GLOBAL_CACHE_KILLER);return t.push({path:y.paths.GLOBAL_CACHE_KILLER,value:f.getNewCacheKillerValue(n)}),t.push({path:y.paths.CACHE_KILLERS_MAP,value:{}}),t}(t)}(t,n),l=function(t){if(!e.isEmpty(t))return[{path:u.paths.DIRECTORY_FLAG_BY_DELETED_PATH,value:{}}]}(o),p=function(t,n){var r=["pagesPlatformApplications",u.WIX_CODE_APP_ID];if(n&&t.getIn(r)){var o=t.getIn(r).toJS();return n.forEach(function(t){return e.set(o,t,!1)}),{path:r,value:o}}}(t,i);if(a||s||l||p)return{changes:I(s,p),historyAlteringChanges:I(a,l)}}(n,i,s,l,p))},function(t){t&&t.error&&t.params?(S({level:m.levels.ERROR,message:t.error,params:t.params}),E(t.error)):(t=e.isError(t)?t:new Error(t),S({level:m.levels.ERROR,message:t}),E(t))})}else a()}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e.concat(t||[])},[])}return{partialSave:E,fullSave:E,firstSave:E,saveAsTemplate:E,autosave:E,publish:function(e,t){t()},getTaskName:t.getTaskName,getSnapshotTags:t.getSnapshotTags}}()},function(e,t,n){e.exports=function(){var e=n(57),t=n(42),r=n(104);function o(e,t,n,o){if(!n)throw new r.ArgumentError(e,t,n,o)}function i(e){var t=e.baseUrl,n=e.appId,r=e.signedInstance,i=e.instanceId;return o("baseUrl","createCodeAppInfo",t,"string"),o("appId","createCodeAppInfo",n,"string"),o("signedInstance","createCodeAppInfo",r,"string"),o("instanceId","createCodeAppInfo",i,"string"),{baseUrl:t,signedInstance:r,instanceId:i,appId:n}}return{createCodeAppInfo:i,getCodeAppInfoFromPS:function(n){var r=t.getExistingWixCodeAppFromPS(n),o=e.getGridAppId(n);return i({baseUrl:n.dal.get(n.pointers.general.getServiceTopology()).wixCodeIdeServerUrl,appId:o,signedInstance:r.instance,instanceId:r.instanceId})}}}()},function(e,t,n){e.exports=n(210)(n(530))},function(e,t,n){e.exports=function(){var e=n(0),t=n(219),r=n(531),o=n(25),i=n(532),a=n(539),s=t.fromJS({parts:null}),u=t.fromJS({dataSelectors:null}),c=t.fromJS({views:null}),l=t.fromJS({types:null}),p={items:function(e){return f(e,o.getBaseItemsPath())},parts:function(e){return s.update("parts",f.bind(null,e,o.getBasePartsPath()))},dataSelectors:function(e){return u.update("dataSelectors",f.bind(this,e,o.getBaseDataSelectorsPath()))},views:function(e){return c.update("views",f.bind(this,e,o.getBaseViewsPath()))},types:function(e){return l.update("types",f.bind(this,e,o.getBaseTypesPath()))}},d=["_state"];function g(t,n){return e.assign(n,{_timestamp:t._updatedAt})}function f(e,n){return e.getIn(n,t.fromJS({}))}function m(t,n,o,i,a){var s=e.map(o,function(e,t,n,o,i){var a=p[i](e),s=p[i](t);return r.getItemsDiff(a,s,n,o)}.bind(null,t,n,i,a));return{created:e(s).map("created").flattenDeep().value(),updated:e(s).map("updated").flattenDeep().value(),deleted:e(s).map("deleted").flattenDeep().value()}}function v(t){return e.every(p,function(e){return e(t).every(function(e){return e&&e.isEmpty()})})}function y(e,t,n,r,o){if(t===e||v(t)&&v(e))n();else{var s=function(e,t){return{dataItems:m(e,t,["items"],d,g),repo:E(e,t)}}(e,t);i.saveRepoAndItems(a.getAppInstance(t),s.repo,s.dataItems,o).then(n).catch(r)}}function E(t,n){var r=m(t,n,["types","parts","dataSelectors","views"]);if(!e.some(r,function(e){return e.length>0}))return null;var o=e.transform(["dataSelectors","views","types"],function(t,r){var o=p[r](n).toJS();t[r]=e(o).map(e.values).flattenDeep().value()},{}),i=p.parts(n).toJS();return e.assign(o,i)}return{partialSave:function(e,t,n,r,o){y(e,t,n,r,o)},fullSave:function(e,t,n,r,o){y(e,t,n,r,o)},firstSave:function(e,t,n,r,o){var i=a.getAppInstanceId(e),s=a.getAppInstanceId(t);i&&i===s?r({errorCode:1970,errorDescription:"application instance id is the template id",changes:null}):y(e,t,n,r,o)},saveAsTemplate:function(e,t,n){n()},autosave:function(e,t,n,r,o){y(e,t,n,r,o)},publish:function(e,t,n,r){v(e)?t():i.publish(a.getAppInstance(e),r).then(t).catch(n)},getTaskName:function(){return"appbuilder"},getSnapshotTags:function(){return["primary"]}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(25),o=n(51),i="Type does not exist",a="Selector does not exist",s={"IB.ManualSelectedList":"ManualSelectedList"};function u(e){throw new Error(e)}function c(e,t){return e.dal.getByPath(r.getDataSelectorPath(t))}function l(t,n,o){if(!function(t){return e.isArray(t)&&e.every(t,function(t){return e.isString(t)})}(o))throw new Error("itemsId must be an array of strings.");var i=c(t,n)||u(a);i.itemIds=function(t,n,o){var i=t.dal.getByPath(r.getBaseItemsPath(n))||{};return e.intersection(o,e.map(i,"_iid"))}(t,i.forType,o),i.logicalTypeName="IB.ManualSelectedList",t.dal.full.setByPath(r.getDataSelectorPath(n),i)}return{getSelector:function(t,n){var r=c(t,n);if(r){var o=e.omit(r,["dataProviderId","forType","logicalTypeName"]);return o.type=s[r.logicalTypeName],o}},setManualSelector:l,createSelector:function(e,n){o.getType(e,n)||u(i);var a={id:"dataSelector_".concat(t.guidUtils.getUniqueId()),forType:n};return e.dal.full.setByPath(r.getDataSelectorPath(a.id),a),a.id},deleteItemFromAllManualDataSelectors:function(t,n){var o=t.dal.getByPath(r.getBaseDataSelectorsPath());e(o).filter({logicalTypeName:"IB.ManualSelectedList"}).forEach(function(r){var o=e.reject(r.itemIds,function(e){return e===n});o.length!==r.itemIds.length&&l(t,r.id,o)})}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P;e.exports=(r=n(0),o=n(1),i=n(216),a=n(14),n(222),s=n(69),u=n(13),c=n(33),l=n(99),p=r.template("<%= provisionServerBaseUrl %>/appStore/demo/pre-save-provision/<%= metaSiteId %>/<%= applicationId %>"),d=r.template("<%= provisionServerBaseUrl %>/appStore/pre-save-provision/<%= appDefinitionId %>"),g=r.template("<%= provisionServerBaseUrl %>/appStore/post-save-complete-provision?metaSiteId=<%= metaSiteId %>&editorSessionId=<%= editorSessionId %>"),f=r.template("<%= provisionServerBaseUrl %>/appStore/provision/<%= appDefinitionId %>"),m=r.template("<%= provisionServerBaseUrl %>/appStore/spec/<%= metaSiteId %>/<%= applicationId %>"),v=r.template("<%= provisionServerBaseUrl %>/appStore/disable/<%= metaSiteId %>/<%= appDefinitionId %>"),y=r.template("<%= provisionServerBaseUrl %>/appStore/restore/<%= metaSiteId %>/<%= appDefinitionId %>"),E=function(e,t,n,r,o){return t({provisionServerBaseUrl:I(e),appDefinitionId:n,applicationId:r,metaSiteId:o})},I=function(e){var t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,"appStoreUrl"))},S=function(e,t,n,r){var o=E(e,f,t),a=h(e),s=new i(o).addMetaSiteId(a).addAcceptJson().build();P(e,s,"POST",{},n,r)},h=function(e){return u.getProperty(e,u.PROPERTY_NAMES.META_SITE_ID)},P=function(e,t,n,i,s,u){o.ajaxLibrary.ajax({type:n||"GET",url:t,data:JSON.stringify(i),dataType:"json",contentType:"application/json",success:function(t){e?function(e,t,n){var o=n.payload;if(r.includes([void 0,-1],o.applicationId))o.applicationId=a.getLargestApplicationId(e)+1,o.notProvisioned=!0;else{var i=a.getAppDataByAppDefinitionId(e,o.appDefinitionId);!c.isSiteSaved(e)&&i&&i.demoMode&&!o.demoMode&&(o.notProvisioned=!0)}a.registerAppData(e,o),e.setOperationsQueue.executeAfterCurrentOperationDone(function(){c.isTpaByAppType(o.type)&&l.cacheAppMarketDataAfterProvision(e,o)}),t(o)}(e,s,t):s(t)},error:u})},{restoreWixappOnServer:function(e,t,n,r){var o=I(e),i=y({appDefinitionId:t,metaSiteId:h(e),provisionServerBaseUrl:o});P(null,i,"POST",{},n,r)},disableWixappOnServer:function(e,t,n,r){var o=I(e),i=v({appDefinitionId:t,metaSiteId:h(e),provisionServerBaseUrl:o});P(null,i,"POST",{},n,r)},provisionAppAfterSave:S,provisionAppBeforeSave:function(e,t,n,r){var o=E(e,d,t),a=new i(o).addAcceptJson().build();P(e,a,"POST",{},n,r)},provisionAppDemoAfterSave:function(e,t,n,r){S(e,t,n,r)},provisionAppDemoBeforeSave:function(e,t,n,r){var o=h(e),a=E(e,p,null,t,o),s=new i(a).addAcceptJson().build();P(e,s,"POST",{},n,r)},completeProvisionAppsAfterSave:function(e,t,n,o,a,s){var u=g({provisionServerBaseUrl:e,metaSiteId:t,editorSessionId:n}),l=new i(u).addAcceptJson().build(),p=r.filter(o,"notProvisioned");p=r.filter(p,function(e){return!c.isTpaByAppType(e.type)});var d=r.map(p,function(e){return{appDefinitionId:e.appDefinitionId,applicationId:e.applicationId.toString(),instanceId:e.instanceId}});r.isEmpty(d)?a():P(void 0,l,"POST",{apps:d,metaSiteId:t},a,s)},refreshSpecMap:function(e,t,n,r,o){var a=E(e,m,null,t,n),s=new i(a).addAcceptJson().build();P(e,s,"GET",void 0,r,o)},provisionAppFromSourceTemplate:function(e,t,n,r,o){s.provisionAppFromSourceTemplate(e,t,n,r,o)}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T;e.exports=(r=n(0),n(5),o=n(6),i=n(4),a=n(11),s=n(7),u=n(81),c=n(37),l=n(14),p=n(113),d=n(153),g=n(542),f=n(155),m=n(156),v=n(15),y=n(231),S=function(e,t,n,a){var s=a.applicationId,u=a.appDefinitionId,c=n.widgetId||T(e,a),l=r.get(a,"widgets.".concat(c)),f=r.get(l,"tpaWidgetId"),v=n.styleId||n.style;f&&r.get(n,"componentOptions.widget.tpaWidgetId")===f&&(n.pageId=n.componentOptions.widget.wixPageId||n.pageId,n.showOnAllPages=n.componentOptions.widget.allPages||n.showOnAllPages,v=n.componentOptions.styleId||v);var I,S,A=n.pageId||e.siteAPI.getFocusedRootId();if(!c||!A||!l)throw new Error("invalid params");if(n.componentDefinition)(I=n.componentDefinition).data&&I.data.applicationId&&I.data.applicationId!==String(s)&&(I=Object.assign({},I,{data:Object.assign({},I.data,{applicationId:String(s)})}));else{var O={width:l.defaultWidth,height:l.defaultHeight};n.layout&&r.defaults(n.layout,O),S={width:l.defaultWidth||0,height:l.defaultHeight||0,defaultPosition:l.defaultPosition||r.get(n,"layout.defaultPosition")||{}},(l.defaultShowOnAllPages||n.showOnAllPages||E(l)||"header"===S.defaultPosition.region||"footer"===S.defaultPosition.region)&&(A="masterPage"),I=E(l)?d.getGluedWidgetStructure(s,u,l,S,v):d.getWidgetStructure(s,u,l.widgetId,g.getCompLayoutFrom(e,S,n.layout),v),n.responsiveLayout&&y.replaceLayout(I,n.responsiveLayout)}var C=n.containerRef||h(e,A,n,S);return t||(t=i.getComponentToAddRef(e,C)),d.convertStyleIdToStyleDef(e,I),I&&o.executeHook(o.HOOKS.ADD_TPA.COMPONENT_DEFINITION_MODIFIER,void 0,[I,C]),i.add(e,t,C,I),P(e,t,l,n),p.setPrefetchPageBehaviorIfNeeded(e,t,a),r.isString(n.presetId)&&!r.isEmpty(n.presetId)&&m.set(e,t,"presetId",n.presetId,m.SCOPE.COMPONENT),t},h=function(e,t,n,o){var i=e.pointers.components.getPage(t,v.getViewMode(e)),a=i;return n.parentContainerRef&&e.pointers.isSamePointer(e.pointers.components.getPageOfComponent(n.parentContainerRef),i)&&(a=n.parentContainerRef),"header"===r.get(o,"defaultPosition.region")&&(a=s.getSiteHeader(e)),a},P=function(e,t,n,r){var o=n.canBeStretched&&n.shouldBeStretchedByDefault&&!r.dontStretch,i=!1===r.dontStretch;(o||i)&&a.setDock(e,t,{left:{vw:0},right:{vw:0}})},A=function(e,t,n){var o=l.widgetsToAutoAddToSite(e,t),i=[];return r.forEach(o,function(r){if(!r.default){var o=S(e,void 0,{widgetId:r.widgetId,componentOptions:n},t);i.push(o)}}),i},T=function(e,t){var n=r.filter(t.widgets,function(e){return r.isNil(e.appPage)||r.isUndefined(e.appPage)}),o=r.find(n,{default:!0});return r.get(o,"widgetId")||n&&!r.isEmpty(n)&&n[0].widgetId||null},{isGlued:E=function(e){return r.has(e,"gluedOptions")&&!r.isNull(e.gluedOptions)},addWidgetAfterProvision:function(e,t,n,o,i,a){n=n||{};var s=!0;r.isBoolean(r.get(n,"invokeAddAppCallbacks"))&&(s=r.get(n,"invokeAddAppCallbacks"));var d,g,f=[t],m=!c.isApplicationIdExists(e,o.applicationId);if(m){if(l.hasSections(e,o)){if(l.hasMainSection(e,o))return void(r.isFunction(a)&&a());d=p.addHiddenPages(e,o,n.componentOptions)}g=A(e,o,n.componentOptions)}return S(e,t,n,o),f=f.concat(d,g),m&&s&&u.invokeAddAppCallbacks(o.appDefinitionId),e.setOperationsQueue.isRunningSetOperation()?e.setOperationsQueue.executeAfterCurrentOperationDone(function(){m?p.addPlatformAppIfNeeded(e,o,n).then(r.partial(I,n,t,!0,f)).catch(r.partial(I,n,t,!1,f)):I(n,t,!0,f)}):I(n,t,!0,f),i&&i(e),t},duplicateWidget:function(e,t,n){n=n||e.siteAPI.getFocusedRootId(e);var r=e.pointers.components.getPage(n,v.getViewMode(e));if(!r)throw new Error("no such component");var o=i.getComponentToDuplicateRef(e,t,r);i.duplicate(e,o,t,r)},notifyBeforeWidgetDelete:function(e,t){var n=i.data.get(e,t).applicationId;f.notifyWidgetAboutToDelete(e,t,n,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue))},deleteWidget:function(e,t){var n=i.data.get(e,t).applicationId,r=f.deleteTpaCompleteCallback.bind(null,e,[n]);f.deleteWidget.apply(p,[e,t,n,r])},getPagesToBeRemovedWithWidget:function(e,t){var n=i.data.get(e,t),o=r.get(n,"applicationId"),a=c.getWidgetsByAppId(e,o);if(f.isLastInstalledMainWidget(a,e,o,t)){var s=r.union([o],r.map(c.getInstalledDependentAppsData(e,o),"applicationId"));return c.getPagesByApplicationIds(e,s)}return[]},invokeWidgetCallback:I=function(e,t,n,r){e.callback&&e.callback({comp:t,addedCompsRef:r,success:n})}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P;e.exports=(r=n(0),o=n(1),i=n(6),a=n(18),s=n(21),u=n(4),n(11),c=n(36),l=n(15),p=n(14),d=n(37),g=n(152),f=n(153),m=n(30),v=n(154),y=n(231),P=function(e,t){var n=c.getBehaviors(e,t),o=r.find(n,{behavior:{name:"prefetchPages"}});o&&c.removeComponentSingleBehavior(e,t,o,o.action.name)},{addSubSection:function(e,t,n,r,o){return S(e,t,n,r,o).sectionPointer.id},addSubSectionInternal:S=function(e,t,n,i,s){s=s||{},I(n.appPage.id,s);var u=s.title||g.getTitle(i.appDefinitionId,n.widgetId)||n.appPage.name,c="".concat(m.TYPE.TPA_MULTI_SECTION,"_").concat(o.guidUtils.getUniqueId());r.assign(n,{applicationId:i.applicationId});var l=E(e,s.title||n.appPage.name);n.name=u;var p=f.getSubSectionStructure(e,n,c,l,s.requireLogin,s.isHidden);return t=t||a.getPageIdToAdd(e,u,p),{sectionPointer:h(e,t,c,i.applicationId,i.appDefinitionId,n,p,n.widgetId,m.COMP_TYPES.TPA_MULTI_SECTION,m.DATA_TYPE.TPA_MULTI_SECTION,s),pagePointer:t}},addHiddenPages:function(e,t,n){var o=p.getAppSectionsToInstall(e,t.applicationId),i=[];return r.forEach(o,function(o){if(o.appPage.hidden&&o.appPage.id){var a=S(e,null,o,t,{componentOptions:n});i=i.concat(r.values(a))}}),i},addPageAndSection:h=function(e,t,n,o,s,c,l,p,d,g,v){v=v||{};var E,I=e.pointers.components.getViewMode(t),S=e.pointers.components.getUnattached(n,I),h={componentType:d,type:"Component",id:S.id,style:v.styleId||m.STYLE.TPA_SECTION,skin:m.SKINS.TPA_SECTION,layout:(E=v.layout,{x:(E=E||{}).x||0,y:E.y||0,width:E.width||980,height:E.height||500}),data:{appDefinitionId:s,type:g,applicationId:"".concat(o),metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},widgetId:p}};if(r.get(c,"appPage.fullPage")||r.get(c,"componentFields.fullPageDesktopOnly")){r.assign(h.layout,{fixedPosition:!0,docked:{top:{px:0},right:{px:0},bottom:{px:0},left:{px:0}}})}else c.canBeStretched&&c.shouldBeStretchedByDefault&&r.assign(h.layout,{docked:{left:{vw:0},right:{vw:0}}});return a.add(e,t,c.name,l),f.convertStyleIdToStyleDef(e,h),i.executeHook(i.HOOKS.ADD_TPA.COMPONENT_DEFINITION_MODIFIER,void 0,[h,t]),v.responsiveLayout&&y.replaceLayout(h,v.responsiveLayout),u.add(e,S,t,h),S},getPageUriSEO:E=function(e,t){return s.getValidPageUriSEO(e,"",t.replace(/[^A-Za-z0-9-]/g,"-").toLowerCase()||"blank")},setPrefetchPageBehaviorIfNeeded:function(e,t,n){var o=p.getSectionsWidgetIdsToPreFetch(n);if(!r.isEmpty(o)){var i=d.getHiddenSections(e,n.applicationId);if(!r.isEmpty(i)){var a=r(i).filter(function(e){return r.includes(o,e.widgetId)}).map("pageId").value();if(r.size(a)>0){var s=e.pointers.components.getPage(r.head(a),l.getViewMode(e)),u=c.getBehaviorDefinition(e,"prefetchPages"),g=c.getActionDefinition(e,"screenIn");u.params.prefetchFilters.id=a,P(e,t),c.updateBehavior(e,t,g,s,u)}}}},addPlatformAppIfNeeded:function(e,t,n){return new Promise(function(r,o){p.hasEditorPlatformPart(t)?v.provision(e,t.appDefinitionId,n).then(r,o):r()})},addSectionComponentOptionsIfNeeded:I=function(e,t){e&&r.get(t,"componentOptions.page.pageId")===e&&(t.title=t.componentOptions.page.title||t.title,t.requireLogin=r.isUndefined(t.componentOptions.page.requireLogin)?t.requireLogin:t.componentOptions.page.requireLogin,t.styleId=t.componentOptions.styleId||t.styleId,t.layout=t.componentOptions.layout||t.layout,t.isHidden=r.isUndefined(t.componentOptions.page.isHidden)?t.isHidden:t.componentOptions.page.isHidden)}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=function(e){return e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"styleSettings")},i=function(e,t){var n=e.dal.get(o(e)),i=r.get(n,"stylesPerPage");return parseInt(i,10)>=parseInt(t,10)},{isSiteMigrated:function(e){return i(e,"1.0")},didRunDuplicateStylesFixer:function(e){return i(e,"2.0")},markSiteAsMigrated:function(e){return e.dal.set(o(e),{stylesPerPage:"1.0"})},markSiteAsRunDuplicateStylesFixer:function(e){return e.dal.set(o(e),{stylesPerPage:"2.0"})},resetMigratedSiteFlag:function(e){return e.dal.set(o(e),{})}})},function(e,t,n){var r;e.exports=(r=n(0),{isCompRescaling:function(e,t){return r.isNumber(t.scale)&&t.scale!==e.scale},isCompResizing:function(e,t){return r.isNumber(t.width)&&t.width!==e.width||r.isNumber(t.height)&&t.height!==e.height},calculateDelta:function(e,t){return r.isUndefined(e)?0:e-t}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o={"wysiwyg.viewer.components.BoxSlideShow":"wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShow":"wysiwyg.viewer.components.StripContainerSlideShowSlide","wysiwyg.viewer.components.StateBox":["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState"],"wysiwyg.viewer.components.StateStrip":"wysiwyg.viewer.components.StateStripState"},i=r.flatten(r.values(o)),{isSlideShowComponent:function(e){return r.has(o,e)},getSlidesFromChildrenByStructure:function(e){return r.filter(e,function(e){var t=e.componentType;return a(t)})},getShownOnAllSlidesFromChildrenByStructure:function(e){return r.reject(e,function(e){var t=e.componentType;return a(t)})},isSlideComponent:a=function(e){return r.includes(i,e)},getMatchingChildSlideType:function(e){var t=o[e];if(!t)throw new Error("invalid comp type, not a slideshow component");return t}})},function(e,t){e.exports=m},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(3),o=n(65),i=n(20),a=n(1).constants.DATA_TYPES.data,s=i.services.schemasService,{getA11ySchema:function(e,t){var n=r.getDataItem(e,t),i=n?n.type:r.getFirstValidDataType(e,t),u=s.getSchema(a,i),c=o.getPropertyDefinition(u,"a11y",a);if(c){var l=c.refTypes[0],p=s.getSchema(a,l);return p?{properties:p.properties,type:l}:null}return null}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(15),o=n(31);function i(e){var n=e.pointers.components.getMasterPage(r.getViewMode(e));return o.getComponentModesByType(e,n,t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES)}function a(t,n,r){var i=o.overrides.getAllOverrides(t,n);return e.some(i,function(t){return!e(t.modeIds).intersection(r).isEmpty()})}function s(t,n){if(!t.pointers.components.isInMasterPage(n))return null;var r=i(t);if(e.isEmpty(r))return null;for(var o=e.map(r,"modeId"),s=n;!a(t,s,o);)if(!(s=t.pointers.components.getParent(s)))return null;return s}return{getSOSPModes:i,removeSOSPMode:function(e,t){var n=e.pointers.components.getMasterPage(r.getViewMode(e));o.removeComponentMode(e,n,t)},getShowOnSomePagesRoot:s,getComponentPagesGroupId:function(t,n){var a,u=s(t,n),c=u?function(t,n){var a=t.pointers.components.getMasterPage(r.getViewMode(t)),s=e.map(i(t),"modeId"),u=o.overrides.getAllOverrides(t,n),c=e.find(u,function(t){return!e(t.modeIds).intersection(s).isEmpty()});return o.getComponentModeById(t,a,c.modeIds[0])}(t,u):null;return a=c,e.get(a,["settings","pagesGroupId"],"").replace("#","")}}}()},function(e,t,n){var r;e.exports=(r=n(0),{setScrollAndScale:function(e,t,n,o,i,a){var s=e.siteAPI.getSiteAnimationsService(),u=s.sequence(),c=r.isUndefined(a)?"50%":a.toString();return u.add(s.animate("BaseNone","#SITE_ROOT",0,0,{transformOrigin:"".concat(c," 0")}),0).add(s.animate("BaseScale","#SITE_ROOT",i,0,{to:{scale:o},clearProps:1===o?"transform, transform-origin":""}),0).add(s.animate("BaseScroll",window,i,0,{x:t,y:n}),0),u.get()},animateScroll:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.noop,a=e.siteAPI.getSiteAnimationsService(),s=a.sequence();return s.add(a.animate("BaseScroll",window,o,0,{x:t,y:n,callbacks:{onComplete:i}}),0),s.get()},setScroll:function(e,t,n){if(e.siteAPI.isPopupOpened()){var r=window.document.getElementById("POPUPS_ROOT");r.scrollLeft=t,r.scrollTop=n}else window.scrollTo(t,n)},getScroll:function(e){if(e.siteAPI.isPopupOpened()){var t=window.document.getElementById("POPUPS_ROOT");return{x:r.get(t,"scrollLeft",0),y:r.get(t,"scrollTop",0)}}return{x:r.isFinite(window.pageXOffset)?window.pageXOffset:window.scrollX,y:r.isFinite(window.pageYOffset)?window.pageYOffset:window.scrollY}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(21),r=n(29),o=n(9),i=n(180),a=n(122),s=n(2),u=n(10),c=n(427),l=n(12),p=n(1),d=n(19),g=n(20),f=n(16),m=g.services.schemasService,v={COMPONENT_DOES_NOT_EXIST:"component param does not exist",COMPONENT_DOES_NOT_HAVE_TYPE:"component does not have type",INVALID_COMPONENT_STRUCTURE:"invalid component structure",INVALID_CONTAINER_STRUCTURE:"invalid container structure",INVALID_CONTAINER_POINTER:"invalid container pointer",MAXIMUM_CHILDREN_NUMBER_REACHED:"maximum number of child components reached",CANNOT_ADD_COMPONENT_TO_MOBILE_PATH:"cannot add component to mobile path",CANNOT_DELETE_MASTER_PAGE:"cannot delete master page",SITE_MUST_HAVE_AT_LEAST_ONE_PAGE:"site must have at least one page",CANNOT_DELETE_MOBILE_COMPONENT:"cannot delete mobile component",CUSTOM_ID_MUST_BE_STRING:"customId must be a string",COMPONENT_IS_NOT_CONTAINER:"component is not a container",LAYOUT_PARAM_IS_INVALID:"layout param is invalid",LAYOUT_PARAM_IS_NOT_ALLOWED:"layout param is not allowed",LAYOUT_PARAM_MUST_BE_NUMERIC:"layout param must be numeric",LAYOUT_PARAM_MUST_BE_BOOLEAN:"layout param must be boolean",LAYOUT_PARAM_ROTATATION_INVALID_RANGE:"rotationInDegrees must be a valid range (0-360)",LAYOUT_PARAM_CANNOT_BE_NEGATIVE:"layout param cannot be a negative value",CANNOT_DELETE_HEADER_COMPONENT:"cannot delete a header component",CANNOT_DELETE_FOOTER_COMPONENT:"cannot delete a footer component",CANNOT_DELETE_NON_EXISTING_COMPONENT:"cannot delete a non existing component",CANNOT_DELETE_NON_DISPLAYED_COMPONENT:"cannot delete a non displayed component",SKIN_PARAM_MUST_BE_STRING:"skin name param must be a string",CANNOT_SET_BOTH_SKIN_AND_STYLE:"skin cannot be set if style already exists",STYLE_ID_PARAM_MUST_BE_STRING:"style id param must be a string",STYLE_ID_PARAM_DOES_NOT_EXIST:"style id param does not exist and cannot be set",STYLE_ID_PARAM_ALREADY_EXISTS:"style id param already exists and cannot be overridden with custom style",STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT:"style properties param must be an object",COMPONENT_IS_DEPRECATED:"cannot add because component was deprecated",INVALID_COMPONENT_CONNECTION_ROLE:"invalid connection role - cannot be *"},y=["wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.BackToTopButton","wysiwyg.viewer.components.mobile.ExitMobileModeButton","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.QuickActionBarItem","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.MenuContainer","wysiwyg.viewer.components.ExpandableMenu"],E=["x","y","width","height","scale","rotationInDegrees","fixedPosition","docked","aspectRatio"];function I(e,t,n){return!(!e.dal.isExist(n)&&!e.dal.full.isExist(n))&&!!u.public.isContainableByStructure(e,t,n)}function S(e,t){var n=null;if(e&&t){var r=e.pointers.getInnerPointer(t,"styleId");n=e.dal.get(r)}return n}function h(e,n){if(function(e){return"masterPage"===e.id}(n))return T(v.CANNOT_DELETE_MASTER_PAGE),{success:!1,error:v.CANNOT_DELETE_MASTER_PAGE};var o=l.getComponentType(e,n),i=e.dal.get(e.pointers.getInnerPointer(n,"type"))||e.dal.full.get(e.pointers.getInnerPointer(n,"type"));return o?function(e){return"Page"===e}(i)?r.isPopup(e,n.id)?{success:!0}:function(e){return 1===t.getNumberOfPages(e)}(e)?(T(v.SITE_MUST_HAVE_AT_LEAST_ONE_PAGE,{componentPointer:n}),{success:!1,error:v.SITE_MUST_HAVE_AT_LEAST_ONE_PAGE}):{success:!0}:function(e){return!!e&&e===s.COMP_TYPES.HEADER}(o)?(T(v.CANNOT_DELETE_HEADER_COMPONENT,{componentPointer:n,compType:o}),{success:!1,error:v.CANNOT_DELETE_HEADER_COMPONENT}):o===s.COMP_TYPES.FOOTER?(T(v.CANNOT_DELETE_FOOTER_COMPONENT,{componentPointer:n,compType:o}),{success:!1,error:v.CANNOT_DELETE_FOOTER_COMPONENT}):{success:!0}:(T(v.COMPONENT_DOES_NOT_HAVE_TYPE,{componentPointer:n}),{success:!1,error:v.COMPONENT_DOES_NOT_HAVE_TYPE})}function P(t){return function(t){return e.isObject(t)&&t.componentType&&!!m.getDefinition(t.componentType)}(t)&&function(e){return!!e.skin||!!e.style}(t)&&A(t.componentType,t.data)&&function(e){var t=e.componentType,n=e.props;try{return i.validateProperties(t,n),!0}catch(e){return!1}}(t)&&function(e){try{return a.validateMobileHintsBySchema(e.mobileHints),!0}catch(e){return!1}}(t)}function A(t,n){var r=m.getDefinition(t);if(e.isObject(n)&&!n.type)return!1;var o=e.get(n,"type",n||""),i=r.dataTypes||[""];return"RepeatedData"===o?function(t,n){return A(t,n.original)&&e.every(n.overrides,e.partial(A,t))}(t,n):e.includes(i,o)}function T(e,t){d.utils.fedopsLogger.breadcrumb(e,t)}return{validateComponentToSet:function(t,n,r,o,i,a){return e.isNil(o)||(s=o,e.isString(s))?function(t,n){if(!P(n))return!1;return!function(t){return e.some(t,function(e){return!P(e)})}(function(t,n){var r=[];if(n.children&&!e.isEmpty(n.children))return n.children;n.components&&!e.isEmpty(n.components)&&(r=r.concat(n.components));return r.concat(f.getChildComponent(t,n))}(t,n))}(t,r)?a||i&&I(t,r,i)?{success:!0}:(T(v.INVALID_CONTAINER_POINTER,{id:r.id,componentType:r.componentType}),{success:!1,error:v.INVALID_CONTAINER_POINTER}):(T(v.INVALID_COMPONENT_STRUCTURE,{id:r.id,componentType:r.componentType}),{success:!1,error:v.INVALID_COMPONENT_STRUCTURE}):(T(v.CUSTOM_ID_MUST_BE_STRING,{id:r.id,componentType:r.componentType}),{success:!1,error:v.CUSTOM_ID_MUST_BE_STRING});var s},validateComponentToAdd:function(t,n,r,o,i){if(c.isComponentDeprecated(r.componentType))return T(c.getDeprecationMessage(r.componentType),{id:r.id,componentType:r.componentType}),{success:!1,error:c.getDeprecationMessage(r.componentType)};if(c.shouldWarnForDeprecation(r.componentType)){if(t.runtimeConfig.shouldThrowOnDeprecation)return T(c.getDeprecationMessage(r.componentType),{id:r.id,componentType:r.componentType}),{success:!1,error:c.getDeprecationMessage(r.componentType)};p.log.warnDeprecation(c.getDeprecationMessage(r.componentType))}return t.pointers.components.isMobile(n)&&!e.includes(y,r.componentType)?(T(v.CANNOT_ADD_COMPONENT_TO_MOBILE_PATH,{id:r.id,componentType:r.componentType}),{success:!1,error:v.CANNOT_ADD_COMPONENT_TO_MOBILE_PATH}):I(t,r,o)&&function(t,n,r){if(!e.isNumber(r))return!0;var o=t.pointers.components.getChildren(n);if(!e.isFinite(r)||r<0||r>o.length)return!1;return!0}(t,o,i)?function(e,t){return u.public.allowedToContainMoreChildren(e,t)}(t,o)?{success:!0}:(T(v.MAXIMUM_CHILDREN_NUMBER_REACHED,{id:r.id,componentType:r.componentType}),{success:!1,error:v.MAXIMUM_CHILDREN_NUMBER_REACHED}):(T(v.INVALID_CONTAINER_POINTER,{id:r.id,componentType:r.componentType}),{success:!1,error:v.INVALID_CONTAINER_POINTER})},validateComponentTypeToDelete:h,validateComponentToDelete:function(e,t,n){var r=h(e,t);return r.success?function(e,t,n){return n||e.dal.isExist(t)||e.dal.full.isExist(t)?{success:!0}:(T(v.CANNOT_DELETE_NON_EXISTING_COMPONENT,{componentPointer:t}),{success:!1,error:v.CANNOT_DELETE_NON_EXISTING_COMPONENT})}(e,t,n):r},validateComponentExistOnFull:function(e,t){return e.dal.full.isExist(t)?{success:!0}:(T(v.COMPONENT_DOES_NOT_EXIST,{componentPointer:t}),{success:!1,error:v.COMPONENT_DOES_NOT_EXIST})},validateLayoutParam:function(t,n){if(!e.includes(E,t))return T(v.LAYOUT_PARAM_IS_NOT_ALLOWED,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_IS_NOT_ALLOWED};if("fixedPosition"===t&&e.isBoolean(n))return{success:!0};if("docked"===t)return{success:!0};if(!e.isNumber(n))return T(v.LAYOUT_PARAM_MUST_BE_NUMERIC,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_MUST_BE_NUMERIC};var r=e.without(E,"x","y");return e.includes(r,t)&&n<0?(T(v.LAYOUT_PARAM_CANNOT_BE_NEGATIVE,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_CANNOT_BE_NEGATIVE}):"rotationInDegrees"===t&&n>360?(T(v.LAYOUT_PARAM_ROTATATION_INVALID_RANGE,{param:t,value:n}),{success:!1,error:v.LAYOUT_PARAM_ROTATATION_INVALID_RANGE}):{success:!0}},validateSetSkinParams:function(t,n,r){return e.isString(r)?S(t,n)?(T(v.SKIN_PARAM_MUST_BE_STRING,{styleId:S(t,n)}),{success:!1,error:v.CANNOT_SET_BOTH_SKIN_AND_STYLE}):{success:!0}:(T(v.SKIN_PARAM_MUST_BE_STRING,{skinName:r}),{success:!1,error:v.SKIN_PARAM_MUST_BE_STRING})},validateSetStyleIdParams:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.MASTER_PAGE_ID;return e.isString(n)?o.styles.get(t,n,r)?{success:!0}:(T(v.STYLE_ID_PARAM_MUST_BE_STRING,{pageId:r,styleId:n}),{success:!1,error:v.STYLE_ID_PARAM_DOES_NOT_EXIST}):(T(v.STYLE_ID_PARAM_MUST_BE_STRING,{styleId:n}),{success:!1,error:v.STYLE_ID_PARAM_MUST_BE_STRING})},validateExistingComponent:function(e,t){return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.dal.full.isExist(t):e.dal.isExist(t))?{success:!0}:(T(v.COMPONENT_DOES_NOT_EXIST,{componentPointer:t}),{success:!1,error:v.COMPONENT_DOES_NOT_EXIST})},validateComponentCustomStyleParams:function(t,n,r){function o(t){return!e.isNil(t)}return o(n)&&!e.isString(n)?(T(v.SKIN_PARAM_MUST_BE_STRING,{optionalSkinName:n}),{success:!1,error:v.SKIN_PARAM_MUST_BE_STRING}):!o(r)||e.isObject(r)&&!e.isArray(r)?{success:!0}:(T(v.STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT,{optionalStyleProperties:r}),{success:!1,error:v.STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT})},validateComponentConnection:function(e){return"*"===e.role?(T(v.INVALID_COMPONENT_CONNECTION_ROLE,{role:e.role}),{success:!1,error:v.INVALID_COMPONENT_CONNECTION_ROLE}):{success:!0}},ALLOWED_LAYOUT_PARAMS:E,ERRORS:v}}()},function(e,t,n){e.exports=function(){var e=n(0),t=(n(27),n(3)),r=n(10),o=n(20),i=n(6),a=n(2),s="data";var u=[{error:"Cannot unhide desktop only component",isValid:function(t,n,o,i){return!1!==e.get(o,"hidden")||!r.public.getMobileConversionConfigByName(t,t.dal.get(n),"desktopOnly",i)}},{error:"Cannot hide not hiddenable component",isValid:function(t,n,o){return!e.get(o,"hidden",!1)||r.public.isHiddenable(t,n)}}],c=[{error:"Unhidden container with children number less than allowed",isValid:function(n,o,i){var a=r.public.getMinimalChildrenNumber(n,o);if(0===a||e.get(i,"hidden",!1))return!0;var s=function(n,r){var o=n.pointers.components.getChildren(r);return e.reject(o,function(r){return e.get(t.getMobileHintsItem(n,r),"hidden",!1)})}(n,o);return e.size(s)>=a}},{error:"Unhidden structuralItem component with hidden parent",isValid:function(n,o,i,a){if(!r.public.getMobileConversionConfigByName(n,n.dal.get(o),"structuralItem",a)||e.get(i,"hidden",!1))return!0;var s=n.pointers.components.getParent(o);return!e.get(t.getMobileHintsItem(n,s),"hidden",!1)}}];function l(n,r,o){var i=o||e.get(n.pointers.full.components.getPageOfComponent(r)||n.pointers.components.getPageOfComponent(r),"id",""),a=t.getMobileHintsItem(n,r);!function(t,n,r,o){var i=e.union(u,c);g(t,n,r,o,i)}(n,r,a,i),p(a)}function p(e){e&&o.services.dataValidators.validateDataBySchema(e,s)}function d(e,t,n,r){g(e,t,n,r,u)}function g(t,n,r,o,i){e.forEach(i,function(e){if(!e.isValid(t,n,r,o))throw new Error(e.error)})}return{validateComponentMobileHints:l,validateMobileHintsBySchema:p,validateMobileHintsOnPages:function(t,n){var r={};if(e.forEach(n,function(n){var o=function(t,n){var r=[],o=t.pointers.components.getPage(n,a.VIEW_MODES.DESKTOP);if(!o)return[];var i=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(o);return e.forEach(i,function(e){try{l(t,e,n)}catch(n){r.push({componentId:e.id,componentType:t.dal.get(t.pointers.getInnerPointer(e,"componentType")),error:n.message||n.toString()})}}),r}(t,n);e.isEmpty(o)||e.set(r,n,o)}),!e.isEmpty(r))throw{message:"invalid mobileHints are found",error:r}},initialize:function(){i.unregisterHooks([i.HOOKS.MOBILE_HINTS.UPDATE_BEFORE]),i.registerHook(i.HOOKS.MOBILE_HINTS.UPDATE_BEFORE,d)},testAPI:{beforeUpdateValidators:u,finalStructureValidators:c}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(10),o=n(54),i=n(177),a=n(436),s=n(26),u=n(45),c=n(90),l="wysiwyg.viewer.components.Group",p={VERTICAL:"vertical",HORIZONTAL:"horizontal"},d={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function g(e,t){var n=e.pointers.getInnerPointer(t,"layout");return e.dal.get(n)}function f(t,n){var r=g(t,n),i=o.getPositionAndSize(t,n,r);return o.getBoundingLayout(t,e.merge(i,e.pick(r,["rotationInDegrees"])))}function m(n,r,o,i){var a={dockedToEdge:[],nonDockedToEdge:[]},s=r===p.VERTICAL?t.layoutUtils.isVerticallyStretched:t.layoutUtils.isHorizontallyStretched;return e.forEach(i,function(e){var r=g(n,e),i=f(n,e);s(r)||(t.layoutUtils.isDockedToDirection(r,o)?a.dockedToEdge.push(i):a.nonDockedToEdge.push(i))}),a}function v(t,n,r,o){var i=m(t,p.VERTICAL,d.TOP,o),a=e.map(i.nonDockedToEdge,function(e){return n.height-e.y}),s=e.map(i.dockedToEdge,function(e){return e.y+e.height}),u=e.max(a.concat(s));if(u>n.height)n.y&&(r.y=n.y),r.height=n.height;else if(r.height<u){var c=u-r.height;r.y&&(r.y-=c),r.height+=c}}function y(t,n,r,o){var i=m(t,p.VERTICAL,d.BOTTOM,o),a=e.map(i.nonDockedToEdge,function(e){return e.y+e.height}),s=e.map(i.dockedToEdge,function(e){return n.height-e.y}),u=e.max(a.concat(s));if(u>n.height)r.height=n.height;else if(r.height<u){var c=u-r.height;r.height+=c}}var E=function(e,t,n){return e-2*(t-n)};function I(e,t){return r.getComponentType(e,t)===l}var S=function(e,t){return{minLeft:e.x-t.x,minTop:e.y-t.y,maxRight:e.x+e.width-t.x,maxBottom:e.y+e.height-t.y}};function h(e,t){var n=c.getPrimaryConnection(e,t);return n&&"platform.components.AppWidget"===s.getType(e,n.controllerRef)?n.controllerRef:null}var P=function(e,t){for(var n=e.pointers.full.components.getParent(t);n&&!b(e,n);)n=e.pointers.full.components.getParent(n);return b(e,n)?n:null};function A(e,t,n){"width"===e?t.height=t.width/n:"height"===e&&(t.width=t.height*n)}function T(e,t,n,r,o){var i=n===p.HORIZONTAL?"x":"y",a=n===p.HORIZONTAL?"width":"height",s=e[a];r=Math.min(t[i],r);var u=e[a]!==t[a];if(e[i]<r){if(u){var c=t[a]-e[a]==e[i]-t[i],l=r-e[i];e[a]=c?e[a]-l:e[a]}e[i]=r}e[a]!==s&&o&&A(a,e,o)}function O(e,t,n,r,o,i){var a=n===p.HORIZONTAL?"x":"y",s=n===p.HORIZONTAL?"width":"height",u=e[s],c=r;o=o+(r=Math.max(t[a]+t[s],r))-c;var l=e[a]!==t[a],d=e[s]!==t[s];e[a]+e[s]>r&&(l&&!d?e[a]=r-e[s]:!l&&d?e[s]=r-e[a]:l&&d&&(e[s]=e[s]>o?o:e[s],e[a]=r-e[s])),e[s]!==u&&i&&A(s,e,i)}var C=function(e,t,n,r){return T(e,t,p.HORIZONTAL,n.minLeft,r)},_=function(e,t,n,r){return T(e,t,p.VERTICAL,n.minTop,r)},D=function(e,t,n,r){return O(e,t,p.HORIZONTAL,n.maxRight,n.maxRight-n.minLeft,r)},w=function(e,t,n,r){return O(e,t,p.VERTICAL,n.maxBottom,n.maxBottom-n.minTop,r)};var b=function(e,t){return"platform.components.AppWidget"===s.getType(e,t)},M=function(e,t){if("wysiwyg.viewer.components.StateBox"===s.getType(e,t)){var n=e.pointers.components.getParent(t);return b(e,n)}return!1},R=function(t,n){var r=s.getPage(t,n),o=u.isWidgetPage(t,r.id),i=t.pointers.components.getChildren(r)[0];return o&&!e.isEqual(i,n)?i:null};function N(t,n,o,a,s){var u=t.pointers.components.getParent(n);if(!b(t,n)&&!b(t,u)&&u&&!M(t,u)){var c=function(t,n){var o=r.public.isContainer(t,n),i=h(t,n);if(!o||i&&o)return i;if(!P(t,n))return null;var a=t.pointers.full.components.getChildrenRecursively(n);return e(a).map(function(e){return h(t,e)}).find(function(t){return!e.isNil(t)})}(t,n)||R(t,n);if(c){var l=i.getCompLayoutRelativeToScreen(t,c),p=i.getCompLayoutRelativeToScreen(t,u);!function(e,t,n,r){C(e,t,n,r),_(e,t,n,r),D(e,t,n,r),w(e,t,n,r)}(o,a,S(l,p),s?r.public.getLayoutLimits(t,n).aspectRatio:null)}}}return{addCompMinLayout:function t(n,i,a){var s=r.public.isIgnoreChildrenOnProportionalResize(n,i.component),u=i.children;e.isArray(s)&&(u=o.getChildrenToPreserveProportionsByType(n,r,u,s)),!0===s||e.isEmpty(u)||e.forEach(u,function(e){t(n,e)});var c=i.component,l=function(t,n){var i=r.public.getLayoutLimits(t,n),a=o.getComponentLayout(t,n),s=r.public.isHorizontallyResizable(t,n),u=r.public.isVerticallyResizable(t,n),c=r.public.isProportionallyResizable(t,n),l=e.pick(a,["width","height"]);return(c||s||I(t,n))&&(l.width=i.minWidth),(c||u||I(t,n))&&(l.height=i.minHeight),l}(n,c);s||function(t,n,r){var i=o.getComponentLayout(t,n.component);e.forEach(n.children,function(n){var a=o.getBoundingLayout(t,n.minLayout),s=o.getComponentLayout(t,n.component);if(function(e,t){return e.x<0||e.x+e.width>t.width||e.y<0||e.y+e.height>t.height}(s=o.getBoundingLayout(t,s),i))return r.width=i.width,r.height=i.height,!1;var u=a.width/(1-n.proportions.x),c=a.height/(1-n.proportions.y);r.width=e.max([u,r.width]),r.height=e.max([c,r.height])})}(n,i,l),!!a&&(l=function(e,t,n,r){var i=o.getComponentLayout(e,n);t=function(e,t){var n=function(e){return e.width/e.height}(e),r=t.width/n,o=t.height*n;return r>t.height?t.height=r:t.width=o,t}(i,t);var a=i.height-t.height,s=i.width-t.width;return-1===r.y&&(t.y=i.y+a),-1===r.x&&(t.x=i.x+s),0!==r.x&&0===r.y&&(t.y=i.y+a/2),0!==r.y&&0===r.x&&(t.x=i.x+s/2),t}(n,l,c,a)),l=e.pick(l,["x","y","width","height","rotationInDegrees"]),i.minLayout=l},constrainByChildrenLayout:function(t,n,r,o,i){var a=t.pointers.components.getChildren(n);if(!e.isEmpty(a)){var s=f(t,n),u=e.assign({},s,r);if(!(u.width>=s.width&&u.height>=s.height)){var c=u.width<s.width,l=c&&(u.docked&&r.docked.right||u.x>s.x),g=l&&s.width-u.width>u.x-s.x;if(c&&!o)if(g)!function(t,n,r,o,i){var a=m(t,p.HORIZONTAL,null,o),s=e.min(e.map(a.nonDockedToEdge,function(e){return e.x+n.x})),u=e.max(e.map(a.nonDockedToEdge,function(e){return n.x+e.x+e.width}));if(s<n.x||u>n.x+n.width)return void e.assign(r,e.pick(n,["x","width"]));var c=e.max([u,r.x+r.width]),l=e.min([s,r.x]);if(i){var d=n.x+n.width;s-n.x<=d-u?(r.x=l,r.width=E(n.width,r.x,n.x)):(r.width=E(n.width,d,c),r.x=c-r.width)}else r.x=l,r.width=c-r.x}(t,s,r,a,e.has(r,["docked","hCenter"]));else l?function(t,n,r,o){var i=m(t,p.HORIZONTAL,d.LEFT,o),a=e.map(i.nonDockedToEdge,function(e){return n.width-e.x}),s=e.map(i.dockedToEdge,function(e){return e.x+e.width}),u=e.max(a.concat(s));if(u>n.width)n.x&&(r.x=n.x),r.width=n.width;else if(r.width<u){var c=u-r.width;r.x&&(r.x-=c),r.width+=c}}(t,s,r,a):function(t,n,r,o){var i=m(t,p.HORIZONTAL,d.RIGHT,o),a=e.map(i.nonDockedToEdge,function(e){return e.x+e.width}),s=e.map(i.dockedToEdge,function(e){return n.width-e.x}),u=e.max(a.concat(s));if(u>n.width)r.width=n.width;else if(r.width<u){var c=u-r.width;r.width+=c}}(t,s,r,a);var I=u.height<s.height,S=I&&(u.docked&&r.docked.bottom||u.y>s.y),h=t.dal.get(t.pointers.general.getRenderFlag("enforceShouldKeepChildrenInPlace")),P=S&&h&&s.height-u.height>u.y-s.y;I&&!i&&(P?(v(t,s,r,a),y(t,s,r,a)):S&&h?v(t,s,r,a):y(t,s,r,a))}}},constrainByDimensionsLimits:function(t,n,i){var a=g(t,n),s=r.public.getLayoutLimits(t,n,i);if(!e.isUndefined(i.width)&&i.width!==a.width){var u=o.ensureWithinLimits(i.width,s.minWidth,s.maxWidth);e.isUndefined(i.x)||i.x===a.x||(i.x-=u-i.width),i.width=u}if(!e.isUndefined(i.height)&&i.height!==a.height){var c=o.ensureWithinLimits(i.height,s.minHeight,s.maxHeight);e.isUndefined(i.y)||i.y===a.y||(i.y-=c-i.height),i.height=c}},constrainByDockingLimits:function(n){t.dockUtils.isHorizontalDockToScreen(n)&&e.forEach(["left","right"],function(t){var r=n.docked[t];e.has(r,"px")&&(r.px=Math.max(r.px,0)),r.vw=Math.max(r.vw,0)})},constrainProportionalResize:function(t,n,i,a,s){if(a){if(s){var u=r.public.getLayoutLimits(t,n.component),c=o.getComponentLayout(t,n.component);i.width>u.maxWidth?(i.width=u.maxWidth,i.height=i.width/(c.width/c.height)):i.height>u.maxHeight&&(i.height=u.maxHeight,i.width=i.height*(c.width/c.height))}if(function(e,t){return e.minLayout.width>t.width||e.minLayout.height>t.height}(n,i)&&e.assign(i,n.minLayout),r.public.resizeOnlyProportionally(t,n.component))!function(e,t){if(e.height)e.width=e.height*t;else{if(!e.width)throw new Error("maintainCompAspectRatio must get at least height or width values in the layout parameter");e.height=e.width/t}}(i,r.public.getLayoutLimits(t,n.component).aspectRatio)}else i.width=e.max([n.minLayout.width,i.width]),i.height=e.max([n.minLayout.height,i.height])},constrainBySpecificType:function(t,n,r){var o=s.getType(t,n),i=a[o];if(!i)return r;var u=i(t,n,r);e.assign(r,u)},constrainsByContainer:function(e,t,n,r,o){N(e,t,n,r,o)}}}()},function(e,t,n){e.exports=n(445).createRegistrar()},function(e,t,n){e.exports=function(){var e=n(0),t=n(10),r=n(55),o=n(451),i=n(16),a=o.initialize,s=o.applyPresetsToConversionData;function u(t,n,r){if(!r.mobileHintsQuery)return!1;var o=t.pointers.data.getMobileHintsItem(r.mobileHintsQuery,n);return!(!o||!t.dal.full.isExist(o))&&e.get(t.dal.full.get(o),"hidden",!1)}return{initialize:a,createMobilePreset:o.createDuplicateMobilePreset,applyPresetsToConversionData:s,shouldCreateMobilePreset:function(n,o){if(!i.isMobileSupported(n))return!1;var a=e.get(n.pointers.full.components.getPageOfComponent(o),"id"),s=n.siteAPI.getDeepStructure?n.siteAPI.getDeepStructure(o):n.dal.full.get(o);if(!s||u(n,a,s))return!1;if(!1===t.public.getMobileConversionConfigByName(n,s,"createMobilePresets",a))return!1;var c=n.pointers.components.getMobilePointer(o),l=r.getCommittedMobileComponent(n,a,c);return!!l&&!function t(n,r,o){var i=e.reject(n.components||[],function(e){return o(e)})||[];var a=e.xor(e.map(i,"id"),e.map(r.components||[],"id"));if(!e.isEmpty(a))return!0;return e.some(i,function(n){var i=e.find(r.components,{id:n.id});return!i||t(n,i,o)})}(s,l,u.bind(null,n,a))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(27),r=["MENU_AS_CONTAINER"],o=["wysiwyg.viewer.components.MenuContainer"];function i(e,n){var r=t.conversionUtils.getComponentByIdFromStructure("SITE_HEADER",e);if(r)return t.conversionUtils.extractComponentsFromStructureByType(r,n)}function a(n,r){var o=function(n,r){var o=e.cloneDeep(r);return o.components=[],t.conversionUtils.addComponentsTo(n,[o]),o}(n,e.find(t.conversionUtils.getChildren(r),{id:"MENU_AS_CONTAINER"})),a=i(n,["wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.LanguageSelector"]);e.isEmpty(a)||t.conversionUtils.addComponentsTo(o,a)}function s(e,n){t.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",n)&&(!function(e){var n=i(e,["wysiwyg.viewer.components.MenuContainer"]);t.conversionUtils.addComponentsTo(e,n)}(n),a(e,n))}function u(e,n){var r=t.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",e);r&&(t.conversionUtils.removeChildrenFrom(e,[r]),function(e){var n=t.conversionUtils.extractComponentsFromStructureByType(e,["wysiwyg.viewer.components.MenuContainer"]),r=t.conversionUtils.getComponentByIdFromStructure("SITE_HEADER",e);t.conversionUtils.addComponentsTo(r,n)}(n))}return{isMobileOnlyComponentToBeMockedInDesktop:function(t){return e.includes(o,e.get(t,"componentType"))},isMobileOnlyComponent:function(n,o){return t.mobileOnlyComponents.isMobileOnlyComponentId(o)||function(t){return e.includes(r,t)}(o)},handleComponentsBeforeMobileAlgo:function(e,t){s(e,t)},handleComponentsAfterMobileAlgo:function(e,t){u(e,t)}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),i={type:"Container",componentType:"wysiwyg.viewer.components.QuickActionBar",components:[],layout:{fixedPosition:!0},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-controlButtonBG":"1","alpha-controlButtonFG":"1","alpha-controlButtonBorderColor":"1","alpha-actionsBorderColor":"1","boxShadowToggleOn-actionsSHD":"false","boxShadowToggleOn-controlButtonSHD":"false",controlButtonBG:"#008afc",controlButtonFG:"#ffffff",controlButtonBorderSize:"0",controlButtonBorderColor:"#ffffff",actionsBorderSize:"0",actionsBorderColor:"#ffffff",colorScheme:"brand inv",controlButtonSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)",actionsSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{controlButtonBG:"value",controlButtonFG:"value",controlButtonBorderSize:"value",controlButtonBorderColor:"value",actionsBorderSize:"value",actionsBorderColor:"value",colorScheme:"value",controlButtonSHD:"value",actionsSHD:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBar",styleType:"custom"}},{quickActionIconsData:o={address:{hash:"51ecb8e1148b45ba827df5c5134801af",color:"#00B594"},album:{hash:"d709a69b4a714cebb65fc287d0630e75",color:"#733CA6"},chat:{hash:"55ef598f51c14f36ba4f0690cf28626f",color:"#2D41A9"},contactform:{hash:"f0ca657289864c5b9edef58b618e6e5f",color:"#4D599B"},email:{hash:"e4dde6644597420b93af3ca1ccfa9683",color:"#BE1867"},events:{hash:"4285df5e7be04a75814382611597fba0",color:"#EC125A"},facebook:{hash:"a855d9a5d94e444a9ef9f8f8f9192a5a",color:"#3C5A99"},flickr:{hash:"e27433a598ef44c1ba46e7f00ac0a7a1",color:"#000000"},google_plus:{hash:"0a6ab2eef3f14015ada0a0ab109afbcc",color:"#3B3B3B"},instegram:{hash:"b6218b8d6b2549ad8a560dc75771a395",color:"#000000"},linkedin:{hash:"149a816584cd44b997f3023a42716113",color:"#1670BB"},phone:{hash:"4387e0ae8fd6412e9a988f77faa4f379",color:"#63C956"},whatsapp:{hash:"a3c153_f546f836e5ca40dcb6a1bc44a1f3bdd7",color:"#21D366"},pinterest:{hash:"01c31f7f2d44432498ca45e05a3cf675",color:"#E33F44"},progallery:{hash:"fd308926fe3e4a769b1f7ffbc228b502",color:"#733CA6"},sale_vert:{hash:"f699000a2fef45348e20e216dae95f90",color:"#FFA300"},subscribe:{hash:"27c43b9381384a21ae01d8efcc0fbc12",color:"#3899EC"},twitter:{hash:"96ecb8929029472c90c7e72980d0c77c",color:"#68C1ED"},vk:{hash:"931c3651bada4183b7aa2c9b80016dc1",color:"#4E7DA0"},vimeo:{hash:"14a099fdcd514554a289f702afb73a6b",color:"#1AB7EA"},yelp:{hash:"2e61070007304317aadc1b49816ea07c",color:"#CD0F23"},line:{hash:"a3c153_16c2d22de67d4d2aacbd96274922a9f9",color:"#00B900"},youtube:{hash:"f58d5df33a944ddba14878977dd6dab0",color:"#E14D3B"},dribbble:{hash:"c9d243a60f654aba9438199a22d986b1",color:"#F1538F"},signup_cont:{hash:"84d93d95e9ec4a779e5463f51cf311b5",color:"#52D3D4"}},actionTypesMap:["phone","email","contactform","chat","address","facebook","whatsapp","twitter","instegram","pinterest","linkedin","youtube","google_plus","yelp","line","vimeo","vk","flickr","subscribe","album","progallery","custom"],socialLinkTexts:{facebook:"Facebook",twitter:"Twitter",pinterest:"Pinterest",google_plus:"Google+",tumblr:"Tumblr",linkedin:"Linkedin",youtube:"Youtube",vimeo:"Vimeo",flickr:"Flickr",instegram:"instagram"},defaultSerializedMAB:r.defaultsDeep({},{skin:"wysiwyg.viewer.skins.quickActionBar.anchoredSkin",style:{skin:"wysiwyg.viewer.skins.quickActionBar.anchoredSkin",style:r.set({},"properties",{colorScheme:"brand",actionsSHD:"0px 0px 20px 0px rgba(0,0,0,0.1)","boxShadowToggleOn-actionsSHD":"true"})}},i),defaultSerializedFAB:r.defaultsDeep({},{skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:{skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:r.set({},"properties",{colorScheme:"brand inv",controlButtonBG:"#008afc","alpha-controlButtonBG":"1",controlButtonSHD:"0px 2px 8px 0px rgba(0,0,0,0.3)",actionsSHD:"0px 2px 8px 0px rgba(0,0,0,0.3)","boxShadowToggleOn-actionsSHD":"true","boxShadowToggleOn-controlButtonSHD":"true"})}},i),defaultSerializedQuickActionBarItem:{type:"Component",componentType:"wysiwyg.viewer.components.QuickActionBarItem",layout:{},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{color:"#000000"},propertiesSource:{color:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBarItem",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.quickActionBarItem"}},defaultQuickActionItems:[{itemType:"phone",link:{type:"PhoneLink",phoneNumber:""},text:"Phone",icon:o.phone.hash},{itemType:"email",link:{type:"EmailLink",recipient:"",subject:""},text:"Email",icon:o.email.hash},{itemType:"facebook",link:{type:"ExternalLink",url:"",target:"_blank"},text:"Facebook",icon:o.facebook.hash}],QUICK_ACTION_ITEM_MAX_LENGTH:40})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(13),i=n(20),{setSiteMetaData:function(e,t){var n=r.omit(t,["preloader","contactInfo","quickActions"])||{},a=r.clone(r.get(t,"preloader"))||{},s=r.clone(r.get(t,"contactInfo"))||{},u=r.clone(r.get(t,"quickActions"))||{},c=i.services.dataValidators;c.validateItem(n,"data",{schemaName:"MobileMetaData"}),c.validateItem(a,"data",{schemaName:"Preloader"}),c.validateItem(s,"data",{schemaName:"ContactInfo"}),c.validateItem(u,"data",{schemaName:"QuickActions"}),t=r.assign(n,{preloader:a},{contactInfo:s},{quickActions:u}),o.setProperty(e,o.PROPERTY_NAMES.SITE_META_DATA,t)},getSiteMetaData:function(e){return o.getProperty(e,o.PROPERTY_NAMES.SITE_META_DATA)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(77),r=n(4),o=(n(7),n(50));function i(e,n){if(t.isProvisioned(e)){var i=r.isPageComponent(e,n)?n:r.getPage(e,n),a=e.pointers.components.getViewMode(i);o.generateNicknamesForPages(e,[i.id],a)}}return{generateNicknamesForPages:function(t,n){e.forEach(n,e.partial(i,t))},generateNicknamesForComponents:function(e,t,n){var r=e.pointers.components.getViewMode(n);o.generateNicknamesForComponents(e,t,n,r)},generateNicknamesForPageOfComponent:i,updateConnectionsIfNeeded:function(e,n,r,i){t.isProvisioned(e)&&"Page"!==i.type&&i.connections&&o.updateConnectionsIfNeeded(e,n,r,i)},deleteNicknameFromComponentIfInvalid:function(e,n,i){t.isProvisioned(e)&&"Page"!==r.getType(e,n)&&o.removeNicknameFromComponentIfInvalid(e,n,i)},updateNicknameContextByNewContainer:function(e,n,r,i){t.isProvisioned(e)&&"Page"!==r.type&&o.updateNicknameContextByNewContainer(e,n,r,i)},setOriginalContextToSerializedComponent:function(e,t,n){o.setOriginalContextToSerializedComponent(e,t,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(119),o=n(68),i=n(66),a=n(3),s=t.constants.DATA_TYPES,u="PAGES_GROUP_COLLECTION",c="PagesGroupCollection",l="PagesGroupData";function p(t){var n=t.pointers.data.getDataItem(u,"masterPage");if(!n)return[];var r=t.pointers.getInnerPointer(n,"groups"),o=t.dal.full.get(r);return e.map(o,function(e,t){return e.pointers.data.getDataItem(t.replace("#",""),"masterPage")}.bind(null,t))}function d(t){return e.map(p(t),y.bind(null,t))}function g(t,n,r){var o=d(t);if(function(t,n){return e.some(t,function(t){return e.some(n,function(n){return e.includes(t.pages,n)})})}(e.reject(o,{id:n}),r))throw new Error("pagesGroup: page already exists in another pagesGroup")}function f(t,n){t.dal.isExist(n)&&(!function(e,t){var n=o.getSospModeByPagesGroup(e,t);n&&r.removeSOSPMode(e,n.modeId)}(t,n),function(t,n){var r=t.pointers.data.getDataItemFromMaster(u),o=t.pointers.getInnerPointer(r,"groups"),i=t.dal.get(o),a=e.pull(i,"#".concat(n.id));t.dal.set(o,a)}(t,n),a.removeDataItemRecursively(t,n))}function m(t,n){var r=e.find(d(t),n);return r?t.pointers.data.getDataItem(r.id,"masterPage"):null}function v(e,t){return m(e,{id:t})}function y(e,t){return t?e.dal.get(t):null}return{createPagesGroup:function(t,n,r){var o=function(t,n){var r=a.createDataItemByType(t,l);return e.defaults(n,r)}(t,r);!function(t,n,r){var o=d(t);if(e.isEmpty(n.groupName))throw new Error("pagesGroup: groupName is required");if(e.some(o,["groupName",n.groupName]))throw new Error("pagesGroup: groupName must be unique");if(e.has(n,"appId")&&e.some(o,["appId",n.appId]))throw new Error("pagesGroup: appId must be unique");g(t,r,n.pages)}(t,o,n),a.addSerializedDataItemToPage(t,"masterPage",o,n),function(e){return Boolean(a.getDataItemById(e,u))}(t)||function(e){var t=a.createDataItemByType(e,c);a.addSerializedDataItemToPage(e,"masterPage",t,u)}(t),function(e,t){var n=e.pointers.data.getDataItemFromMaster(u),r=e.pointers.getInnerPointer(n,"groups");e.dal.push(r,"#".concat(t))}(t,n)},removePagesGroup:f,getNewPagesGroupId:function(){return i.generateNewId(s.data)},getAll:p,getPagesGroupById:v,getPagesGroupByGroupName:function(e,t){return m(e,{groupName:t})},getPagesGroupByAppId:function(e,t){return m(e,{appId:t})},getPagesGroupByPageId:function(t,n){var r="#".concat(n);return m(t,function(t){return e.includes(t.pages,r)})},getComponentPagesGroup:function(e,t){var n=r.getComponentPagesGroupId(e,t);return n?v(e,n):null},serializePagesGroup:y,addPageToPagesGroup:function(t,n,r){var o=t.pointers.getInnerPointer(n,"pages"),i=t.dal.get(o),a="#".concat(r);i&&!e.includes(i,a)&&(g(t,n.id,[a]),t.dal.push(o,a),t.siteAPI.updateActiveSOSPModes())},removePageFromPagesGroup:function(t,n,r){var o=t.pointers.getInnerPointer(n,"pages"),i=t.dal.get(o),a="#".concat(r);if(e.includes(i,a)){var s=e.without(i,a);e.isEmpty(s)?f(t,n):t.dal.set(o,s),t.siteAPI.updateActiveSOSPModes()}}}}()},function(e,t,n){e.exports=function(){var e=n(186),t=n(0),r=n(27),o=n(41),i=n(55),a=n(466),s=n(467),u=n(97),c=n(132),l=n(471),p=n(2),d=n(6),g=n(1),f=n(96),m=n(10),v=n(4),y=n(3),E=n(126),I=function(e,t,n){return e.pointers.full.components.getComponent(t,e.pointers.components.getPage(n,p.VIEW_MODES.DESKTOP))},S=function(e,t,n){return e.pointers.components.getComponent(t,e.pointers.components.getPage(n,p.VIEW_MODES.MOBILE))},h=function(e,n,r,o){return t.get(m.public.getMobileConversionConfig(e,e.dal.full.get(n),r),o)},P=E.isMobileOnlyComponent;function A(t,n){var r=t.pointers.components.getPage(n,p.VIEW_MODES.MOBILE);e.updatePageProperties(t,r,{minHeight:null})}function T(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));d.executeHook(d.HOOKS.MOBILE_CONVERSION.BEFORE,n,[e,t])}function O(e){!function(e){var n=i.getChangedPagesPointers(e),r=t.map(e.siteAPI.getAllRenderedRootIds(),function(t){return e.pointers.page.getPagePointer(t)});t.forEach(t.uniqBy(n.concat(r),"id"),function(t){return T(e,t)})}(e),o.runPartialConversionAllPages(e)}function C(e,t){return e.dal.get(e.pointers.getInnerPointer(t,"componentType"))===p.MOBILE_ONLY_COMPONENT_TYPES.BACK_TO_TOP_BUTTON_LEGACY}function _(e,t,n){var r=e.pointers.components.getMasterPage(p.VIEW_MODES.MOBILE),o=v.getComponentToAddRef(e,r,null,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON),i=l.getBackToTopButtonDefinition(t,n);v.add(e,o,r,i)}function D(e,n){return t.reduce(n,function(n,r,o){return t.set(n,o,function(e,n,r){var o=t.flatMap(n,function(n){if(P(e,n))return[];var o=e.pointers.components.getPage(r,p.VIEW_MODES.DESKTOP),i=e.pointers.full.components.getComponent(n,o);return h(e,i,r,"filterChildrenWhenHidden")?t.map(e.pointers.full.components.getChildrenRecursively(i),"id"):[]});return t.difference(n,o)}(e,r,o))},{})}function w(e,n){var r=e.pointers.components.getPage(n,p.VIEW_MODES.DESKTOP);if(!r)return null;var o=e.pointers.full.components.getChildrenRecursively(r),i=t(o).map(function(t){return{id:t.id,mobileHints:y.getMobileHintsItem(e,t)}}).filter(function(e){var t=e.mobileHints;return t&&t.hidden}).map(function(e){return t.get(e.mobileHints,"displayedCompId",e.id)}).value();return n!==p.MASTER_PAGE_ID?i:(function(e,t){!b(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!b(e,p.MOBILE_ONLY_COMPONENTS.TINY_MENU)&&t.push(p.MOBILE_ONLY_COMPONENTS.TINY_MENU),b(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!b(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE)&&t.push(p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE),b(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!b(e,p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU)&&t.push(p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU)}(e,i),t.compact(i))}function b(e,t){var n=S(e,t,p.MASTER_PAGE_ID);return n&&e.dal.isExist(n)}function M(e,n){var r=n?[n]:t.keys(e.dal.get(e.pointers.page.getAllPagesPointer())),o=t.reduce(r,function(n,r){return t.set(n,r,w(e,r))},{});return n?o[n]:o}return{initialize:function(e){var n,r;n=d.HOOKS.SWITCH_VIEW_MODE.MOBILE,r=t.bind(O,null,e),d.unregisterHooks([n]),d.registerHook(n,r),f.initialize(e)},reLayoutPage:function(e,t){t=t||e.siteAPI.getCurrentUrlPageId(),T(e,e.pointers.page.getPagePointer(t)),A(e,t);var n=i.getPage(e,t);o.runMobileConversionOnPage(e,n),d.executeHook(d.HOOKS.RELAYOUT_MOBILE_PAGE.AFTER,null,[e,t])},enableBackToTopButton:function(e,t){if("boolean"!=typeof t)throw new Error("invalid parameter type");var n=p.MASTER_PAGE_ID,r=S(e,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON,n),i=r&&e.dal.isExist(r);t&&!i&&o.addMobileOnlyComponent(e,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON),!t&&i&&s.hideMobileComponent(e,r,n,{updateLayout:!1})},toggleBackToTopButton:function(e,t,n){var r=S(e,p.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON,p.MASTER_PAGE_ID),o=e.dal.isExist(r);o&&t&&C(e,r)?(v.deleteComponent(e,r),_(e,!0,n)):!o&&t?_(e,!1,n):o&&!t&&v.deleteComponent(e,r)},isLegacyBackToTopButton:C,setComponentDisplayMode:a.setComponentDisplayMode,getTinyMenuDefaultPosition:r.conversionUtils.getTinyMenuDefaultPosition,hiddenComponents:{get:M,getFiltered:function(e,n){var r=M(e,n),o=D(e,n?t.set({},n,r):r);return n?o[n]:o},hide:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{updateLayout:!0};if(n=e.pointers.components.getMobilePointer(n),m.shouldBeRemovedByParent(e,n)&&(n=e.pointers.components.getParent(n)),e.dal.isExist(n)){var o=e.pointers.components.getPageOfComponent(n).id;A(e,o);var i=I(e,n.id,o),a={hidden:!0};g.displayedOnlyStructureUtil.isDisplayedOnlyComponent(n.id)&&t.assign(a,{displayedCompId:n.id}),e.dal.full.isExist(i)&&f.updateProperty(e,a,i,{updateChildren:!0,childrenSourceView:p.VIEW_MODES.MOBILE},o),s.hideMobileComponent(e,n,o,r)}},show:function(e,t,n,a){if(!n||!a)throw new Error("function must receive component id and page id");if(P(e,n))!function(e,t){switch(t){case p.MOBILE_ONLY_COMPONENTS.TINY_MENU:o.addMobileOnlyComponent(e,p.MOBILE_ONLY_COMPONENTS.TINY_MENU,{commitConversionResults:!1});break;case p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE:c.toggle.add(e);break;case p.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU:c.expandableMenu.add(e)}}(e,n);else{var s=I(e,n,a);f.updateProperty(e,{hidden:!1},s,{updateChildren:!0,childrenSourceView:p.VIEW_MODES.DESKTOP});var l=i.getPage(e,a),d=r.conversionUtils.extractMobilePage(l),g=u.getConversionSettings({conversionType:"MERGE_UNHIDE"});o.runMobileMergeOnPage(e,l,d,g)}},set:function(e,n,o){var i=e.dal.full.get(e.pointers.page.getPagePointer(n)).structure,a=t(g.dataUtils.getAllCompsInStructure(i)).reject(r.conversionUtils.isPageComponent).map("id").value();t.forEach(a,function(r){var i=t.includes(o,r),a=I(e,r,n);f.updateProperty(e,{hidden:i},a)})}},isMobileOnlyComponent:P,isMobileOnlyComponentExistOnStructure:b,mobileOnlyComps:p.MOBILE_ONLY_COMPONENTS,implicitFontSize:function(e,t){return g.mobileUtils.convertFontSizeToMobile(t,1)},getMobileComponentToShow:S}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A;e.exports=(r=n(0),o=n(27),i=n(4),a=n(2),s=n(36),u=n(468),c=n(469),l=n(470),p=n(96),d=n(41),g=n(95),f=n(55),m=n(97),S=function(e,t){if(!y(e))throw new Error("cannot add menu container toggle without menu instance");if(!E(e)){var n=e.pointers.components.getHeader(a.VIEW_MODES.MOBILE),o=i.getComponentToAddRef(e,n,null,a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE);r.assign(c.layout,t),i.add(e,o,n,c),h(e,v(e),o)}},h=function(e,t,n){return s.updateBehavior(e,n,{name:"click",type:"comp"},t,{name:"toggle",type:"comp"})},P=function(e){if(!y(e))throw new Error("cannot add menu container toggle without menu instance");if(!I(e)){var t=v(e),n=i.getComponentToAddRef(e,t,null,a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU);i.add(e,n,t,l)}},A=function(e,t){var n=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),s=e.pointers.components.getComponent(a.COMP_IDS.HEADER,n),c=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,s);if(!e.dal.isExist(c)){var l=i.getComponentToAddRef(e,s,null,a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER);i.add(e,l,s,u),P(e),S(e,t),function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.DESKTOP),n=r(g.getHiddenAndShownComponents(e,a.MASTER_PAGE_ID).hiddenComponents).map(function(n){return e.pointers.components.getComponent(n,t)}).filter(function(t){var n=e.pointers.getInnerPointer(t,"componentType");if(!e.dal.isExist(n))return!1;var o=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));return r.includes(["wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.LanguageSelector"],o)}).value();if(n.forEach(function(t){return p.updateProperty(e,{hidden:!1},t)}),n.length>0&&e.siteAPI.isMobileView()){var i=f.getPage(e,a.MASTER_PAGE_ID),s=o.conversionUtils.extractMobilePage(i),u=m.getConversionSettings({conversionType:"MERGE_UNHIDE"});d.runMobileMergeOnPage(e,i,s,u)}}(e)}},{get:v=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t);return e.dal.isExist(n)?n:null},isExist:y=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t);return e.dal.isExist(n)},upgrade:function(e){var t=function(e){var t=e.pointers.components.getHeader(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.TINY_MENU,t),o=e.pointers.getInnerPointer(n,"layout"),s=e.dal.get(o);if(e.dal.isExist(n))return i.deleteComponent(e,n),r.pick(s,["x","y"])}(e);A(e,t)},toggle:{get:function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE,t);return e.dal.isExist(n)?n:null},isExist:E=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE,t);return e.dal.isExist(n)},add:S},expandableMenu:{isExist:I=function(e){var t=e.pointers.components.getMasterPage(a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU,t);return e.dal.isExist(n)},add:P}})},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,a,s,u,c,l,p,d,g,f,m,v;e.exports=(i=n(0),a=n(1),s=n(34),u=n(13),c=n(32),l=n(19),d={PARTIAL_SAVE:{urlBuilder:(p=function(e,t,n){return function(r){var o=r.serviceTopology,i=r.siteId;return"".concat(o[e]).concat(t).concat(n?"/".concat(i):"")}})("editorServerRoot","/api/partially_update")},OVERRIDE_SAVE:{urlBuilder:p("editorServerRoot","/api/new_override_save")},VALIDATE:{urlBuilder:p("editorServerRoot","/api/validate_site")},FIRST_SAVE:{urlBuilder:p("editorServerRoot","/api/first_save")},SAVE_AS_TEMPLATE:{urlBuilder:p("editorServerRoot","/api/save_as_template",!0)},PUBLISH:{urlBuilder:p("editorServerRoot","/api/publish",!0)},PUBLISH_RC:{urlBuilder:p("editorServerRoot","/api/publish-rc",!0)},PASSWORD_PROTECTION:{urlBuilder:p("editorServerRoot","/api/page_protection/new"),forceHTTPS:!0},PASSWORD_PROTECTION_DUPLICATE:{urlBuilder:p("editorServerRoot","/api/page_protection/duplicate"),forceHTTPS:!0},AUTOSAVE:{urlBuilder:p("autoSaveUrl","save_diff")},GET_DIFFS:{urlBuilder:p("autoSaveUrl","get_diffs",!0),queryParams:["siteVersion"],requestType:"GET"}},g=i.mapValues(d,function(e,t){return t}),f=function(e,t){var n=t.serviceTopology,i=t.siteId,s=t.metaSiteId,u=t.editorSessionId,c=d[e],l=c.urlBuilder,p=c.queryParams,g=void 0===p?[]:p,f=c.forceHTTPS,m=l({serviceTopology:n,siteId:i});f&&(m=m.replace("http://","https://"));var v=g.reduce(function(e,n){return e[n]=t[n],e},{}),y=a.urlUtils.toQueryString(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({metaSiteId:s,editorSessionId:u,esi:u},v));return"".concat(m,"?").concat(y)},m=function(e){var t=e.editorSessionId,n=e.origin;return{Authorization:e.signedInstance,"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":n,"X-Editor-Session-Id":t}},v=function(e,t,n,r,o){var i=e.editorSessionId,a=e.origin,s=e.signedInstance,u=f(t,e);l.utils.fedopsLogger.breadcrumb("server request",{endpoint:t,url:u});var c=d[t].requestType,p=void 0===c?"POST":c,g={dataType:"json",headers:m({editorSessionId:i,origin:a,signedInstance:s})};"POST"===p&&(g.xhrFields={withCredentials:!0}),l.actions.sendHttpRequest(u,p,g,n,r,o)},{ENDPOINTS:g,sendWithPs:function(e,t,n,r,o){return v(function(e){return{serviceTopology:e.dal.get(e.pointers.general.getServiceTopology()),metaSiteId:u.getProperty(e,u.PROPERTY_NAMES.META_SITE_ID),siteId:u.getProperty(e,u.PROPERTY_NAMES.SITE_ID),siteVersion:u.getProperty(e,u.PROPERTY_NAMES.SITE_VERSION),editorSessionId:u.getProperty(e,u.PROPERTY_NAMES.EDITOR_SESSION_ID),origin:e.config.origin,signedInstance:s.getAppData(e,c.APPS.META_SITE.applicationId).instance}}(e),t,n,r,o)},sendWithImmutable:function(e,t,n,r,o){return v(function(e){return{serviceTopology:e.get("serviceTopology").toJS(),metaSiteId:e.getIn(["rendererModel","metaSiteId"]),siteId:e.getIn(["rendererModel","siteInfo","siteId"]),siteVersion:e.getIn(["documentServicesModel","version"]),editorSessionId:e.getIn(["documentServicesModel","editorSessionId"]),origin:e.get("origin"),signedInstance:e.getIn(["rendererModel","clientSpecMap","-666","instance"])}}(e),t,n,r,o)}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(1),i=n(21),a=o.imageClientApi,{getBlankPageStructure:function(e,t){var n={componentType:"mobile.core.components.Page",type:"Page",id:"mainPage",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blank",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"",hidePage:!1,underConstruction:!1,pageBackgrounds:null},components:[]};return n.data=r.assign(n.data,{pageUriSEO:i.getValidPageUriSEO(e,t,"blank"),pageBackgrounds:r.get(i.getPageDataWithoutIds(e,e.siteAPI.getPrimaryPageId()),"pageBackgrounds")}),n},getBlankPopupPageStructure:function(){var e={componentType:"mobile.core.components.Page",type:"Page",id:"mainPage",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blank",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"",hidePage:!1,underConstruction:!1,pageBackgrounds:null},components:[]};e.data=r.assign({},e.data,{pageBackgrounds:{desktop:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:"top",fittingType:"fill",scrollType:"fixed"},isPreset:!1},mobile:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:"top",fittingType:"fill",scrollType:"fixed"},isPreset:!0}},indexable:!1,isPopup:!0});var t={popup:{closeOnOverlayClick:!0}};return e.props=r.defaults({type:"PageProperties",metaData:{schemaVersion:"1.0"},mobile:r.cloneDeep(t),desktop:r.cloneDeep(t)},e.props),e.components=[{type:"Container",components:[],skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",props:{type:"PopupContainerProperties",metaData:{schemaVersion:"1.0"},horizontalAlignment:"center",verticalAlignment:"center",alignmentType:"nineGrid",horizontalOffset:0,verticalOffset:0},design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"#FFFFFE",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0}},layout:{width:340,height:276,x:620,y:80,scale:1,rotationInDegrees:0,anchors:[]},componentType:"wysiwyg.viewer.components.PopupContainer",style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-bg":"1",bg:"rgba(255,255,255,1)"},propertiesSource:{"alpha-bg":"value",bg:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.PopupContainer",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",id:"style-ili7m0pe"}}],e},getBlankBackground:function(){return{desktop:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:a.alignTypes.CENTER,fittingType:a.fittingTypes.SCALE_TO_FILL,scrollType:"none"},isPreset:!0},mobile:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:a.alignTypes.CENTER,fittingType:a.fittingTypes.SCALE_TO_FILL,scrollType:"none"},isPreset:!0}}}})},function(e,t){e.exports=v},function(e,t,n){e.exports=function(){var e,t=n(0),r=n(474),o=n(188),i=n(476),a=n(477),s=n(32),u=n(13),c=n(15),l=n(79),p=n(189),d=n(190),g={},f=[],m={},v=!1,y=!1,E={},I=!1;var S=function(e){var n=e.data.applicationId;E[n]=!0,t.forEach(m[n],A),delete m[n];var r=t.get(g,[s.MessageTypes.ADD_APP_COMPLETED,n]);t.isFunction(r)&&r(e.data)},h=function(e){if(!0===e.data.success){y=!0;var n=t.get(g,[s.MessageTypes.ADD_ALL_APPS_COMPLETED]);t.forEach(n,function(e){e()})}};function P(n,r){if(function(t){return t.source===e.contentWindow}(r))switch(r.data.type){case s.MessageTypes.SDK_READY:v=!0,t.forEach(f,A),f.length=0;break;case s.MessageTypes.SET_MANIFEST:var o=t.get(l.getAppDataByApplicationId(n,r.data.applicationId),"appDefinitionId");l.setManifest(n,o,r.data.manifest);break;case s.MessageTypes.SET_APP_PUBLIC_API:l.setAppPublicAPI(n,r.data.appDefinitionId,r.data.apiName);break;case s.MessageTypes.ADD_APP_COMPLETED:S(r);break;case s.MessageTypes.ADD_ALL_APPS_COMPLETED:h(r);break;case s.MessageTypes.APP_UPDATE_COMPLETED:var i=t.get(g,[s.MessageTypes.APP_UPDATE_COMPLETED,r.data.applicationId]);t.isFunction(i)&&i(r.data);break;case s.MessageTypes.MIGRATE_COMPLETED:var a=t.get(g,[s.MessageTypes.MIGRATE_COMPLETED,r.data.applicationId]);t.isFunction(a)&&a(r.data);break;case s.MessageTypes.REMOVE_APP_COMPLETED:var u=t.get(g,[s.MessageTypes.REMOVE_APP_COMPLETED,r.data.applicationId]);t.isFunction(u)&&u(r.data);break;case s.MessageTypes.GET_INSTALLED_APPS:var c=n.siteAPI.getClientSpecMap(),p=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer()),m=n.dal.full.immutable.getByPath(["pagesData"]),y=d.getAllAppIdsInstalledOnPages(m,c,p);r.ports&&r.ports[0]&&t.isFunction(r.ports[0].postMessage)&&r.ports[0].postMessage(y);break;case s.MessageTypes.GET_IS_PLATFORM_APP_INSTALLED:var E=l.isPlatformAppInstalled(n,r.data.appDefinitionId);r.ports&&r.ports[0]&&r.ports[0].postMessage({isAppInstalled:E})}}function A(t){e.contentWindow.postMessage(t,"*")}function T(e){v?A(e):f.push(e)}function O(e,t){v&&E[t]?A(e):(m[t]=m[t]||[],m[t].push(e))}var C=function(e){return{languageCode:u.getProperty(e,u.PROPERTY_NAMES.LANGUAGE_CODE)||"en",viewMode:c.getViewMode(e),metaSiteId:u.getProperty(e,u.PROPERTY_NAMES.META_SITE_ID),userId:u.getProperty(e,u.PROPERTY_NAMES.USER_ID),editorSessionId:u.getProperty(e,u.PROPERTY_NAMES.EDITOR_SESSION_ID)}};return{init:function(t,n,a){e?(e.remove(),f.length=0,g={},m={},E={},v=!1):r.api.set(s.AppIds.EDITOR,o.getAPIForSDK(n),{onApiCall:p.reportAPICallBI.bind(null,t)}),i.addWorkerHandler(P.bind(this,t)),I=!0;var u=i.getAppsContainerUrl(t,a);e=i.createWorkerIframe("workerIframe",u)},triggerEvent:function(e,t){O(a.triggerEvent(e,t),e)},addApp:function(e,n,r){r&&t.set(g,[s.MessageTypes.ADD_APP_COMPLETED,n.applicationId],r),E[n.applicationId]=!1,T(a.addApp(n,C(e)))},addApps:function(e,n){t.forEach(n,function(e){var t=e.applicationId;E[t]=!1}),T(a.addApps(n,C(e)))},notifyAppUpdated:function(e,n,r){r&&t.set(g,[s.MessageTypes.APP_UPDATE_COMPLETED,e],r),O(a.notifyAppUpdated(e,n),e)},notifyRemoveApp:function(e){return new Promise(function(n){t.set(g,[s.MessageTypes.REMOVE_APP_COMPLETED,e],n),O(a.notifyRemoveApp(e),e)})},notifyMigrate:function(e,n){return new Promise(function(r){t.set(g,[s.MessageTypes.MIGRATE_COMPLETED,e],r),O(a.notifyMigrate(e,n),e)})},getAppsContainer:function(){return e},isInitiated:function(){return I},registerToAppsCompleted:function(e){y&&e();var n=t.get(g,[s.MessageTypes.ADD_ALL_APPS_COMPLETED]);n?n.push(e):t.set(g,[s.MessageTypes.ADD_ALL_APPS_COMPLETED],[e])},getEditorSdkUrl:function(e){return i.getEditorSdkUrl(e)}}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o={},{setOrigin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=e},getOrigin:function(){return o},getEditorType:function(){return r.get(o,"type","")}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(48),r=n(24),o=e.template("<%= baseUrl %>/api/code/apps?msid=<%= metasiteId %>"),i=e.template("<%= baseUrl %>/api/code/apps/<%= gridAppId %>/clone?msid=<%= metasiteId %>&isFirstSave=<%= isFirstSave %>"),a=e.template("<%= baseUrl %>/api/code/apps/<%= gridAppId %>/save?msid=<%= metasiteId %>"),s=function(t){var n=t.signedInstance,r=t.accept;return e.pickBy({"X-Wix-Si":n,Accept:r})},u=function(n){var r=n.url,o=n.data,i=n.signedInstance,a=n.accept;return e.assign({url:r,type:t.requestTypes.POST,contentType:"application/json",data:o,headers:s({signedInstance:i,accept:a}),timeout:15e3,xhrFields:{withCredentials:!0},crossDomain:!0})};function c(e){return e.payload}return{create:function(e){var n=e.baseUrl,r=e.metasiteId,i=e.signedInstance,a=o({baseUrl:n,metasiteId:r}),s=u({url:a,data:{},signedInstance:i});return t.sendRequestObj(s).then(c)},save:function(e){var n=e.baseUrl,r=e.gridAppId,o=e.metasiteId,i=e.signedInstance,s=a({baseUrl:n,gridAppId:r,metasiteId:o}),c=u({url:s,data:{},signedInstance:i});return t.sendRequestObj(c)},clone:function(e){var n=e.baseUrl,r=e.gridAppId,o=e.metasiteId,a=e.signedInstance,s=e.isFirstSave,l=i({baseUrl:n,gridAppId:r,metasiteId:o,isFirstSave:s}),p=u({url:l,data:{},signedInstance:a,accept:"*/*"});return t.sendRequestObj(p).then(c)},getBaseUrlFromPS:function(e){var t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,r.WIX_CODE_SERVICE_URL_KEY))}}}()},function(e,t,n){e.exports=function(){var e=n(58);function t(e){!function(e){e.dal.set(e.pointers.wixCode.getBundleCacheKillerMap(),{})}(e),function(e,t){var n=r(e.dal.get(t));e.dal.set(t,n)}(e,e.pointers.wixCode.getGlobalBundleCacheKiller())}function r(e){var t=Date.now().toString();return t===e?"".concat(t,"_1"):t}return{init:function(e){t(e)},getNewCacheKillerValue:r,notifyItemModified:function(n,r){var o=r.location;e.wixCodeUserScriptsService.filePathAffectsBundles(o)&&t(n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(48),o=n(103),i=n(104),a=n(24),s="application/json;charset=UTF-8",u="text/plain;charset=UTF-8",c="public",l="backend",p=".schemas",d="/",g=/^\/file\/[^\/]+\/(.+)$/;function f(e,t){return e.match(g)?e:"/file/".concat(t.appId,"/").concat(e)}function m(t){return e.assign({},t,{location:(n=t.location,r=n.match(g),r?r[1]:n)});var n,r}function v(t){return e.isString(t)}function y(t){return e.isObject(t)&&t.diff&&e.isArray(t.diff)}function E(e){return e?"?".concat(t.urlUtils.toQueryString(e)):""}function I(e){return"".concat(e.baseUrl,"/v1")}function S(t,n){return t.headers=e.assign({"X-Wix-Si":n.signedInstance},t.headers),e.assign(t,{xhrFields:{withCredentials:!0},crossDomain:!0}),r.sendRequestObj(t)}function h(e,t,n,r){return e.url=function(e,t,n){return I(e)+f(t,e)+E(n)}(t,n,r),S(e,t)}function P(e,t,n,r){return e.url=function(e,t,n){return"".concat(I(e),"/find").concat(f(t,e)).concat(E(n))}(t,n,r),S(e,t)}function A(e,t,n){return e.url=function(e,t){return"".concat(e.baseUrl,"/files/").concat(e.appId).concat(E(t))}(t,n),S(e,t)}function T(t,n,a,u){if(!o.isFolder(a))return Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.doCreateFileOrFolder",a,"folder object"));if(c=n,!(e.isString(c)&&c.length>0))return Promise.reject(new i.ArgumentError("itemName","fileSystemService.doCreateFileOrFolder",n));var c,l={name:n,localTimeStamp:0,directory:u};return h({type:r.requestTypes.POST,contentType:s,headers:{"X-Create-Options":"no-overwrite"},timeout:15e3,data:JSON.stringify(l)},t,a.location).then(m)}function O(e,t,n,a,u){if(!o.isFileSystemItem(n))return Promise.reject(new i.ArgumentError("fileSystemItem","fileSystemService.doCopyOrMove",n));if(!o.isFolder(a))return Promise.reject(new i.ArgumentError("targetFolder","fileSystemService.doCopyOrMove",a,"folder object"));if(!u){var c=n.location.split(d);u=c.pop()||c.pop()}var l={"X-Create-Options":"no-overwrite,".concat(t)},p={name:u,location:f(n.location,e)};return h({type:r.requestTypes.POST,contentType:s,headers:l,timeout:15e3,data:JSON.stringify(p)},e,a.location).then(m)}function C(e,t){var n=e.replace(new RegExp("".concat(d,"*$")),"");return{virtual:!0,localTimeStamp:0,eTag:'"virtual"',name:n.split(d).pop(),length:0,directory:Boolean(t),location:n+(t?d:""),attributes:{readOnly:!1}}}return{getRoots:function(){return{schemas:C(p,!0),public:C(c,!0),pages:C("".concat(c,"/").concat(a.PAGES_ROOT),!0),backend:C(l,!0)}},createFolder:function(e,t,n){return T(e,t,n,!0)},deleteItem:function(e,t){return o.isFileSystemItem(t)?h({type:r.requestTypes.DELETE,headers:{Accept:"*/*"},dataType:"text",timeout:15e3},e,t.location):Promise.reject(new i.ArgumentError("location","fileSystemService.deleteItem",t))},copy:function(e,t,n,r){return O(e,"copy",t,n,r)},move:function(e,t,n,r){return O(e,"move",t,n,r)},getChildren:function(t,n){return o.isFolder(n)?h({type:r.requestTypes.GET},t,n.location,{depth:1}).then(function(t){return e.map(t.children||[],m)}):Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.getChildren",n,"folder object"))},getMetadata:function(e,t){return o.isFileSystemItem(t)?h({type:r.requestTypes.GET},e,t.location,{parts:"meta"}).then(m):Promise.reject(new i.ArgumentError("fileSystemItem","fileSystemService.getMetadata",t,"file system object"))},readAllFiles:function(e){return A({type:r.requestTypes.GET,headers:{Accept:"application/json"}},e)},readFile:function(e,t){return o.isFileSystemItem(t)?h({type:r.requestTypes.GET,headers:{Accept:"text/plain"},contentType:"text/plain",dataType:"text"},e,t.location):Promise.reject(new i.ArgumentError("filePath","fileSystemService.readFile",t,"file object"))},writeFile:function(e,t,n){return o.isFileSystemItem(t)?v(n)||y(n)?"string"==typeof n?function(e,t,n){if(!v(n))return Promise.reject(new i.ArgumentError("content","fileSystemService.overrideFileContent",n,"string"));var o={"If-Match":t.eTag};return h({type:r.requestTypes.PUT,headers:o,contentType:u,log:!1,data:n},e,t.location).then(m)}(e,t,n):function(e,t,n){if(!y(n))return Promise.reject(new i.ArgumentError("partialChange","fileSystemService.patchFileContent",n,"partial change with diff object"));var o={"X-HTTP-Method-Override":"PATCH","If-Match":t.eTag};return h({type:r.requestTypes.POST,headers:o,contentType:u,log:!1,data:JSON.stringify(n)},e,t.location).then(m)}(e,t,n):Promise.reject(new i.ArgumentError("content","fileSystemService.writeFile",n,"string or partial-change object")):Promise.reject(new i.ArgumentError("filePath","fileSystemService.writeFile",t,"file object"))},bulkWrite:function(e,t){var n={updates:t.map(function(e){return{path:e.fileId,content:e.content}})};return S({url:"".concat(I(e),"/files/").concat(e.appId),type:r.requestTypes.PUT,contentType:s,data:JSON.stringify(n),headers:{Accept:"*/*"},dataType:"text"},e)},getVirtualDescriptor:C,findByExtension:function(t,n,a){if(!o.isFolder(n))return Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.findByExtension",n,"folder object"));if(e.isEmpty(a))return Promise.reject(new i.ArgumentError("extension","fileSystemService.findByExtension",a,"empty extension"));var s={extension:e.startsWith(a,".")?a:".".concat(a)};return P({type:r.requestTypes.GET},t,n.location,s).then(function(t){return e.map(t.items||[],m)})}}}()},function(e,t){e.exports={PUBLIC:"public",PAGES:"public/pages",BACKEND:"backend",SCHEMAS:".schemas"}},function(e,t,n){e.exports=function(){var e=n(0),t=n(205),r=n(49),o=n(24),i=n(143);function a(e,t,n){return e.dal.isExist(t)?e.dal.get(t):n}function s(e,t){e.dal.isExist(t)&&e.dal.remove(t)}function u(t,n,o){e.isUndefined(o)&&r.trace(t,{action:"filesDAL.loadFileContent",message:{filePath:n}})({message:new Error("about to set file content to undefined"),level:r.levels.ERROR});var i=t.pointers.wixCode.getLoadedFileContent(n);t.dal.isExist(i)||t.dal.set(i,o)}function c(t,n){return e.some([t.pointers.wixCode.getLoadedFileContent(n),t.pointers.wixCode.getModifiedFileContent(n)],t.dal.isExist)}function l(t){return e.orderBy(t,["directory","name"],["desc","asc"])}function p(e,t){var n=e&&e.getIn(t);return n?n.toJS():null}function d(n,r,o){return e.mapValues(r,function(e,i){return t.isUndoableFile(i)?t.assembleUndoableFile(i,n[i],r[i],o[i]):r[i]})}function g(e){if(!e)return null;var n=p(e,o.paths.LOADED_FILE_CONTENTS),r=p(e,o.paths.MODIFIED_FILE_CONTENTS),i=p(e,o.paths.UNDOABLE_MODIFIED_FILE_CONTENTS),a=p(e,o.paths.FILE_PATH_TO_ID_MAP);return d(n,r,t.getUndoableContentByPath(i,a))}function f(t,n){return e.transform(n,function(n,r,o){r!==e.get(t,o)&&n.push({fileId:o,content:r})},[])}function m(t,n){return e.transform(n,function(r,o,i){if(!e.get(t,i)){for(var a=o;n[a];)a=n[a];r.push({destFileId:i,srcFileId:a})}},[])}function v(e,n){var r=g(e),i=function(e){var n=a(e,e.pointers.wixCode.getLoadedFileContentMap(),{}),r=a(e,e.pointers.wixCode.getModifiedFileContentMap(),{}),o=a(e,e.pointers.wixCode.getUndoableModifiedFileContentMap(),{}),i=a(e,e.pointers.wixCode.getFilePathToIdMap(),{});return d(n,r,t.getUndoableContentByPath(o,i))}(n),s=e&&e.getIn(o.paths.DUPLICATED_FILES_INFO)?e.getIn(o.paths.DUPLICATED_FILES_INFO).toJS():{},u=n.dal.get(n.pointers.wixCode.getDuplicatedFilesInfoMap()),c=a(n,n.pointers.wixCode.getDirectoryFlagByDeletedPathMap(),{});return{toSave:f(r,i),toCopy:m(s,u),toDelete:c}}return{writeFile:function(n,o,i){e.isUndefined(i)&&r.trace(n,{action:"filesDAL.writeFile",message:{filePath:o}})({message:new Error("about to set file content to undefined"),level:r.levels.ERROR});var a=n.pointers.wixCode.getModifiedFileContent(o);n.dal.set(a,i),function(t,n){var r=t.pointers.wixCode.getDuplicatedFilesInfoMap(),o=t.dal.get(r);o[n]&&t.dal.set(r,e.omit(o,[n]))}(n,o),t.isUndoableFile(o)&&t.setUndoableContent(n,o,i)},loadFileContent:u,readFile:function(n,r){if(t.isUndoableFile(r))return function(e,n){var r=a(e,e.pointers.wixCode.getLoadedFileContent(n),null),o=a(e,e.pointers.wixCode.getModifiedFileContent(n),null),i=t.getUndoableContent(e,n);return null===r&&null===o&&null===i?null:t.assembleUndoableFile(n,r,o,i)}(n,r);var o=e.find([n.pointers.wixCode.getModifiedFileContent(r),n.pointers.wixCode.getLoadedFileContent(r)],n.dal.isExist);return o?n.dal.get(o):null},getSourceFilePath:function(e,t){for(var n=e.pointers.wixCode.getDuplicatedFilesInfoMap(),r=e.dal.get(n);r[t];)t=r[t];return t},markFileForDuplication:function(e,t,n){var r=e.pointers.wixCode.getDuplicatedFilesInfoMap(),o=e.dal.get(r);o[n]=t,e.dal.set(r,o)},updateDuplicates:function t(n,r,o){var i=n.pointers.wixCode.getDuplicatedFilesInfoMap(),a=n.dal.get(i),s=e.transform(a,function(e,t,o){o!==r||c(n,t)?t!==r||c(n,o)||e.push(o):e.push(t)},[]);e.forEach(s,function(e){u(n,e,o)}),e.forEach(s,function(e){t(n,e,o)})},moveFile:function(t,n,r){if(c(t,r))throw new Error("target file [".concat(r,"] already exists"));e.forEach([t.pointers.wixCode.getLoadedFileContent,t.pointers.wixCode.getModifiedFileContent,t.pointers.wixCode.getFilePathId],function(e){!function(e,t,n){e.dal.isExist(t)&&(e.dal.set(n,e.dal.get(t)),e.dal.remove(t))}(t,e(n),e(r))})},deleteFile:function(e,t){s(e,e.pointers.wixCode.getLoadedFileContent(t)),s(e,e.pointers.wixCode.getModifiedFileContent(t)),s(e,e.pointers.wixCode.getFilePathId(t))},deleteFolder:function(t,n){e.forEach([t.pointers.wixCode.getLoadedFileContentMap(),t.pointers.wixCode.getModifiedFileContentMap(),t.pointers.wixCode.getFilePathToIdMap(),t.pointers.wixCode.getAreChildrenLoadedMap(),t.pointers.wixCode.getLoadedChildrenMap()],function(r){var o=t.dal.get(r),i=e(o).keys().filter(function(t){var n=t.replace(/\/*$/,"/");return function(t){return e.startsWith(t,n)}}(n)).value(),a=e.omit(o,i);t.dal.set(r,a)})},isFileReadable:function(n,r){return t.isUndoableFile(r)?n.dal.isExist(n.pointers.wixCode.getLoadedFileContent(r)):e.some([n.pointers.wixCode.getLoadedFileContent(r),n.pointers.wixCode.getModifiedFileContent(r)],n.dal.isExist)},isFileExists:c,addChild:function(t,n,r){var o=t.pointers.wixCode.getLoadedChildren(n),i=t.dal.get(o)||[];if(!e.find(i,{name:r.name,directory:r.directory})){var a=l(function(e,t){return e.concat([t])}(i,r));t.dal.set(o,a)}},removeChild:function(t,n,r){var o=t.pointers.wixCode.getLoadedChildren(n),i=function(t,n){return e.reject(t,{name:n.name,directory:n.directory})}(t.dal.get(o)||[],r);t.dal.set(o,i)},hasKnownChild:function(t,n,r){var o=t.pointers.wixCode.getLoadedChildren(n),i=t.dal.get(o)||[];return!!e.find(i,{name:r.name,directory:r.directory})},isChildrenExists:function(e,t){return e.dal.isExist(e.pointers.wixCode.getLoadedChildren(t))},areChildrenLoaded:function(e,t){return!!e.dal.get(e.pointers.wixCode.getAreChildrenLoaded(t))},getChildren:function(e,t){var n=e.pointers.wixCode.getLoadedChildren(t);return n?e.dal.get(n):null},loadChildren:function(t,n,r){var o=t.pointers.wixCode.getLoadedChildren(n),i=l(function(t,n){return e.unionBy(t,n,"name")}(t.dal.get(o)||[],r));t.dal.set(o,i),t.dal.set(t.pointers.wixCode.getAreChildrenLoaded(n),!0)},getChanges:function(e){var t=i.getTaskName()+i.getSnapshotTags();return v(e.dal.full.immutable.getLastSnapshotByTagName(t),e)},getChangesBetweenSnapshots:function(e,t){var n=g(e),r=g(t),i=e&&e.getIn(o.paths.DUPLICATED_FILES_INFO)?e.getIn(o.paths.DUPLICATED_FILES_INFO).toJS():{},a=t.getIn(o.paths.DUPLICATED_FILES_INFO).toJS(),s=t.getIn(o.paths.DIRECTORY_FLAG_BY_DELETED_PATH).toJS()||{};return{toSave:f(n,r),toCopy:m(i,a),toDelete:s}},getChangesBetweenLastSnapshotAndCurrentStateTakenFromPS:v,isChangesEmpty:function(t){return e.isEmpty(t.toSave)&&e.isEmpty(t.toCopy)&&e.isEmpty(t.toDelete)},markPathAsDeleted:function(t,n,r){var o,i,a,s=t.pointers.wixCode.getDirectoryFlagByDeletedPathMap();t.dal.set(s,e.assign({},t.dal.get(s),(a=r,(i=n)in(o={})?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,o)))},clearDeletedPath:function(t,n){var r=t.pointers.wixCode.getDirectoryFlagByDeletedPathMap();t.dal.set(r,e.omit(t.dal.get(r),n))}}}()},function(e,t){e.exports={getTaskName:function(){return"saveCode"},getSnapshotTags:function(){return["primary"]}}},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T;e.exports=(a=n(0),s=n(1),u=n(211),c=n(2),l=n(39),p=3,d=4,v=[g="noJsonAnchors",f="desktopSOAPOrder",m="mobileInvalidSOAP"],r(o={},g,2),r(o,f,d),r(o,m,p),y=o,E=["wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.SiteRegionContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.FooterContainer","platform.components.AppController","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.QuickActionBar","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.BackToTopButton","wysiwyg.viewer.components.MenuContainer"],r(i={},g,function(e){var t=e.pointers.page.getNonDeletedPagesPointers(!0),n=a.flatMap(t,function(t){var n=t.id;return[e.pointers.full.components.getPage(n,c.VIEW_MODES.DESKTOP),e.pointers.full.components.getPage(n,c.VIEW_MODES.MOBILE)]});return a.every(n,a.partial(u,e))}),r(i,f,function(e){return function(e,t){var n=e.pointers.getInnerPointer(S(e),"layoutSettings"),r=e.dal.get(n);return a.get(r,t,!1)}(e,"soapCompsAroundPagesContainer")}),r(i,m,function(e){var t=e.pointers.components.getMasterPage(c.VIEW_MODES.MOBILE),n=e.pointers.components.getChildren(t);return function(e,t){return a.every(t,function(t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));return a.includes(E,n)})}(e,n)}),I=i,S=function(e){return e.pointers.data.getDataItemFromMaster(s.siteConstants.MASTER_PAGE_ID)},h=function(e,t){var n=e.dal.get(S(e));e.dal.set(S(e),a.merge({},n,{layoutSettings:{mechanism:t}}))},P=function(e,t,n,r,o){var i={status:t,pages_count:n};t||(i.reasonid=o),e.siteAPI.reportBI(r,i)},A=function(e,t,n,r){!function(e){h(e,"anchors")}(e),function(e,t,n,r){P(e,!1,t,n,r)}(e,t,n,r)},{meshLayoutReadySiteDataFixerAfterMeshWizard:(T=function(e){return function(t,n,r){if(function(e){var t=e.pointers.getInnerPointer(S(e),"layoutSettings"),n=e.dal.get(t);return"mesh"===a.get(n,"mechanism")}(t))n&&n();else{var o=function(e){return a.size(e.pointers.page.getNonDeletedPagesPointers(!0))}(t),i=function(e){return a.findIndex(v,function(t){return!I[t](e)})}(t);-1===i?(!function(e){h(e,"mesh")}(t),function(e,t,n){P(e,!0,t,n)}(t,o,e),n&&n()):(A(t,o,e,y[v[i]]),r&&r("cant use mesh, validation failed, failed on index: ".concat(i)))}}})(l.MESH_MIGRATION_WIZARD),meshLayoutReadySiteDataFixer:T(l.MESH_MIGRATION),meshLayoutReadySiteDataPreSaveFixer:function(e){T(l.MESH_MIGRATION_PRESAVE)(e)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(213),r=n(214),o=n(83),i=n(62),a=n(52),s=n(133),u=n(526),c=n(215),l=n(24),p=n(6),d=n(146),g=n(1),f=n(19),m=n(2),v=n(69),y=n(65),E=n(217),I=n(5),S=g.loggingUtils,h=S.performance,P=S.performanceMetrics,A=c.getSaveableSnapshot,T=c.extendSavableSnapshotWithFullSnapshot,O={"-12":o.save.SESSION_EXPIRED,"-15":o.save.NOT_LOGGED_IN,"-17":o.save.USER_NOT_AUTHORIZED_FOR_SITE,"-10116":o.save.CONCURRENT_SAVE,"-40003":o.save.SITE_NAME_TAKEN,"-10132":o.save.SAVE_PUBLISH_DISABLED_ON_SERVER,"-10154":o.save.SAVE_PUBLISH_RC_FAILED_ON_SERVER,"-10104":function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){var n=t.payload;return e.isEmpty(n.duplicateComponents)?e.isEmpty(n.dataReferenceMismatches)?e.isEmpty(n.missingContainers)?e.isEmpty(n.appControllerReferenceMismatches)?e.isEmpty(n.connectionListReferenceMismatches)?e.isEmpty(n.styleReferenceMismatches)?e.isEmpty(n.behaviorReferenceMismatches)?e.isEmpty(n.propertyReferenceMismatches)?e.isEmpty(n.designReferenceMismatches)?void 0:o.save.DESIGN_REFERENCE_MISMATCHES:o.save.PROPERTY_REFERENCE_MISMATCHES:o.save.BEHAVIOR_REFERENCE_MISMATHCHES:o.save.STYLE_REFERENCE_MISMATCHES:o.save.CONNECTION_LIST_REFERENCE_MISMATCHES:o.save.APP_CONTROLLER_REFERENCE_MISMATCH:o.save.MISSING_CONTAINERS:o.save.DATA_REFERENCE_MISMATCH:o.save.DUPLICATE_COMPONENTS}),"-10145":o.save.CONCURRENT_AUTO_SAVE,"-10148":o.save.SITE_STALE_STATE_FROM_AUTO_SAVE,"-10124":o.save.SITE_DESERIALIZATION_ERROR},C=[o.save.DUPLICATE_COMPONENTS,o.save.DATA_REFERENCE_MISMATCH,o.save.MISSING_CONTAINERS,o.save.APP_CONTROLLER_REFERENCE_MISMATCH,o.save.DESIGN_REFERENCE_MISMATCHES,o.save.BEHAVIOR_REFERENCE_MISMATHCHES,o.save.PROPERTY_REFERENCE_MISMATCHES,o.save.STYLE_REFERENCE_MISMATCHES,o.save.CONNECTION_LIST_REFERENCE_MISMATCHES],_=Object.values(g.constants.PAGE_DATA_DATA_TYPES);function D(t){var n=O[t.errorCode];return e.isFunction(n)&&(n=n(t)),n||o.save.UNKNOWN_SERVER_ERROR}function w(t){return e.includes(C,D(t))}function b(t,n){var r=n.getIn(["masterPage","structure"]);if(!t||!r.equals(t.getIn(["masterPage","structure"])))return e.pick(r.toJS(),["children","mobileComponents","type","behaviorQuery","layout","modes","mobileHintsQuery"])}function M(t,n,r){var o=n.map(function(e){return e.get("structure")}).filter(function(e,t,n){return!e&&t||!t.equals(e.getIn([n,"structure"]))}.bind(null,t)).toJS();return r?e.values(o):e.filter(o,function(e,t){return!function(e){return"masterPage"===e}(t)})}function R(e,t){return e.keySeq().toSet().subtract(t.keySeq().toSet()).toArray()}function N(e,t){return e?t.filter(function(t,n){return t!==e.get(n)&&!t.equals(e.get(n))}):t}var x=["Page","AppPage"],L=function(t){var n=t,r=n.filter(function(t){return n=t.get("type"),e.includes(x,n);var n}),o={};return r.forEach(function(t,r){(function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!r)return o;var i=r.get("type");return r.forEach(function(r,a){if("pageBackgrounds"===a&&e.forEach(["desktop","mobile"],function(e){var i=r.getIn([e,"ref"]);if(i){var a=i.replace("#",""),s=n.get(a);t(n,s,o),o.push(a)}}),y.isOfType("data",i,a,"ref")){if(r){var s=r.replace("#",""),u=n.get(s);t(n,u,o),o.push(s)}}else y.isOfType("data",i,a,"refList")&&r.forEach(function(e){var r=e.replace("#",""),i=n.get(r);t(n,i,o),o.push(r)})}),o})(n,t).forEach(function(e){o[e]=r})}),o},B=["data","document_data"];function k(t,n){var r=e.groupBy(_),o=[],i=function(t){e.includes(o,t)||o.push(t)};return{changedData:e.mapValues(r,function(e,r){return n.flatMap(function(e,n){var o=e.getIn(["data",r]);if(!t)return i(n),o;var a=t.getIn([n,"data",r]);if(o&&!o.equals(a)){var s=N(a,o);return s.size>0&&i(n),s}}).toJS()}),changedDataPageIds:o}}function F(t,n){var r=H(t),o=H(n);if(!e.isEqual(r,o))return o}function U(t,n){var r=V(t),o=V(n);if(!e.isEqual(r,o))return o}function H(t){return e(t.getIn(["rendererModel","siteMetaData"]).toJS()).omit(["adaptiveMobileOn"]).merge({headTags:t.getIn(["documentServicesModel","customHeadTags"])||""}).value()}function V(t){return e.merge({},t.getIn(["documentServicesModel","metaSiteData"]).toJS(),{adaptiveMobileOn:W(t)})}function W(e){return e.getIn(["rendererModel","siteMetaData","adaptiveMobileOn"])}function G(e,t){var n=t.getIn(["rendererModel","pageToHashedPassword"]);if(n){var r=e&&e.getIn(["rendererModel","pageToHashedPassword"]);return r?n.filter(function(e,t){return e!==r.get(t)}).toJS():n.toJS()}return{}}function z(e,t){var n=t.getIn(["routers"]),r=e&&e.getIn(["routers"]);return!n&&r?{}:n&&!n.equals(r)?n.toJS():void 0}function j(t,n){var r=n.get("pagesPlatformApplications");if(r){var o=t&&t.get("pagesPlatformApplications");if(!e.isEqual(o,r))return r.toJS()}}function Y(e){return e.get("orphanPermanentDataNodes").toJS()}function K(e){return e.getIn(["rendererModel","siteInfo","siteId"])}function q(e){return e.getIn(["documentServicesModel","revision"])}function Q(e){return e.getIn(["documentServicesModel","version"])}function X(e,t){var n=l.paths.WIX_CODE_APP_DATA,r=t.getIn(n);if(r&&(!e||!r.equals(e.getIn(n))))return r.toJS()}function Z(e){return e.isEmpty()}function J(n,r){n=n||t.Map();var o=[],i=r.map(function(t,r){return function(t,n,r){var o=n.get("translations");if(!e.isUndefined(o)){var i=t&&t.get("translations");return e.isUndefined(i)?(function(e){return e.some(function(e){return e.some(function(e){return e.some(function(e){return!e.isEmpty()})})})}(o)&&r(),o.toJS()):o.map(function(e,t){return e.map(function(e){return e.map(function(e,n){var o=N(i.getIn([t,"data",n]),e);return o.size>0&&r(),o}).filterNot(Z)}).filterNot(Z)}).filterNot(Z)}}(n.get(r),t,function(t){e.includes(o,t)||o.push(t)}.bind(null,r))}).filterNot(e.isUndefined).reduce(function(e,t){return e.mergeDeep(t)},t.Map()).toJS();return{translationsDelta:e.isEmpty(i)?void 0:i,changedTranslationPageIds:o}}var $=function(t,n,r){var o,i,a=(o=t.get("masterPage"),i=L(o.getIn(B)),o.has("translations")&&o.get("translations").forEach(function(t){var n=t.getIn(B),r=L(n);e.assign(i,r)}),i),s=e(r).map(function(t){return e.keys(e.get(t,B))}).flatten().value(),u=e.keys(n.document_data);return e(u).concat(s).uniq().filter(function(e){return a[e]}).map(function(e){return a[e]}).value()},ee=function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.settleInServer,a=n.get("pagesData"),s=t.get("pagesData"),c=k(s,a),l=c.changedData,p=c.changedDataPageIds,d=J(s,a),g=d.translationsDelta,f=d.changedTranslationPageIds,m=e(p).concat(f).concat($(a,l,g)).uniq().value(),y={protectedPagesData:G(t,n),dataDelta:l,dataNodeIdsToDelete:Y(n),deletedPageIds:R(s,a),id:K(n),masterPage:b(s,a),revision:q(n),version:Q(n),updatedPages:M(s,a),siteMetaData:F(t,n),metaSiteData:U(t,n),pagesPlatformApplications:j(t,n),wixCodeAppData:X(t,n),routers:z(t,n),initiator:te(n),translationsDelta:g,pageIdsWithChangedData:m};if(i){var E=v.getSettleActionsForSave(t,n);e.isEmpty(E)||(y.metaSiteActions={actions:E})}return u.fixData(y,t,n,r),e.omitBy(y,function(t){return e.isNil(t)})};function te(e){var t,n;return ne(e,"autoFullSaveFlag")?t="auto_save":t=((n=e.getIn(["documentServicesModel","publishSaveInitiator"]))&&n.toJS?n.toJS():n)?"publish":function(e){var t=e.getIn(["documentServicesModel","silentSaveInitiator"]);return t&&t.toJS?t.toJS():t}(e)?"provision":"manual",t}function ne(e,t){var n=e.getIn(["documentServicesModel","autoSaveInfo",t]);return n&&n.toJS?n.toJS():n}function re(n){var r=d.getAutosavePaths(),o=t.fromJS({});return e.forEach(r,function(t){var r=function t(n,r,o){var i={};return o=o||[],1===n.length?i[n[0]]=r.getIn(o.concat(n[0])):(o=o.concat(n.splice(0,1)),i[e.last(o)]=t(n,r,o)),i=e.omitBy(i,e.isUndefined)}(t.split("."),n);o=o.mergeDeep(r)}),o}function oe(t){var n=t.get("pagesData"),r={protectedPagesData:G(null,t),dataDelta:k(null,n).changedData,dataNodeIdsToDelete:Y(t),deletedPageIds:[],id:K(t),masterPage:b(null,n),revision:q(t),version:Q(t),updatedPages:M(null,n),siteMetaData:H(t),metaSiteData:V(t),pagesPlatformApplications:j(null,t),wixCodeAppData:X(null,t),routers:z(null,t),initiator:te(t)},o=J(null,n).translationsDelta;return e.isEmpty(o)||e.assign(r,{translationsDelta:o}),u.fixData(r,null,t),e.omitBy(r,function(t){return e.isNil(t)})}function ie(t){var n=t.masterPage;return e.find(n.children,{componentType:"wysiwyg.viewer.components.PagesContainer"}).components[0].components=t.updatedPages,e.merge(t.masterPage,{componentProperties:t.dataDelta.component_properties},{themeData:t.dataDelta.theme_data},{mobileHintsQuery:n.mobileHintsQuery})}function ae(e,t){var n={dataNodes:e.dataDelta.document_data,documents:[ie(e)],protectedPagesData:e.protectedPagesData,siteMetaData:e.siteMetaData,metaSiteData:e.metaSiteData,pagesPlatformApplications:e.pagesPlatformApplications,sourceSiteId:e.id,targetName:t.getIn(["documentServicesModel","siteName"]),wixCodeAppData:e.wixCodeAppData,urlFormat:t.getIn(["urlFormatModel","format"]),behaviors:e.dataDelta.behaviors_data,connections:e.dataDelta.connections_data,mobileHints:e.dataDelta.mobile_hints,initiator:e.initiator,layoutDataNodes:e.dataDelta.layout_data,anchorsInfo:e.dataDelta.anchors_data,breakpointsNodes:e.dataDelta.breakpoints_data};return e.routers&&(n.routers=e.routers),n.translations=e.translationsDelta,n.designNodes=e.dataDelta.design_data,n}function se(e,t){e.wixCodeModel&&t.changes.push({path:l.paths.WIX_CODE_MODEL,value:e.wixCodeModel})}function ue(e,t,n,r,o){var i=function(){E.start(E.SERVER_SAVE),s.sendWithImmutable(n,e,t,function(e){E.end(E.SERVER_SAVE),r(e)},o)},a=I.isOpen("ds_recordActionsToCompareWithRC"),u=I.isOpen("ds_runActionsToCompareWithRC");a||u?(a&&window.documentServices.debug.trace.upload().catch(function(e){return e}).then(i),u&&(void 0===window.autopilotSaves&&(window.autopilotSaves=[]),window.autopilotSaves.push({endpoint:e,body:t,headers:ye(n)}))):i()}function ce(e){return{errorCode:e.errorCode,errorType:D(e),errorDescription:e.errorDescription}}function le(t,n,r,o,i){i.success?t(function(t,n,r){var o,i,a=n.get("rendererModel").toJS(),s=n.get("documentServicesModel").toJS(),u=[{path:["rendererModel","siteInfo","siteId"],value:t.previewModel.siteId},{path:["rendererModel","metaSiteId"],value:t.previewModel.metaSiteModel.metaSiteId},{path:["rendererModel","mediaAuthToken"],value:t.mediaAuthToken},{path:["rendererModel","premiumFeatures"],value:t.previewModel.metaSiteModel.premiumFeatures},{path:["rendererModel","siteInfo","documentType"],value:t.previewModel.metaSiteModel.documentType},{path:["rendererModel","clientSpecMap"],value:e.mergeWith(a.clientSpecMap,t.previewModel.metaSiteModel.clientSpecMap,function(t,n){return n.demoMode&&t&&!t.demoMode?t:e.merge({},t,n)})}],c=[{path:["documentServicesModel","neverSaved"],value:!1},{path:["documentServicesModel","siteName"],value:t.previewModel.metaSiteModel.siteName},{path:["documentServicesModel","metaSiteData"],value:t.metaSiteData},{path:["documentServicesModel","publicUrl"],value:t.publicUrl},{path:["documentServicesModel","usedMetaSiteNames"],value:s.usedMetaSiteNames.push(t.publicUrl.match(/^.*\/([^\/]+)/)[1])&&s.usedMetaSiteNames},{path:["documentServicesModel","version"],value:t.siteHeader.version},{path:["documentServicesModel","revision"],value:t.siteHeader.revision},{path:["documentServicesModel","autoSaveInfo"],value:t.autoSaveInfo},{path:["documentServicesModel","mediaManagerInfo","siteUploadToken"],value:t.mediaSiteUploadToken},{path:["documentServicesModel","permissionsInfo"],value:t.permissionsInfo}],l={changes:u.concat(c).concat({path:["orphanPermanentDataNodes"],value:[]}),historyAlteringChanges:ge(t.deletedItems,n,!0,r)};return se(t,l),i=l,(o=t).devSiteAppDefId&&i.changes.push({path:["devSiteAppDefId"],value:o.devSiteAppDefId}),l}(i.payload,r,o)):n(ce(i))}function pe(e,t,n,r,o,a,s){!s.success&&w(s)?(o.event(i.FULL_DOCUMENT_SAVE_ATTEMPTED_AFTER_PARTIAL_FAILURE,{endpoint:"partial"}),Se(e,t,n,r,o,a)):de(t,n,r,o,a,s)}function de(t,n,r,o){var i=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).settleInServer,s=arguments.length>5?arguments[5]:void 0;if(s.success){var u={changes:[{path:["documentServicesModel","revision"],value:s.payload.revision},{path:["documentServicesModel","version"],value:s.payload.version},{path:["orphanPermanentDataNodes"],value:[]}]};if(Boolean(t.getIn(["documentServicesModel","autoSaveInfo","shouldAutoSave"]))&&u.changes.push({path:["documentServicesModel","autoSaveInfo","previousDiffId"],value:void 0}),se(s.payload,u),i){var c=["rendererModel","clientSpecMap"],l=["rendererModel","siteInfo","documentType"],p=t.getIn(c).toJS(),d=t.getIn(l);s.payload.clientSpecMap&&u.changes.push({path:c,value:"Template"===d?s.payload.clientSpecMap:e.assign({},p,s.payload.clientSpecMap)}),u.changes.push({path:l,value:d})}u.historyAlteringChanges=ge(s.payload.deletedItems,t),n(u)}else{var g=ce(s),m=g.errorType,v=t.get("origin");w(s)&&f.utils.fedopsLogger.captureError(new Error("Save Error: ".concat(m)),{tags:{errorType:m,saveError:!0},extra:{origin:v,errorCode:e.get(g,"errorCode"),errorDescription:e.get(g,"errorDescription"),duplicateComponentId:e.get(s,"payload.duplicateComponents[0].id")||null}}),o.error(a.SAVE_DOCUMENT_FAILED_ON_SERVER,{serverErrorCode:g.errorCode,errorType:m,origin:v}),r(g)}}function ge(t,n,r,o){var i=[];return r&&(t=function(t,n,r){var o={};return e.forEach(t,function(t,i){e.forEach(t,function(t){var s=function(e,t,n){var r=["data",t,e];return n.map(function(e,t){return!!e.getIn(r)&&t}).filter(Boolean).keySeq().toArray()}(t,i,n);if(e.isEmpty(s))r.error(a.SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED,{errorType:"notFound",itemId:t,pagesIds:null});else if(e.size(s)>1)r.error(a.SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED,{errorType:"multipleFound",itemId:t,pagesIds:s.toString()});else{var u=e.head(s),c=e.get(o,[u,i],[]);c.push(t),e.set(o,[u,i],c)}})}),o}(t,n.get("pagesData"),o)),e.forEach(t,function(t,n){e.forEach(t,function(t,r){e.forEach(t,function(e){i.push({path:["pagesData",n,"data",r,e],value:void 0})})})}),i}function fe(e,t,n){n.success?e({changes:[{path:["rendererModel","siteInfo","documentType"],value:"Template"}]}):t(ce(n))}function me(e,t,n){if(n.success){var r=[{path:["documentServicesModel","isPublished"],value:!0}];n.payload.revision&&r.push({path:["documentServicesModel","revision"],value:n.payload.revision}),n.payload.version&&r.push({path:["documentServicesModel","version"],value:n.payload.version}),e({changes:r,result:{siteRcExists:n.payload.siteRcExists}})}else t(ce(n))}function ve(e,t){e({errorCode:t.status,errorType:o.save.HTTP_REQUEST_ERROR,errorDescription:t.statusText})}function ye(e){return{"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":e.get("origin"),"X-Editor-Session-Id":e.getIn(["documentServicesModel","editorSessionId"])}}var Ee=function(e){return function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return e.apply(void 0,[T(A(t),t),T(A(n),n)].concat(o))}},Ie=Ee(function(e,t,n,r,o,i){Ae(t,n,r,o,i,s.ENDPOINTS.OVERRIDE_SAVE)});function Se(e,t,n,r,o,i){Ae(t,n,r,o,i,s.ENDPOINTS.PARTIAL_SAVE)}var he=Ee(function(t,n,r,o,i){var a=ee(t,n,i,{settleInServer:!1}),u=e.partial(Pe,t,n,r,o,i),c=e.partial(ve,o);ue(s.ENDPOINTS.VALIDATE,a,n,u,c)});function Pe(e,t,n,r,o,i){i.success?n():r(ce(i))}function Ae(t,n,r,o){var i=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).settleInServer,a=arguments.length>5?arguments[5]:void 0,s=oe(t);i&&(s.metaSiteActions={actions:v.getSettleActionsForFullSave(t)}),ue(a,s,t,e.partial(de,t,n,r,o,{settleInServer:i}),e.partial(ve,r))}var Te=Ee(function(t,n,r,o,i,a){if(e.get(a,"fullPayload"))return Se(0,n,r,o,i,a);var u=ee(t,n,i,a),c=e.partial(pe,t,n,r,o,i,a),l=e.partial(ve,o);ue(s.ENDPOINTS.PARTIAL_SAVE,u,n,c,l)});return{partialSave:Te,fullSave:Ie,validateSite:he,firstSave:function(t,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=oe(n),c=e.assign({},ae(u,n),a.extraPayload),l=e.partial(le,r,o,n,i),p=e.partial(ve,o);ue(s.ENDPOINTS.FIRST_SAVE,c,n,l,p)},saveAsTemplate:function(t,n,r,o){var i=e.partial(fe,r,o),a=e.partial(ve,o);ue(s.ENDPOINTS.SAVE_AS_TEMPLATE,null,n,i,a)},publish:function(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.publishRC?s.ENDPOINTS.PUBLISH_RC:s.ENDPOINTS.PUBLISH,u=e.partial(me,n,r),c=e.partial(ve,r);p.executeHook(p.HOOKS.PUBLISH.BEFORE),ue(a,{},t,u,c)},autosave:function(t,n,o,i){var a=ne(n,"reportingInfo")||{};f.utils.fedopsLogger.interactionStarted(m.INTERACTIONS.AUTOSAVE.CALC_DIFF),h.start(P.AUTOSAVE.CALC_DIFF);var u,c=(u=[t,n],r.apply(r,u.map(re)).toJS());if(f.utils.fedopsLogger.interactionEnded(m.INTERACTIONS.AUTOSAVE.CALC_DIFF),h.finish(P.AUTOSAVE.CALC_DIFF,{additionalData:a,report:!0}),e.isEmpty(c))return o();var l=function(e,t){return{siteId:K(e),metaSiteId:e.getIn(["rendererModel","metaSiteId"]),siteVersion:Q(e),previousDiffId:e.getIn(["documentServicesModel","autoSaveInfo","previousDiffId"])||null,diffPayload:JSON.stringify(t)}}(n,c);f.utils.fedopsLogger.interactionStarted(m.INTERACTIONS.AUTOSAVE.SEND_AJAX),h.start(P.AUTOSAVE.SEND_AJAX),s.sendWithImmutable(n,s.ENDPOINTS.AUTOSAVE,l,function(t){f.utils.fedopsLogger.interactionEnded(m.INTERACTIONS.AUTOSAVE.SEND_AJAX),h.finish(P.AUTOSAVE.SEND_AJAX,{report:!0,additionalData:e.assign({},a,{success:t.success.toString()})}),t.success?o({changes:[{path:["documentServicesModel","autoSaveInfo","previousDiffId"],value:t.payload.diffId}]}):i(ce(t))},ve.bind(null,i))},getChangedPages:function(t,n){var r=n.get("pagesData"),o=t.get("pagesData");return e.map(M(o,r,!0),"id")},getTaskName:function(){return"saveDocument"},shouldRun:function(e,t,n){if("partialSave"===n){var r=function(e,t){return!t.equals(e)}(A(e),A(t));return f.utils.fedopsLogger.breadcrumb("shouldRun",{didSnapShotsChangeFromLastSave:r}),r}return!0},getSnapshotTags:function(e){switch(e){case"partialSave":case"fullSave":case"firstSave":case"saveAsTemplate":return["primary","autosave"];case"autosave":return["autosave"];case"publish":default:return["primary"]}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(13),r=n(25),o=n(147),i=n(24),a=n(2),s=["pagesData","wixapps","editorData","committedMobilePages","textRuntimeLayout","deletedPagesMap","orphanPermanentDataNodes","dockedRuntimeLayout","displayedOnlyComponents","mobileStructures","contactforms_metadata","saveInvalidationCount","pagesPlatformApplications","routers","platform","siteAspectsData","wixCode","mobileConversionHeuristicStrategy"],u=["pagesData"],c={path:r.getApplicationInstanceVersionPath(),optional:!0},l=e.map(["blog","ecommerce","faq","menu"],function(e){return{path:o.getPackageMetaDataPath(e),optional:!0}}),p=["documentServicesModel","rendererModel","serviceTopology","urlFormatModel","runtime","compsToUpdateAnchors","svgShapes","renderFlags","renderRealtimeConfig","rootsRenderedInMobileEditor",c,{path:r.getPackageMetaDataPath(),optional:!0},{path:["origin"],optional:!0},{path:i.paths.NON_UNDOABLE_BASE_PATH,optional:!0},{path:["pagesPlatformApplications","wixCode"],optional:!0},{path:["ghostStructureData"],optional:!0},{path:["devSiteAppDefId"],optional:!0}].concat(l),d=[{path:["platform","appManifest"],innerDepth:1},{path:["platform","appState"],innerDepth:1},{path:["platform","appPublicApiName"],innerDepth:1}];function g(t){return e.isString(t)?[t]:e.isPlainObject(t)?t.path:t}function f(t){return e.map(t,g)}function m(e){return!!e.optional}return s=s.concat(t.getRevertibleMetaDataInfo()),p=p.concat(t.getNonRevertibleMetaDataInfo()),{getWhiteList:function(){return f(s)},getNonUndoableInitialDataPaths:function(){return d},getNonUndoableList:function(){return f(p)},getPathsInJsonData:function(){var t={},n=s.concat(p),r=e.without(n,u);return t[a.JSON_TYPES.DISPLAYED]=e.map(r,function(e){return{path:g(e),optional:m(e)}}),t[a.JSON_TYPES.FULL]=[{path:u,optional:!1}],t},getAutosavePaths:function(){return["rendererModel.pageToHashedPassword","rendererModel.passwordProtectedPages","rendererModel.siteMetaData","pagesData","orphanPermanentDataNodes","documentServicesModel.metaSiteData","documentServicesModel.customHeadTags","routers","pagesPlatformApplications","rendererModel.wixCodeModel"]},getSavePaths:function(){return[["pagesData"],["rendererModel","siteMetaData"],["rendererModel","pageToHashedPassword"],["rendererModel","siteInfo"],["rendererModel","metaSiteId"],["rendererModel","premiumFeatures"],["rendererModel","clientSpecMap"],["rendererModel","wixCodeModel","appData"],["documentServicesModel","siteName"],["documentServicesModel","editorSessionId"],["documentServicesModel","customHeadTags"],["documentServicesModel","metaSiteData"],["orphanPermanentDataNodes"],["routers"],["pagesPlatformApplications"]]}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(e){return["wixapps",e]}return{getPackagePath:t,getPackageDescriptorPath:function(e){return t(e).concat(["descriptor"])},getPackageMetaDataPath:function(n){return e.compact(t(n).concat(["metadata"]))},getBlogTagNamesPath:function(){return["wixapps","blog","tagNames"]},getCategoriesPath:function(n){return e.compact(t(n).concat(["categories","categories"]))},getAppPartDataPath:function(e,n){return t(e).concat([n])},getAppPartExtraDataPath:function(e,n){return t(e).concat(["".concat(n,"_extraData")])}}}()},function(e,t){e.exports=y},function(e,t,n){var r;e.exports=(r=n(0),function(e){return function(t,n,o,i){!function(t,n,o,i){var a=1;e(t,n,function s(u){if(u){var c=n.getIn(["rendererModel","clientSpecMap"]).toJS();!0===u.success?o({changes:[{path:["rendererModel","clientSpecMap"],value:r.assign({},c,u.payload.clientSpecMap)}]}):!1===u.success&&-40103===u.errorCode&&1===a?(a+=1,e(t,n,s,i)):o()}else o()},i)}(t,n,o,i)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(23),r=n(21),o=n(18),i=n(228),a=n(67),s=n(547),u=n(102),c=n(35),l=n(236);function p(t,n){var r=i.getMenu(t),o=function(t,n){var r={isSubPage:!1};return e.forEach(t,function(t){var o=t.items||[];e.forEach(o,function(e){(e.link&&e.link.pageId?e.link.pageId.slice(1):"")===n&&(r={isSubPage:!0,menuItemId:e.id})})}),r}(r,n);o.isSubPage&&i.moveItem(t,o.menuItemId,null,r.length)}function d(t,n){var r=i.getMenu(t),o=function(t,n){var r=[];return e.forEach(t,function(t){var o=e.get(t,"link.pageId");o&&o.slice(1)===n&&(r=t.items)}),r}(r,n);e.forEach(o,function(e,n){i.moveItem(t,e.id,null,r.length+n)})}function g(t,n){var r=function(t){var n=t.pointers.routers.getRoutersConfigMapPointer();return e.map(t.dal.get(n),"prefix")}(t);return e.includes(r,n)}function f(t,n){var o=r.getPagesList(t,!0),i=e.map(o,function(e){return r.getPageUriSEO(t,e)});return e.includes(i,n)}function m(t,n){return e.transform(t,function(e,t){e[t]=n},{})}function v(t,n,i,s){s=e.isArray(s)?s:[s];var u=e.get(t.dal.get(i),"id");r.setPageData(t,u,{hidePage:!0,indexable:!1});var c=t.dal.get(n),l=a.get.byPage(t,i);if(l&&!t.pointers.isSamePointer(n,l))throw new Error("page already exist on another router");if(o.homePage.get(t)===i.id)throw new Error("home page can't become dynamic page");c.pages=l?e(c.pages).omitBy(function(e){return e===u}).assign(m(s,u)).value():e.merge(c.pages||{},e.omitBy(m(s,u),e.isUndefined)),p(t,i.id),d(t,i.id),t.dal.set(n,c)}function y(t,n,i){var a=e.get(t.dal.get(i),"id"),s=t.dal.get(n);if(!(s.pages&&e.includes(e.values(s.pages),a)))throw new Error("the page is not connected to this router");E(t,n,a);var u=r.getPageData(t,a),c=r.getValidPageUriSEO(t,a,u.title);t.siteAPI.getPrimaryPageId()===i.id&&o.navigateTo(t,i.id),r.setPageData(t,a,{pageUriSEO:c,title:u.title,hidePage:!1,indexable:!0})}function E(t,n,r){var o=t.dal.get(n);o.pages=e.omitBy(o.pages,function(e){return r===e}),t.dal.set(n,o)}function I(t){var n=r.getPagesDataItems(t),i=o.homePage.get(t);return e.reduce(n,function(e,n){var r=o.getReference(t,n.id);return function(e,t,n,r){return!("Page"!==t.type||t.tpaApplicationId>0||a.get.byPage(e,r)||n===t.id)}(t,n,i,r)&&e.push({pageRef:r,pageData:n}),e},[])}function S(e,t){return{valid:e,message:t,errorCode:t}}return{add:function(t,n,r){var o=e.clone(r);return o.config?e.isObject(o.config)&&(o.config=JSON.stringify(o.config)):o.config="",function(t,n){if(!n.prefix)throw new Error("Router not valid - Missing prefix.");if(!n.appDefinitionId)throw new Error("Router not valid - Missing appDefinitionId.");if(!e.isNil(n.hide)&&!e.isBoolean(n.hide))throw new Error("Router not valid - hide parameter need to be boolean");if(g(t,n.prefix))throw new Error("Router not valid - Prefix: ".concat(n.prefix,", already exist"));if(f(t,n.prefix))throw new Error("Router not valid - Page Uri SEO: ".concat(n.prefix,", already exist."));if(n.pages)throw new Error("Router not valid - pages should not be on the router object")}(t,o),t.dal.set(n,o),n},remove:function(t,n){var r=a.get.all(t),i=a.get.byRef(t,n),s=e.findKey(r,{prefix:i.prefix});e.forEach(i.pages,function(e){var r=o.getReference(t,e);y(t,n,r)}),delete r[s];var u=t.pointers.routers.getRoutersConfigMapPointer();t.dal.set(u,r)},get:{all:a.get.all,byApp:a.get.byApp,byRef:a.get.byRef,byId:a.get.byId},getRouterRef:{byPrefix:a.get.byPrefix,byPage:a.get.byPage},update:function(t,n,r){var o=t.dal.get(n);if(r.prefix&&r.prefix!==o.prefix){if(g(t,r.prefix))throw new Error("Router not valid - Prefix: ".concat(r.prefix,", already exist"));if(f(t,r.prefix))throw new Error("Router not valid - Page Uri SEO: ".concat(r.prefix,", already exist."));o.prefix=r.prefix}r.config&&(e.isObject(r.config)?o.config=JSON.stringify(r.config):o.config=r.config),e.isBoolean(r.hide)&&r.hide!==o.hide&&(o.hide=r.hide),t.dal.set(n,o)},getRouterDataForPageIfExist:a.getRouterDataForPageIfExist,getPageFromInnerRoute:function(n,o,i,a){var s=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer())[o],c=t.routersBackEndRequests.makeParamObjFromPs(n,s,r);u.fileSystem.flush(n,{origin:u.fileSystem.FLUSH_ORIGINS.ROUTERS_PAGE}).then(function(){t.routersBackEndRequests.getInnerRoutesSiteMap(c,function(t){var n=e.find(t,{url:i});a(n?n.pageName:null)},function(){a()},n.siteDataAPI.siteData)})},getRouterInnerRoutes:function(n,o,i,a){var s=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer())[o],c=t.routersBackEndRequests.makeParamObjFromPs(n,s,r);u.fileSystem.flush(n,{origin:u.fileSystem.FLUSH_ORIGINS.ROUTERS_ROUTES}).then(function(){t.routersBackEndRequests.getInnerRoutesSiteMap(c,function(t){a(e.filter(t,{pageName:i}))},function(){a()},n.siteDataAPI.siteData)})},getCurrentInnerRoute:function(t){var n=t.siteAPI.getPrimaryPageId(),r=a.getRouterDataForPageIfExist(t,n);if(!r)return{isDynamic:!1};var o=t.siteAPI.getRootNavigationInfo();if(o.routerDefinition){if(!o.pageAdditionalData)return{isDynamic:!0,routerId:r.routerId};var i=o.pageAdditionalData.split("/");return{isDynamic:!0,innerRoute:e.drop(i,1).join("/"),routerId:r.routerId}}return{isDynamic:!1}},isValidPrefix:function(t,n,o){if(!o)return S(!1,l.InvalidPrefixReason.PREFIX_CAN_NOT_BE_EMPTY);var i=e.get(c.getAppDataByApplicationId(t,n),"appDefinitionId"),s=function(e,t){var n=a.get.byPrefix(e,t);if(n)return e.dal.get(n).appDefinitionId}(t,o);if(s)return s===i?S(!0,""):S(!1,l.InvalidPrefixReason.PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION);if(r.isPageUriSeoTooLong(o))return S(!1,l.InvalidPrefixReason.PREFIX_IS_TOO_LONG);if(r.isDuplicatePageUriSeo(t,null,o))return S(!1,l.InvalidPrefixReason.PREFIX_IS_DUPLICATE_OF_URI_SEO);if(o.match(/[^A-Za-z0-9-]/g))return S(!1,l.InvalidPrefixReason.PREFIX_CONTAINS_INVALID_CHARACTERS);var u=t.pointers.general.getForbiddenPageUriSEOs();return(t.dal.get(u)||{})[o]?S(!1,l.InvalidPrefixReason.PREFIX_IS_FORBIDDEN_WORD):S(!0,"")},pages:{add:function(e,t,n,r,i){return o.add(e,t,r),v(e,n,t,i),t},connect:v,disconnect:y,removePageFromRouter:E,listConnectablePages:I,isConnectablePage:function(t,n){var r=e.matchesProperty("pageData.id",n);return e.some(I(t),r)},getDynamicPagesList:function(t){return e.map(a.get.all(t),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.appDefinitionId,i=n.pages,a=n.prefix,s=n.group,u=n.hide,l=void 0!==u&&u,p=c.getAppDataByAppDefId(t,o)||{},d=p.appDefinitionName;return{appDefinitionId:o,appDefinitionName:d,prefix:a,group:s,pages:e(i).values().uniq().map(function(e){return r.getPageData(t,e)}).value(),hide:l}})},move:function(t,n,r,o){var i=a.get.byPage(t,n);if(!i)throw new Error("cannot move a static page");if(!t.pointers.isSamePointer(r,i))throw new Error("page is not related to the origin router");var s=t.dal.get(r),u=t.dal.get(o);if(s&&u&&s.appDefinitionId!==u.appDefinitionId)throw new Error("cannot move a page that not related to app");if(!t.pointers.isSamePointer(r,o)){var c,l,p=(c=s.pages,l=n.id,e.invertBy(c)[l]);y(t,r,n),v(t,o,n,p)}}},getRouterPointer:function(t){var n=a.get.all(t),r=s.generateRouterId(n);!function(t){var n=a.get.all(t);if(e.isEmpty(n)){var r=t.pointers.routers.getRoutersPointer();t.dal.set(r,{configMap:{}})}}(t);var o=t.pointers.routers.getRoutersConfigMapPointer();return t.pointers.getInnerPointer(o,r),t.pointers.routers.getRouterPointer(r)},getPageToAddPointer:function(e){return o.getPageIdToAdd(e)}}}()},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w,b,M,R,N,x,L,B,k,F,U,H,V,W,G,z,j,Y,K,q,Q,X,Z,J,$,ee,te,ne;e.exports=(a=n(0),s=n(1),u=n(38),c=n(5),l=n(28),p=n(6),d=n(4),g=n(11),f=n(18),m=n(178),v=n(230),y=n(543),E=n(113),I=n(112),S=n(157),h=n(37),P=n(14),A=n(100),T=n(111),O=n(69),C=n(152),_=n(544),D=n(80),w=n(30),b=n(545),M=n(33),R=n(56),N=n(81),x=n(192),L=n(191),B=n(156),k=n(233),F=n(232),U=n(234),H=n(155),V=n(235),W=!1,G=function(e,t,n){if(l.isFirstSave(e)&&c.isOpen("ds_tpaTranslateHiddenPagesTitle")){var r=f.getPagesDataItems(e);a.forEach(r,function(r){if(r.tpaApplicationId>0&&r.tpaPageId){var o=a.get(t,r.tpaApplicationId);if(o){var i=a.find(o.widgets,function(e){return a.get(e,"appPage.id")===r.tpaPageId});if(a.get(i,"appPage.hidden")){var s=a.find(n,{appDefinitionId:o.appDefinitionId}),u=a.find(a.get(s,"widgets"),{widgetId:i.widgetId}),c=a.get(u,"title");c&&f.data.set(e,r.id,{title:c})}}}})}},z=function(e,t){return P.isPremiumApp(e,t)},j=function(e,t,n){return P.getWidgetDataFromTPAPageId(e,t,n)},Y=function(e,t,n){R.registerThemeChangeHandler(e,t,n)},K=function(e,t){return P.getAppData(e,t)},q=function(e,t,n){return h.isAppInstalledBy(e,t,n)},Q=function(e,t,n,r){return h.isAppInstalledOnPage(e,t,n,r)},X=function(e,t){var n=a(Z(e,t)).map(function(t){return d.data.get(e,t)}).filter(function(t){return P.isPremiumApp(e,t.applicationId)}).map(function(t){return P.getAppData(e,t.applicationId)}).value();return a.uniqBy(n,"applicationId")},Z=function(e,t){t=a.isArray(t)?t:[t];var n=[];return a.forEach(t,function(t){var r=d.getType(e,t);M.isTpaByCompType(r)&&n.push(t),n=n.concat(d.getTpaChildren(e,t))}),n},J=function(e,t){return P.isAppPermissionsIsRevoked(t)},$=function(e){var t=f.getPageIdList(e,!1,!1),n=a(t).map(function(t){return f.data.get(e,t)}).filter("tpaApplicationId").reject("pageUriSEO").value();a.forEach(n,function(t){var n=P.getAppData(e,t.tpaApplicationId),r=j(e,n.appDefinitionId,t.tpaPageId);if(r){var o=E.getPageUriSEO(e,a.get(r,"appPage.name"));f.data.set(e,t.id,{pageUriSEO:o})}})},ee=function(e){W=e},te=function(e,t){p.unregisterHooks(p.HOOKS.ADD_TPA.COMPONENT_DEFINITION_MODIFIER),a.isFunction(t)&&p.registerHook(p.HOOKS.ADD_TPA.COMPONENT_DEFINITION_MODIFIER,function(e,n){var r=t({containerRef:n,layout:e.layout,style:e.style,componentType:e.componentType,appDefinitionId:a.get(e,"data.appDefinitionId")||"",skin:e.skin});a.assign(e,o({},r.layout?{layout:r.layout}:{},{},r.layoutResponsive?{layoutResponsive:r.layoutResponsive}:{},{},r.style?{style:r.style}:{},{skin:r.skin||e.skin})),a.assign(n,o({},r.containerRef?r.containerRef:{}))})},ne={initialize:function(e,t){s.loggingUtils.performance.start(s.loggingUtils.performanceMetrics.TPA.INITIALIZE),t&&t.runStylesGC&&B.runGarbageCollection(e);var n=e.dal.get(e.pointers.general.getClientSpecMap());m.setMeasuringForType("wysiwyg.viewer.components.tpapps.TPAGluedWidget",u.gluedWidgetMeasuringUtils.getGluedWidgetMeasurements.bind(null,n)),U.settpads(ne),k.init(e),V.init(e),ee(!0),O.settleOnLoad(e),O.preSaveAddAppsOnLoad(e),$(e),A.getSectionsTranslatedPageTitles(e).then(function(t){C.init(t),G(e,n,t)}),s.loggingUtils.performance.finish(s.loggingUtils.performanceMetrics.TPA.INITIALIZE)},isTpaByCompType:function(e,t){return M.isTpaByCompType(t)},setDeviceType:function(e,t){["desktop","mobile"].includes(t)?v.setCompPreviewDataForAllTPA(e,"deviceTypeForTPA",t):console.error("".concat(t," is invalid device type! use {desktop, mobile}"))},addApp:v.addAppWrapper,getCompToAddWithOptionalCustomIdRef:function(e,t,n){return d.getComponentToAddRef(e,t,n,a.get(n,"optionalCustomId"))},onProvisionSucceeded:function(e,t,n,r){P.registerAppData(e,t);var o=h.getAllAppCompsByAppId(e,n);v.refreshApp(e,o),r&&r()},isPageMarkedAsHideFromMenu:function(e,t,n){var r=K(e,t);return u.common.utils.isPageMarkedAsHideFromMenu(r,n)},isContainerContainsPremiumTpa:function(e,t){var n=X(e,t);return!a.isEmpty(n)},getPremiumTpaChildren:X,getTpaPointersRecursive:Z,getPremiumTpaChildrenOnPage:function(e,t,n,r){var o=X(e,t);return r?a.reject(o,function(t){if(!n||n!==t.applicationId)return P.hasSections(e,t)}):o},closePopupsAndModal:function(e){e.siteAPI.removeAllPopups(),e.siteAPI.removeModal()},addSystemApp:a.partial(v.addAppWrapper,w.TYPE.TPA_WIDGET),provisionSystemApp:function(e,t,n,r){var o=P.getAppDataByAppDefinitionId(e,n);if(o&&!J(e,o)){var i=a.get(r,"widgetId"),s=o.widgets[i];if(!(I.isGlued(s)?Q(e,"masterPage",n):q(e,n)))return v.provisionWidget(e,t,n,{widgetId:i}),void D.add(o)}e.setOperationsQueue.asyncPreDataManipulationComplete({dontAdd:!0})},addOriginCompIdToWidgetsOnPage:function(e,t){!function e(t){a.forEach(t.components,function(t){t.componentType===w.COMP_TYPES.TPA_WIDGET&&(t.originCompId=t.id),e(t)})}(t)},widget:{add:a.partial(v.addAppWrapper,w.TYPE.TPA_WIDGET),provisionWidget:v.provisionWidget,delete:I.deleteWidget,notifyBeforeDelete:I.notifyBeforeWidgetDelete,getPagesToBeDeleted:I.getPagesToBeRemovedWithWidget,duplicate:function(e,t,n){I.duplicateWidget(e,t,n)}},section:{add:v.addSection,provisionSection:v.provisionSection,addMultiSection:v.addMultiSection,provisionMultiSection:v.provisionMultiSection,addSubSection:v.addSubSection,delete:S.actualDeleteSection,notifyBeforeDelete:S.notifyDeleteSection,alreadyInstalled:function(e,t){return S.alreadyInstalled(e,t)},isSectionInstalledByTpaPageId:h.isSectionInstalledByTpaPageId,getPageData:function(e,t){var n,r=f.data.get(e,t),o=r.tpaApplicationId>0;return o&&(n=P.getAppData(e,r.tpaApplicationId)),{title:r.title,hasSection:o,appData:n}},getSectionRefByPageId:function(e,t){return v.getSectionRefByPageId(e,t)}},app:{provisionApp:y.provisionApp,add:y.addApp,getData:K,getDataByAppDefId:function(e,t){return P.getAppDataByAppDefinitionId(e,t)},isHybrid:function(e,t){return P.isHybridApp(e,t)},isDashboardAppOnly:function(e,t){var n=t&&K(e,t);return P.isDashboardAppOnly(n)},isPremium:z,hasPremiumOffering:function(e,t){return P.hasPremiumOffering(e,t)},isPremiumByAppDefinitionId:function(e,t){var n=P.getAppDataByAppDefinitionId(e,t);return!!n&&z(e,n.applicationId)},isLastAppComp:function(e,t){var n=h.getAllAppCompsByAppId(e,t);return n&&1===n.length},isInstalled:q,getWidgetDataFromTPAPageId:j,getWidgetDataFromTPAWidgetId:function(e,t,n){return P.getWidgetDataFromTPAWidgetId(e,t,n)},registerOnInstalled:function(e,t,n){N.registerOnAppInstalled(t,n)},registerOnDeleted:function(e,t,n){N.registerOnAppDeleted(t,n)},getRenderedReactCompsByApplicationId:h.getAllAppCompsByAppId,getAllCompsByApplicationId:h.getAllAppCompsByAppId,hasSections:P.hasSections,getDefaultLayout:v.getDefaultLayout,url:{getSettingsUrl:b.getSettingsUrl,getSettingsModalUrl:b.getSettingsModalUrl},getExtensionsWidgets:function(e,t){return P.getExtensionsWidgets(e,t)},getInstalledDependentAppsData:h.getInstalledDependentAppsData,getFirstAppCompPageId:function(e,t,n){return h.getFirstAppCompPageId(e,t,n)},refreshApp:function(e,t,n){v.refreshApp(e,t,n)},shouldDeleteWholeApp:S.shouldDeleteWholeApp,isMultiSectionInstalled:function(e,t){return h.isMultiSectionInstalled(e,t)},getSections:function(e,t){var n=h.getAllAppCompsByAppId(e,t);return a.filter(n,function(e){return e.type===w.DATA_TYPE.TPA_SECTION||e.type===w.DATA_TYPE.TPA_MULTI_SECTION})},isAppProvisionedOnServer:P.isAppProvisionedOnServer,isPermissionsRevoked:J,getMainSectionWidgetDataFromApplicationId:P.getMainSectionWidgetDataFromApplicationId,getMainSectionWidgetData:P.getMainSectionWidgetData,getSectionsToAutoInstallWidgetData:P.getAppSectionsToInstall,hasMainSection:P.hasMainSection,isSuperAppByCompId:function(e,t){return P.isSuperAppByCompId(e,t)},hasEditorPlatformPart:function(e,t){return P.hasEditorPlatformPart(t)},delete:function(e,t,n,r,o){H.actualDeleteApps(e,t,n).then(r,function(){o({error:"error when deleting app"})})},notifyBeforeApplicationDelete:function(e,t){var n=H.notifyAppsToDelete(e,t,!0);e.setOperationsQueue.asyncPreDataManipulationComplete(n)}},change:{editMode:function(e,t){R.editModeChange(t)},siteSaved:function(){R.siteSaved()},sitePublished:function(){R.sitePublished()},deviceType:function(e,t){R.deviceTypeChange(t)},register:{editorEventHandler:function(e,t,n){R.registerEditorEventHandler(t,n)},compLoadedHandler:function(e,t){R.registerCompLoaded(t)},deleteCompHandler:function(e,t,n){R.registerDeleteCompHandler(t,n)},editModeChangeHandler:function(e,t,n){R.registerEditModeChangeHandler(t,n)},deviceTypeChangeHandler:function(e,t,n){R.registerDeviceTypeChangeHandler(t,n)},themeChangeHandler:Y,windowPlacementChangedHandler:function(e,t,n){R.registerWindowPlacementChangedHandler(t,n)},settingsUpdatedHandler:function(e,t,n){R.registerSettingsUpdatedHandler(t,n)},registerPublicDataChangedHandler:function(e,t,n,r){R.registerPublicDataChangedHandler(t,n,r)},sitePublishedHandler:function(e,t,n){R.registerSitePublishedHandler(t,n)},siteSavedHandler:function(e,t,n){R.registerSiteSavedHandler(t,n)}},trigger:{editorEvent:function(e,t){R.triggerEditorEvent(t)},windowPlacement:function(e,t){R.triggerOnWindowPlacementChanged(t)},settingsUpdated:function(e,t,n,r){v.settingsUpdated(e,t,n,r)}}},getComponentDefinition:function(e,t){return _.getComponentDefinition(t)},getSettingsModalParams:function(e,t,n){return b.getSettingsModalParams(e,t,n)},pending:{add:D.addPendingDashboardApp,dismiss:D.dismiss,getPendingApps:D.getPendingAppsFromSiteMetaData},preAdd:{setComponentDefinitionModifier:te,setComponentLayoutModifier:te},getPendingApps:D.getPendingApps,getPremiumPendingApps:D.getPremiumPendingApps,appMarket:{getData:A.getAppMarketData,getDataForPage:A.getAppMarketDataForPage,getDataAsync:A.getAppMarketDataAsync,getUrl:A.getAppMarketUrl,getInfoUrl:A.getAppMarketInfoUrl,getAppReviewsUrl:A.getAppReviewsUrl,getPermissionsUrl:A.getAppMarketPermissionsUrl,getRelatedApps:A.getRelatedApps,getPackages:A.getPackages},billing:{getPremiumApps:A.getPremiumApps,getSiteUpgradeUrl:L.getSiteUpgradeUrl,getAppUpgradeUrl:L.getAppUpgradeUrl},style:{setParamOldSDK:function(e,t,n){Y(e,n,function(t){v.postBackThemeData(e,n,t)})},setStyleParam:F.setStyleParam,setStyleParamData:F.setStyleParamData,mapWixParamsToCssValues:F.mapWixParamsToCssValues,get:function(e,t){return F.getStyleDataToPassIntoApp(e,t)},postBackThemeData:v.postBackThemeData,getNameToFontsKeyMap:function(){return u.common.styleUtils.getNameToFontsKeyMap()},getTpaColorsToSiteColors:F.getTpaColorsToSiteColors},provision:{provisionAppDemoSave:v.provisionAppDemoSave,refreshAppSpecMap:T.refreshSpecMap},constants:w,bi:{errors:x,sendBIEvent:function(e,t,n){M.sendBIEvent(e,t,n)}},comp:{resize:function(e,t,n,r,o){if(g.isHorizontallyStretchedToScreen(e,t))o({onError:"component is already set to full width"});else{var i=d.layout.get(e,t);g.updateCompLayout(e,t,a.defaults({width:n,height:r},{width:i.width,height:i.height})),e.siteAPI.forceUpdate(),o({width:(i=d.layout.get(e,t)).width,height:i.height})}},setExternalId:function(e,t,n,r,o){v.setExternalId(e,t,n,r,o)},getExternalId:function(e,t){return v.getExternalId(e,t)},postMessageBackToApp:v.postMessageBackToApp,isInstalled:h.isAppComponentInstalled,add:y.addComponent,provisionComp:y.provisionComp},data:{set:B.set,app:{get:B.getAppValue,getMulti:B.getAppValues},comp:{get:B.getComponentValue,getMulti:B.getComponentValues},getPublicData:B.getPublicData,remove:B.remove,SCOPE:B.SCOPE,get:B.get,getMulti:B.getMulti},__privates:{fixEcomIfNeeded:function(e,t){var n=P.getAppsData(e),r="1380b703-ce81-ff05-f115-39571d94dfcd",o=a.find(n,{appDefinitionId:r});if(o&&h.isAppInstalledBy(e,r)){var i,s,u=e.pointers.data.getDataItemsWithPredicate({tpaApplicationId:o.applicationId},"masterPage").map(e.dal.get),c=P.getAppSections(void 0,o),l=a(c).map("appPage").map("id").value(),p=a.map(u,"tpaPageId"),d=P.getMainSectionWidgetData(void 0,o).appPage.id,g=a.some(u,function(e){return a.startsWith(e.tpaPageId,d)});if(g){s=a.reject(l,function(e){return a.startsWith(e,d)});var f=a.reject(p,function(e){return a.startsWith(e,d)});i=a.intersection(s,f)}g?a.isEqual(i,s)||E.addHiddenPages(e,o):a.isEqual(i,s)&&0!==a.size(u)||v.provisionSection(e,t,r)}},areDocumentServicesHandlersReady:function(){return W},fixProGallery:function(e){var t=P.getAppsData(e),n=a.find(t,{appDefinitionId:"14271d6f-ba62-d045-549b-ab972ae1f70e"});n&&h.isAppInstalledBy(e,"14271d6f-ba62-d045-549b-ab972ae1f70e")&&(e.pointers.data.getDataItemWithPredicate({tpaApplicationId:n.applicationId},"masterPage")||E.addHiddenPages(e,n))}}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=[],{init:function(e){o=e},getTitle:function(e,t){var n=r.find(o,{appDefinitionId:e});if(n){var i=r.find(n.widgets,{widgetId:t});return r.get(i,"title","")}return""}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(38),r=n(30),o=n(21),i=n(134),a=n(14),s=n(9),u=n(4),c=function(t,n,r,o,i,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,p=n.applicationId,d={w:980,h:500},g={componentType:"mobile.core.components.Page",type:"Page",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:d.w,height:d.h,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:u,hidePage:e.isBoolean(i)?i:void 0,mobileHidePage:null,underConstruction:!1,tpaApplicationId:p,indexable:!e.isBoolean(a)||a,tpaPageId:o,pageBackgrounds:l(t,n),isLandingPage:!!e.isBoolean(s.desktop)&&s.desktop,isMobileLandingPage:!!e.isBoolean(s.mobile)&&s.mobile},components:[]};return c&&(g.data.pageSecurity={requireLogin:!0,dialogLanguage:"en"}),g},l=function(t,n){return e.get(n,"appPage.hideFromMenu")?i.getBlankBackground():e.get(o.getPageDataWithoutIds(t,t.siteAPI.getPrimaryPageId()),"pageBackgrounds")};function p(t){return{desktop:t.appPage.fullPage||e.get(t,"componentFields.fullPageDesktopOnly"),mobile:t.appPage.landingPageInMobile}}return{getSectionStructure:c,getWidgetStructure:function(e,t,n,o,i){return{layout:{width:o&&o.width,height:o&&o.height,x:o&&o.x,y:o&&o.y,anchors:[]},data:{widgetId:n,applicationId:e.toString(),appDefinitionId:t,type:r.DATA_TYPE.TPA_WIDGET,metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},type:"Component",skin:r.SKINS.TPA_WIDGET,componentType:r.COMP_TYPES.TPA_WIDGET,style:i||r.STYLE.TPA_WIDGET}},getGluedWidgetStructure:function(e,t,n,o,i){return{layout:{width:o&&o.width||300,height:o&&o.height||200,x:o&&o.x||300,y:o&&o.y||120,anchors:[],fixedPosition:!0},data:{widgetId:n.widgetId,applicationId:e.toString(),appDefinitionId:t,type:r.DATA_TYPE.TPA_WIDGET,metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},type:"Component",skin:r.SKINS.TPA_WIDGET,componentType:r.COMP_TYPES.TPA_GLUED_WIDGET,style:i||r.STYLE.TPA_GLUED_WIDGET,props:{placement:n.gluedOptions.placement,verticalMargin:n.gluedOptions.verticalMargin,horizontalMargin:n.gluedOptions.horizontalMargin,type:"TPAGluedProperties",metaData:{schemaVersion:"1.0"}}}},getSubSectionStructure:function(e,t,n,r,o,i){var s=p(t),u=a.computeHidePage(t,i,!0),l=c(e,t,n,t.appPage.id,u,t.appPage.indexable,s,r,o);return l.data.title=t.appPage.name,l},getMultiSectionStructure:function(e,n,r,o,i,s){var u=p(n),l=n.appPage.id+t.common.utils.Constants.MULTI_SECTION_DELIMITER+r,d=a.computeHidePage(n,s,!1);return c(e,n,r,l,d,n.appPage.indexable,u,o,i)},convertStyleIdToStyleDef:function(t,n){var r=n.style;if(e.isString(r)){var o=s.styles.getAllFromAllPages(t)[r];if(!o){var i=u.getDefinition(t,n.componentType);return void(n.style=e(i.styles).keys().head())}"custom"===o.styleType&&(n.style=e.omit(o,["id"]))}}}}()},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){var e=n(0),t=n(135),o=n(6),i=n(34),a=n(541),s=n(136),u=n(14),c=n(69),l=n(137),p=n(32);function d(t,n,r,a,c){var l=e.get(a,"reportProgress");l&&l({step:"clientSpecMap"}),function(e,t){var n=t.appDefinitionId,r=t.version,o=u.getAppDataByAppDefinitionId(e,n);return o&&o.version===r}(t,c)||(c.pendingAction=p.APP_ACTION_TYPES.UPDATE,i.registerAppData(t,c)),s.notifyAppUpdated(c.applicationId,a,function(e){var i=c.appDefinitionId,a=c.version;g(e,t,i,a).then(function(){o.executeHook(o.HOOKS.PLATFORM.APP_UPDATED,"",[t,c]),n(c)},function(){o.executeHook(o.HOOKS.PLATFORM.APP_UPDATED,"",[t,c]),r(c)})})}var g=function(t,n,r,o){return e.get(t,"success")?a.installCollections(n,r,o):Promise.reject()};function f(n,a,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=arguments.length>4?arguments[4]:void 0,m=e.get(f,"appDefinitionId"),v=u.getAppDataByAppDefinitionId(n,m);u.isAppActive(v)||(f.notProvisioned=!0,i.registerAppData(n,f));f.firstInstall=!0,f.origin=e.get(d,"origin"),f.origin&&"object"===r(f.origin)||(f.origin={}),f.origin.type=l.getEditorType();var y=n.dal.get(n.pointers.general.getServiceTopology()),E=t.specMapUtils.resolveEditorScriptUrl(f,{clientSpec:f,serviceTopology:y});s.addApp(n,E,function(t){var r=e.assign(E,t||{}),s=e.get(f,"version");g(r,n,m,s).then(function(){o.executeHook(o.HOOKS.PLATFORM.APP_PROVISIONED,"",[n]),a(r)},function(){i.registerAppData(n,e.defaults({pendingAction:p.APP_ACTION_TYPES.REMOVE},f)),o.executeHook(o.HOOKS.PLATFORM.APP_PROVISIONED,"",[n]),c(e.defaults({success:!1},r))})})}return{provision:function(t,n,r){return new Promise(function(o,i){s.isInitiated()?function(t,n,r,o,i){var a=u.getAppDataByAppDefinitionId(t,n);u.isAppActive(a)?f(t,o,i,r,a):c.preSaveAddApp(t,n,e.partial(f,t,o,i,r),i,e.get(r,"appVersion"))}(t,n,r,o,i):i()})},update:function(t,n,r,o){return new Promise(function(i,a){s.isInitiated()?function(t,n,r,o,i,a){var s=u.getAppData(t,n);s?r!==s.version?c.preSaveAddApp(t,s.appDefinitionId,e.partial(d,t,i,a,o),a,r):d(t,i,a,o,s):a("Application with the given applicationId is not installed. Please provision before updating")}(t,n,r,o,i,a):a(new Error("workerService is not initiated"))})}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P;e.exports=(r=n(0),o=n(18),i=n(4),a=n(14),s=n(37),u=n(30),c=n(7),l=n(81),p=n(35),g=function(e,t,n){var o=d(e,n),i=function(e,t,n){var o=s.getWidgetsByAppId(e,t);return r.reject(o,function(e){return r.includes(n,e.pageId)})}(e,t,n),a=r.union(o,i);return f(e,a)},m=function(e,t,n){var i=r.map(s.getInstalledDependentAppsData(e,t),"applicationId");n&&(i=r.union([t],i));var a=s.getPagesByApplicationIds(e,i);return r.forEach(i,function(t){var n=r(a).filter({tpaApplicationId:t}).map("id").value();!function(e,t,n){var i=g(e,t,n);r.forEach(i,function(t){y(e,t.compPointer,t.applicationId)}),r.forEach(n,function(t){o.validatePageRemovalInternal(e,t)})}(e,t,n)}),{appsPagesToDelete:a,appIdsToDelete:i}},v=function(e,t,n,o){var i=r.filter(e,{widgetId:I(t,n)});return i&&1===i.length&&i[0].id===o.id},y=function(e,t,n,a){var u=s.getWidgetsByAppId(e,n);v(u,e,n,t)&&(!function(e,t){var n=s.getHiddenSections(e,t);r.forEach(n,function(t){o.validatePageRemovalInternal(e,t.pageId)})}(e,n),E(e,n,u),m(e,n)),i.validateRemovalInternal(e,t,a)},E=function(e,t,n){var o=r.reject(n,{widgetId:I(e,t)});r.forEach(o,function(t){var n=c.getComponentById(e,t.id,t.pageId);i.validateRemovalInternal(e,n)})},I=function(e,t){var n=a.getAppData(e,t);if(n){var o=r.find(n.widgets,{default:!0});return r.get(o,"widgetId")}},S=function(e,t,n){var u=t.appsPagesToDelete,l=t.appIdsToDelete;if(!u){var d=r.map(s.getInstalledDependentAppsData(e,n),"applicationId");u=s.getPagesByApplicationIds(e,d),l=d}var f=[];return r.forEach(l,function(t){var n=r.filter(u,{tpaApplicationId:t});f.push(function(e,t,n){var i=r.map(n,"id"),s=g(e,t,i);return r.forEach(s,function(t){h(e,t.compPointer,t.applicationId),r.invoke(e.dal,"commitTransaction")}),r.forEach(i,function(t){o.remove(e,t)}),a.hasEditorPlatformPart(a.getAppData(e,t))?p.remove(e,t):Promise.resolve()}(e,t,n))}),Promise.all(f).then(function(){var t=s.getWidgetsByAppId(e,n);r.forEach(t,function(t){var n=c.getComponentById(e,t.id,t.pageId);e.dal.isExist(n)&&i.deleteComponent(e,n)})})},h=function(e,t,n){var a=s.getWidgetsByAppId(e,n);v(a,e,n,t)&&(!function(e,t){var n=s.getHiddenSections(e,t);r.forEach(n,function(t){o.remove(e,t.pageId)})}(e,n),P(e,n,a),S(e,{},n)),e.dal.isExist(t)&&i.deleteComponent(e,t)},P=function(e,t,n){var o=r.reject(n,{widgetId:I(e,t)});r.forEach(o,function(t){var n=c.getComponentById(e,t.id,t.pageId);i.deleteComponent(e,n)})},{notifyAppsToDelete:m,actualDeleteApps:S,notifyWidgetAboutToDelete:y,deleteWidget:h,deleteTpaCompleteCallback:function(e,t){r.forEach(t,function(t){if(!s.isApplicationIdExists(e,t)){var n=a.getAppData(e,t);l.invokeDeleteAppCallbacks(n.appDefinitionId)}})},getWidgetCompsToDeleteMap:f=function(e,t){return r.map(t,function(t){var n=o.getPage(e,t.pageId);return{compPointer:e.pointers.components.getComponent(t.id,n),applicationId:t.applicationId}})},getWidgetsOnPagesToDelete:d=function(e,t){return r.reduce(t,function(t,n){var o=s.getAllTpaCompsOnPage(e,n),i=r.filter(o,{type:u.DATA_TYPE.TPA_WIDGET});return r.union(t,i)},[])},isLastInstalledMainWidget:v})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T;e.exports=(r=n(0),o=n(1),i=n(3),a=n(4),s=n(37),u=n(14),c=n(56),p=function(e){var t=e.tpaData;return t&&(t.content=t.content?JSON.parse(t.content):{}),t},d=function(e,t,n,r,o,i,a){var s=t?t.id:"tpaData-"+i;t||(t={type:"TPAGlobalData",id:s,content:{}}),t.appDefinitionId=a;var u=A(e,s,t,"masterPage",n,r,1e3);u?(o&&o(u),g(e,l.APP,i,null,u)):E(o,"Your app has exceeded the provided ".concat(1e3," bytes storage space"))},g=function(e,t,n,r,o){t===l.APP?c.callPublicDataChangedCallbackForAllAppRegisteredComps(n,o):c.callPublicDataChangedCallback(r,n,o)},f=function(e,t,n,i,s,c,p){var d=e.pointers.components.getPageOfComponent(i).id,f=a.data.get(e,i,null,!0),m=n?n.id:o.guidUtils.getUniqueId("tpaData-"),v=u.getAppData(e,f.applicationId),y=400;r.get(v,"isWixTPA")&&(y=2e3),n||(n={type:"TPAData",id:m,content:{}});var I=A(e,m,n,d,s,c,y);I?(f.tpaData="#".concat(m),a.data.update(e,i,f,!0),p&&p(I),g(e,l.COMPONENT,f.applicationId,i.id,I)):E(p,"Your app has exceeded the provided ".concat(y," chars storage space"))},m=function(e,t,n,o){var i=t?r.pick(t.content,e):null;r.isEmpty(i)?E(n,"key ".concat(e," not found in ").concat(o," scope")):n(i)},v=function(e,t,n,o,a,s,u,c){if(h(t,n)){var l=r.pick(t.content,n);t.content=JSON.stringify(r.omit(t.content,n)),i.addSerializedDataItemToPage(e,o,t,t.id),a(l),g(e,s,u,c,l)}else E(a,"key ".concat(n," not found in ").concat(s," scope"))},y=function(e,t,n,o){var i=r.map(e,function(e){return"".concat(e)});if(!r.isEmpty(t)&&r(t).keys().isEqual(i))n(t);else{var a=r.keys(t),s=r(a).xor(e).intersection(e).value();E(n,"keys ".concat(s," not found in ").concat(o," scope"))}},E=function(e,t){e({error:{message:t}})},I=function(e){return e===l.APP},S=function(e){return!!(r.isBoolean(e)||r.isString(e)||r.isNumber(e)||r.isPlainObject(e))},h=function(e,t){return!!e&&r(e.content).keys().includes(t.toString())},P=function(e,t){var n="tpaData-"+t,r=e.pointers.data.getDataItem(n,"masterPage"),o=e.dal.get(r);return o&&(o.content=o.content?JSON.parse(o.content):{}),o},A=function(e,t,n,o,a,s,u){n.content[a]=s;var c=n.content,l=JSON.stringify(n.content);return function(e,t){try{return!(e.length>t)}catch(e){return!1}}(l,u)?(n.content=l,i.addSerializedDataItemToPage(e,o,n,n.id,!0),r.pick(c,a)):null},T=function(e,t){e.dal.remove(e.pointers.data.getDataItem(t,"masterPage"))},{set:function(e,t,n,r,o,i){if(S(r)){var s=a.data.get(e,t,null,!0),u=p(s),c=P(e,s.applicationId);I(o)?d(e,c,n,r,i,s.applicationId,s.appDefinitionId):f(e,c,u,t,n,r,i)}else E(i,"Invalid value: value should be of type: string, boolean, number or Json")},getAppValue:function(e,t,n,r){var o=P(e,t);m(n,o,r,l.APP)},getAppValues:function(e,t,n,o){n=r.uniq(n);var i=P(e,t),a=i?r.pick(i.content,n):null;y(n,a,o,l.APP)},getPublicData:function(e,t,n,o){o({APP:r.get(P(e,t),"content"),COMPONENT:r.get(p(a.data.get(e,n,null,!0)),"content")})},get:function(e,t,n,o,i){var s,u=a.data.get(e,t,null,!0);if(I(o)){var c=P(e,u.applicationId);s=c?r.pick(c.content,n):null}else{var l=p(u);s=l?r.pick(l.content,n):null}r.isEmpty(s)?E(i,"key ".concat(n," not found in ").concat(o," scope")):i(s)},getMulti:function(e,t,n,o,i){var s,u=a.data.get(e,t,null,!0);if(n=r.uniq(n),I(o)){var c=P(e,u.applicationId);s=c?r.pick(c.content,n):null}else{var l=p(u);s=l?r.pick(l.content,n):null}var d=r.map(n,function(e){return"".concat(e)});if(!r.isEmpty(s)&&r(s).keys().isEqual(d))i(s);else{var g=r.keys(s),f=r(g).xor(n).intersection(n).value();E(i,"keys ".concat(f," not found in ").concat(o," scope"))}},remove:function(e,t,n,r,o){var i=a.data.get(e,t,null,!0);if(I(r)){var s=P(e,i.applicationId);v(e,s,n,"masterPage",o,r,i.applicationId,t.id)}else{var u=e.pointers.components.getPageOfComponent(t).id,c=p(i);v(e,c,n,u,o,r,i.applicationId,t.id)}},getComponentValue:function(e,t,n,r){var o=a.data.get(e,t,null,!0),i=p(o);m(n,i,r,l.COMPONENT)},getComponentValues:function(e,t,n,o){var i=a.data.get(e,t,null,!0);n=r.uniq(n);var s=p(i),u=s?r.pick(s.content,n):null;y(n,u,o,l.COMPONENT)},runGarbageCollection:function(e){var t=function(e){var t=s.getDeletedAppsIds(e);return r(t).map(function(e){return"tpaData-"+e}).filter(function(t){return function(e,t){var n=e.pointers.data.getDataItem(t,"masterPage");return!!e.dal.isExist(n)}(e,t)}).value()}(e);if(!r.isEmpty(t)){var n=e.dal.get(e.pointers.general.getOrphanPermanentDataNodes());n=n.concat(t),e.dal.set(e.pointers.general.getOrphanPermanentDataNodes(),n),r.forEach(t,T.bind(null,e))}},SCOPE:l={APP:"APP",COMPONENT:"COMPONENT"}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I;e.exports=(r=n(0),o=n(18),i=n(4),a=n(81),s=n(37),u=n(14),c=n(112),l=n(113),p=n(155),d=n(152),g=n(153),f=n(30),m=function(e,t,n){var o={name:t.appDefinitionName};return r.forEach(t.widgets,function(i){if(i.appPage&&i.appPage.name&&!i.appPage.hidden){o=r.clone(i.appPage);var a=n||i.appPage.name;o.name=n||d.getTitle(t.appDefinitionId,i.widgetId)||o.name,o.pageUriSEO=l.getPageUriSEO(e,a),o=r.merge(o,i)}}),o},y=function(e,t,n,o){var a=u.widgetsToAutoAddToSite(e,t),s=[];return r.forEach(a,function(r){var a=i.getComponentToAddRef(e,n),u=c.addWidgetAfterProvision(e,a,{widgetId:r.widgetId,componentOptions:o},t);s.push(u)}),s},I=function(e,t){return!s.isMainSectionInstalled(e,t.applicationId)},{shouldDeleteWholeApp:E=function(e,t){var n=s.isMultiSectionPage(e,t),o=u.isPageMarkedAsShouldDeleteAppWhenDeleted(e,t);if(n&&!o)return!1;var i=s.isMultiSectionInstalled(e,r.get(t,"tpaApplicationId")),a=u.isPageMarkedAsAutoAddToSite(e,t);return!i&&(!(!1===a)||o)},addSectionAfterProvision:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=(arguments.length>4&&arguments[4],arguments.length>5?arguments[5]:void 0);if(I(e,o)){var c=[t],p=n.sectionId,d=r.find(o.widgets,{default:!0});l.addSectionComponentOptionsIfNeeded(r.get(d,"appPage.id"),n);var E=m(e,o,n.title),S={desktop:E.fullPage||r.get(d,"componentFields.fullPageDesktopOnly"),mobile:E.landingPageInMobile},h=u.computeHidePage(E,n.isHidden,!1),P=g.getSectionStructure(e,o,p,E.id,h,E.indexable,S,E.pageUriSEO,n.requireLogin),A=!s.isApplicationIdExists(e,o.applicationId),T=l.addPageAndSection(e,t,p,o.applicationId,o.appDefinitionId,E,P,E.widgetId||null,f.COMP_TYPES.TPA_SECTION,f.DATA_TYPE.TPA_SECTION,n),O=l.addHiddenPages(e,o,n.componentOptions),C=y(e,o,t,n.componentOptions);c=c.concat([T],C,O),A&&a.invokeAddAppCallbacks(o.appDefinitionId),l.setPrefetchPageBehaviorIfNeeded(e,T,o),e.setOperationsQueue.executeAfterCurrentOperationDone(function(){l.addPlatformAppIfNeeded(e,o,n).then(r.partial(v,n,t,p,!0,c)).catch(r.partial(v,n,t,p,!1,c))})}else i(e,new Error("section already installed"))},addMultiSection:function(e,t,n){l.addSectionComponentOptionsIfNeeded(n.widgetData.appPage.id,n);var o=n.widgetData,i=n.sectionId,a=n.appDefinitionId,s=n.applicationId,u=n.title,c=n.requireLogin,p=n.isHidden;o.applicationId=s,o.name=u||d.getTitle(a,o.widgetId)||o.appPage.name;var m=l.getPageUriSEO(e,u||r.get(n,"widgetData.appPage.name","")),y=g.getMultiSectionStructure(e,o,i,m,c,p),E=l.addPageAndSection(e,t,i,s,a,o,y,o.widgetId||null,f.COMP_TYPES.TPA_SECTION,f.DATA_TYPE.TPA_SECTION,n),I=[t,E];e.setOperationsQueue.executeAfterCurrentOperationDone(function(){v(n,t,i,!0,I)})},notifyDeleteSection:function(e,t){var n,i=o.data.get(e,t),a=i.tpaApplicationId;if(E(e,i))n=p.notifyAppsToDelete(e,a,!0);else{n={appsPagesToDelete:[i],appIdsToDelete:[i.tpaApplicationId]};var s=p.getWidgetCompsToDeleteMap(e,p.getWidgetsOnPagesToDelete(e,[t]));r.forEach(s,function(t){p.notifyWidgetAboutToDelete(e,t.compPointer,t.applicationId)}),o.validatePageRemovalInternal(e,t)}e.setOperationsQueue.asyncPreDataManipulationComplete(n)},actualDeleteSection:function(e,t,n){var i=t.appsPagesToDelete,a=t.appIdsToDelete,s=o.data.get(e,n),u=s.tpaApplicationId;if(E(e,s))p.actualDeleteApps(e,{appsPagesToDelete:i,appIdsToDelete:a},u);else{var c=p.getWidgetCompsToDeleteMap(e,p.getWidgetsOnPagesToDelete(e,[n]));r.forEach(c,function(t){p.deleteWidget(e,t.compPointer,t.applicationId)}),o.remove(e,n)}p.deleteTpaCompleteCallback(e,a)},alreadyInstalled:function(e,t){return s.isAppInstalledBy(e,t)},invokeSectionCallback:v=function(e,t,n,o,i){var a={page:t,sectionId:n,success:o};i&&r.assign(a,{addedCompsRef:i}),e.callback&&e.callback(a)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(15),r=n(2),o=n(6),i=n(1),a=n(5),s=n(16);function u(e,t,n){var r=e.pointers.general.getRenderFlag(t);e.dal.set(r,n)}function c(e,t){var n=e.pointers.general.getRenderFlag(t);return e.dal.get(n)}function l(e,t,n){!function(e){if("boolean"!=typeof e)throw new Error("param ".concat(e," is not valid. Should be boolean"))}(n),n?e.siteAPI.enableAction(t):e.siteAPI.disableAction(t)}function p(e){e.siteAPI.resetRuntimeData()}return{isMobileView:t.isMobileView,getViewMode:t.getViewMode,setViewMode:function(n,i){var a=e.values(r.VIEW_MODES);if(!e.includes(a,i))throw new Error("view mode not valid. valid viewModes are: ".concat(a));if(t.getViewMode(n)!==i){var u=i===r.VIEW_MODES.MOBILE;u&&s.setMobileViewMode(n,o),p(n),n.siteAPI.setMobileView(u),o.executeHook(o.HOOKS.SWITCH_VIEW_MODE.AFTER)}},runtime:{reset:p},setComponentVisibility:function(e,t,n){var r=c(e,"componentVisibility")||{};r[t]=n,u(e,"componentVisibility",r)},setComponentViewMode:function(e,t){o.executeHook(o.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,"componentViewMode",[e,t]),u(e,"componentViewMode",t)},enablePlaying:function(e,t){u(e,"isPlayingAllowed",t)},enablePageProtection:function(e,t){u(e,"isPageProtectionEnabled",t)},enableZoom:function(e,t){u(e,"isZoomAllowed",t)},enableTransFormScaleOnSite:function(e,t){u(e,"siteTransformScale",t)},getSiteTransformScale:function(e){var t=e.pointers.general.getRenderFlag("siteTransformScale");return e.dal.get(t)},enableSocialInteraction:function(e,t){u(e,"isSocialInteractionAllowed",t)},enableExternalNavigation:function(e,t){u(e,"isExternalNavigationAllowed",t)},enableBackToTopButton:function(e,t){u(e,"isBackToTopButtonAllowed",t)},enableWixAds:function(e,t){u(e,"isWixAdsAllowed",t)},enableSlideShowGalleryClick:function(e,t){u(e,"isSlideShowGalleryClickAllowed",t)},enableShouldUpdateJsonFromMeasureMap:function(e,t){u(e,"shouldUpdateJsonFromMeasureMap",t)},enableTinyMenuOpening:function(e,t){u(e,"isTinyMenuOpenAllowed",t)},enableResetGalleryToOriginalState:function(e,t){u(e,"shouldResetGalleryToOriginalState",t)},enableResetComponent:function(e,t){u(e,"shouldResetComponent",t)},allowSiteMembersDialogsOpening:function(e,t){u(e,"isSiteMembersDialogsOpenAllowed",t)},resetBehaviorsRegistration:function(e,t){t&&e.siteAPI.resetBehaviorsRegistration()},enableAction:l,enablePageTransitions:function(e,t){l(e,"pageTransition",t)},enableComponentTransitions:function(e,t){u(e,"isComponentTransitionAllowed",t)},enableRenderTPAsIframe:function(e,t){u(e,"shouldRenderTPAsIframe",t)},enableStubifyComponents:function(e,t){u(e,"shouldStubifyComponents",t)},enableFetchDynamicPageInnerRoutes:function(e,t){u(e,"shouldFetchDynamicPageInnerRoutes",t)},enableBgVideoAutoplay:e.noop,enableRenderFixedPositionContainers:function(e,t){u(e,"renderFixedPositionContainers",t)},setOnboardingViewportMode:function(e,t){u(e,"onboardingViewportMode",t)},enableRenderFixedPositionBackgrounds:function(e,t){u(e,"renderFixedPositionBackgrounds",t)},setExtraSiteHeight:function(e,t){u(e,"extraSiteHeight",t)},allowSiteOverflow:function(e,t){u(e,"allowSiteOverflow",t)},allowShowingFixedComponents:function(e,t){u(e,"allowShowingFixedComponents",t)},showHiddenComponents:function(e,t){u(e,"showHiddenComponents",t)},isHiddenComponentsEnabled:function(e){return c(e,"showHiddenComponents")},isFetchDynamicPageInnerRoutesEnabled:function(e){return c(e,"shouldFetchDynamicPageInnerRoutes")},isShowingFixedComponentsEnabled:function(e){return c(e,"allowShowingFixedComponents")},ignoreComponentsHiddenProperty:function(e,t){u(e,"ignoreComponentsHiddenProperty",t)},ignoreComponentsCollapsedProperty:function(e,t){u(e,"ignoreComponentsCollapsedProperty",t)},setComponentPreviewState:function(e,t,n){var r=c(e,"componentPreviewStates")||{};r[t]=n,u(e,"componentPreviewStates",r)},getComponentPreviewState:function(e){return c(e,"componentPreviewStates")},checkComponentsHiddenProperty:function(e,t){var n=c(e,"ignoreComponentsHiddenProperty")||[];return i.objectUtils.isDifferent(t,n)},checkComponentsCollapsedProperty:function(e,t){var n=c(e,"ignoreComponentsCollapsedProperty")||[];return i.objectUtils.isDifferent(t,n)},showControllers:function(e,t){u(e,"showControllers",t)},isControllersVisibilityEnabled:function(e){return c(e,"showControllers")},allowWixCodeInitialization:function(e,t){u(e,"initWixCode",t)},isContactFormMigrationMode:function(){return a.isOpen("sv_contactFormFinalMigrationEditor")},setShouldKeepChildrenInPlace:function(e,t){u(e,"enforceShouldKeepChildrenInPlace",t)},setPreserveCompLayoutOnReparent:function(e,t){u(e,"preserveCompLayoutOnReparent",t)},updateAnimationsViewMode:function(e,t){e.siteDataAPI.siteData.animations.updateViewMode(t)},enableNativeComponentsForPreview:function(e,t){a.isOpen("sv_editorNativeComponents")&&(u(e,"shouldModifyTpaStructure",t),t&&p(e))}}}()},function(e,t){var n;e.exports=(n="comp",{executeBehavior:function(e,t,r,o,i){var a={type:n,targetId:t.id,name:r,params:o};e.siteAPI.handleBehavior(a,{group:n,callback:i})},getRuntimeState:function(e,t){return e.siteAPI.getRuntimeDal().getCompState(t.id)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),r=n(11),o=n(10),i=n(250),a=n(2);function s(t){var n,r,o,i,a,s,u,c;return n=o=a=u=Number.MAX_VALUE,r=i=c=s=-Number.MAX_VALUE,e.forEach(t,function(e){n=Math.min(n,e.x),r=Math.max(r,e.x+e.width),o=Math.min(o,e.y),i=Math.max(i,e.y+e.height),u=Math.min(u,e.bounding.x),s=Math.max(s,e.bounding.x+e.bounding.width),a=Math.min(a,e.bounding.y),c=Math.max(c,e.bounding.y+e.bounding.height)}),{bounding:{x:u,y:a,width:s-u,height:c-a},x:u,y:a,width:s-u,height:c-a,rotationInDegrees:0}}function u(n,r,o,i){if(!o)return!1;var a=t.layout.get(r,o).bounding[n];return!e.isUndefined(a)&&(i=i||t.getSiblings(r,o),e.every(i,function(i){if(o.id===i.id)return!0;var s=t.layout.get(r,i).bounding[n];return!!e.isUndefined(s)||a<=s}))}function c(t,n){if(n&&0!==n.length)return s(e.map(n,function(e){return r.isHorizontallyStretchedToScreen(t,e)?function(e,t){var n=r.getCompLayoutRelativeToScreen(e,t),o=r.getCompLayoutRelativeToScreen(e,e.pointers.components.getPagesContainer(a.VIEW_MODES.DESKTOP));return{x:o.x,width:o.width,y:n.y,height:n.height,bounding:{x:o.x,width:o.width,y:n.y,height:n.height}}}(t,e):r.getCompLayoutRelativeToScreen(t,e)}))}function l(n,o,i,s,u){e.forEach(o,function(o){var c=r.getCompLayoutRelativeToScreen(n,o,!0),l=t.getContainer(n,o),p=r.getCompLayoutRelativeToScreen(n,l,!0),g={};switch(s){case a.COMP_ALIGNMENT_OPTIONS.LEFT:g.x=0;break;case a.COMP_ALIGNMENT_OPTIONS.RIGHT:g.x=i.width-c.bounding.width;break;case a.COMP_ALIGNMENT_OPTIONS.TOP:g.y=0;break;case a.COMP_ALIGNMENT_OPTIONS.BOTTOM:g.y=i.height-c.bounding.height;break;case a.COMP_ALIGNMENT_OPTIONS.CENTER:g.x=.5*(i.width-c.bounding.width);break;case a.COMP_ALIGNMENT_OPTIONS.MIDDLE:g.y=.5*(i.height-c.bounding.height)}u||(void 0!==g.x&&(g.x+=i.x-p.x),void 0!==g.y&&(g.y+=i.y-p.y));var f=e.keys(g);e.forEach(f,function(e){g[e]=d(c,e,g[e])}),r.updateCompLayout(n,o,g)})}function p(e,t,n,i){var a=o.public.resizeOnlyProportionally(e,i),s=r.getProportionStructure(e,i),u={};u[t]=n,a?r.updateAndPreserveProportions(e,u,s,!0):r.updateCompLayout(e,i,u)}function d(e,t,n){return e[t]+n-e.bounding[t]}return{getSnugPositionAndSize:function(t,n){if(n&&0!==n.length)return function(t){var n,r,o,i;return n=o=Number.MAX_VALUE,r=i=-Number.MAX_VALUE,e.forEach(t,function(e){n=Math.min(n,e.x),r=Math.max(r,e.x+e.width),o=Math.min(o,e.y),i=Math.max(i,e.y+e.height)}),{x:n,y:o,width:r-n,height:i-o}}(e.map(n,function(e){return r.getPositionAndSize(t,e)}))},getSnugLayout:function(n,r){if(r&&0!==r.length)return s(e.map(r,function(e){return t.layout.get(n,e)}))},getSnugLayoutRelativeToStructure:function(t,n){if(n&&0!==n.length)return s(e.map(n,function(e){return r.getCompLayoutRelativeToStructure(t,e)}))},getSnugLayoutRelativeToScreen:function(t,n){if(n&&0!==n.length)return s(e.map(n,function(e){return r.getCompLayoutRelativeToScreen(t,e)}))},getSnugLayoutRelativeToScreenConsideringScroll:function(t,n,o){if(n&&0!==n.length)return s(e.map(n,function(e){return r.getCompLayoutRelativeToScreenConsideringScroll(t,e,o)}))},isTopMost:e.partial(u,"y"),isLeftMost:e.partial(u,"x"),alignComponentsToOuterLayout:l,sortComponentsByZOrder:function(n,r,o){if(0===r.length)return[];var i=t.getContainer(n,r[0]),a=t.getChildren(n,i),s=function(t,n){return e.some(r,n)&&t.push(n),t};return o?e.reduceRight(a,s,[]):e.reduce(a,s,[])},distribute:function(n,o,a){var u,c;if(i.canDistribute(n,o,a)){var l,p,g=i.getFilteredComponentsToApplyAction(n,o,a),f=e.map(g,function(e){var o=t.getContainer(n,e);return{compPointer:e,layoutRelativeToScreen:r.getCompLayoutRelativeToScreen(n,e,!0),compContainerLayoutRelativeToScreen:r.getCompLayoutRelativeToScreen(n,o,!0)}});if("horizontal"===a||"verticalAndHorizontal"===a){u=e.map(f,"layoutRelativeToScreen"),c=s(u);var m=e.sumBy(u,"bounding.width");l=(c.width-m)/(u.length-1);var v=0;p=e.sortBy(f,"layoutRelativeToScreen.bounding.x"),e.forEach(p,function(e){var t=v+(c.x-e.compContainerLayoutRelativeToScreen.x);v+=e.layoutRelativeToScreen.bounding.width+l;var o=d(e.layoutRelativeToScreen,"x",t);r.updateCompLayout(n,e.compPointer,{x:o})})}if("vertical"===a||"verticalAndHorizontal"===a){u=e.map(f,"layoutRelativeToScreen"),c=s(u);var y=e.sumBy(f,"layoutRelativeToScreen.bounding.height");l=(c.height-y)/(u.length-1);var E=0;p=e.sortBy(f,"layoutRelativeToScreen.bounding.y"),e.forEach(p,function(e){var t=E+(c.y-e.compContainerLayoutRelativeToScreen.y);E+=e.layoutRelativeToScreen.bounding.height+l;var o=d(e.layoutRelativeToScreen,"y",t);r.updateCompLayout(n,e.compPointer,{y:o})})}}},matchSize:function(n,r,o){if(i.canMatchSize(n,r,o)){var a=i.getFilteredComponentsToApplyAction(n,r,o),s=e.map(a,function(e){return t.layout.get(n,e)}),u=e.sumBy(s,"width")/s.length,c=e.sumBy(s,"height")/s.length;!u||"width"!==o&&"heightAndWidth"!==o||e.forEach(a,p.bind(this,n,"width",u)),!c||"height"!==o&&"heightAndWidth"!==o||e.forEach(a,p.bind(this,n,"height",c))}},align:function(e,t,n){i.canAlign(e,t,n)&&l(e,i.getFilteredComponentsToApplyAction(e,t,n),c(e,t),n,!1)}}}()},function(e){e.exports=JSON.parse('{"MOBILE_STRUCTURE_NOT_SAVED_DUE_TO_CORRUPTION":{"errorCode":21056,"desc":"mobile structure was not saved with site due to a corruption in site structure - missing header, footer or pages container","severity":"fatal"},"SAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION":{"errorCode":55021,"severity":"fatal","params":{"p1":"stack"}},"SAVE_DOCUMENT_FAILED_ON_SERVER":{"errorCode":55666,"severity":"fatal","desc":"Save document failed due to a server error","params":{"p1":"serverErrorCode","p2":"origin","p3":"errorType"}},"SAVE_BLOCKED_BY_DOCUMENT_SERVICES":{"errorCode":55022,"severity":"fatal","desc":"save has been blocked in the client by documentServices, since it failed 3x *in a row* via -10104 validation error from server"},"AUTOSAVE_RESTORE_FAILED":{"errorCode":55023,"severity":"error","desc":"Failed to apply autosave diffs","params":{"p1":"errorMsg","p2":"op","p3":"path","p4":"value"}},"AUTOSAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION":{"errorCode":55024,"severity":"error","params":{"p1":"stack"}},"PASSWORD_PROTECTION_HASH_GENERATION_FAILED":{"errorCode":55025,"severity":"error","params":{"p1":"serverErrorCode","p2":"errorDescription"}},"SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED":{"errorCode":55026,"severity":"error","params":{"p1":"errorType","p2":"itemId","p3":"pagesIds"}},"MOBILE_STRUCTURE_MANDATORY_ELEMENT_MISSING":{"errorCode":55027,"severity":"error","params":{"p1":"missingComponents","p2":"stack"}},"DIRECT_PAGES_DATA_ACCESS_IN_GSD":{"errorCode":55028,"severity":"warning","params":{"p1":"path","p2":"stack"}},"ADD_COMPONENT_WITH_CUSTOM_STYLE_ID":{"errorCode":55778,"sampleRatio":10,"severity":"error","params":{"p1":"styleId","p2":"compType"}},"COMPONENT_WITHOUT_STYLES_AND_SKINS":{"errorCode":55779,"severity":"error","params":{"p1":"componentType","p2":"pageId"}},"FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG":{"errorName":"FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG","errorCode":112003,"severity":"error","params":{"p1":"statusId","p2":"errorType","p3":"errorMessage"}}}')},function(e,t){e.exports={GEO:{path:["rendererModel","geo"],revertible:!1},LANGUAGE_CODE:{path:["rendererModel","languageCode"],revertible:!0},SITE_META_DATA:{path:["rendererModel","siteMetaData"],revertible:!0},SE_INDEXABLE:{path:["documentServicesModel","metaSiteData","indexable"],revertible:!0},SOCIAL_THUMBNAIL:{path:["documentServicesModel","metaSiteData","thumbnail"],revertible:!0},FAVICON:{path:["documentServicesModel","metaSiteData","favicon"],revertible:!0},SUPPRESS_COOKIES:{path:["documentServicesModel","metaSiteData","suppressTrackingCookies"],revertible:!0},META_TAGS:{path:["documentServicesModel","metaSiteData","metaTags"],revertible:!0},EXTERNAL_URI_MAPPINGS:{path:["documentServicesModel","metaSiteData","externalUriMappings"],revertible:!0},USE_ONBOARDING:{path:["documentServicesModel","metaSiteData","useOnboarding"],revertible:!0,optional:!0},ORIGINAL_TEMPLATE_ID:{path:["documentServicesModel","originalTemplateId"],revertible:!1},CUSTOM_HEAD_TAGS:{path:["documentServicesModel","customHeadTags"],revertible:!1},SEO_TITLE:{path:["documentServicesModel","metaSiteData","title"],revertible:!0},SITE_ID:{path:["rendererModel","siteInfo","siteId"],revertible:!0},META_SITE_ID:{path:["rendererModel","metaSiteId"],revertible:!0},USER_ID:{path:["rendererModel","userId"],revertible:!0},EDITOR_SESSION_ID:{path:["documentServicesModel","editorSessionId"],revertible:!1},META_SITE_DATA:{path:["documentServicesModel","metaSiteData"],revertible:!1},USER_INFO:{path:["documentServicesModel","userInfo"],revertible:!1},SITE_NAME:{path:["documentServicesModel","siteName"],revertible:!1},SITE_REVISION:{path:["documentServicesModel","revision"],revertible:!1},SITE_VERSION:{path:["documentServicesModel","version"],revertible:!1},NEVER_SAVED:{path:["documentServicesModel","neverSaved"],revertible:!1},IS_PUBLISHED:{path:["documentServicesModel","isPublished"],revertible:!1},PUBLIC_URL:{path:["documentServicesModel","publicUrl"],revertible:!1},USED_META_SITE_NAMES:{path:["documentServicesModel","usedMetaSiteNames"],revertible:!1},CLIENT_SPEC_MAP:{path:["rendererModel","clientSpecMap"],revertible:!1},APPLICATION_TYPE:{path:["rendererModel","siteInfo","applicationType"],revertible:!1},DOCUMENT_TYPE:{path:["rendererModel","siteInfo","documentType"],revertible:!1},PREMIUM_FEATURES:{path:["rendererModel","premiumFeatures"],revertible:!1},PENDING_APPS:{path:["documentServicesModel","pendingApps"],revertible:!1},PASSWORD_PROTECTED_PAGES:{path:["rendererModel","passwordProtectedPages"],revertible:!1},SESSION_PAGES_TO_HASH_PASSWORD:{path:["rendererModel","pageToHashedPassword"],revertible:!1},PERMISSIONS:{path:["documentServicesModel","permissionsInfo","permissions"],revertible:!1},IS_OWNER:{path:["documentServicesModel","permissionsInfo","isOwner"],revertible:!1},IS_HTTPS_ENABLED:{path:["documentServicesModel","isHttpsEnabled"],revertible:!1},SITE_TOKEN:{path:["documentServicesModel","permissionsInfo","siteToken"],revertible:!1,optional:!0},MEDIA_SITE_UPLOAD_TOKEN:{path:["documentServicesModel","mediaManagerInfo","siteUploadToken"],revertible:!1,optional:!0},MEDIA_USER_UPLOAD_TOKEN:{path:["documentServicesModel","mediaManagerInfo","userUploadToken"],revertible:!1,optional:!0},CURRENT_LANGUAGE_CODE:{path:["multilingual","currentLanguageCode"],revertible:!1,optional:!0},MULTILINGUAL:{path:["rendererModel","sitePropertiesInfo","multilingualInfo"],revertible:!1,optional:!0},IS_MULTILINGUAL:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","isEnabled"],revertible:!1,optional:!0},ORIGINAL_LANGUAGE:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","originalLanguage"],revertible:!1,optional:!0},TRANSLATION_LANGUAGES:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","translationLanguages"],revertible:!1,optional:!0},CURRENCY:{path:["rendererModel","sitePropertiesInfo","currency"],revertible:!1,optional:!0},TIME_ZONE:{path:["rendererModel","sitePropertiesInfo","timeZone"],revertible:!1,optional:!0},LOCALE:{path:["rendererModel","sitePropertiesInfo","locale"],revertible:!1,optional:!0},REGIONAL_LANGUAGE:{path:["rendererModel","sitePropertiesInfo","language"],revertible:!1,optional:!0}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(19),r=n(44),o={SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN:"SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN",TEXT_IS_NOT_STRING:"TEXT_IS_NOT_STRING",TEXT_TOO_LONG:"TEXT_TOO_LONG",TEXT_INVALID_CHARS:"TEXT_INVALID_CHARS",KEYWORDS_INVALID_CHARS:"KEYWORDS_INVALID_CHARS",METATAGS_INVALID_FORMAT:"METATAGS_INVALID_FORMAT",METATAGS_INVALID_CHARS:"METATAGS_INVALID_CHARS",METATAGS_SERVER_INVALID_CODE:"METATAGS_SERVER_INVALID_CODE",METATAGS_SERVER_INVALID_TAG:"METATAGS_SERVER_INVALID_TAG",REDIRECT_INVALID_CHARS:"REDIRECT_INVALID_CHARS",REDIRECT_URI_MAPPING_IS_NOT_OBJECT:"REDIRECT_URI_MAPPING_IS_NOT_OBJECT",REDIRECT_FROM_URIS_IS_NOT_ARRAY:"REDIRECT_FROM_URIS_IS_NOT_ARRAY",REDIRECT_MAPPING_INVALID_FORMAT:"REDIRECT_MAPPING_INVALID_FORMAT",REDIRECT_MAPPING_URIS_NOT_STRING:"REDIRECT_MAPPING_URIS_NOT_STRING",SERVER_VALIDATION_TIMEOUT:"SERVER_VALIDATION_TIMEOUT"},i={TITLE_MAX_LENGTH:70,DESCRIPTION_MAX_LENGTH:320,KEYWORDS_MAX_LENGTH:250,METATAGS_MAX_LENGTH:2e3,REDIRECT_MAX_LENGTH:149},a={HTML_CHARS:/[<>]/g,KEYWORD_CHARS:/[!#$%^&()+=\]\[}{";:\/><~]/g,META_TAG:/^\s*((((<meta|<link)\s[^>]*>*[\s\n]*)*>)|[\s\n]*(<!--[^<>]*-->)[\s\n]*)*[\s\n]*$/i,URI_CHARS:/[^.,';()%@!?$&*+~a-zA-Z0-9\[\]_:\/\"\n=-]/gi};function s(t,n){if(!e.isString(n))return{success:!1,errorCode:o.TEXT_IS_NOT_STRING};if(n.length>i.TITLE_MAX_LENGTH)return{success:!1,errorCode:o.TEXT_TOO_LONG,validLength:i.TITLE_MAX_LENGTH};var r=g(n);return r&&r.length?{success:!1,errorCode:o.TEXT_INVALID_CHARS,errorContent:r}:{success:!0}}function u(t,n){if(!e.isString(n))return{success:!1,errorCode:o.TEXT_IS_NOT_STRING};if(n.length>i.DESCRIPTION_MAX_LENGTH)return{success:!1,errorCode:o.TEXT_TOO_LONG,validLength:i.DESCRIPTION_MAX_LENGTH};var r=g(n);return r&&r.length?{success:!1,errorCode:o.TEXT_INVALID_CHARS,errorContent:r}:{success:!0}}function c(t,n){if(!e.isString(n))return{success:!1,errorCode:o.TEXT_IS_NOT_STRING};if(n.length>i.KEYWORDS_MAX_LENGTH)return{success:!1,errorCode:o.TEXT_TOO_LONG,validLength:i.KEYWORDS_MAX_LENGTH};var r,s=(r=n,e.uniq(r.match(a.KEYWORD_CHARS)));return s&&s.length?{success:!1,errorCode:o.KEYWORDS_INVALID_CHARS,errorContent:s}:{success:!0}}function l(t,n,r,s){return e.isString(n)?(e.isEmpty(n)&&r({success:!0}),n.length>i.METATAGS_MAX_LENGTH?(s({success:!1,errorCode:o.TEXT_TOO_LONG,validLength:i.METATAGS_MAX_LENGTH}),!1):(u=n,e.isEmpty(u)||!a.META_TAG.test(u)?(s({success:!1,errorCode:o.METATAGS_INVALID_FORMAT}),!1):!e.includes(n,"”")||(s({success:!1,errorCode:o.METATAGS_INVALID_CHARS}),!1))):(s({success:!1,errorCode:o.TEXT_IS_NOT_STRING}),!1);var u}function p(n,r,i,a){l(0,r,i,a)&&function(n,r,i){t.actions.sendHttpRequest("//editor.wix.com/html/head-tags/validate","POST",{contentType:"text/plain; charset=utf-8"},n,function(t,n,r){if(r.success)t({success:!0});else{var i,a=r.errorCode,s=r.errorDescription,u="";if(0===a)u=o.SERVER_VALIDATION_TIMEOUT;else{var c=s.match(/'(.*)' tags are not allowed/),l=c&&e.size(c)>=1?c[1]:"";switch(l){case"":case"#text":u=o.METATAGS_SERVER_INVALID_CODE;break;default:u=o.METATAGS_SERVER_INVALID_TAG,i=l}}n({success:!1,errorCode:u,errorContent:i})}}.bind(null,r,i),function(e){e({success:!1})}.bind(null,i))}(r,i,a)}function d(t,n){if(!e.isObject(n))return{success:!1,errorCode:o.REDIRECT_URI_MAPPING_IS_NOT_OBJECT};var r=null;return e.forEach(n,function(t,n){if(e.isString(n)&&e.isString(t))if(n.length>i.REDIRECT_MAX_LENGTH)r=r||{success:!1,errorCode:o.TEXT_TOO_LONG,validLength:i.REDIRECT_MAX_LENGTH};else{var s,u=(s=n,e.uniq(s.match(a.URI_CHARS)));u&&u.length&&(r=r||{success:!1,errorCode:o.REDIRECT_INVALID_CHARS,errorContent:u})}else r=r||{success:!1,errorCode:o.REDIRECT_MAPPING_URIS_NOT_STRING}}),r||{success:!0}}function g(t){return e.uniq(t.match(a.HTML_CHARS))}function f(t,n,o){var i=r.getProperty(t,r.PROPERTY_NAMES.META_TAGS),a=e.find(i,{name:n});a||(a=function(e){return{name:e,value:"",isProperty:!1}}(n),i.push(a)),a.value=o,r.setProperty(t,r.PROPERTY_NAMES.META_TAGS,i)}return{ERRORS:o,indexing:{enable:function(t,n){if(!e.isBoolean(n))throw new Error(o.SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN);r.setProperty(t,r.PROPERTY_NAMES.SE_INDEXABLE,n)},isEnabled:function(e){return r.getProperty(e,r.PROPERTY_NAMES.SE_INDEXABLE)}},title:{set:function(e,t){var n=s(0,t);if(!n.success)throw new Error(n.errorCode);r.setProperty(e,r.PROPERTY_NAMES.SEO_TITLE,t)},get:function(e){return r.getProperty(e,r.PROPERTY_NAMES.SEO_TITLE)},validate:s},description:{set:function(e,t){var n=u(0,t);if(!n.success)throw new Error(n.errorCode);f(e,"description",t)},get:function(t){var n=r.getProperty(t,r.PROPERTY_NAMES.META_TAGS),o=e.find(n,{name:"description"});return o&&o.value||""},validate:u},keywords:{set:function(e,t){var n=c(0,t);if(!n.success)throw new Error(n.errorCode);f(e,"keywords",t)},get:function(t){var n=r.getProperty(t,r.PROPERTY_NAMES.META_TAGS),o=e.find(n,{name:"keywords"});return o&&o.value||""},validate:c},headTags:{set:function(e,t,n,o){p(0,t,function(){r.setProperty(e,r.PROPERTY_NAMES.CUSTOM_HEAD_TAGS,t),n()},function(e){o(e.errorCode)})},get:function(e){return r.getProperty(e,r.PROPERTY_NAMES.CUSTOM_HEAD_TAGS)},validate:p,clientSideValidation:function(e,t,n,r){return l(e,t,n,r)}},redirectUrls:{update:function(t,n){var o=d(0,n);if(!o.success)throw new Error(o.errorCode);var i=r.getProperty(t,r.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),a={};e.forEach(i,function(e){var t=e.fromExternalUri,n=e.toWixUri;a[t]=n});var s=e.mergeWith(a,n,function(t,n){return e.isEmpty(n)?t:n}),u=e.map(s,function(e,t){return{fromExternalUri:t,toWixUri:e}});r.setProperty(t,r.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS,u)},remove:function(t,n){if(!e.isArray(n))throw new Error(o.REDIRECT_FROM_URIS_IS_NOT_ARRAY);var i=r.getProperty(t,r.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),a=e.filter(i,function(t){var r=t.fromExternalUri;return!e.includes(n,r)});return r.setProperty(t,r.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS,a),!0},get:function(t){var n=r.getProperty(t,r.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),o={};return e.forEach(n,function(e){o[e.fromExternalUri]=e.toWixUri}),o},validate:d}}}()},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i,a,s,u,c,l;e.exports=(i=n(0),a=function(e){return e[1]-e[0]+1},u=function(e,t){var n=r(t,2),o=n[0],i=n[1];return e>=o&&e<=i},c=function(e,t){return e<r(t,1)[0]},l=function(e){return r(e,2)[1]},{swapGroups:function(e,t,n){var r=t[0],i=t[1],a=n[0],s=n[1];return[].concat(o(e.slice(0,r)),o(e.slice(a,s+1)),o(e.slice(i+1,a)),o(e.slice(r,i+1)),o(e.slice(s+1)))},moveGroupToIndex:s=function(e,t,n){var r=i.clone(e);return r.splice.apply(r,[n,0].concat(o(r.splice(t[0],a(t))))),r},moveGroupToEndOfArray:function(e,t){return s(e,t,e.length-a(t))},moveGroupToStartOfArray:function(e,t){return s(e,t,0)},findNearestValidIndex:function(e,t,n){n=i.isEmpty(n)?[[0,e.length-1]]:n;var o,a=i.sortBy(n,function(e){return r(e,1)[0]});for(o=0;o<a.length;o++){var s=a[o];if(u(t,s))return t;if(c(t,s)){if(0===o)return r(s,1)[0];var p=a[o-1];return l(p)}}return l(i.last(a))},findNext:function(e,t,n){return i.findIndex(e,t,n+1)},findPrev:function(e,t,n){var r=n-1;return-1===r?r:i.findLastIndex(e,t,r)}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(1),o=n(10),i=function(e,t){var n=e.pointers.getInnerPointer(t,"layout.fixedPosition");return!!e.dal.get(n)},{isCompArrangeable:a=function(e,t){if(e.pointers.components.isPage(t))return!1;if(function(e,t){return"platform.components.AppController"===o.getComponentType(e,t)}(e,t))return!1;var n=e.pointers.components.getParent(t),i=r.displayedOnlyStructureUtil.isRepeatedComponent(t.id),a=n&&r.displayedOnlyStructureUtil.isRepeatedComponent(n.id);return!(r.displayedOnlyStructureUtil.isRefPointer(t)||i&&!a)},canSwapComponents:function(e,t,n){return a(e,n)&&i(e,t)===i(e,n)}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w,b,M,R,N,x,L,B,k,F,U,H,V,W,G,z,j,Y,K,q,Q,X,Z,J,$,ee,te,ne,re,oe,ie,ae,se,ue,ce,le,pe,de,ge,fe,me,ve,ye,Ee,Ie,Se,he,Pe,Ae,Te,Oe,Ce,_e,De,we,be,Me,Re,Ne,xe,Le,Be,ke,Fe,Ue,He,Ve,We,Ge,ze,je,Ye,Ke,qe,Qe,Xe,Ze,Je,$e,et,tt,nt,rt,ot,it,at,st,ut,ct,lt,pt,dt,gt,ft,mt,vt,yt,Et,It,St,ht,Pt;e.exports=(r=n(0),o=n(5),i=n(281),a=n(282),s=n(284),u=n(285),c=n(286),l=n(287),p=n(288),d=n(289),g=n(290),f=n(291),m=n(292),v=n(293),y=n(294),E=n(295),I=n(296),S=n(297),h=n(298),P=n(299),A=n(300),T=n(301),O=n(302),C=n(303),_=n(304),D=n(305),w=n(306),b=n(307),M=n(308),R=n(309),N=n(310),x=n(311),L=n(312),B=n(313),k=n(314),F=n(315),U=n(316),H=n(317),V=n(318),W=n(319),G=n(320),z=n(321),j=n(322),Y=n(323),K=n(324),q=n(325),Q=n(167),X=n(326),Z=n(327),J=n(328),$=n(329),ee=n(330),te=n(331),ne=n(332),re=n(333),oe=n(334),ie=n(335),ae=n(336),se=n(337),ue=n(339),ce=n(340),le=n(341),pe=n(342),de=n(343),ge=n(170),fe=n(344),me=n(345),ve=n(346),ye=n(347),Ee=n(348),Ie=n(349),Se=n(350),he=n(351),Pe=n(352),Ae=n(353),Te=n(354),Oe=n(355),Ce=n(356),_e=n(357),De=n(358),we=n(359),be=n(360),Me=n(361),Re=n(362),Ne=n(363),xe=n(364),Le=n(365),Be=n(366),ke=n(367),Fe=n(368),Ue=n(369),He=n(370),Ve=n(371),We=n(372),Ge=n(373),ze=n(374),je=n(375),Ye=n(376),Ke=n(377),qe=n(378),Qe=n(379),Xe=n(380),Ze=n(381),Je=n(382),$e=n(383),et=n(384),tt=n(385),nt=n(386),rt=n(387),ot=n(388),it=n(389),at=n(390),st=n(391),ut=n(392),ct=n(393),lt=n(394),pt=n(395),dt=n(396),gt=n(397),ft=n(398),mt=n(399),vt=n(173),yt=n(400),Et=n(401),It=n(402),St=n(403),ht=n(404),Pt=n(405),r.defaults({"wysiwyg.viewer.components.HeaderContainer":m,"wysiwyg.viewer.components.EbayItemsBySeller":i,"wysiwyg.viewer.components.FooterContainer":v,"wysiwyg.viewer.components.AdminLoginButton":s,"wysiwyg.viewer.components.LoginButton":S,"wysiwyg.viewer.components.BgImageStrip":u,"wysiwyg.viewer.components.ContactForm":c,"wysiwyg.viewer.components.DynamicContactForm":c,"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":l,"wysiwyg.viewer.components.WFacebookLike":p,"wysiwyg.viewer.components.FacebookShare":d,"wysiwyg.viewer.components.FiveGridLine":g,"wysiwyg.viewer.components.FlickrBadgeWidget":f,"wysiwyg.common.components.imagebutton.viewer.ImageButton":y,"wysiwyg.viewer.components.ItunesButton":E,"wysiwyg.viewer.components.LinkBar":I,"wysiwyg.viewer.components.LoginSocialBar":h,"wysiwyg.common.components.onlineclock.viewer.OnlineClock":P,"wysiwyg.viewer.components.PageGroup":A,"mobile.core.components.Page":T,"wysiwyg.viewer.components.Group":O,"wysiwyg.viewer.components.FlashComponent":C,"wysiwyg.viewer.components.PagesContainer":_,"wysiwyg.viewer.components.PayPalButton":D,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":w,"wysiwyg.viewer.components.PinterestFollow":b,"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":M,"wysiwyg.common.components.rssbutton.viewer.RSSButton":R,"wysiwyg.viewer.components.ScreenWidthContainer":N,"wysiwyg.viewer.components.StripContainer":x,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":L,"wysiwyg.viewer.components.SiteButton":B,"wysiwyg.viewer.components.SiteSegmentContainer":k,"wysiwyg.viewer.components.SiteRegionContainer":F,"wysiwyg.viewer.components.WSiteStructure":U,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":H,"wysiwyg.viewer.components.SlideShowGallery":V,"tpa.viewer.components.Thumbnails":W,"tpa.viewer.components.Accordion":G,"wysiwyg.viewer.components.HtmlComponent":z,"wysiwyg.viewer.components.GoogleMap":j,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":Y,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":K,"wysiwyg.viewer.components.svgshape.SvgShape":q,"wysiwyg.viewer.components.VectorImage":Q,"wysiwyg.viewer.components.mobile.TinyMenu":X,"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":Z,"wysiwyg.viewer.components.BackToTopButton":J,"wysiwyg.viewer.components.VerticalLine":$,"wysiwyg.viewer.components.VKShareButton":ee,"wysiwyg.common.components.weather.viewer.Weather":te,"wysiwyg.viewer.components.WFacebookComment":ne,"wysiwyg.common.components.disquscomments.viewer.DisqusComments":re,"wysiwyg.viewer.components.WGooglePlusOne":ae,"wysiwyg.viewer.components.WPhoto":se,"wysiwyg.viewer.components.ClipArt":Fe,"wysiwyg.viewer.components.WTwitterFollow":ue,"wysiwyg.viewer.components.WTwitterTweet":ce,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":le,"wysiwyg.viewer.components.tpapps.TPAWidget":pe,"tpa.viewer.components.tpapps.TPAWidget":pe,"wysiwyg.viewer.components.tpapps.TPASection":ge,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":de,"tpa.viewer.components.tpapps.TPAGluedWidget":de,"wysiwyg.viewer.components.tpapps.TPAMultiSection":ge,"wixapps.integration.components.AppPage":fe,"wixapps.integration.components.AppPart":me,"wixapps.integration.components.AppPart2":ve,"wysiwyg.common.components.anchor.viewer.Anchor":ye,"tpa.viewer.components.StripSlideshow":Se,"tpa.viewer.components.StripShowcase":he,"tpa.viewer.components.Collage":Pe,"tpa.viewer.components.Masonry":Ee,"tpa.viewer.components.Freestyle":Ie,"wysiwyg.viewer.components.tpapps.TPA3DCarousel":Ae,"wysiwyg.viewer.components.Video":Te,"wysiwyg.viewer.components.MatrixGallery":Oe,"wysiwyg.viewer.components.documentmedia.DocumentMedia":Ce,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":_e,"wysiwyg.viewer.components.SoundCloudWidget":De,"wysiwyg.viewer.components.WRichText":we,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":be,"wysiwyg.viewer.components.ExpandableMenu":Me,"wysiwyg.viewer.components.menus.DropDownMenu":Re,"wysiwyg.viewer.components.SliderGallery":Ne,"wysiwyg.viewer.components.PaginatedGridGallery":xe,"mobile.core.components.Container":Le,"wysiwyg.viewer.components.PopupContainer":Be,"wysiwyg.viewer.components.PopupCloseTextButton":B,"wysiwyg.viewer.components.AudioPlayer":ke,"wysiwyg.viewer.components.BoxSlideShowSlide":Ue,"wysiwyg.viewer.components.BoxSlideShow":He,"wysiwyg.viewer.components.StateBoxState":Ve,"wysiwyg.viewer.components.StateBoxFormState":We,"wysiwyg.viewer.components.StateBox":Ge,"wysiwyg.viewer.components.StateStripState":ze,"wysiwyg.viewer.components.StateStrip":je,"wysiwyg.viewer.components.StripContainerSlideShowSlide":Ye,"wysiwyg.viewer.components.QuickActionBar":Ke,"wysiwyg.viewer.components.QuickActionBarItem":qe,"wysiwyg.viewer.components.StripContainerSlideShow":Qe,"wysiwyg.viewer.components.StripColumnsContainer":Xe,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":a,"wysiwyg.viewer.components.inputs.TextInput":Ze,"wysiwyg.viewer.components.inputs.TextAreaInput":Je,"wysiwyg.viewer.components.inputs.FileUploader":$e,"wysiwyg.viewer.components.inputs.ComboBoxInput":Ze,"wysiwyg.viewer.components.inputs.Checkbox":et,"wysiwyg.viewer.components.inputs.DatePicker":tt,"wysiwyg.viewer.components.Column":nt,"wysiwyg.viewer.components.MediaControls":ot,"wysiwyg.viewer.components.MediaOverlayControls":it,"wysiwyg.viewer.components.MediaPlayer":rt,"platform.components.AppController":at,"wysiwyg.viewer.components.ImageButtonWithText":st,"wysiwyg.viewer.components.inputs.RadioButton":Ze,"wysiwyg.viewer.components.HoverBox":ut,"wysiwyg.viewer.components.Popover":ct,"wysiwyg.viewer.components.inputs.RadioGroup":oe,"wysiwyg.viewer.components.Repeater":lt,"wysiwyg.viewer.components.MediaContainer":pt,"wysiwyg.viewer.components.Grid":dt,"wysiwyg.viewer.components.LanguageSelector":gt,"wysiwyg.viewer.components.FormContainer":ft,"wysiwyg.viewer.components.inputs.CheckboxGroup":ie,"wysiwyg.viewer.components.InlinePopupToggle":vt,"wysiwyg.viewer.components.MenuToggle":yt,"wysiwyg.viewer.components.MenuContainer":Et,"platform.components.AppWidget":mt,"wysiwyg.viewer.components.RefComponent":St,"wixui.StylableButton":ht,"responsive.components.Section":It,"responsive.components.HeaderSection":It,"responsive.components.FooterSection":It,"responsive.components.MembersAreaSection":It},o.isOpen("registerComponentsDynamically")?{}:Pt))},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(8),i=n(2),a=n(168),{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0,flippable:!0,resizableSides:function(e,t){return o.isMaintainSvgAspectRatio(e,t)?[]:[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.BOTTOM,i.RESIZE_SIDES.RIGHT]},layoutLimits:function(e,t){var n=o.isMaintainSvgAspectRatio(e,t)?a.getOriginalAspectRatio(e,t):null,i=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),o=e.pointers.components.getPageOfComponent(t).id,i=e.dal.get(e.pointers.data.getThemeItem(n,o)),s=parseInt(r.get(i,["style","properties","strokewidth"],0),10),u=Math.max(s+1,5),c=Math.max(s+1,5),l=a.getOriginalAspectRatio(e,t);return l&&(l>1?u=(c=s+1)*l:c=(u=s+1)/l),{minWidth:Math.ceil(u),minHeight:Math.ceil(c)}}(e,t);return{aspectRatio:n||void 0,minWidth:i.minWidth,minHeight:i.minHeight,maxHeight:2e3}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(73),r=n(1),o=t.requestsUtil,i=t.svgUtils,a=i.SVG_STORES,s=i.EMPTY_SHAPE,u=i.svgIdToUrl,c=r.svg.svgStringToStoreData,l={method:"GET",headers:{"content-type":"text/plain"},mode:"cors"};function p(t,n,r){var o=t.pointers.svgShapes.getSvgShapePointer(n),i=t.pointers.getInnerPointer(o,a.CONTENT),s=t.dal.get(i);return e.isFunction(r)&&r(s),s}return{cacheSvgString:function(e,t){!function(e,t,n){var r=p(e,t);r?n(r):function(e,t,n){var r=function(e,t){var n=e.pointers.general.getServiceTopology(),r=e.pointers.getInnerPointer(n,"mediaRootUrl"),o=e.dal.get(r);return u(o,t,{rendererModel:e.siteDataAPI.siteData.rendererModel})}(e,t);o.fetch(r,l).then(function(e){return e.text()}).then(function(r){!function(e,t,n){var r=e.pointers.svgShapes.getSvgShapePointer(t),o=c(n||s);e.dal.set(r,o)}(e,t,r),n(r)})}(e,t,n)}(e,t,function(){e.setOperationsQueue.asyncPreDataManipulationComplete()})},getSvgFromCache:p,getSvgInfoFromCache:function(e,t){var n=e.pointers.svgShapes.getSvgShapePointer(t),r=e.pointers.getInnerPointer(n,a.INFO);return e.dal.get(r)},getOriginalAspectRatio:function(t,n){var r=t.dal.get(n),o=t.pointers.components.getPageOfComponent(n),i=t.pointers.data.getDataItem(r.dataQuery.replace("#",""),o.id),s=t.dal.get(i),u=e.get(s,["svgId"]),c=t.pointers.svgShapes.getSvgShapePointer(u),l=t.pointers.getInnerPointer(c,a.BOX_BOUNDARIES),p=t.dal.get(l);return e.isEmpty(p)?0:p.width/p.height}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r={"142bb34d-3439-576a-7118-683e690a1e0d":"gallery","14517f3f-ffc5-eced-f592-980aaa0bbb5c":"wixChat"};function o(t,n){if(!e.has(n,"applicationId")||!e.has(n,"widgetId"))return{};var r=t.pointers.general.getClientSpecMap(),o=t.dal.get(r);return e.get(o,[n.applicationId,"widgets",n.widgetId])||{}}return{isRepeatable:!1,getWidgetData:o,nickname:function(n,i){var a=o(n,t.getDataItem(n,i)),s="",u=e.get(a,"widgetId");return s=r.hasOwnProperty(u)?r[u]:e.camelCase(a.tpaWidgetId),s}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(8);function o(t,n){if(!e.has(n,"applicationId"))return{};var r=t.pointers.general.getClientSpecMap(),o=t.dal.get(r),i=e.get(o,n.applicationId);return e.get(i,["widgets",n.widgetId])}function i(e,t,n){var r=e.dataQuery.replace("#",""),o=t.pointers.data.getDataItem(r,n);return t.dal.get(o)}return{isRepeatable:!1,mobileConversionConfig:{convertFixedPositionToAbsolute:!0,stretchHorizontally:function(t,n,r){var a=o(t,i(n,t,r));return!0===e.get(a,"shouldBeStretchedByDefaultMobile")},minHeight:function(t,n,r){var a=o(t,i(n,t,r));return e.get(a,"componentFields.minHeightInMobile")}},removable:!1,duplicatable:!1,crossSiteDuplicatable:!1,containable:!1,canBeFixedPosition:!1,canBeStretched:function(n,r){var i=o(n,t.getDataItem(n,r));return!0===e.get(i,"canBeStretched")},getWidgetData:o,nickname:function(n,i){var a=o(n,t.getDataItem(n,i));if(a){var s=e.get(a,"appPage.id");return e.camelCase(s)}return r.getComponentNickname(n,i)}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(e,t){return e.siteAPI.getWixappsPackageDescriptor(t)}function r(n,r,o){var i=t(n,r),a=e.get(i,"parts");return e.find(a,{id:o})}return{getDescriptor:t,getPackageName:function(e,t){var n=e.pointers.general.getClientSpecMap(),r=e.pointers.getInnerPointer(n,[t,"packageName"]);return e.dal.get(r)},getAppPartRole:function(t,n,o){var i=r(t,n,o);return e.get(i,"role")},getAppPartDefinition:r}}()},function(e,t,n){var r;e.exports=(r=n(25),{wasPartLoadedSuccessfully:function(e,t){var n=e.dal.getByPath(r.getAppPart2MetadataPath(t));return n&&!1===n.loading&&!n.error},wasRepoLoadedSuccessfully:function(e){var t=e.dal.getByPath(r.getAppbuilderMetadataPath());return t&&!1===t.loading&&!t.error}})},function(e,t){e.exports={layoutLimits:{minWidth:26,minHeight:26}}},function(e,t){e.exports={MINIMAL_CHILDREN_NUMBER:"minimalChildrenNumber",MAXIMUM_CHILDREN_NUMBER:"maximumChildrenNumber",ANCHORS:"anchors",CONTAINABLE:"containable",CONTAINABLE_BY_STRUCTURE:"containableByStructure",CAN_CONTAIN:"canContain",CAN_CONTAIN_BY_STRUCTURE:"canContainByStructure",CAN_REPARENT:"canReparent",SHOULD_KEEP_CHILDREN_IN_PLACE:"shouldKeepChildrenInPlace",IS_REPEATER:"isRepeater",IS_REPEATABLE:"isRepeatable",IS_CONTAIN_CHECK_RECURSIVE:"isContainCheckRecursive",IS_EXTERNAL:"isExternal",GROUPABLE:"groupable",ENFORCE_CONTAINER_CHILD_LIMITS_BY_WIDTH:"enforceContainerChildLimitsByWidth",ENFORCE_CONTAINER_CHILD_LIMITS_BY_HEIGHT:"enforceContainerChildLimitsByHeight",CONTAINER:"container",MOVE_DIRECTIONS:"moveDirections",RESIZABLE_SIDES:"resizableSides",ROTATABLE:"rotatable",FLIPPABLE:"flippable",FIXED_POSITION:"canBeFixedPosition",MODAL:"modal",MOBILE_ONLY:"mobileOnly",CAN_BE_STRETCHED:"canBeStretched",REMOVABLE:"removable",DUPLICATABLE:"duplicatable",CROSS_SITE_DUPLICATABLE:"crossSiteDuplicatable",HIDDENABLE:"hiddenable",COLLAPSIBLE:"collapsible",DOCKABLE:"dockable",LAYOUT_LIMITS:"layoutLimits",FULL_WIDTH:"fullWidth",FULL_WIDTH_BY_STRUCTURE:"fullWidthByStructure",STYLE_CAN_BE_APPLIED:"styleCanBeApplied",NICKNAME:"nickname",SHOULD_AUTO_SET_NICKNAME:"shouldAutoSetNickname",ALIGNABLE:"alignable",DISABLEABLE:"disableable",RESIZE_ONLY_PROPORTIONALLY:"resizeOnlyProportionally",ENFORCE_RESIZABLE_CORNERS:"enforceResizableCorners",IS_PROPORTIONALLY_RESIZABLE:"isProportionallyResizable",IGNORE_CHILDREN_ON_PROPORTINAL_RESIZE:"ignoreChildrenOnProportionalResize",ENFORCE_MAX_DIM_ON_PROPORTIONAL_RESIZE:"enforceMaxDimensionsOnProportionalResize",USING_LEGACY_APP_PART_SCHEMA:"usingLegacyAppPartSchema",DEFAULT_MOBILE_PROPERTIES:"defaultMobileProperties",VISIBLE:"isVisible",MOBILE_CONVERSION_CONFIG:"mobileConversionConfig",SHOULD_GENERATE_NICKNAME:"shouldGenerateNickname",FORCE_MAINTAIN_IDS_ON_SERIALIZE:"forceMaintainIDsOnSerialize",HEIGHT_AUTO:"heightAuto",WIDTH_AUTO:"widthAuto",A11Y_CONFIGURABLE:"a11yConfigurable",HIDE_AS_GHOST:"hideAsGhost"}},function(e,t){e.exports=E},function(e,t,n){var r;e.exports=(r=n(1),{getStyleIdToAdd:function(e,t,n,o,i){return i||r.guidUtils.getUniqueId("style","-",{bucket:"styleIds"})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(26),r=n(178),o=n(54),i=(n(2),n(416)),a=n(3),s=n(15),u=n(120),c=n(179),l=n(29),p=n(17),d=n(1),g={"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0,"wysiwyg.viewer.components.MenuToggle":!0};function f(e,t,n){var r=e.pointers.getInnerPointer(t,["layout",n]);return e.dal.get(r)||0}function m(t,n){return t.pointers.components.isPage(n)?{x:0,y:0}:e.pick(o.getPositionAndSize(t,n),["x","y"])}function v(e,t){return{x:e.x+t.x,y:e.y+t.y}}function y(e,t){var n=e.pointers.getInnerPointer(t,["layout","fixedPosition"]);return e.dal.get(n)}function E(e,n){if(!y(e,n))return!1;var r=e.pointers.general.getRenderFlag("renderFixedPositionContainers");if(e.dal.get(r))return!0;var o=t.getType(e,n);return!g[o]}function I(e,t){if(E(e,t))return function(e,t){var n=m(e,t);return"MOBILE"===s.getViewMode(e)?n:(n.x-=_(e),n)}(e,t);var n=e.pointers.components.getParent(t),r=m(e,t);return n?v(r,I(e,n)):e.pointers.components.isInMasterPage(t)?r:v(r,function(e,t,n){var r=e.pointers.components.getPagesContainer(t);return{x:f(e,r,"x"),y:l.isPopup(e,n)?0:f(e,r,"y")}}(e,e.pointers.components.getViewMode(t),t.id))}function S(t,n){var r=I(t,n),i=t.dal.get(t.pointers.getInnerPointer(n,"layout")),a=o.getPositionAndSize(t,n,i);i=e.defaults(i,a);var s=e.assign(i,r);return s.bounding=o.getBoundingLayout(t,s),s}function h(t,n,o){var i,s,u,c,l=t.pointers.getInnerPointer(n,"layout"),p=t.dal.get(l),d=t.siteAPI.getScreenSize(),g=t.siteAPI.getSiteMeasureMap(),f=function(e,t){var n=e.pointers.getInnerPointer(t,"layout");return{data:a.getDataItem(e,t),props:a.getPropertiesItem(e,t),layout:e.dal.get(n)}}(t,n),m=r.getFixedComponentMeasurements(o,f,d,g.siteMarginBottom);return i=m,s=d.width,u=d.height,c=g.siteMarginBottom,m={y:e.isNumber(i.top)?i.top:u-i.height-c,x:e.isNumber(i.left)?i.left:s-i.width},e.assign(p,m)}function P(n,s,u){var l,g=t.getType(n,s),f=r.getMeasuringByType(g);if(f)l=h(n,s,f);else if(l=S(n,s),d.displayedOnlyStructureUtil.isRefPointer(s)&&(l=function(t,n,r){var o={},i=t.siteAPI.getSiteMeasureMap();return o.y=i.absoluteTop[n.id],o.height=i.height[n.id],o.width=i.width[n.id],e.defaults(o,r)}(n,s,l)),l.x=function(e,t,n,r){return!O(e,t)||e.siteAPI.isMobileView()?n.x+_(e):A(e,t,r)}(n,s,l,u),!u){var m=n.siteAPI.getSiteMeasureMap(),v=e.get(m,["relativeToScreenOverrides",s.id]);v&&e.assign(l,v);var y=i.getPlugin(n,s);if(y){var E=a.getPropertiesItem(n,s),I=p.skin.getComponentSkinExports(n,s);e.assign(l,y(n.siteAPI,l,E,s,I))}}return function(e,t,n){var r=c.getTotalScrolls(e,t),o=r.x,i=r.y;n.x-=o,n.y-=i}(n,s,l),l.bounding=o.getBoundingLayout(n,l),l}var A=function t(n,r,o){if(!r)return 0;var i=n.siteAPI.getSiteMeasureMap(),a=e.get(i,["relativeToScreenOverrides",r.id,"x"]);return e.isNumber(a)?a:m(n,r).x+t(n,n.pointers.components.getParent(r),o)};function T(e,t){return o.isHorizontallyDocked(e.dal.get(e.pointers.getInnerPointer(t,["layout"])))}var O=function e(t,n){return!!n&&(T(t,n)&&!E(t,n)||e(t,t.pointers.components.getParent(n)))};function C(e,t){var n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!E(e,n));return!0}function _(e){var t=e.siteAPI.getSiteWidth(),n=e.siteAPI.getSiteMeasureMap();return n.clientWidth>t?.5*(n.clientWidth-t):0}function D(e,t){return E(e,t)||C(e,t)}return{getCompLayoutRelativeToStructure:S,getCompLayoutRelativeToScreen:P,getCompLayoutRelativeToScreenConsideringScroll:function(e,t,n){var r=P(e,t,n);if(!D(e,t)){var o=u.getScroll(e).y;r.y-=o,r.bounding.y-=o}return r},isRenderedInFixedPosition:E,isShowOnFixedPosition:D,isFixedPosition:y,isAncestorRenderedInFixedPosition:C,getClosestAncestorRenderedInFixedPosition:function(e,t){var n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!E(e,n));return n},isHorizontallyDocked:T,getSiteX:_}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o={},{getFixedComponentMeasurements:function(e,t,n,r){var o,i=t.layout;return e?{top:(o=e(t,n.width,n.height,r||0)).top,left:o.left,height:i.height,width:i.width}:null},setMeasuringForType:function(e,t){r.isArray(e)||(e=[e]),r.forEach(e,function(e){o[e]=t})},getMeasuringByType:function(e){return o[e]}})},function(e,t){e.exports={onComponentsScroll:function(e,t){return e.siteAPI.setOnComponentsScrollListener(t)},scroll:function(e,t,n,r,o){return e.siteAPI.scroll(t.id,n,r,o)},scrollBy:function(e,t,n,r,o){return e.siteAPI.scrollBy(t.id,n,r,o)},getTotalScrolls:function(e,t){return e.siteAPI.getTotalScroll(t.id)}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(3),o=n(20),i=o.services.schemasService;function a(n,r){var a=i.getDefinition(n);if(!a)throw new Error("".concat(n," has no component definition."));if(a.propertyTypes||a.propertyType||r){var s=a.propertyTypes?a.propertyTypes:[a.propertyType||t.constants.BASE_PROPS_SCHEMA_TYPE];if(!(e.includes(s,"")||e.isString(r)&&e.includes(s,r))){var u="".concat(n," must get a compProps of one of the types [").concat(s,"]");if(!r)throw new Error(u);if(!e.includes(s,r.type))throw new Error("".concat(u," but got ").concat(r.type));o.services.dataValidators.validateDataBySchema(r,"props")}}}return{validateProperties:a,validateCompProps:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),o=r.getPropertyItemPointer(e,t);a(n,o&&e.dal.get(o))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(10),o=n(72),i=["x","y","width","height","rotationInDegrees","scale","fixedPosition","anchors","docked","aspectRatio"];function a(t,n,r,o){e(o).pick(t).forEach(function(e,t){if(!n(e))throw new Error("".concat(t," is not a ").concat(r))})}var s=e.partial(a,["x","y","width","height","rotationInDegrees","scale"],function(e){return!isNaN(e)},"number"),u=e.partial(a,["fixedPosition"],function(e){return"boolean"==typeof e},"boolean"),c=e.partial(a,["docked"],e.isPlainObject,"object"),l=e.partial(a,["anchors"],e.isArray,"array");function p(n){n&&(s(n),u(n),c(n),l(n),function(t){var n=e.omit(t,i);if(!e.isEmpty(n))throw new Error("Properties are not supported in layout:".concat(e.keys(n)))}(n)),e.isUndefined(n.rotationInDegrees)||(n.rotationInDegrees=t.math.parseDegrees(n.rotationInDegrees))}function d(t,n){return e.reduce(n,function(r,o,i){return e.isPlainObject(n[i])?r[i]=d(t,n[i]):e.isEqual(n[i],t[i])||(r[i]=o),r},{})}var g=e.template("The following layout changes were ignored for comp {id: <%= id %>, componentType: <%= componentType %>}, due to failure of layout validations: \n<%= layoutChanges %>"),f={WIDTH:"width",HEIGHT:"height",X:"x",Y:"y",ROTATION:"rotationInDegrees",FIXED_POSITION:"fixedPosition"};function m(e,t,n){return"".concat(n," change: ").concat(e[n]," -> ").concat(t[n])}function v(n,o,i,a){var s=d(a,i),u=[];e.isUndefined(s.width)||r.public.isHorizontallyResizable(n,o)||(delete i.width,u.push(f.WIDTH)),e.isUndefined(s.height)||r.public.isVerticallyResizable(n,o)||(delete i.height,u.push(f.HEIGHT)),e.isUndefined(s.x)||r.public.isHorizontallyMovable(n,o)||(delete i.x,u.push(f.X)),e.isUndefined(s.y)||r.public.isVerticallyMovable(n,o)||e.isUndefined(s.isFixedPosition)&&(delete i.y,u.push(f.Y)),e.isUndefined(s.rotationInDegrees)||r.public.isRotatable(n,o)||(delete i.rotationInDegrees,u.push(f.ROTATION)),e.isUndefined(s.fixedPosition)||r.public.canBeFixedPosition(n,o)||(delete i.fixedPosition,u.push(f.FIXED_POSITION)),u.length&&function(n,r,o,i,a){var s=e.curry(m)(i,a);t.log.warnVerbose(g({id:r.id,componentType:n.dal.get(n.pointers.getInnerPointer(r,"componentType")),layoutChanges:e(o).map(s).join(", ")}))}(n,o,u,a,s)}return{getValidLayoutToUpdate:function(n,r,a){var s=n.pointers.getInnerPointer(r,"layout"),u=n.dal.get(s),c=e.pick(a,i);!function(e){if(e.docked){if(e.docked.hCenter&&(e.docked.left||e.docked.right))throw new Error("cannot set both hCenter and left OR right");if(e.docked.vCenter&&(e.docked.top||e.docked.bottom))throw new Error("cannot set both vCenter and top OR bottom")}}(a),c.docked&&(c.docked=function(t,n){if(t)return e.merge({},t,n);return n}(u.docked,a.docked)),p(c),v(n,r,c,u);var l=d(u,a),g=e.assign({},u,c);return function(e,n,r){n.docked&&(t.layoutUtils.isHorizontallyDocked(e)&&(n.docked.hCenter?(delete e.docked.left,delete e.docked.right):(n.docked.left||n.docked.right)&&delete e.docked.hCenter,e.width=r.width),t.layoutUtils.isVerticallyDocked(e)&&(n.docked.vCenter?(delete e.docked.top,delete e.docked.bottom):(n.docked.top||n.docked.bottom)&&delete e.docked.vCenter,e.height=r.height))}(g,l,o.getPositionAndSize(n,r,g)),function(e){if(t.layoutUtils.isDockToScreen(e)&&e.fixedPosition)throw new Error("Dock to screen component cannot be fixed position")}(g),g},validateLayout:function(e,t){p(e.dal.get(e.pointers.getInnerPointer(t,"layout")))}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(440),o=n(183),i=n(20),a=n(19),s=n(2),{registerComponent:function(e,t){var n=t.componentType,u=t.componentDefinition,c=t.hooks,l=t.metaData,p=t.dataSchema,d=t.propertiesSchema;a.utils.fedopsLogger.interactionStarted(s.INTERACTIONS.REGISTER_COMPONENT_TYPE),n?(l&&(a.utils.fedopsLogger.breadcrumb("registering metaData for component of type ".concat(n)),r.registerExternalMetaData(n,l)),c&&(a.utils.fedopsLogger.breadcrumb("registering hooks for component of type ".concat(n)),o.registerExternalHooks(n,c)),i.services.schemasService.registerComponentDefinitionAndSchemas(n,{componentDefinition:u,dataSchemas:p,propertiesSchemas:d}),a.utils.fedopsLogger.interactionEnded(s.INTERACTIONS.REGISTER_COMPONENT_TYPE)):a.utils.fedopsLogger.captureError(new Error("Could not dynamically register a component without componentType"),{tags:{dsComponentRegistration:!0}})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(19),r=n(5),o=n(6),i=n(441),a=n(442),s=n(443),u=n(444),c=n(462),l=n(463),p=n(464),d=n(129),g=n(481),f=n(482),m=n(483),v=n(485),y=n(486),E=n(487),I=n(488),S=n(198),h=n(489),P=n(490),A=n(491),T=n(492),O=n(493),C=n(494),_=n(499),D=n(548),w=n(550),b=n(237),M=n(551),R=n(552),N=n(553),x=n(554),L=n(555),B=n(556),k=n(557),F=n(558),U=n(559),H=n(561),V=n(562),W=n(563),G=n(564),z=n(16);!function(){o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,f.removeMobileCropOverrideIfNeeded,"wysiwyg.viewer.components.WPhoto"),o.registerHook(o.HOOKS.ADD.BEFORE,i,"wysiwyg.common.components.anchor.viewer.Anchor"),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,c.setLinksCustomData,"wysiwyg.viewer.components.WRichText"),o.registerHook(o.HOOKS.CHANGE_PARENT.AFTER,c.fixTextLinksAfterSetContainerToRepater,"wysiwyg.viewer.components.WRichText"),o.registerHook(o.HOOKS.ADD.AFTER,b.afterAdd,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.SERIALIZE.CHILDREN_BEFORE,b.addRepeatedDataItems,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,b.beforeUpdateRepeaterData,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.DATA.UPDATE_AFTER,b.afterUpdateRepeaterData,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.PROPERTIES.UPDATE_AFTER,b.afterUpdateRepeaterProperties,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.ADD.AFTER,c.duplicateLinksDataItems,"wysiwyg.viewer.components.WRichText"),["wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"].forEach(function(e){return o.registerHook(o.HOOKS.ADD.BEFORE,u.verifySlideShowStructureOnAdd,e)}),["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBox"].forEach(function(e){return o.registerHook(o.HOOKS.COMPONENT.STYLE_UPDATE_AFTER,u.updateSlidesStyle,e)}),["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBoxFormState","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShowSlide"].forEach(function(e){return o.registerHook(o.HOOKS.REMOVE.BEFORE,u.verifySlideShowStructureOnDelete,e)}),o.registerHook(o.HOOKS.ADD.AFTER,O.replaceFullScreenPropertyWithDocking,"wysiwyg.viewer.components.FiveGridLine"),o.registerHook(o.HOOKS.ADD.BEFORE,a.beforeAdd,"wysiwyg.viewer.components.svgshape.SvgShape"),o.registerHook(o.HOOKS.ADD.BEFORE,s.beforeAdd,"wysiwyg.viewer.components.ClipArt"),o.registerHook(o.HOOKS.ADD.AFTER,m.setPlayerIdAfterAddHook,"wysiwyg.viewer.components.MediaOverlayControls"),o.registerHook(o.HOOKS.ADD.AFTER,m.setPlayerIdAfterAddHook,"wysiwyg.viewer.components.MediaControls"),o.registerHook(o.HOOKS.MOBILE_CONVERSION.AFTER,m.layoutChildrenOnMobileConversion),r.isOpen("se_videobox_flip")&&o.registerHook(o.HOOKS.PROPERTIES.UPDATE_BEFORE,m.flipCssStyle,"wysiwyg.viewer.components.MediaPlayer");o.registerHook(o.HOOKS.MOBILE_CONVERSION.AFTER,F.copyRootComponentDockedLayout),o.registerHook(o.HOOKS.DESIGN.UPDATE_AFTER,m.layoutPlayerChildren,"wysiwyg.viewer.components.MediaPlayer"),o.registerHook(o.HOOKS.REMOVE.BEFORE,v.handleColumnDeletion,"wysiwyg.viewer.components.Column"),o.registerHook(o.HOOKS.REMOVE.AFTER,v.deleteContainerIfHasNoMoreColumns,"wysiwyg.viewer.components.Column"),o.registerHook(o.HOOKS.ADD_ROOT.BEFORE,v.handleSplitToColumns,"wysiwyg.viewer.components.Column"),o.registerHook(o.HOOKS.PROPERTIES.UPDATE_BEFORE,v.handleFullWidthPropertyChange,"wysiwyg.viewer.components.StripColumnsContainer"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,M.handleHeaderLayoutChange,"wysiwyg.viewer.components.HeaderContainer"),o.registerHook(o.HOOKS.ADD.BEFORE,y,"wysiwyg.viewer.components.StripColumnsContainer"),o.registerHook(o.HOOKS.ADD.BEFORE,E,"wysiwyg.viewer.components.SiteRegionContainer"),o.registerHook(o.HOOKS.ADD.BEFORE,D.beforeAdd,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),o.registerHook(o.HOOKS.ADD.AFTER,I,"wysiwyg.viewer.components.WFacebookLike"),o.registerHook(o.HOOKS.ADD.AFTER,S,"wysiwyg.viewer.components.WFacebookComment"),o.registerHook(o.HOOKS.ADD.AFTER,h,"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),o.registerHook(o.HOOKS.ADD.AFTER,P,"wysiwyg.viewer.components.VKShareButton"),o.registerHook(o.HOOKS.ADD.AFTER,A,"wysiwyg.viewer.components.FacebookShare"),o.registerHook(o.HOOKS.ADD.BEFORE,d.updateConnectionsIfNeeded),o.registerHook(o.HOOKS.ADD.BEFORE,R.updateSerializedConnectionsData),o.registerHook(o.HOOKS.ADD.AFTER,d.generateNicknamesForPageOfComponent),o.registerHook(o.HOOKS.ADD.AFTER,C.handleControllerAddition,"platform.components.AppController"),o.registerHook(o.HOOKS.ADD.AFTER,x.handleAppWidgetAddition,"platform.components.AppWidget"),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,d.deleteNicknameFromComponentIfInvalid),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,R.removeInvalidConnections),o.registerHook(o.HOOKS.CHANGE_PARENT.AFTER,d.generateNicknamesForPageOfComponent),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,C.handleControllerParentChange,"platform.components.AppController"),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,x.handleAppWidgetParentChange,"platform.components.AppWidget"),o.registerHook(o.HOOKS.MOBILE_CONVERSION.AFTER,d.generateNicknamesForPages),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,C.handleControllerSerialization,"platform.components.AppController"),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,x.handleAppWidgetSerialization,"platform.components.AppWidget"),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,d.setOriginalContextToSerializedComponent),o.registerHook(o.HOOKS.REMOVE.BEFORE,C.handleControllerDeletion,"platform.components.AppController"),o.registerHook(o.HOOKS.REMOVE.BEFORE,x.handleAppWidgetDeletion,"platform.components.AppWidget"),o.registerHook(o.HOOKS.ADD.BEFORE,x.beforeAddHook,"platform.components.AppWidget"),o.registerHook(o.HOOKS.ADD_ROOT.GET_CONTAINER_TO_ADD_TO,T.getContainerToAddTo,"mobile.core.components.Page"),o.registerHook(o.HOOKS.REMOVE.AFTER,T.removeDeadBehaviors,"mobile.core.components.Page"),o.registerHook(o.HOOKS.ADD.AFTER,T.removeBehaviorsFromAddedPage,"mobile.core.components.Page"),o.registerHook(o.HOOKS.DUPLICATE_ROOT.BEFORE,_.addOriginCompIdToWidgetsOnPage,"mobile.core.components.Page"),o.registerHook(o.HOOKS.ADD.AFTER,R.updateSerializedConnectionsDataForPage,"mobile.core.components.Page"),o.registerHook(o.HOOKS.DUPLICATE_ROOT.AFTER,_.fixDuplicatedPageCodeBehaviors,"mobile.core.components.Page"),o.registerHook(o.HOOKS.DUPLICATE_ROOT.AFTER,_.duplicatePageCodeIfRequired,"mobile.core.components.Page"),o.registerHook(o.HOOKS.ADD_PAGE.AFTER,z.page.initMobileComponents),o.registerHook(o.HOOKS.REMOVE.AFTER,_.removePageFromPlatformApps,"mobile.core.components.Page"),o.registerHook(o.HOOKS.REMOVE.BEFORE,_.beforePageRemoveHook,"mobile.core.components.Page"),o.registerHook(o.HOOKS.RELAYOUT_MOBILE_PAGE.AFTER,w.setMobileMediaSizing),o.registerHook(o.HOOKS.ADD_PAGE.AFTER,w.setMobileMediaSizingByPointer),o.registerHook(o.HOOKS.SITE_BACKGROUND_UPDATE.AFTER,w.setMediaSizingForDevice),N.initContactFromHooks(o),o.registerHook(o.HOOKS.MOBILE_CONVERSION.BEFORE,g.activatePageMobileHoverModes),o.registerHook(o.HOOKS.ADD.AFTER,l.addedGluedWidget,"wysiwyg.viewer.components.tpapps.TPAGluedWidget"),o.registerHook(o.HOOKS.REMOVE.BEFORE,l.willRemoveGluedWidget,"wysiwyg.viewer.components.tpapps.TPAGluedWidget"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,p.enforceIconLimitations,"wysiwyg.viewer.components.QuickActionBarItem"),o.registerHook(o.HOOKS.DATA.UPDATE_AFTER,b.syncRepeaterTemplateDataWithFirstItem),o.registerHook(o.HOOKS.DESIGN.UPDATE_AFTER,b.syncRepeaterTemplateDesignWithFirstItem),o.registerHook(o.HOOKS.REMOVE_COMP_MODE.BEFORE,H.removeOverridesPointingToMode,"wysiwyg.viewer.components.WSiteStructure"),o.registerHook(o.HOOKS.REMOVE.AFTER,L.removeComponentHook),o.registerHook(o.HOOKS.REMOVE.AFTER,B.setMobileComponentAsDead),r.isOpen("registerComponentsDynamically")||(o.registerExternalHook(o.HOOKS.PROPERTIES.UPDATE_BEFORE,G.beforeUpdateProperties),o.registerExternalHook(o.HOOKS.DATA.UPDATE_BEFORE,G.beforeUpdateData),o.registerExternalHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,G.beforeUpdateLayout));o.registerHook(o.HOOKS.DESERIALIZE.BEFORE,W.beforeDeserialize),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,W.setCustomSerializeData,"wysiwyg.viewer.components.RefComponent"),o.registerHook(o.HOOKS.ADD.AFTER,W.afterAddComponent,"wysiwyg.viewer.components.RefComponent"),o.registerHook(o.HOOKS.REMOVE.BEFORE,W.removeAllOverrides,"wysiwyg.viewer.components.RefComponent"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,k.beforeUpdateCheckboxData,"wysiwyg.viewer.components.inputs.Checkbox"),o.registerHook(o.HOOKS.DATA.UPDATE_AFTER,k.afterUpdateCheckboxData,"wysiwyg.viewer.components.inputs.Checkbox"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.TextInput"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.TextInput"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.TextAreaInput"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.TextAreaInput"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.DatePicker"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.DatePicker"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.ComboBoxInput"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.ComboBoxInput"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.FileUploader"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.FileUploader"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,U.beforeUpdateInputLabelLayout,"wixui.TimePicker"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,U.beforeUpdateInputLabelData,"wixui.TimePicker"),r.isOpen("sv_updatePlaceholder")&&e.forEach(["wysiwyg.viewer.components.inputs.TextInput","wixapps.integration.components.inputs.TextArea","wysiwyg.viewer.components.inputs.TextAreaInput","wysiwyg.viewer.components.inputs.ComboBoxInput","wysiwyg.viewer.components.inputs.DatePicker"],function(e){return o.registerHook(o.HOOKS.ADD.AFTER,V.afterAddInput,e)})}();var j=function(e,n,r){var i=G.createHookDefinition(e,n),a=i.hookName,s=i.hook;a&&s?o.registerExternalHook(a,s,r):function(e,n){t.utils.fedopsLogger.captureError(new Error('Could not register hook "'.concat(e,'" for component "').concat(n,'"')),{tags:{hooksRegistration:!0},extra:{componentType:n,hookName:e}})}(a,r)};return{registerExternalHooks:function(t,n){e.forEach(n,function(e,n){return j(n,e,t)})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(76),o=n(128);function i(n,r){var o=e(t.getDataSchemaByType(n,"QuickActions").configuration.properties).omit("quickActionsMenuEnabled").keys().map(function(e){return/(\w*)Enabled/.exec(e)[1]}).value(),i=e.difference(r,o);if(e.some(i))throw new Error("[".concat(i,"] are unsupported."))}function a(e,t){if(r.hasQuickActionBar(e))throw new Error('"'.concat(t,'" is allowed only for actionBar version 1'))}return{QUICK_ACTIONS_PROPS:{NAVIGATION_MENU:{type:"boolean",id:"navigationMenu"},PHONE:{type:"string",id:"phone"},EMAIL:{type:"string",id:"email"},WHATSAPP:{type:"string",id:"whatsapp"},ADDRESS:{type:"string",id:"address"},SOCIAL_LINKS:{type:"object",id:"socialLinks"}},SOCIAL_LINKS_IDS:["facebook","twitter","pinterest","google_plus","tumblr","blogger","linkedin","youtube","vimeo","flickr"],enable:function(t,n){var i=o.getSiteMetaData(t);i.quickActions.configuration.quickActionsMenuEnabled=n,o.setSiteMetaData(t,i);var a=e(t.siteAPI.getClientSpecMap()).values().find({appDefinitionId:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}),s=!e.isUndefined(a)&&!e.get(a,"permissions.revoked");!n&&s&&r.addQuickActionBar(t),n&&e(r.getActions(t)).reject("isDynamic").isEmpty()&&r.removeQuickActionBar(t)},isEnabled:function(e){return o.getSiteMetaData(e).quickActions.configuration.quickActionsMenuEnabled},colorScheme:{set:function(e,t){a(e,"actionBar.colorScheme.set");var n=o.getSiteMetaData(e);n.quickActions.colorScheme=t,o.setSiteMetaData(e,n)},get:function(e){return o.getSiteMetaData(e).quickActions.colorScheme}},actions:{enable:function(t,n){a(t,"actionBar.actions.enable"),function(t,n){var r=e(n).pickBy(function(e){return!!e}).keys().value();i(t,r);var a=o.getSiteMetaData(t),s=e.filter(r,function(t){return e.includes(["phone","email","address"],t)&&!a.contactInfo[t]||"socialLinks"===t&&e.isEmpty(a.quickActions.socialLinks)});if(e.some(s))throw new Error("Actions [".concat(s,"] has a missing value and thus cannot be enabled"))}(t,n);var r=o.getSiteMetaData(t);e.assign(r.quickActions.configuration,e.transform(n,function(e,t,n){e["".concat(n,"Enabled")]=t},{})),o.setSiteMetaData(t,r)},getEnabled:function(t){var n=e.omit(o.getSiteMetaData(t).quickActions.configuration,"quickActionsMenuEnabled");return e.transform(n,function(e,t,n){e[/(\w*)Enabled/.exec(n)[1]]=t},{})},update:function(t,n){a(t,"actionBar.actions.update"),i(t,e.keys(n));var r=o.getSiteMetaData(t);e.forEach(n,function(t,n){switch(n){case"phone":case"email":case"address":r.contactInfo[n]=t;break;case"socialLinks":r.quickActions.socialLinks=e(r.quickActions.socialLinks).reject(function(n){return e.includes(e.keys(t),n.id)}).concat(e.map(t,function(e,t){return{id:t,url:e}})).reject(function(t){return e.isEmpty(t.url)}).value()}}),o.setSiteMetaData(t,r)},get:function(n){var r=o.getSiteMetaData(n),i=e.pick(r.contactInfo,["phone","email","address"]),a=t.getDataSchemaByType(n,"SocialLink").id.enum,s=e.transform(a,function(e,t){e[t]=""},{}),u=e.transform(r.quickActions.socialLinks,function(e,t){e[t.id]=t.url},{});return e.assign(i,{socialLinks:e.assign(s,u)})}}}}()},function(e,t){e.exports={buildAbortedError:function(){var e=new Error("Request aborted by browser");return e.name="RequestAbortError",e},buildServerError:function(e,t){return new Error("Server Error\nStatus: ".concat(e,"\nResponse Text: ").concat(t))}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(3);function r(e,t){return e.pointers.components.getViewMode(t).toLowerCase()}return{getPageProperties:function(n,o){return e.get(t.getPropertiesItem(n,o),r(n,o))},updatePageProperties:function(n,o,i){var a=function(n,o,i){var a,s=t.getPropertiesItem(n,o)||t.createPropertiesItemByType(n,"PageProperties"),u=r(n,o);if(e.isPlainObject(i)){var c=e.get(s,u,{});a=e.assign(c,i)}else a=i;return e.set(s,u,a),s}(n,o,i);t.updatePropertiesItem(n,o,a)}}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(136),{notifyApplication:function(e,t,n,i){i&&r.set(n,"eventPayload.historySnapshotId",e.runtimeConfig.nextHistorySnapshotId),o.triggerEvent(t,n)}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(475),{getAPIForSDK:function(e){var t=function e(t,n){return r.isFunction(t)?r.partial(t,n):r.isObject(t)?r.mapValues(t,function(t){return e(t,n)}):t}({document:o},window.documentServices);return e=e||{},r.merge(t.document,e),r(t).merge(e).merge(e.editor).reduce(function(e,t,n,o){return r.assign(e,function e(t,n){return r.reduce(r.get(n,t),function(o,i,a){var s=t.concat([a]);return r.isFunction(i)||!r.isObject(i)?(o[s.join(".")]=i,o):r.merge(o,e(s,n))},{})}([n],o))},{})}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(5),i=n(22),a=n(39),{reportAPICallBI:function(e,t){if(o.isOpen("platformSdkApiCallBI")){var n=t.call.split("."),s=n.slice(0,-1).join("."),u=r.last(n),c=t.args.map(JSON.stringify).join(",");i.event(e,a.PLATFORM_API_CALL,{app_name:t.args[0].appDefinitionId,module:s,function:u,arguments:c,pageId:e.siteAPI.getPrimaryPageId()})}}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(14),i=n(33),s=function(e,t,n){return r.reduce(e,function(e,r,o){return a(r,n,t)&&e.push(o),e},[])},u=function(e){var t=e.get("data");if(!t)return null;var n=t.get("document_data").filter(function(e){return i.isTpaByDataType(e.get("type"))}).toJS();return r(n).map("applicationId").uniq().value()},{getAllAppIdsInstalledOnPages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=[];return e.forEach(function(e){o=o.concat(u(e))}),r.union(o,s(t,n,e))},isPlatformAppActive:a=function(e,t,n){return o.hasEditorPlatformPart(e)&&(function(e,t){var n=e.appDefinitionId;return r.some(t,{appDefinitionId:n})}(e,n)||function(e,t){var n=!1;return e.forEach(function(e){return e.getIn(["data","document_data"]).forEach(function(e){var r=e.get("appId"),o=e.get("applicationId"),i=e.get("appDefinitionId"),a=e.get("appDefId");n=n||"".concat(r)==="".concat(t.applicationId)||"".concat(o)==="".concat(t.applicationId)||"".concat(o)==="".concat(t.appDefinitionId)||"".concat(i)==="".concat(t.appDefinitionId)||"".concat(a)==="".concat(t.appDefinitionId)})}),n}(t,e))}})},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(1),i=n(38),a=n(13),s=n(14),u=r.template("<%= premiumStateAPIUrl %>?siteGuid=<%= metasiteId %>"),{getPremiumApps:function(e,t,n,i){var a=function(e){var t=e.pointers.general.getServiceTopology(),n=e.pointers.getInnerPointer(t,"premiumStateApiUrl");return e.dal.get(n)}(e),s=u({premiumStateAPIUrl:a,metasiteId:t});o.ajaxLibrary.ajax({type:"POST",url:s,data:{},dataType:"json",success:function(e){r.isFunction(n)&&n(e.payload)},error:i})},extractYearlyPremiumApps:function(e){var t=[],n=e.tpaPackages;return r.isArray(n)?r.forEach(n,function(e){c(e)&&t.push(e.appDefinitionId)}):r.isObject(n)&&c(n)&&t.push(n.appDefinitionId),t},isYearly:c=function(e){return 6===e.cycle},getSiteUpgradeUrl:function(e,t){var n=e.dal.get(e.pointers.general.getServiceTopology()),r="".concat(n.premiumServerUrl,"/wix/api/premiumStart"),o=a.generalInfo.getMetaSiteId(e);return(t=t||{}).siteGuid=o,new i.common.TPABaseUrlBuilder(r).addMultipleQueryParams(t).build()},getAppUpgradeUrl:function(e,t,n,r,o){var u=e.dal.get(e.pointers.general.getServiceTopology()),c="".concat(u.premiumServerUrl,"/wix/api/tpaStartPurchase"),l=s.getAppData(e,t),p=a.generalInfo.getMetaSiteId(e);o=o||{};var d={applicationId:t,vendorProductId:n,paymentCycle:r||"MONTHLY",appDefinitionId:l.appDefinitionId,metaSiteId:p,pp_type:o.pp_type,referralAdditionalInfo:o.referralAdditionalInfo};return o.premiumIntent&&(d.premiumIntent=o.premiumIntent),new i.common.TPABaseUrlBuilder(c).addMultipleQueryParams(d).build()}})},function(e,t,n){var r;e.exports=(r={EVENT_TYPE_NOT_SUPPORTED:{errorCode:28004,desc:"tpa event type is not supported",severity:"error"},ECOM_HIDDEN_PAGES_MISSING:{errorCode:28005,desc:"ecom pages are missing after save",severity:"error"},FAIL_TO_GET_APP_MARKET_DATA:{errorCode:28006,desc:"failure while trying to get app market data",severity:"error"}},n(22).register("documentServices","error",r),r)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=function(){var e=n(0),t=n(42),r=n(57),o=n(49),i=n(138),a=n(78),s=n(28),u=n(59),c=n(195);function l(e,t){return r.setWixCodeModel(e,{gridAppId:t.gridAppId}),t}function p(e){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}function d(e){return s.isFirstSave(e)}function g(n,s){var u=o.trace(n,{action:"cloneApp"});return function(n){var o={baseUrl:i.getBaseUrlFromPS(n),gridAppId:r.getGridAppId(n),metasiteId:p(n),signedInstance:t.getExistingWixCodeAppFromPS(n).instance,isFirstSave:d(n)};return i.clone(o).then(e.partial(l,n)).then(function(e){return f(n),e})}(n).then(function(e){u({appId:r.getGridAppId(n),message:e})}).catch(function(t){return function(e){return-409===a.safeGetErrorCode(e)}(t)?(f(n),u({level:o.levels.WARN,message:t}),c.runUsingPS(n).then(e.partial(m,n)).then(e.partial(g,n,s))):0===s?(u({level:o.levels.ERROR,message:t}),Promise.reject(t)):(u({level:o.levels.WARN,message:t,params:{retriesLeft:s}}),g(n,s-1))})}function f(e){var t=e.pointers.wixCode.getIsAppReadOnly();e.dal.set(t,!1)}function m(e){var t=e.pointers.wixCode.getIsAppReadOnly();e.dal.set(t,!0)}function v(e){return u.runFunctionInSaveQueue(function(){return function(e){return function(e){var t=e.pointers.wixCode.getIsAppReadOnly();return!e.dal.get(t)}(e)?Promise.resolve():g(e,2)}(e)})}return{ensureAppIsWriteable:v,setAppWriteable:f,handleAppIsReadOnlyServerError:function(e){var t=e.pointers.wixCode.getIsAppReadOnly();return e.dal.set(t,!0),v(e)},createNewWriteableApp:function(n){return u.runFunctionInSaveQueue(function(){return function(n){var a=o.trace(n,{action:"createApp"}),s={baseUrl:i.getBaseUrlFromPS(n),metasiteId:p(n),signedInstance:t.getExistingWixCodeAppFromPS(n).instance};return i.create(s).then(e.partial(l,n)).then(function(e){return f(n),e}).then(function(e){a({appId:r.getGridAppId(n),message:e})}).catch(function(e){return a({level:o.levels.WARN,message:e}),Promise.reject(e)})}(n)})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(48),r=n(78),o=n(138),i=n(49),a=n(57),s=n(42),u=n(24);function c(e){var t=e.traceFunc,n=e.isAppReadOnly,a=e.wixCodeApp,s=e.baseUrl,u=e.metasiteId,c=e.gridAppId,l=t({action:"markAppImmutable"});if(n)return l({message:"no changes"}),Promise.resolve();if(!a)return Promise.reject(new Error("no wix code app"));var p={baseUrl:s,metasiteId:u,gridAppId:c,signedInstance:a.instance};return o.save(p).then(function(){l()}).catch(function(e){if(!function(e){return-409===r.safeGetErrorCode(e)}(e))throw l({level:i.levels.ERROR,message:e}),e;l({level:i.levels.WARN,message:"The grid app was already saved on server"})})}return{runUsingPS:function(t){return c({traceFunc:e.partial(i.trace,t),isAppReadOnly:function(e){var t=e.pointers.wixCode.getIsAppReadOnly();return e.dal.get(t)}(t),wixCodeApp:s.getExistingWixCodeAppFromPS(t),baseUrl:o.getBaseUrlFromPS(t),metasiteId:function(e){var t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}(t),gridAppId:a.getGridAppId(t)})},runUsingSnapshot:function(n){return c({traceFunc:e.partial(i.traceWithSnapshot,n),isAppReadOnly:n.getIn(u.paths.IS_APP_READ_ONLY),wixCodeApp:s.getExistingWixCodeAppFromSnapshot(n),baseUrl:t.extractFromSnapshot(n,["serviceTopology",u.WIX_CODE_SERVICE_URL_KEY]),metasiteId:function(e){return t.extractFromSnapshot(e,["rendererModel","metaSiteId"])}(n),gridAppId:t.extractFromSnapshot(n,u.paths.GRID_APP_ID)})}}}()},function(e,t){var n;e.exports=(n={},{registerCustomGetter:function(e,t){n[e]=t},getCustomGetter:function(e){return n[e]}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(11),r=n(12),o=n(484),i={"wysiwyg.viewer.components.MediaOverlayControls":function(e,n,r,o){l(r,o),t.updateCompLayout(e,n,r,!0)},"wysiwyg.viewer.components.MediaControls":function(e,n,r,o){p(r,o,d(e,n)),t.updateCompLayout(e,n,r,!0)}},a={vertical:2,horizontal:2},s=.65;function u(t,n){var r=e.get(n,["cssStyle","cssBorderRadius"]),o=function(t,n){if(!e.isEmpty(n)){var r=Math.max(n.topLeft.value+n.topRight.value,n.bottomLeft.value+n.bottomRight.value),o=Math.max(n.topLeft.value+n.bottomLeft.value,n.topRight.value+n.bottomRight.value),i=t.width/r,a=t.height/o,s=Math.min(i,a);return s<1?s:1}return 1}(t,r),i=e.get(r,["bottomLeft","value"],0)*o;return{left:.8*i,width:.8*(i+e.get(r,["bottomRight","value"],0)*o)}}function c(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"propertyQuery")),o=e.pointers.components.getPageOfComponent(t),i=e.dal.get(e.pointers.data.getPropertyItem(r.stripHashIfExists(n),o.id)).playerId;return e.pointers.components.getComponent(i,o)}function l(e,t){var n=Math.min(t.width,t.height)*s;(e.width>n||e.height>n)&&(e.width=n,e.height=n),e.y=(t.height-e.height)/2,e.x=(t.width-e.width)/2}function p(e,t,n){var r=u(t,n);e.y=t.height-e.height-a.vertical,e.x=a.horizontal+r.left,e.width=t.width-r.width-2*a.horizontal}function d(e,t){var n=c(e,t),r=e.dal.get(e.pointers.getInnerPointer(n,"designQuery")),o=e.pointers.components.getPageOfComponent(t),i=e.pointers.data.getDesignItem(r.replace("#",""),o.id);return e.dal.get(i)}return{layoutPlayerChildren:function(t,n,r){if(t.siteAPI.isExperimentOpen("se_videobox_rotate"))o.layoutPlayerChildren(t,n,r);else{var a=t.pointers.components.getChildren(n);e.forEach(a,function(e){var n=t.dal.get(t.pointers.getInnerPointer(e,"componentType"));if(i[n]){var o=t.dal.get(t.pointers.getInnerPointer(e,"layout"));i[n](t,e,o,r)}})}},positionBigPlay:function(e,t,n,r,i){if(e.siteAPI.isExperimentOpen("se_videobox_rotate"))o.positionBigPlay(e,t,n,r,i);else if(!i){var a=c(e,t);if(e.pointers.components.isDescendant(t,a))l(n,e.dal.get(e.pointers.getInnerPointer(a,"layout")))}},positionControlsBar:function(e,t,n,r,i){if(e.siteAPI.isExperimentOpen("se_videobox_rotate"))o.positionControlsBar(e,t,n,r,i);else if(!i){var a=c(e,t);if(e.pointers.components.isDescendant(t,a))p(n,e.dal.get(e.pointers.getInnerPointer(a,"layout")),d(e,t))}}}}()},function(e,t,n){var r;e.exports=(r=n(82),function(e,t){r.upgradeUrl(e,t,"facebook.comments")})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(4),i=n(3),a=n(35),s=n(53),{removePlatformApplicationFromPageIfLastController:function(e,t){var n=o.getPage(e,t),r=i.getDataItem(e,t).applicationId,s=e.pointers.data.getDataItemsWithPredicate({applicationId:r},n.id);a.updatePagePlatformApp(e,n,r,s.length>1)},removeControllerFromStateMap:function(e,t){var n=e.pointers.platform.getControllerStatePointer(t.id);e.dal.isExist(n)&&e.dal.remove(n)},addControllerStateToSerializedStructure:function(e,t,n){var r=e.dal.get(e.pointers.platform.getControllerStatePointer(t.id));void 0!==r&&(n.state=r)},setControllerStateFromSerializedStructure:function(e,t,n){r.has(n,"custom.state")&&s.setState(e,r.set({},r.get(n,"custom.state"),[t]))},addPlatformAppToPageIfFirstController:function(e,t,n,r){r=r||o.getPage(e,t),a.updatePagePlatformApp(e,r,n,!0)}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(18),i=n(32),a=n(201),s=n(1),u=a.linkUtils,{navigateTo:function(e,t,n){var i=e.dal.get(e.pointers.routers.getRoutersConfigMapPointer()),a=s.siteStructureUtils.getRouterPrefixes({configMap:i}),c=function(e){var t=o.getPagesDataItems(e),n=e.dal.get(e.pointers.routers.getRoutersPointer()),i=e.dal.get(e.pointers.general.getClientSpecMap()),a=o.popupPages.isPopup.bind(o.popupPages,e),u=e.pointers.data.getDataItemFromMaster(s.siteConstants.MASTER_PAGE_ID),c=e.dal.get(u),l=r.get(c,["mainPage","id"])||r.get(c,"mainPageId")||"mainPage";return s.siteStructureUtils.getPages(t,a,l,n,i)}(e),l=u.convertUrlToLinkObject(a,t,null,c);l.hasOwnProperty("pageId")&&(l.pageId="#"===l.pageId?l.pageId:l.pageId.replace("#","")),o.navigateTo(e,l,n)},setState:function(e,t){var n=e.pointers.platform.getAppStatePointer();r.forEach(t,function(t,o){r.forEach(t,function(t){e.dal.full.set(e.pointers.getInnerPointer(n,t.id),o)})})},getState:function(e,t){var n=e.pointers.platform.getAppStatePointer();return e.dal.get(e.pointers.getInnerPointer(n,t.id))||i.Page.DEFAULT_STATE}})},function(e,t){e.exports=I},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(101),o=n(53),i=n(60),a=n(79),s=n(3),u=n(4),c=n(7);function l(n,r,o,i,u,c,l,p,d){if(!e.isEmpty(d)){var g=e.reduce(d,function(t,n){var o=s.getDataItem(r,n.controllerRef);if(o){var i=o.applicationId,u=e.get(a.getAppDataByAppDefId(r,i),"applicationId");u&&(t[u]=t[u]||[],t[u].push(n))}return t},{});e.forEach(g,function(e,i){n(r,i,t.factory.componentDeleted({componentRef:o,connections:e}),!0)})}}function p(t,n,r,i,a){var s=o.getConnectedComponentStageData(t,r),u=e.get(s,["behavior",n]);return e.isUndefined(u)||e.isUndefined(a[u])?i:e.isFunction(a[u])?a[u](i):a[u]}function d(e,t,n,r,o){return!1!==r&&p(e,t,n,r,o)}function g(t,n,o){var a=[n].concat(r(t.pointers.full.components.getChildrenRecursively(n))),s=e(a).map(function(e){return i.getPrimaryConnection(t,e)}).compact().value(),l=e.filter(a,function(e){return"platform.components.AppWidget"===u.getType(t,e)});return e.some(s,function(e){return function(e,t,n,r){return"platform.components.AppWidget"===u.getType(e,n.controllerRef)&&!c.isDescendantOfComp(e,r,n.controllerRef)&&!t.some(function(t){return e.pointers.isSamePointer(t,n.controllerRef)})}(t,l,e,o)})}return{getAttributeFromManifest:d,getOnDeleteHook:function(t){return e.partial(l,t)},isDuplicatable:function(e,t,n){return d(e,"duplicatable",n,t,{false:!1,true:t})},canReparent:function(e,t,n){return d(e,"canReparent",n,t,{false:!1,true:t})},isRotatable:function(e,t,n){return d(e,"rotatable",n,t,{false:!1,true:t})},canBeFixedPosition:function(t,n,o){if(!1===n)return!1;var a=e.filter(u.getAncestors(t,o),function(e){return"platform.components.AppWidget"===u.getType(t,e)}),s=[o].concat(r(t.pointers.full.components.getChildrenRecursively(o)));return!e.some(s,function(n){return function(t,n,r){return n&&e.some(r,function(e){return t.pointers.isSamePointer(e,n.controllerRef)})}(t,i.getPrimaryConnection(t,n),a)})&&d(t,"pinnable",o,n,{false:!1,true:n})},isResizableSides:function(e,t,n){return d(e,"resizable",n,t,{false:[],true:t})},layoutLimitsHook:function(t,n,r){return d(t,"resizable",r,n,{false:function(t){return t.aspectRatio?e.omit(t,"aspectRatio"):t},true:n})},isContainable:function(e,t,n,r){return!1!==t&&(!g(e,n,r)&&(function(e,t,n){return t&&(e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n)||!e.pointers.components.isInMasterPage(t)&&e.pointers.components.isInMasterPage(n))}(e,r,n)?p(e,"toggleShowOnAllPagesEnabled",n,t,{false:!1,true:t}):t))}}}()},function(e,t,n){e.exports=function(){var e,t=n(0),r=n(6),o=n(497),i=n(498),a=n(1),s=n(204),u=n(5);function c(e,n,r){if(d(e)&&(n.apps=t.intersection(n.apps,i.getAllowedApps(e)),n.apps=i.addDependantApps(e,n.apps),n.skipAppsCheck||!t.isEmpty(n.apps))){var o=function(e,n,r){if(!n||!n.apps)return n;return n.apps.reduce(function(o,s){var u=t.get(i.optionsModifiers,s,t.noop)(e,r);return u&&a.wSpy.log("livepreview",["options changed by app",s,u,n]),t.assign(o,u)},n)}(e,n,r);s.action("refresh livepreview",function(){return e.siteAPI.refreshAppsInCurrentPage(o)})()}}function l(e,n,r,o,i){var a=t.assign({apps:n,source:r,sendInitAndStart:!0},i||{});t.isEmpty(n)||c(e,a,o)}function p(e,n){c(e,t.assign(n,{apps:i.getAllowedApps(e)}))}function d(e){return u.isOpen("sv_livePreview")&&"appBuilder"!==e.config.origin}function g(t,n){e[t]=r.registerHook(t,n)}function f(e,n,r){return t.get(i.optionsModifiersAllApps,r,t.noop)(e,n)}return{init:function(e){p(e,{source:"INIT",immediate:!0})},debouncedRefresh:function(e,t){c(e,{apps:t.apps,source:t.source,sendInitAndStart:!0,resetRuntime:!0})},isActive:d,autoRun:function(n){t.forEach(e,function(e,t){return r.unregisterHook(t,e)}),e=Object.create(null),g(r.HOOKS.DATA.UPDATE_AFTER,function(e,t,i){var a=f(n,t,r.HOOKS.DATA.UPDATE_AFTER);l(n,o.appsOfComp(n,i,t),"DATA.UPDATE_AFTER",t,a)}),g(r.HOOKS.PROPERTIES.UPDATE_AFTER,function(e,t,i){var a=f(n,t,r.HOOKS.PROPERTIES.UPDATE_AFTER);l(n,o.appsOfComp(n,i,t),"PROPERTIES.UPDATE_AFTER",t,a)}),g(r.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,function(e,t,i){var a=f(n,i,r.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS);l(n,o.appsOfComp(n,t,i),"AFTER_UPDATE_CONNECTIONS",i,a)}),g(r.HOOKS.CONNECTION.AFTER_DISCONNECT,function(e,t,i){var a=f(n,t,r.HOOKS.CONNECTION.AFTER_DISCONNECT);l(n,[o.getAppOfController(n,i)],"AFTER_DISCONNECT",t,a)}),g(r.HOOKS.DATA.SET_BY_POINTER_AFTER,function(e,t,r){return l(n,o.appsOfComp(n,r,t),"SET_BY_POINTER_AFTER")}),g(r.HOOKS.ADD_ROOT.AFTER,function(e,t){return l(n,o.appsOfComp(n,null,t),"ADD_ROOT.AFTER")}),g(r.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,function(e,t){p(n,"editor"===t?{restartWorker:!0,skipAppsCheck:!!i.getWixCodeAppDefIdIfExists(n),source:"CHANGE_COMPONENT_VIEW_MODE"}:{sendLoad:!0,sendInitAndStart:!0,skipAppsCheck:!!i.getWixCodeAppDefIdIfExists(n),source:"CHANGE_COMPONENT_VIEW_MODE"})}),g(r.HOOKS.CHANGE_PARENT.AFTER,function(e,t){n.dal.get(t)?l(n,o.appsOfComp(n,null,t),"CHANGE_PARENT",t,{immediate:!0}):p(n,{resetRuntime:!0,sendInitAndStart:!0,source:"CHANGE_PARENT"})}),g(r.HOOKS.PAGE.AFTER_NAVIGATE_TO_PAGE,function(){return p(n,{source:"AFTER_NAVIGATE_TO_PAGE",immediate:!0})}),g(r.HOOKS.MULTILINGUAL.AFTER_CHANGE_LANGUAGE,function(){return p(n,{source:"AFTER_CHANGE_LANGUAGE",immediate:!0})}),g(r.HOOKS.SWITCH_VIEW_MODE.AFTER,function(){return p(n,{sendInitAndStart:!0,resetRuntime:!0,source:"SWITCH_VIEW_MODE"})}),g(r.HOOKS.UNDO_REDO.AFTER_APPLY_SNAPSHOT,function(){return p(n,{restartWorker:!0,resetRuntime:!0,source:"UNDO_REDO.AFTER_APPLY_SNAPSHOT"})})}}}()},function(e,t){e.exports=S},function(e,t,n){e.exports=function(){var e=n(0),t=n(105),r=n(1);function o(e,t,n){return e.dal.isExist(t)?e.dal.get(t):n}return{isUndoableFile:function(e){return t.isSchemaFile(e)},assembleUndoableFile:function(n,r,o,i){if(e.isUndefined(r))throw new Error("Cannot read undoable file which has not been loaded [".concat(n,"]"));if(t.isSchemaFile(n))return t.assembleSchema(r,o,i)},setUndoableContent:function(e,t,n){var i=e.pointers.wixCode.getFilePathId(t),a=o(e,i,null);null===a&&(a=function(e){return r.guidUtils.getUniqueId(e,"-")}(t),e.dal.set(i,a));var s=e.pointers.wixCode.getUndoableModifiedFileContent(a);e.dal.set(s,n)},getUndoableContent:function(e,t){var n=e.pointers.wixCode.getFilePathId(t),r=o(e,n,null);if(null===r)return null;var i=e.pointers.wixCode.getUndoableModifiedFileContent(r);return o(e,i,null)},getUndoableContentByPath:function(t,n){return e.mapValues(n,function(e){return t[e]})}}}()},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S;e.exports=(i=n(5),a=n(1),s=n(504),u=n(505),c=n(78),l=n(185),p=s.errorTypes,d=function(e){return i.isOpen("ds_useNewWixDataSchemasClient")?g(e):f(e)},g=function(e){var t=e.signedInstance,r=e.appId;return(0,n(207).createDataSchemasClientForBrowser)(t,r,{baseUrl:"//code.wix.com/_api/cloud-data/v1/schemas"})},f=function(e){return m(e),u.default(s)},m=function(e){var t=e.signedInstance,n=e.instanceId,r=e.appId;s.baseUrl="//".concat(n,".dev.wix-code.com/preview"),s.queryParameters=a.urlUtils.toQueryString({instance:t,gridAppId:r}),s.options={headers:{"X-XSRF-TOKEN":a.cookieUtils.getCookie("XSRF-TOKEN")}}},v=function(e){return e.catch(function(e){var t=i.isOpen("ds_useNewWixDataSchemasClient")?y(e):S(e);return Promise.reject(t||e)})},y=function(e){var t=n(207).WixDataSchemas;return e instanceof t.FailedRequestException?l.buildAbortedError():e instanceof t.UnsuccessfulResponseException?l.buildServerError(e.status,e.responseText):void 0},E=c.errorTypes,r(o={},p.ABORT,E.ABORT),r(o,p.TIMEOUT,E.TIMEOUT),r(o,p.PARSE,E.PARSE),I=o,S=function(e){if(e.xhr)return c.build({xhr:e.xhr,errorType:I[e.errorType]})},{list:function(e){return v(d(e).list())},get:function(e,t){return v(d(e).get(t))},save:function(e,t,n){return v(d(e).save(t,n,{returnUpdated:!0}))},remove:function(e,t){return v(d(e).remove(t,{returnUpdated:!0}))}})},function(e,t,n){e.exports=n(506)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=n(507),s=function e(t){i(this,e),this.reason=t},u=function e(t,n){i(this,e),this.status=t,this.responseText=n},c=function(e){return e.ok?e.json():e.text().then(function(t){return Promise.reject(new u(e.status,t))})},l=function(e){return Promise.reject(new s(e))},p=function(e){return e.reduce(function(e,t){return Object.assign({},e,(n={},r=t.id,o=t,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o},{})},d=function(){function e(t,n,r,o){i(this,e),this.signedInstance=n,this.fetch=function(){return t.apply(void 0,arguments).then(c,l)},this.baseUrl=o&&o.baseUrl||"https://cloud-data.wix-code.com/v1/schemas",this.gridAppId=r}return o(e,null,[{key:"FailedRequestException",get:function(){return s}},{key:"UnsuccessfulResponseException",get:function(){return u}}]),o(e,[{key:"wrapWithDefaultOptions",value:function(e){return Object.assign({},e,{signedInstance:this.signedInstance,appId:this.gridAppId})}},{key:"formRequestUrl",value:function(e){return this.baseUrl+"?"+a.stringify(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1},n=this.wrapWithDefaultOptions({includeDeleted:t.includeDeletedCollections||!1,schemaIds:e});return this.fetch(this.formRequestUrl(n)).then(function(e){return r(e.schemas,1)[0]})}},{key:"bulkGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1,referencedCollectionsDepth:0},n=this.wrapWithDefaultOptions({depth:t.referencedCollectionsDepth||0,includeDeleted:t.includeDeletedCollections||!1,schemaIds:e});return this.fetch(this.formRequestUrl(n)).then(function(e){var t=e.schemas;return p(t)})}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeDeletedCollections:!1},t=this.wrapWithDefaultOptions({schemaIds:[],depth:0,includeDeleted:e.includeDeletedCollections||!1});return this.fetch(this.formRequestUrl(t)).then(function(e){var t=e.schemas;return p(t)})}},{key:"save",value:function(e,t){var n=JSON.stringify(this.wrapWithDefaultOptions({schemaId:e,schema:t}));return this.fetch(this.baseUrl,{method:"POST",body:n}).then(function(e){return e.schemas})}},{key:"setIsDeletedFlag",value:function(e,t){var n=JSON.stringify(this.wrapWithDefaultOptions({schemaId:e,partialSchema:{isDeleted:t}}));return this.fetch(this.baseUrl,{method:"PATCH",body:n}).then(function(e){return e.schemas})}},{key:"remove",value:function(e){return this.setIsDeletedFlag(e,!0)}},{key:"restore",value:function(e){return this.setIsDeletedFlag(e,!1)}}]),e}();t.default=d},function(e,t,n){e.exports=function(){var e=n(0),t=n(201),r=n(23),o=n(36),i=n(2),a=n(3),s=n(60),u=n(515),c=n(29),l=n(50),p=n(7),d=n(170),g=n(516),f=["dataBinding"];function m(n,r){var o=n.siteAPI.getComponentsByPageIdForWixCode(r);return e.transform(o,function(o,i,c){var d=p.getComponentById(n,c,r),m=l.getNickname(n,d);if(!o[m]){var v=i.componentType,y=i.dataQuery&&a.getDataItemById(n,i.dataQuery.replace("#","")),E=function(t){if(e.has(t,"applicationId")&&e.has(t,"widgetId"))return t.widgetId}(y),I=u.getWidgetDisplayName(g,E);if(s.isControllerType(v)){var S=e.get(y,"applicationId"),h=e.get(y,"controllerType");e.includes(f,S)&&(o[m]="$w.".concat(h))}else if(I)o[m]="$w.".concat(I);else{var P=t.typeUtils.getFullSdkType(v,E);o[m]=P}}},{})}function v(n,r,o){var i=n.dal.get(n.pointers.getInnerPointer(r,"componentType"))||o,s=a.getDataItemPointer(n,r),c=s&&n.dal.get(s),l=e.get(d.getWidgetData(n,c),"widgetId")||null,p=u.getWidgetDisplayName(g,l);return p||t.typeUtils.getFullSdkType(i,l)}return{getNicknameToTypeMap:function(t,n){var r=e.transform(n,function(e,n){e[n]=m(t,n)},{}),o=m(t,i.MASTER_PAGE_ID);return e.transform(r,function(n,r,a){a===i.MASTER_PAGE_ID?n[a]=o:c.isPopup(t,a)?n[a]=r:n[a]=e.merge({},r,o)},{})},getPageComponentsCodeModel:function(t,n){var u=t.siteAPI.getComponentsByPageIdForWixCode(n),d=u;if(function(e,t){return t!==i.MASTER_PAGE_ID&&!c.isPopup(e,t)}(t,n)){var g=t.siteAPI.getComponentsByPageIdForWixCode(i.MASTER_PAGE_ID);d=e.merge(u,g)}return e.transform(d,function(i,u,c){var d=p.getComponentById(t,c,n),g=l.getNickname(t,d);if(g&&!r.displayedOnlyStructureUtil.isRepeatedComponent(c)){var m=u.componentType,y=m,E=v(t,d,m);if(s.isControllerType(m)){var I=u.dataQuery&&a.getDataItemById(t,u.dataQuery.replace("#","")),S=e.get(I,"applicationId"),h=e.get(I,"controllerType");if(function(t,n){return s.isAppControllerType(t)&&!e.includes(f,n)}(m,S))return;h&&(y=h,E=h)}var P=o.getBehaviors(t,d),A=e.map(P,function(t){return e.assign({eventType:e.get(t,"action.name")},e.get(t,"behavior.params"))});i.push({compId:c,compName:g,events:A,type:y,sdkType:E,children:[]})}},[])},getCompSdkType:v}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S;e.exports=(r=n(0),o=n(59),i=n(517),a=n(28),s=n(22),u=n(52),c=n(83),l=n(2),p=n(5),d=n(218),g=n(6),f=n(21),m=n(204),v=n(1),y=n(19),E=n(217),I="Editor1.4",S="onboarding",function(e){function t(e,t){e.config.origin===I&&a.setUseOnBoarding(e,t)}function n(e){return{event:r.partial(s.event,e),error:r.partial(s.error,e)}}function h(e){return-10104===r.get(e,["document","errorCode"])}function P(e){var t=e.pointers.general.getPublishSaveInnerPointer(),n=e.pointers.general.getSilentSaveInnerPointer();e.dal.get(t)?e.dal.remove(t):e.dal.get(n)&&e.dal.remove(n)}function A(e,t,n){if(h(n)){var r=e.pointers.general.getSaveInvalidationCount(),o=e.dal.get(r)||0;e.dal.set(r,++o)}if(P(e),t){for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];t.apply(void 0,[n].concat(a))}}function T(e,t,n){var r=e.pointers.general.getSaveInvalidationCount();if(e.dal.set(r,0),P(e),d.setSaveProgress(!1),g.executeHook(g.HOOKS.SAVE.SITE_SAVED,null,[t]),n){for(var o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];n.apply(void 0,i)}}function O(e,t,n,o){var i=r.isString(o)?o:r.get(o,["document","errorDescription"],"unknown save error");if(E.error(new Error(i),{errorDescription:o},{isFirstSave:n}),d.setSaveProgress(!1),P(e),t){for(var a=arguments.length,s=new Array(a>4?a-4:0),u=4;u<a;u++)s[u-4]=arguments[u];t.apply(void 0,[o].concat(s))}if(h(o)){var c=r.get(e,["config","origin"])===S;c&&y.utils.fedopsLogger.captureError(new Error("Site validation error - ADI"),{tags:{adiSaveError:c},extra:{errorDescription:o}}),g.executeHook(g.HOOKS.SAVE.VALIDATION_ERROR)}}var C=function(e){return{extraPayload:e.runtimeConfig.firstSaveExtraPayload,settleInServer:e.runtimeConfig.settleInServer}},_=function(e){return{settleInServer:e.runtimeConfig.settleInServer}},D=function(e){e({documentServices:{errorCode:-1,errorType:c.save.SAVE_DISABLED_IN_DOCUMENT_SERVICES,errorDescription:"DocumentServices was created with parameter disableSave=true, so save is disabled."}})},w=function(e){e({documentServices:{errorCode:-1,errorType:c.save.SAVE_IN_PROGRESS,errorDescription:"Save is already in progress. The last save request is being ignored."}})},b=function(e){return function(t,n,r){if(d.canSave()){for(var o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];return e.apply(void 0,[t,n,r].concat(i))}return d.isEnabled()?d.isSaveInProgress()?w(r):void 0:D(r)}},M={initMethod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableSave:!1,firstSaveExtraPayload:null,settleInServer:!0},n=t.disableSave,r=void 0!==n&&n,o=t.firstSaveExtraPayload,i=void 0===o?null:o,a=t.settleInServer,s=void 0===a||a;r&&d.setSaveAllowed(!1),i&&(e.runtimeConfig.firstSaveExtraPayload=i),e.runtimeConfig.settleInServer=s},save:b(function(a,g,f,I,S){E.start(E.SAVE);var h=!function(e){return!e.dal.get(e.pointers.general.getNeverSaved())}(a);h&&E.start(E.FIRST_SAVE),t(a,!1),a.setOperationsQueue.flushQueueAndExecute(m.action(function(){var m=l.INTERACTIONS.SAVE,P=m.FIRST_PRESAVE_OPERATIONS,D=m.PRESAVE_OPERATIONS;try{y.utils.fedopsLogger.interactionStarted(h?P:D),y.utils.fedopsLogger.breadcrumb("preSaveOperation on save started - FirstSave: ".concat(h,".")),i.save(a,S),y.utils.fedopsLogger.interactionEnded(h?P:D)}catch(e){return y.utils.fedopsLogger.breadcrumb("preSaveOperation on save failed."),f&&f({preSaveOperation:e}),s.error(a,u.SAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION,{stack:e.stack}),y.utils.fedopsLogger.captureError(e,{tags:{preSaveOperationError:!0,isFullSave:I}}),void v.log.error("Save has failed due to a preSaveOperation, and no request has been sent to the server - please see the failure details below:",e)}y.utils.fedopsLogger.breadcrumb("preSaveOperation on save finished - FirstSave: ".concat(h,"."));var w,b,M=n(a),R=function(){E.end(E.SAVE),h&&E.end(E.FIRST_SAVE);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];T.apply(void 0,[a,h,g].concat(t))},N=r.partial(O,a,f,h);if(S&&(S.isPublish?(b=(w=a).pointers.general.getPublishSaveInnerPointer(),w.dal.set(b,!0)):S.isSilent&&function(e){var t=e.pointers.general.getSilentSaveInnerPointer();e.dal.set(t,!0)}(a),r.isUndefined(S.onBoarding)||t(a,S.onBoarding)),d.setSaveProgress(!0),h){var x=C(a);o.runFirstSaveTasks(e.getSaveTasksConfig(a),a.dal,R,N,M,x)}else if(I)o.runFullSaveTasks(e.getSaveTasksConfig(a),a.dal,R,N,M,_(a));else{if(function(e){var t=e.dal.get(e.pointers.general.getSaveInvalidationCount());return p.isOpen("block_after_third_invalid_save")&&t>=3}(a))return N({documentServices:{errorCode:-1,errorType:c.save.SAVE_BLOCKED_BY_DOCUMENT_SERVICES,errorDescription:"Save has failed 3 times due to invalidation error (-10104). This site is corrupt (in client!).\nPlease refresh the frame to reload to the last failed saved state."}}),void s.error(a,u.SAVE_BLOCKED_BY_DOCUMENT_SERVICES);o.runPartialSaveTasks(e.getSaveTasksConfig(a),a.dal,R,r.partial(A,a,N),M,_(a))}}))}),autosave:b(function(t,r,a){var c=n(t);t.setOperationsQueue.flushQueueAndExecute(m.action(function(){if(!p.isOpen("sv_autoSaveNoMobileMerge")){var n;y.utils.fedopsLogger.interactionStarted(l.INTERACTIONS.AUTOSAVE.PRESAVE_OPERATIONS),v.loggingUtils.performance.start(v.loggingUtils.performanceMetrics.AUTOSAVE.PRESAVE_OPERATIONS);try{i.autosave(t),y.utils.fedopsLogger.interactionEnded(l.INTERACTIONS.AUTOSAVE.PRESAVE_OPERATIONS)}catch(e){if(n=e,a)return a({preAutosaveOperation:n}),s.error(t,u.AUTOSAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION,{stack:n.stack}),void v.log.error("Autosave has failed due to a pre Autosave operation, and no request has been sent to the server - please see the failure details below:",n)}finally{v.loggingUtils.performance.finish(v.loggingUtils.performanceMetrics.AUTOSAVE.PRESAVE_OPERATIONS,{report:!0,additionalData:{success:(!n).toString(),pagesCount:f.getNumberOfPages(t)}})}}o.runAutosaveTasks(e.getSaveTasksConfig(t),t.dal,r,a,c)}))}),saveAsTemplate:b(function(t,r,a){try{i.saveAsTemplate(t)}catch(e){if(a)return void a({preSaveAsTemplateOperation:e})}M.save(t,function(){M.publish(t,function(t,r,i){t.setOperationsQueue.flushQueueAndExecute(m.action(function(){var a=[e.getSaveTasksConfig(t),t.dal,r,i,n(t)];o.runSaveAsTemplate.apply(o,a)}))}.bind(null,t,r,a),a)},a,!1)}),publish:b(function(t,r,i,a){var s,u,c=e.getSaveTasksConfig(t),p=[c,t.dal,r,i,n(t),a];s=c,u=t.dal,o.shouldSaveBeforePublish(s,u)?(y.utils.fedopsLogger.breadcrumb("shouldSaveBeforePublish - saving before publishing"),y.utils.fedopsLogger.interactionStarted(l.INTERACTIONS.SAVE_BEFORE_PUBLISH),M.save(t,function(){y.utils.fedopsLogger.interactionEnded(l.INTERACTIONS.SAVE_BEFORE_PUBLISH),o.runPublishTasks.apply(o,p)},i,!1,a)):(y.utils.fedopsLogger.breadcrumb("shouldSaveBeforePublish - no need to save, only publishing"),t.setOperationsQueue.flushQueueAndExecute(m.action(function(){o.runPublishTasks.apply(o,p)})))}),canUserPublish:function(e){if(!d.isEnabled())return!1;if(!a.isFirstSave(e)&&!a.isOwner(e)){var t=a.getUserPermissions(e);return r.includes(t,l.PERMISSIONS.PUBLISH)}return!0},saveState:d};return M})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o={targetComponent:"PAGES_CONTAINER",type:"BOTTOM_TOP"},i=function e(t,n){return s(t,n)&&r.every(t.pointers.components.getChildren(n),r.partial(e,t))},a=function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(t,["layout","anchors"]))},s=function(e,t){return r.isEmpty(a(e,t))},function(e,t){var n;if(!s(e,t)){var u=a(e,t);if(!function(e){return"masterPage"===e.id}(t)||r.size(u)>1||(n=r.head(u),!r.isEqual(o,r.pick(n,["targetComponent","type"]))))return!1}return r.every(e.pointers.components.getChildren(t),r.partial(i,e))})},function(e,t,n){var r;e.exports=(r=n(41),function(e){e.siteAPI.isMobileView()||r.runPartialConversionAllPages(e,!1)})},function(e,t){e.exports=h},function(e,t){e.exports=P},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(213),i=n(146).getSavePaths(),a={documentServicesModel:!0,rendererModel:!0,serviceTopology:!0,origin:!0},{extendSavableSnapshotWithFullSnapshot:function(e,t){return e.merge(t.filter(function(e,t){return a[t]}))},getSaveableSnapshot:function(e){return r.reduce(i,function(t,n){return e.hasIn(n)?t.setIn(n,e.getIn(n)):t},o.fromJS({}))}})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u;e.exports=(u=n(38),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,u.common.TPABaseUrlBuilder),n=t,(r=[{key:"addMetaSiteId",value:function(e){return this.addQueryParam("metaSiteId",e)}},{key:"addEditorSessionId",value:function(e){return this.addQueryParam("editorSessionId",e)}},{key:"addAcceptJson",value:function(){return this.addQueryParam("accept","json")}},{key:"addAppVersionAndSiteRevision",value:function(e,t){return e?this.addQueryParam("appVersion",e).addQueryParam("siteRevision",t):this}}])&&o(n.prototype,r),c&&o(n,c),t}())},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,s;e.exports=(a=n(19),s=n(1),{SAVE:"ds_save",FIRST_SAVE:"ds_first_save",SERVER_SAVE:"ds_serverSave",start:function(e){return a.utils.fedopsLogger.interactionStarted(e)},end:function(e){return a.utils.fedopsLogger.interactionEnded(e)},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"invalid CSRF Token"===e.message&&(t.xsrf=s.cookieUtils.getCookie("XSRF-TOKEN")),a.utils.fedopsLogger.captureError(e,{tags:o({saveError:!0},n),extras:t})}})},function(e,t){var n;e.exports=(n={isSaveInProgress:!1,isSaveAllowedByDSconfig:!0},{setSaveProgress:function(e){n.isSaveInProgress=e},isSaveInProgress:function(){return n.isSaveInProgress},canSave:function(){return n.isSaveAllowedByDSconfig&&!n.isSaveInProgress},isEnabled:function(){return n.isSaveAllowedByDSconfig},setSaveAllowed:function(e){n.isSaveAllowedByDSconfig=e}})},function(e,t){e.exports=A},function(e,t){e.exports={incNumberSuffix:function(e,t){t=t||" ";var n=parseInt(e.split(t).pop(),10);return isNaN(n)?"".concat(e+t,"2"):e.split(t).slice(0,-1).concat(n+1).join(t)}}},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(1),i=n(21),a=n(34),s=n(111),u=n(92),c=["primary"],{create:function(e){var t=function(t,o){var c,l=a.getAppDataByAppDefinitionId(e,"61f33d50-3002-4882-ae86-d319c1a249ab");if(l){var p=(c=e,r.some(i.getPagesList(c),r.partial(u.isBlogPage,c))),d="Deleted"===l.state;p&&d?s.restoreWixappOnServer(e,l.appDefinitionId,n("restore",t,o),o):p||d?!p&&d?t():p&&!d&&t():s.disableWixappOnServer(e,l.appDefinitionId,n("disable",t,o),o)}else t()},n=function(t,n,r){return function(i){i&&i.success?(function(e,t){a.registerAppData(e,t)}(e,i.payload),n()):(o.log.error('wixapps blog "'.concat(t,'" operation failed on MetaSite, errorCode: ').concat(i.errorCode,", errorDecription: ").concat(i.errorDescription)),r())}};return{partialSave:function(e,n,r,o){t(r,o)},fullSave:function(e,n,r,o){t(r,o)},firstSave:function(e,t,n){n()},saveAsTemplate:function(e,t,n){n()},autosave:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"wixappsSavePermissionsPlugin"},getSnapshotTags:function(){return c}}}})},function(e,t,n){var r,o;e.exports=(r=n(0),o={isEcomPagesMissingExperimentOn:r.noop},{setExperiments:function(e){r.merge(o,e)},getExperiments:function(){return o}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(149),o=n(77),i=n(49),a=n(48),s=n(58),{partialSave:u=r(function(e,t,n,r){var u,c=(u=t,a.extractFromSnapshot(u,["rendererModel","clientSpecMap"],!0));if(s.wixCodeWidgetService.getWixCodeSpec(c)){var l=i.traceWithSnapshot(t,{action:"saveWixCodeInMetasite"});o.save(t,function(e){!function(e,t){t?t.success?e({message:t.payload.clientSpecMap}):e({message:t,level:i.levels.ERROR}):e({message:"no wix code apps to save"})}(l,e),n(e)},function(e){l({message:e,level:i.levels.ERROR}),r(e)})}else n()}),fullSave:u,firstSave:u,saveAsTemplate:u,publish:function(e,t){t()},autosave:function(e,t,n){n()},getTaskName:function(){return"saveWixCodeTask"},getSnapshotTags:function(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}})},function(e,t,n){e.exports=function(){var e=n(24),t=n(42),r=n(195);function o(n,o,i,a){t.getExistingWixCodeAppFromSnapshot(o)?r.runUsingSnapshot(o).then(function(){o.getIn(e.paths.IS_APP_READ_ONLY)?i():i({changes:[{path:e.paths.IS_APP_READ_ONLY,value:!0}]})}).catch(function(e){a(e)}):i()}return{partialSave:o,fullSave:o,firstSave:o,saveAsTemplate:o,autosave:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"markAppImmutable"},getSnapshotTags:function(){return["primary"]}}}()},function(e,t,n){var r;e.exports=(r=n(111),{partialSave:function(e,t,n){n()},fullSave:function(e,t,n){n()},firstSave:n(149)(function(e,t,n,o){!function(e,t,n){var o=e.getIn(["rendererModel","metaSiteId"]),i=e.getIn(["documentServicesModel","editorSessionId"]),a=e.getIn(["rendererModel","clientSpecMap"]).toJS(),s=e.getIn(["serviceTopology","appStoreUrl"]);r.completeProvisionAppsAfterSave(s,o,i,a,t,n)}(t,n,o)}),saveAsTemplate:function(e,t,n){n()},autosave:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"unProvisionedApps"},getSnapshotTags:function(){return["primary"]}})},function(e,t,n){e.exports=function(){var e=n(80),t=n(69),r=n(149);function o(){e.onSave()}var i=function(e,n,r,i,a){var s=function(e){i(e),o()};setTimeout(function(){r?t.settleOnFirstSave(e,n,s,a):t.settleOnSave(e,n,s,a)},200)},a=r(function(e,t,n,r){i(e,t,!1,n,r)}),s=function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=s.settleInServer;u?(o(),n()):a(e,t,n,r)};return{saveAsTemplate:function(e,t,n){n()},publish:function(e,t){t()},getTaskName:function(){return"unProvisionedAppsAppFlows"},getSnapshotTags:function(){return["primary"]},firstSave:r(function(e,t,n,r){i(e,t,!0,n,r)}),partialSave:s,fullSave:s,autosave:s}}()},function(e,t,n){var r,o;e.exports=(r=n(56),o=function(){r.siteSaved()},{partialSave:function(e,t,n){n(),o()},fullSave:function(e,t,n){n(),o()},firstSave:function(e,t,n){n(),o()},saveAsTemplate:function(e,t,n){n()},publish:function(e,t){t()},autosave:function(e,t,n){r.siteSaved(),n()},getTaskName:function(){return"saveEventDispatcher"},getSnapshotTags:function(){return["primary"]}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),o=(n(5),n(3)),i=n(6),a=(n(2),n(229)),s=n(71),u=n(87),c=n(21),l=n(29),p=n(151),d=t.multilingual.PointerOperation;f();var g="CUSTOM_MAIN_MENU";function f(){i.registerHook(i.HOOKS.REMOVE.AFTER,S,"mobile.core.components.Page"),i.registerHook(i.HOOKS.REMOVE.AFTER,S,"wixapps.integration.components.AppPage"),i.registerHook(i.HOOKS.ADD.BEFORE,v,"wysiwyg.viewer.components.menus.DropDownMenu"),i.registerHook(i.HOOKS.ADD.BEFORE,v,"wysiwyg.viewer.components.ExpandableMenu"),i.registerHook(i.HOOKS.ADD.BEFORE,v,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),u.registerPageDataChangedCallback(y),u.registerPageAddedCallback(E)}function m(t,n,r){if(!e.isString(n)||"#"!==n[0])return!1;var i=o.getDataItemById(t,n.replace("#",""),r);return"CustomMenu"===e.get(i,"type")}function v(t,n,r,o){var i=e.get(o,"data.menuRef"),a=t.pointers.components.getPageOfComponent(r).id;i?m(t,i,a)||(o.data.menuRef="#CUSTOM_MAIN_MENU"):(i=o.dataQuery,o.data={menuRef:m(t,i,a)?i:"#CUSTOM_MAIN_MENU",type:"CustomMenuDataRef"},delete o.dataQuery)}function y(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!l.isPopup(t,n)){for(var a,u=!1,p=t.pointers.data.getDataItemsWithPredicate({type:"PageLink",pageId:"#".concat(n)}),g=0;g<p.length;g++)if(a=t.pointers.data.getDataItemWithPredicate({type:"BasicMenuItem",link:"#".concat(p[g].id)})){u=!0;break}u&&function(t,n,r){var i,a,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=t.dal.full.get(n),p=e.reduce(r,function(n,r,o){switch(o){case"title":n.label=r;break;case"hidePage":i=s.getLinkItemByMenuItemId(t,l.id),a=c.getPageData(t,s.sanitizeHash(i.pageId)),n.isVisible=!r,e.isNil(a.mobileHidePage)&&(n.isVisibleMobile=!r);break;case"mobileHidePage":n.isVisibleMobile=!r}return n},{});n.multilingual=d.SET,n.useOriginalLanguage=u,o.setDataItemByPointer(t,n,e.assign(l,p),"data")}(t,a,r,i)}}function E(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!l.isPopup(e,t)&&n&&function(e,t){var n=e.pointers.data.getDataItemFromMaster(t);n.useOriginalLanguage=!0;var r=e.dal.get(n);A(e,"#".concat(r.id),r.title,r.hidePage,r.mobileHidePage)}(e,t)}function I(e,t,n){var o=s.getMenuDataItemPointer(e,t),i=e.dal.get(o).items,a=s.getMenuDataItemPointer(e,n),u=e.dal.get(a),c=u.items,l=c.indexOf("#".concat(t));c.splice(l,1),i&&c.splice.apply(c,[l,0].concat(r(i))),a.useOriginalLanguage=!0,e.dal.set(a,u),e.dal.remove(o)}function S(t,n){var r=o.getDataItemById(t,"CUSTOM_MENUS").menus;return e.forEach(r,function(r){!function(t,n,r){var i=r.id,a=s.getItemIdAndParent(e.pick(n,["items","id"]),{type:"PageLink",pageId:"#".concat(i)});if(a){I(t,a.itemId,a.parentId);var u=o.getDataItemById(t,n.id,void 0,void 0,!0);s.updateTranslatedMenuItems(t,u)}}(t,r,n)}),{success:!0}}function h(t,n,r,i,a,u,c,l){s.validateParent(t,a,n,l),function(t,n,r,i,a,s){var u=o.createDataItemByType(t,"BasicMenuItem"),c=t.pointers.data.getDataItemFromMaster(n);o.setDataItemByPointer(t,c,e.assign(u,{id:n,label:r,isVisible:!a,isVisibleMobile:!("boolean"==typeof s?s:a),link:i?"#".concat(i):void 0}),"data")}(t,n,r,i,u,c);var p=s.getMenuDataItemPointer(t,a),d=t.pointers.getInnerPointer(p,"items");d.useOriginalLanguage=!0,t.dal.isExist(d)?t.dal.push(d,"#".concat(n)):t.dal.set(d,["#".concat(n)])}function P(t,n,r,i,a,s,u,c){var l=function(t,n){var r=o.generateNewDataItemId(),i=t.pointers.data.getDataItemFromMaster(r);return o.setDataItemByPointer(t,i,e.assign(n,{id:r}),"data"),r}(t,r);h(t,n,i,l,a,s,u,c)}function A(t,n,r,i,a){var s=o.createDataItemByType(t,"PageLink");P(t,o.generateNewDataItemId(),e.assign(s,{pageId:n}),r,g,i,a)}return{addHeaderItem:function(e,t,n,r,o,i){return h(e,t,n,null,r||g,o,i,g)},addLinkItem:function(e,t,n,r,o,i,s){return function(e,t){if(a.isPageLink(e,t))throw new Error('Explicitly adding a LinkItem of type "PageLink" is not allowed')}(e,n),P(e,t,n,r,o||g,i,s,g)},addPageItem:A,deleteItem:function(e,t){!function(e,t){t=s.sanitizeHash(t);var n=s.getLinkItemByMenuItemId(e,t);if(n){var r=n.pageId?s.sanitizeHash(n.pageId):null,o=l.isPopup(e,r);if("PageLink"===n.type&&!o)throw new Error("Explicitly deleting a page link item is not allowed")}}(e,t),function(e,t){var n=s.getSiteMenu(e);I(e,t,s.getParentItemId({items:n,id:g},t))}(e,t)},getMenu:function(t,n){var r=s.getSiteMenu(t);return n?e.filter(r,function(n){return!function(t,n){var r=e.get(n,"pageId");if(r&&"PageLink"===e.get(n,"type")){r=r.replace("#","");var i=o.getDataItemById(t,r),a=e.get(i,"tpaApplicationId"),s=e.get(i,"tpaPageId");return p.isPageMarkedAsHideFromMenu(t,a,s)}return!1}(t,n.link)}):r},initialize:f,moveItem:function(e,t,n,r){t=s.sanitizeHash(t);var o=s.getSiteMenu(e),i=s.getParentItemId({items:o},t)||"CUSTOM_MAIN_MENU";n=n||"CUSTOM_MAIN_MENU",s.validateParent(e,n,t,"CUSTOM_MAIN_MENU");var a=s.getIndexOfItemInParent(e,i,t),u=s.getMenuDataItemPointer(e,i),c=e.dal.get(u);c.items.splice(a,1),e.dal.set(u,c);var l=s.getMenuDataItemPointer(e,n),p=e.dal.get(l);p.items=p.items||[],p.items.splice(r,0,"#".concat(t)),e.dal.set(l,p)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(3),o=n(71),i=n(29);function a(t,n,i){var a=o.getMenuDataItemPointer(t,n),s=t.dal.get(a);if(!s)throw new Error('Cannot update item with "'.concat(n,'", it does not exist'));r.setDataItemByPointer(t,a,e.assign(s,i),"data")}function s(e,t){var n=t.pageId&&t.pageId.replace("#","");return"PageLink"===t.type&&!i.isPopup(e,n)}function u(e,n){var r=o.getLinkIdByMenuItemId(e,n);if(!r)return t.MENU_ITEM_TYPES.HEADER;var i=o.getMenuDataItemPointer(e,r);return"PageLink"===e.dal.get(e.pointers.getInnerPointer(i,"type"))?t.MENU_ITEM_TYPES.PAGE:t.MENU_ITEM_TYPES.LINK}return{setItemVisibility:function(e,t,n,r){a(e,t,{isVisible:!n,isVisibleMobile:!r})},isItemRemovable:function(e,n){return u(e,n)!==t.MENU_ITEM_TYPES.PAGE},setItemLabel:function(e,t,n){a(e,t,{label:n})},getItemType:u,updateLinkItem:function(t,n,i){if(s(t,i))throw new Error('Explicitly setting a LinkItem of type "PageLink" is not allowed');var a=o.getLinkIdByMenuItemId(t,n);if(!a)throw new Error('Cannot update item with "'.concat(n,'", link does not exist'));var u=o.getMenuDataItemPointer(t,a);r.setDataItemByPointer(t,u,e.assign(i,{id:a.replace("#","")}),"data")},isPageLink:s}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w;e.exports=(r=n(0),o=n(84),i=n(38),a=n(1),s=n(5),n(9),u=n(4),c=n(17),l=n(7),p=n(18),d=n(14),g=n(69),f=n(112),m=n(157),v=n(80),y=n(37),E=n(100),n(33),I=n(30),S=n(56),h=n(232),P=n(113),A=n(6),O=function(e,t,n,r,o,i,a){d.registerAppData(e,o);try{C(n)(e,t,r,o,i,a)}catch(e){a&&a(e)}},C=function(e){return{TPAWidget:f.addWidgetAfterProvision,TPASection:m.addSectionAfterProvision}[e]},_=function(e,t){var n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i}[t||"all"];return n&&n.test(e)},w=function(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;if(n&&!n.dontAdd){var c=a.callback;a.callback=function(){A.executeHook(A.HOOKS.ADD_TPA.AFTER,null,[t,n]),c&&c.apply(void 0,arguments)},O(t,o,e,a,n,s,r.get(a,"onError")||u)}},{provisionApp:T=function(e,t,n,o,i,a,s){i=i||{};var u=d.getAppDataByAppDefinitionId(e,o);E.requestAppMarketDataToBeCached(e,o),!i.sourceTemplateId||u?u?(v.isPending(e,u)&&v.add(u),a(u)):g.preSaveAddApp(e,o,a,s,r.get(i,"appVersion")):g.provisionAppFromSourceTemplate(e,o,i.sourceTemplateId,a,s)},provisionWidget:function(e,t,n,r){var o=function(t,n){e.setOperationsQueue.asyncPreDataManipulationComplete(t,n)};T(e,0,I.TYPE.TPA_WIDGET,n,r,o,function(){r.onError&&r.onError(),o(null,new Error("addWidget - provision failed"))})},provisionSection:function(e,t,n,o,i){var s="".concat(I.TYPE.TPA_SECTION,"_").concat(a.guidUtils.getUniqueId());return(o=o||{}).sectionId=s,T(e,0,I.TYPE.TPA_SECTION,n,o,function(t,n){(t=t||{}).additionalOptions=o,e.setOperationsQueue.asyncPreDataManipulationComplete(t,n)},function(){i&&i(),e.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("addSection - provision failed"))}),r.assign(t,{sectionId:s})},provisionMultiSection:function(e,t,n,o){if(m.alreadyInstalled(e,n)){var i="".concat(I.TYPE.TPA_SECTION,"_").concat(a.guidUtils.getUniqueId());o.sectionId=i;var s=d.getWidgetDataFromTPAPageId(e,n,o.pageId),u=d.getAppDataByAppDefinitionId(e,n);return s&&d.isMultiSectionInstanceEnabled(u,s.widgetId)?(o.applicationId=u.applicationId,o.appDefinitionId=u.appDefinitionId,o.widgetData=s,e.setOperationsQueue.asyncPreDataManipulationComplete(u),r.assign(t,{sectionId:i})):e.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Creating this section is not allowed"))}return e.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Main section is not installed"))},provisionAppDemoSave:function(e,t,n,r){var o=d.getAppData(e,t)||{};g.preSaveAddApp(e,o.appDefinitionId,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue),function(t){r&&r(),e.setOperationsQueue.asyncPreDataManipulationComplete(null,t)})},addApp:O,addAppWrapper:w,addSection:function(e,t,n,o,i,a){i=r.merge(i,r.get(t,"additionalOptions")),t=r.omit(t,"additionalOptions"),w(I.TYPE.TPA_SECTION,e,t,n,o,i,r.noop,a)},addMultiSection:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};d.registerAppData(e,t);var i=o.callback;o.callback=function(){A.executeHook(A.HOOKS.ADD_TPA.AFTER,null,[e,t]),i&&i.apply(void 0,arguments)},m.addMultiSection(e,n,o)},addSubSection:function(e,t,n,o){o=o||{};var i=d.getAppDataByAppDefinitionId(e,n);if(i){var a=r.find(i.widgets,["appPage.id",o.pageId]);if(a){var s=P.addSubSection(e,t,a,i,o);r.assign(t,{sectionId:s}),e.setOperationsQueue.isRunningSetOperation()?e.setOperationsQueue.executeAfterCurrentOperationDone(function(){m.invokeSectionCallback(o,t,s,!0),A.executeHook(A.HOOKS.ADD_TPA.AFTER,null,[e])}):(m.invokeSectionCallback(o,t,s,!0),A.executeHook(A.HOOKS.ADD_TPA.AFTER,null,[e]))}}},settingsUpdated:function(e,t,n,o){if("*"===n){var i=y.getAllAppCompsByAppId(e,t);r.forEach(i,function(e){S.callSettingsUpdateCallback(e.id,o)})}else S.callSettingsUpdateCallback(n,o)},refreshApp:function(e,t,n){n=r.merge(n||{},{cacheKiller:"".concat(r.now())}),r.forEach(t,function(t){var o=r.get(t,"id");if(o){var i=e.siteAPI.getTpaCompPreviewData(o)||{};e.siteAPI.setTpaCompPreviewData(o,r.defaults({queryParams:n},i))}})},getSectionRefByPageId:function(e,t){var n=p.getPage(e,t),o=u.getTpaChildren(e,n);return r.find(o,function(t){return function(e,t){var n=u.getType(e,t);return n===I.COMP_TYPES.TPA_SECTION||n===I.TPA_COMP_TYPES.TPA_SECTION}(e,t)})},setExternalId:function(e,t,n,o,i){_(n)?(r.invoke(e.siteAPI,"updatePreventRefreshState",t.id,{preventRefresh:Boolean(i)}),u.data.update(e,t,{referenceId:n},!0),o("ExternalId: ".concat(n," will be saved when the site will be saved"))):o({onError:"The given externalId: ".concat(n," is not a valid UUID.")})},getExternalId:function(e,t){var n=u.data.get(e,t,null,!0);return n&&n.referenceId},postBackThemeData:function(e,t,n){var r=c.style.getId(e,l.getComponentById(e,t));if("STYLE"!==n.type||"STYLE"===n.type&&r===n.values){var o=h.getStyleDataToPassIntoApp(e,t);D(e,t,"THEME_CHANGE",o)}},postMessageBackToApp:D=function(e,t,n,a){var u=l.getComponentById(e,t),c=s.isOpen("ds_tpaSharedBlocksNotifyInstances")&&e.pointers.referredStructure.getInternallyReferredComponents(u)||[t];r.forEach(c,function(e){!function(e,t,n){var r=o("#".concat(e)).find("iframe")[0];try{i.common.tpaPostMessageCommon.callPostMessage(r,{intent:"addEventListener",eventType:t,params:n})}catch(e){}}(e,n,a)})},getDefaultLayout:function(e,t,n){var o=d.getWidgetData(e,t,n);return{height:r.get(o,"defaultHeight")||500,width:r.get(o,"defaultWidth")||980,x:0}},setCompPreviewDataForAllTPA:function(e,t,n){var o=e.siteAPI.getTpaCompPreviewData("sharedQueryParams")||{};e.siteAPI.setTpaCompPreviewData("sharedQueryParams",r.merge(o,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)))}})},function(e,t){e.exports={replaceLayout:function(e,t){e.layout&&t&&delete e.layout,e.responsiveLayout=t}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,a,s,u,c,l,p,d,g,f,m,v,y;e.exports=(o=n(0),i=n(38),a=n(17),s=n(7),u=n(4),c=n(9),l=n(28),p=function(e,t){o.isArray(t)?o.forEach(t,function(t){d(e,t)}):d(e,t)},d=function(e,t){var n=t.key;switch(t.type){case"color":v(e,n="param_color_"+n,t);break;case"font":y(e,n="param_font_"+n,t);break;case"number":m(e,n="param_number_"+n,t);break;case"boolean":f(e,n="param_boolean_"+n,t)}},g=function(e,t){var n=function(e,t){return a.style.get(e,t)}(e,t);return o.defaults(n,{style:{groups:{},properties:{},propertiesSource:{}}}),n&&(n.styleType="custom"),n},f=function(e,t,n){var r=n.param.value;e.style.properties[t]=r,e.style.propertiesSource=o.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]="value"},m=function(e,t,n){var r=n.param.value;e.style.properties[t]=r,e.style.propertiesSource=o.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]="value"},v=function(e,t,n){var i=n.param.value.color&&"object"===r(n.param.value.color),a=i?n.param.value.color.name:n.param.value.rgba||n.param.value.cssColor;e.style.properties[t]=a,e.style.propertiesSource=o.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]=i?"theme":"value",n.param.value.hasOwnProperty("opacity")&&(e.style.properties["alpha-".concat(t)]=n.param.value.opacity)},y=function(e,t,n){var r=n.param.value;e&&e.style&&(e.style.properties[t]=JSON.stringify(r),e.style.propertiesSource=o.get(e,"style.propertiesSource",{}),e.style.propertiesSource[t]="value")},{setStyleParam:function(e,t,n,r){var o=s.getComponentById(e,t),i=g(e,o);p(i,n),a.style.update(e,o,i,function(e){r(e)})},setStyleParamData:function(e,t,n){return p(t,n)},mapWixParamsToCssValues:function(e,t,n){i.tpaStyleUtils.getValueForWixParams(c.styles.getAll(e,"masterPage").THEME_DATA,t,n)},getTpaColorsToSiteColors:function(){var e=o.reduce(["white/black","black/white","primery-1","primery-2","primery-3"],function(e,t,n){return e[t]="".concat("color","_").concat(++n),e},{}),t=o.range(1,26);return o.reduce(t,function(e,t){return e["".concat("color","-").concat(t)]="".concat("color","_").concat(t+10),e},e)},getStyleDataToPassIntoApp:function(e,t){var n=function(e,t){var n=s.getComponentById(e,t),r=u.data.get(e,n),i=o.get(r,"origCompId"),a=o.isUndefined(i)?n:s.getComponentById(e,i);return a?e.dal.get(e.pointers.getInnerPointer(a,"styleId")):null}(e,t),r=c.styles.getAll(e),a=l.getDocumentType(e),p=c.fonts.getCharacterSet(e),d=e.dal.get(e.pointers.general.getServiceTopology());return i.common.styleUtils.getStyleDataToPassIntoApp(n,r,!1,a,p,d,!1)}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v;e.exports=(r=n(0),o=n(234),i=n(14),a=n(56),s=n(33),u=n(546),c=n(19),l={isSupported:!0,registerEventListener:!0,getInstalledInstance:!0,resizeComponent:!0,revalidateSession:!0},p={openSettingsDialog:!0,isApplicationInstalled:!0,isFullWidth:!0,onReady:!0},d={setValue:!0,removeValue:!0,addApplication:!0},g={getInstalledInstance:!0,addApplication:!0},f=function(e){return"editor"===e.originFrame},m=function(e,t,n){var a=u.fixOldPingPongMessageType(t.type);if(function(e,t){var n=r.get(c,"documentServicesHandlersThatOverridesViewerHandlers"),a=p[t.type],s=l[t.type],u=n[t.type],m=f(t),v=e.pointers.general.getRenderFlag("componentViewMode"),y=e.dal.get(v),E=d[t.type]&&"editor"===y,I=!g[t.type]||i.isSuperAppByCompId(e,t.compId);return(u||s||a||m||E)&&I&&o[t.type]}(e,t)&&(o[a].apply(this,[e,t,n]),v(t))){var m=f(t)?"editor":"preview";s.sendBIEvent(e,t,m)}},v=function(e){return"registerEventListener"!==e.type||r.includes(a.supportedEvents,e.data.eventKey)},{init:function(e){"undefined"!=typeof window&&(window.addEventListener("message",u.handleTPAMessage.bind(this,e,null,m),!1),e.siteAPI.flushDsBeforeLoadMessagesQueue(function(t){return u.handleTPAMessage.call(null,e,null,m,t,p)}))},callHandler:m})},function(e,t,n){e.exports=function(){n(84);var e,t=n(0),r=n(23),o=n(38),i=(n(33),n(18)),a=n(87),s=n(7),u=n(4),c=n(13),l=n(163),p=n(156),d=n(56),g=n(11),f=n(37),m=n(30),v=n(67),y=n(35),E=n(235),I=E.addCallback,S=function(e,n){var r=e.siteAPI.getModalCompData();return n===t.get(r,"modalStructure.id")?r.modalData:null},h=function(e,n){var r=e.siteAPI.getPopupsCompData(),o=t.find(r,["structure.id",n]);return o?o.popupData:null},P=function(e,n){var r=s.getComponentById(e,n);return u.data.get(e,r)||S(e,n)||h(e,n)||function(e,n){var r=e.siteAPI.getComponentsToRender(),o=t.find(r,["structure.id",n]);return t.get(o,"props.compData")}(e,n)},A=function(e,n){var r=P(e,n);return parseInt(t.get(r,"applicationId"),10)},T=function(e,n){var r=i.getPagesDataItems(e);return t.filter(r,{tpaApplicationId:n})},O=function(e,t){var n=A(e,t);return T(e,n)},C=function(e){return t.find(e,{hidePage:!1})},_=function(e,n){return t.find(e,{tpaPageId:n})},D=function(e,t,n){var o=c.generalInfo.getPublicUrl(e);return r.wixUrlParser.getUrl(e.siteDataAPI.siteData,{pageId:t.id,title:t.pageUriSEO,tpaInnerRoute:n},!1,!0,o)},w=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=l.title.get(e)||"",i=t.title||"",s=r.pageUtils.extractPageTitleFromOriginalTitle(t.pageTitleSEO,n,o),u=e.siteAPI.getCurrentUrlPageId(),c=a.isHomepage(e,u);return s?o=s:c||(o=n?"".concat(o," | ").concat(i):i),o},b=function(e,t){var n=c.generalInfo.getPublicUrl(e);return r.wixUrlParser.getUrl(e.siteDataAPI.siteData,{pageId:t.id,title:t.pageUriSEO},!1,!0,n)},M=function(n,r){var o;if(t.isArray(r.data.compIds))o=function(e,n){var r=[];return t.forEach(n,function(t){var n=s.getComponentById(e,t);n&&r.push(n)}),r}(n,r.data.compIds);else{var i=A(n,r.compId);o=e.app.getRenderedReactCompsByApplicationId(n,i)}e.app.refreshApp(n,o,r.data.queryParams),n.siteAPI.forceUpdate()},R=function(t,n,r){var o=n.compId,i=s.getComponentById(t,o);e.comp.resize(t,i,n.data.width,n.data.height,r)},N=function(e,n){var r=S(e,n)||h(e,n),o=t.get(r,"origCompId");return o?s.getComponentById(e,o):null},x=function(e){e({error:{message:"comp not found"}})},L=function(e,t){var n=u.data.get(e,t);return{id:n.compId,title:n.name}},B=function(e,t){var n=u.getType(e,t);return n===m.COMP_TYPES.TPA_SECTION||n===m.COMP_TYPES.TPA_MULTI_SECTION};return{registerEventListener:function(t,n){var r=n.data.eventKey,o=n.compId;switch(r){case"EDITOR_EVENT":e.change.register.editorEventHandler(t,n.compId,function(n){e.comp.postMessageBackToApp(t,o,r,n)});break;case"COMPONENT_DELETED":e.change.register.deleteCompHandler(t,n.compId,function(){e.comp.postMessageBackToApp(t,o,r,{})});break;case"EDIT_MODE_CHANGE":e.change.register.editModeChangeHandler(t,n.compId,function(n){e.comp.postMessageBackToApp(t,o,r,{editMode:n})});break;case"SITE_PUBLISHED":e.change.register.sitePublishedHandler(t,n.compId,function(){e.comp.postMessageBackToApp(t,o,r,{})});break;case"SETTINGS_UPDATED":e.change.register.settingsUpdatedHandler(t,n.compId,function(n){e.comp.postMessageBackToApp(t,o,r,n)});break;case"WINDOW_PLACEMENT_CHANGED":e.change.register.windowPlacementChangedHandler(t,n.compId,function(n){e.comp.postMessageBackToApp(t,o,r,n)});break;case"THEME_CHANGE":e.change.register.themeChangeHandler(t,o,function(n){e.style.postBackThemeData(t,o,n)});break;case"DEVICE_TYPE_CHANGED":e.change.register.deviceTypeChangeHandler(t,n.compId,function(n){e.comp.postMessageBackToApp(t,o,r,{deviceType:n})});break;case"STYLE_PARAMS_CHANGE":break;case"SITE_SAVED":e.change.register.siteSavedHandler(t,n.compId,function(){e.comp.postMessageBackToApp(t,o,r)});break;case"ON_MESSAGE_RESPONSE":t.siteAPI.reportBI(e.bi.errors.EVENT_TYPE_NOT_SUPPORTED);break;case"PUBLIC_DATA_CHANGED":var i=A(t,o);e.change.register.registerPublicDataChangedHandler(t,n.compId,i,function(n){e.comp.postMessageBackToApp(t,o,r,n)})}},siteInfo:function(e,t,n){var a={},s=i.data.get(e,e.siteAPI.getCurrentUrlPageId());if(s.siteTitle=w(e,s),o.common.utils.sdkVersionIsAtLeast(t.version,"1.42.0")?a.pageTitle=s.siteTitle||"":(a.siteTitle=s.siteTitle||"",a.pageTitle=s.title||""),a.pageTitleOnly=w(e,s,!1),a.siteDescription=l.description.get(e),a.siteKeywords=l.keywords.get(e),c.generalInfo.isFirstSave(e))a.baseUrl="";else{var u=c.generalInfo.getPublicUrl(e)||"",p=u&&r.urlUtils.parseUrl(u)||"";a.baseUrl=u&&"".concat(p.protocol,"//").concat(p.host).concat(p.path)||"baseUrl is not available - site is saved but not published"}var d=e.siteAPI.getCurrentUrl();a.url=o.common.utils.appendProtocolToUrlIfNeeded(d.host,d),a.referer=window.document.referrer,n(a)},getSitePages:function(e,t,n){e.siteAPI.handleDsTpaHandler({msg:t,addCallback:I,ps:e,callback:n,siteMetadata:c})},getSiteMap:function(e,t,n){e.siteAPI.handleDsTpaHandler({msg:t,addCallback:I,ps:e,callback:n,siteMetadata:c})},refreshApp:M,refreshAppByCompIds:M,getSectionUrl:function(e,t,n){if(!c.generalInfo.isFirstSave(e)){var r=t.data.sectionIdentifier,o=O(e,t.compId),i=_(o,r)||C(o);n(i?{url:b(e,i)}:{error:{message:"This app does not have any pages."}})}else n({error:{message:"Page was not found."}})},openSettingsDialog:function(n,r,o){var i,a=A(n,r.compId),s=e.app.getAllCompsByApplicationId(n,a);if(r.data&&r.data.compId){if(i=t.find(s,{id:r.data.compId}),t.isUndefined(i))return void o({onError:"comp not found"})}else i=t.find(s,{id:r.compId});var u={pageId:i.pageId,compId:i.id};E.doPostMessage("openSettingsDialog",u,r.compId)},isSupported:function(e,t,n){n(!0)},navigateToPage:function(e,n,r){var a=e.siteAPI.getPrimaryPageId(),c=i.getPageIdList(e,!1,!0);o.services.tpaNavigationService.navigateToPage({scrollToAnchor:e.siteAPI.scrollToAnchor.bind(e.siteAPI),registerNavigationComplete:e.siteAPI.registerNavigationComplete.bind(e.siteAPI),navigateToPage:e.siteAPI.navigateToPage.bind(e.siteAPI)},n,a,c,function(t){var n=o.common.utils.Constants.TOP_PAGE_ANCHOR_PREFIX+t;return i.getPageAnchors(e,t,n)},function(n){var r=s.getComponentById(e,n),o=u.data.get(e,r);return t.get(o,"id")},r),E.doPostMessage("deselectComponent")},getExternalId:function(t,n,r){r(e.comp.getExternalId(t,s.getComponentById(t,n.compId)))},getInstalledInstance:function(n,r,o){var i={},a=e.app.getDataByAppDefId(n,r.data.appDefinitionId);t.isEmpty(a)?i={onError:!0}:i=e.app.isInstalled(n,r.data.appDefinitionId,!1)?{instanceId:a.instanceId}:{onError:!0};o(i)},revalidateSession:function(t,n,r){var o=A(t,n.compId),i=t.dal.get(t.pointers.general.getMetaSiteId());e.provision.refreshAppSpecMap(t,o,i,function(e){r({instance:e.instance})},function(e){r({onError:!0,error:{errorCode:e.status,errorText:e.statusText,error:JSON.parse(e.response)}})})},resizeComponent:R,settingsResizeComponent:function(e,t,n){R(e,t,n)},getValue:function(t,n,r){var o=n.compId;if(n.data.scope===e.data.SCOPE.APP){var i=A(t,o);i?e.data.app.get(t,i,n.data.key,r):x(r)}else{var a=s.getComponentById(t,o)||N(t,o);a?e.data.comp.get(t,a,n.data.key,r):x(r)}},getValues:function(t,n,r){var o=n.compId;if(n.data.scope===e.data.SCOPE.APP){var i=A(t,o);i?e.data.app.getMulti(t,i,n.data.keys,r):x(r)}else{var a=s.getComponentById(t,o)||N(t,o);a?e.data.comp.getMulti(t,a,n.data.keys,r):x(r)}},getPublicData:function(t,n,r){var o=n.compId,i=A(t,o),a=s.getComponentById(t,o)||N(t,o);i&&a?e.data.getPublicData(t,i,a,r):x(r)},setValue:function(e,t,n){var r=s.getComponentById(e,t.compId);r?p.set(e,r,t.data.key,t.data.value,t.data.scope,n):x(n)},removeValue:function(t,n,r){var o=s.getComponentById(t,n.compId);o?e.data.remove(t,o,n.data.key,n.data.scope,r):x(r)},getCurrentPageAnchors:function(e,n,a){var u=e.siteAPI.getPrimaryPageId(),c=i.getPage(e,u),l=s.getComponentByType(e,"wysiwyg.common.components.anchor.viewer.Anchor",c),p=t.map(l,function(t){return L(e,t)}),d=o.common.utils.Constants.TOP_PAGE_ANCHOR_PREFIX+u,g=r.scrollAnchors.getPageTopAnchor(u,d),f={id:g.compId,title:g.name};p.push(f),a(p)},getComponentInfo:function(n,r,o){var i=s.getComponentById(n,r.compId),a=u.data.get(n,i),c=a.applicationId,l=e.app.getData(n,c),p=g.isShowOnAllPages(n,i),d=l.widgets[a.widgetId];o({compId:r.compId,showOnAllPages:p,pageId:p?"":n.pointers.components.getPageOfComponent(i).id,tpaWidgetId:t.get(d,"tpaWidgetId",""),appPageId:t.get(d,"appPage.id","")})},settpads:function(t){e=t},navigateToSectionPage:function(t,n,r){E.doPostMessage("deselectComponent"),t.siteAPI.handleDsTpaHandler({msg:n,ps:t,addCallback:I,callback:r,tpads:e,installedTpaAppsOnSiteService:f,componentDetectorAPI:s,isPageComp:B,routersGetters:v,structure:g,getApplicationId:A})},getStateUrl:function(e,t,n){if(!c.generalInfo.isFirstSave(e)){var r=t.data.sectionId,o=O(e,t.compId),i=_(o,r);if(i){if(v.getRouterDataForPageIfExist(e,i.id))return void n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}});n({url:D(e,i,t.data.state)})}else{var a=C(o);if(a){if(v.getRouterDataForPageIfExist(e,a.id))return void n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}});n({url:b(e,a)})}else n({error:{message:"This app does not have any pages."}})}}else n({error:{message:"Page was not found."}})},addApplication:function(e,t,n){E.doPostMessage("editorAddApplication",t.data,t.compId,n)},applicationLoaded:function(e,t){var n=s.getComponentById(e,t.compId);d.callCompLoaded(n)},isApplicationInstalled:function(e,t,n){E.doPostMessage("editorIsApplicationInstalled",t.data,t.compId,n)},isAppSectionInstalled:function(n,r,o){var i,a=t.get(r,["data","appDefinitionId"]);if(a){var s=e.app.getDataByAppDefId(n,a);i=t.get(s,"applicationId")}else i=A(n,r.compId);var u=T(n,i);o(t.some(u,{tpaPageId:t.get(r,["data","sectionId"])}))},isFullWidth:function(e,t,n){E.doPostMessage("editorIsFullWidth",t.data,t.compId,n)},getAppVendorProductId:function(n,r,o){var i=t.get(r,["data","appDefinitionId"]),a=e.app.getDataByAppDefId(n,i);if(a){var s=y.getAppDataByApplicationId(n,a.applicationId);o(t.get(s,"vendorProductId")||null)}else o(null)},smCurrentMember:function(e,t,n){e.siteAPI.getMemberDetailsInPreview(function(e){n(e||null)})},refreshCurrentMember:function(e){e.siteAPI.getMemberDetailsInPreview(null,null,!0)},onReady:function(e,t,n){E.doPostMessage("onReady",t.data,t.compId,n)}}}()},function(e,t){var n,r,o,i;e.exports=(n=[],r=1,o=function(e,t,o,i){var a={intent:"TPA_PREVIEW",callId:r++,type:e,compId:o,data:t};return i&&(n[a.callId]=i),a},i=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}switch(t.intent){case"TPA_RESPONSE":case"TPA_PREVIEW":case"TPA_PREVIEW_RESPONSE":t.callId&&n[t.callId]&&(n[t.callId](t.res),delete n[t.callId])}},{addCallback:function(e,t){n[e]=t},init:function(){"undefined"!=typeof window&&window.addEventListener("message",i,!1)},doPostMessage:function(e,t,n,r){var i,a=o(e,t,n,r);window.parent.postMessage?i=window.parent:window.parent.document.postMessage&&(i=window.parent.document),i&&void 0!==i&&i.postMessage(JSON.stringify(a),"*")}})},function(e,t){var n,r;e.exports=(r=(n=["routers"]).concat("configMap"),{paths:{ROUTERS_PATH:n,ROUTERS_CONFIG_MAP:r},routerPrefixPath:"prefix",routerPagesPath:"pages",InvalidPrefixReason:{PREFIX_CAN_NOT_BE_EMPTY:1,PREFIX_IS_TOO_LONG:2,PREFIX_IS_DUPLICATE_OF_URI_SEO:3,PREFIX_CONTAINS_INVALID_CHARACTERS:4,PREFIX_IS_FORBIDDEN_WORD:5,PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION:6}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(11),o=n(3),i=n(74),a=n(26),s=n(12),u=n(2),c="wysiwyg.viewer.components.Repeater",l=u.DATA_TYPES;var p={dataQuery:{add:o.addSerializedDataItemToPage,get:function(e,t){var n=o.getDataItemPointer(e,t);return o.serializeDataItem(e,l.data,n,!0)},getItemById:o.getDataItemById,delete:o.deleteDataItem},designQuery:{add:o.addSerializedDesignItemToPage,get:function(e,t){var n=o.getDesignItemPointer(e,t);return o.serializeDataItem(e,l.design,n,!0)},getItemById:o.getDesignItemById,delete:o.deleteDesignItem}};function d(n,r,o,i){e.forEach(p,function(e,a){var s=n.dal.get(n.pointers.getInnerPointer(i,a));if(s){s=s.replace("#","");var u=t.displayedOnlyStructureUtil.getRepeaterTemplateId(s),c=p[a],l=c.get(n,i);c.add(n,r.id,l,t.displayedOnlyStructureUtil.getUniqueDisplayedId(u,o))}})}function g(t,n){e.forEach(p,function(e){e.delete(t,n)})}function f(n,r,o,i,a){var s=n.dal.get(n.pointers.getInnerPointer(o,a));if(s){s=s.replace("#","");var u,c,l=(u=p[a].getItemById(n,s,r,!0),c=s,u?e.assign(u,{id:t.displayedOnlyStructureUtil.getRepeaterTemplateId(c)}):u);if(l){var d=n.dal.full.get(n.pointers.getInnerPointer(i,a)).replace("#","");p[a].delete(n,i),p[a].add(n,r,l,d)}}}function m(n,r,o){var i=n.pointers.components.getPageOfComponent(r),a=t.displayedOnlyStructureUtil.getRepeaterTemplateId(r.id),s=n.pointers.full.components.getComponent(a,i);e.forEach(o,function(e){f(n,i.id,r,s,e)})}function v(n,r){if(t.displayedOnlyStructureUtil.isRepeatedComponent(r.id)){var o=a.getAncestorByPredicate(n,r,function(e){return s.getComponentType(n,e)===c});if(o&&function(n,r,o){var i=n.pointers.components.getChildren(r);if(e.size(i)>0){var a=i[0];return t.displayedOnlyStructureUtil.getRepeaterItemId(a.id)===t.displayedOnlyStructureUtil.getRepeaterItemId(o.id)}return!1}(n,o,r))return!0}return!1}function y(e,t,n){v(t,n)&&m(t,n,[e])}function E(t,n){var r=t.pointers.components.getChildren(n);if(e.size(r)>0){var o=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(r[0]);e.forEach(o,function(e){m(t,e,["dataQuery","designQuery"])})}}return{afterAdd:function(e,t){!function(e,t){e.siteAPI.createDisplayedNode(t)}(e,t),E(e,t)},addRepeatedDataItems:function(e,t){t.repeatedItemIds=e.data.items},afterLayoutChanged:function(t,n,o,i,a,s){if(o.width!==s.width){var u=e.head(t.pointers.components.getChildren(n)),c=t.dal.get(t.pointers.getInnerPointer(u,["layout"]));r.updateCompLayout(t,u,c,!0)}},beforeUpdateRepeaterData:function(t,n,r){var i=t.pointers.components.getPageOfComponent(n)||t.pointers.full.components.getPageOfComponent(n),a=e.get(o.getDataItem(t,n),"items"),s=e.filter(r.items,function(t){return!e.includes(a,t)}),u=e.filter(a,function(t){return!e.includes(r.items,t)}),c=t.pointers.components.getChildren(n);e.forEach(s,function(n){var o=function(t,n,r){for(var o=Math.max(e.indexOf(t,r),0);o>0;){o--;var i=e.indexOf(n,t[o]);if(i>=0)return i}return 0}(r.items,a,n),s=c[o],u=[s].concat(t.pointers.components.getChildrenRecursively(s));e.forEach(u,e.partial(d,t,i,n))}),e.forEach(a,function(n,o){if(!e.includes(r.items,n)){var i=c[o],a=[i].concat(t.pointers.components.getChildrenRecursively(i));e.forEach(a,e.partial(g,t))}});var l=t.pointers.displayedOnlyComponents.getComponentTemplateId(n.id);!e.isEmpty(u)&&e.includes(u,t.dal.get(l))&&t.dal.set(l,e.head(r.items))},afterUpdateRepeaterData:function(e,t){e.siteDataAPI.createDisplayedNode(t),E(e,t)},syncRepeaterTemplateDataWithFirstItem:y.bind(this,"dataQuery"),syncRepeaterTemplateDesignWithFirstItem:y.bind(this,"designQuery"),afterUpdateRepeaterProperties:function(e,t){e.siteDataAPI.updateDisplayedNodesLayout(t),i.updateAnchorsForCompChildren(e,t)}}}()},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),o=n(3),i=n(7),a=n(50),s=n(4),u=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE,c="wysiwyg.viewer.components.RefComponent",l="platform.components.AppWidget",p="Component is not of type refComponent",d="Component is not of type appWidget",g="Missing devCenterWidgetId in appWidget settings",f={data:o.getDataItemPointer,props:o.getPropertyItemPointer,design:o.getDesignItemPointer,behaviors:o.getBehaviorsItemPointer,connections:o.getConnectionsItemPointer,mobileHints:o.getMobileHintsItemPointer,style:o.getStyleItemPointer};function m(e,n,r){var i=function(e,t,n){var r=E(e,t,n);return r?o.getDataByPointer(e,n,r,!0):null}(e,n,r),a=t.displayedOnlyStructureUtil.getReferredCompId(n.id);if(i)return{compId:a,itemType:r,dataItem:i}}var v=function(t,n){return e(u).keys().filter(function(e){return I(t,n,e)}).map(function(e){return m(t,n,e)}).value()},y=function(t,n){var o=function(e,t){var n=r(e.pointers.components.getChildren(t),1)[0];return n?e.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot(n):[]}(t,n),a=i.getComponentsUnderAncestor(t,n);return e.uniqBy(e.union(o,a),"id")};function E(e,t,n){var r=f[n];if(r){var o=r(e,t);if(o)return e.pointers.referredStructure.getPointerWithoutFallbacks(o)}}function I(e,t,n){var r=E(e,t,n);return r&&e.dal.isExist(r)}var S=function(t,n,r){return e(u).keys().reject(function(e){return!!r&&"connections"===e}).filter(function(e){return I(t,n,e)}).map(function(e){return E(t,n,e)}).value()},h=function(e,t,n){o.updatePropertiesItem(e,t,n)};return{setCustomSerializeData:function(t,n,r){var o=y(t,n),i=e.flatten(e.map(o,function(e){return v(t,e)}));r.overriddenData=i},removeAllOverrides:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("wysiwyg.viewer.components.RefComponent"===s.getType(t,n)){var a=i.getComponentsUnderAncestor(t,n);e(a).map(function(e){return S(t,e,r)}).flatten().uniqBy("id").forEach(function(e){return o.removeItemRecursivelyByType(t,e)})}},openReferredComponent:function(e,t,n){var o=s.serialize(e,n,null,null,!0);if(o.componentType!==c)throw new Error(p);var i=r(e.pointers.components.getChildren(n),1)[0],a=e.pointers.components.getParent(n),u=s.serialize(e,i,null,null,!0);u.layout.x=o.layout.x,u.layout.y=o.layout.y,s.remove(e,n),s.add(e,t,a,u)},closeWidgetToReferredComponent:function(t,n,r){var o=s.serialize(t,r,null,null,!0);if(o.componentType!==l)throw new Error(d);var i=t.pointers.components.getParent(r),u=JSON.parse(o.data.settings);if(!u.devCenterWidgetId)throw new Error(g);var c,p,f,m=e.assign((c=o.data.applicationId,p=u.devCenterWidgetId,f=u.variationId,{componentType:"wysiwyg.viewer.components.RefComponent",layout:{rotationInDegrees:0,width:100,height:100,scale:1,x:0,y:0,fixedPosition:!1},type:"RefComponent",style:"ref1",data:{type:"WidgetRef",appDefinitionId:c,widgetId:p,variationId:f}}),{layout:o.layout},{custom:{overrideRootNickname:a.getNickname(t,r),overrideRootData:o.data}});s.remove(t,r),s.add(t,n,i,m)},getComponentToCreateRef:function(e,t){var n=e.pointers.components.getParent(t);return s.getComponentToDuplicateRef(e,t,n)},unGhostifyComponent:function(n,r){var o=t.displayedOnlyStructureUtil.getRefHostCompId(r.id),i=n.pointers.referredStructure.getGhostRefComponents(o)[r.id].propertyQuery,a=n.dal.get(n.pointers.data.getPropertyItem(i)),s=e.assign({},a,{ghost:void 0});h(n,r,s),function(e,t,n){if(!e.pointers.components.isMobile(t)){var r=e.pointers.components.getMobilePointer(t);h(e,r,n)}}(n,r,s)}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(565),i=n(566),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.overrides,s=void 0===a?void 0:a,u=n.read,c=void 0===u||u,l=n.write,p=void 0!==l&&l;return r.merge({},p&&i(e,t),c&&o(e,t),s)})},function(e,t,n){e.exports=function(){var e,t,r=n(0),o=n(1),i=(n(5),n(83)),a=n(6),s=n(108),u=n(28),c=n(21),l={AUTOSAVE_ACTION_COUNT:2,SAVE_AFTER_AUTOSAVE_COUNT:3,DEBOUNCE_WAIT:2,AUTOSAVE_TIMEOUT:10},p={},d={SHOULD_AUTOSAVE:"shouldAutoSave",ACTIONS_COUNT:"actionsCount",AUTOSAVES_COUNT:"autosaveCount",AUTO_FULL_SAVE_FLAG:"autoFullSaveFlag",REPORTING_INFO:"reportingInfo"},g={INCREASE:"increase",DECREASE:"decrease",RESET:"reset"},f=i.save,m=a.HOOKS,v={};function y(n){R(n)&&(e=e||r.debounce(E,1e3*p.DEBOUNCE_WAIT),function(n){T(),t=setTimeout(function(){e(n,r.noop,r.noop,"idle")},1e3*p.AUTOSAVE_TIMEOUT)}(n),C(n,d.ACTIONS_COUNT)>=p.AUTOSAVE_ACTION_COUNT&&e(n,r.noop,r.noop,"num of actions"))}function E(e,t,n,o){var i=C(e,d.AUTOSAVES_COUNT);if(D(e),i<p.SAVE_AFTER_AUTOSAVE_COUNT){var a=I(e,o,t),u=I(e,o,n),l=b(e,d.REPORTING_INFO);e.dal.set(l,{actionsPerAutosave:p.AUTOSAVE_ACTION_COUNT,autosavesPerFull:p.SAVE_AFTER_AUTOSAVE_COUNT,pagesCount:c.getNumberOfPages(e),trigger:o}),r.invoke(p,"onDiffSaveStarted",o),s.autosave(e,a,u)}else{var g=S(e,o,t),f=S(e,o,n),m=b(e,d.AUTO_FULL_SAVE_FLAG);e.dal.set(m,!0),r.invoke(p,"onPartialSaveStarted",o),s.save(e,g,f,!1)}}function I(e,t,n){return function(o){var i=b(e,d.REPORTING_INFO);e.dal.remove(i),function(e){return r.includes([f.CONCURRENT_AUTO_SAVE,f.SITE_STALE_STATE_FROM_AUTO_SAVE],A(e))}(o)&&function(e,t){O(e,t,g.DECREASE)}(e,d.AUTOSAVES_COUNT),r.isFunction(p.onDiffSaveFinished)&&r.invoke(p,"onDiffSaveFinished",o,t),r.isFunction(n)&&n(o,t),(function(e){return r.includes([f.NOT_LOGGED_IN,f.SESSION_EXPIRED,f.USER_NOT_AUTHORIZED_FOR_SITE],A(e))}(o)||function(e){return f.SAVE_PUBLISH_DISABLED_ON_SERVER===A(e)}(o))&&P(e)}}function S(e,t,n){return function(o){var i=b(e,d.AUTO_FULL_SAVE_FLAG);e.dal.remove(i),r.invoke(p,"onPartialSaveFinished",o,t),_(e,d.AUTOSAVES_COUNT),r.isFunction(n)&&n(o,t)}}function h(e){M(e)||function(e){var t=e.pointers.general.getSiteVersion(),n=e.pointers.general.getServiceTopology(),r=e.pointers.getInnerPointer(n,"autoSaveUrl"),i=e.dal.get(r),a="".concat(i,"delete_diffs"),s={siteId:e.siteAPI.getSiteId(),siteVersion:e.dal.get(t)};o.ajaxLibrary.ajax({url:a,type:"POST",dataType:"json",data:s})}(e),P(e)}function P(e){x(e,{enabled:!1})}function A(e){return r.get(e,"document.errorType")}function T(){t&&(clearTimeout(t),t=null),e&&e.cancel()}function O(e,t,n){var r,o=b(e,t),i=e.dal.get(o)||0;switch(n){case g.INCREASE:r=i+1;break;case g.DECREASE:r=i-1;break;case g.RESET:r=0}return e.dal.set(o,r),r}function C(e,t){return O(e,t,g.INCREASE)}function _(e,t){return O(e,t,g.RESET)}function D(e){T(),_(e,d.ACTIONS_COUNT)}function w(e){D(e),_(e,d.AUTOSAVES_COUNT)}function b(e,t){return e.pointers.general.getAutoSaveInnerPointer(t)}function M(e){var t=e.pointers.general.getNeverSaved();return e.dal.get(t)}function R(e){var t=N(e);return!1!==p.enabled&&!(!t||!t.shouldAutoSave||M(e)||!p.allowOnBoarding&&function(e){return u.isSiteFromOnBoarding(e)}(e)||!s.saveState.canSave())}function N(e){var t=e.pointers.general.getAutosaveInfo();return e.dal.get(t)}function x(e,t){return t?(p=r.defaults(r.clone(t),l),r.forEach(v,function(e,t){return a.unregisterHook(t,e)}),v={},T(),!(!0!==t.enabled||!s.saveState.isEnabled())&&(function(e){v[m.AUTOSAVE.ACTION]=a.registerHook(m.AUTOSAVE.ACTION,r.partial(y,e)),v[m.SAVE.SITE_SAVED]=a.registerHook(m.SAVE.SITE_SAVED,r.partial(w,e)),v[m.SAVE.VALIDATION_ERROR]=a.registerHook(m.SAVE.VALIDATION_ERROR,r.partial(h,e))}(e),!0)):(o.log.error(new Error("Missing autosave config object")),!1)}return{initMethod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableAutoSave:!1},n=t.disableAutoSave,r=void 0!==n&&n;if(r){var o=b(e,d.SHOULD_AUTOSAVE);e.dal.set(o,!1)}},init:x,autosave:function(e,t,n,r){if(!R(e))return n({document:"Autosave not available"});E(e,t,n,r)},canAutosave:R,getAutoSaveInfo:N,clearAll:w,handleValidationError:h}}()},function(e,t,n){e.exports=function(){var e=n(0),t=/~1/g,r=/~0/g;function o(e){return e.replace(t,"/").replace(r,"~")}function i(t){return e(t).split("/").compact().map(o).value()}var a={add:function(t,n){var r=i(n.path),o=r.length>1?e.initial(r):r,a=t.getByPathInHostModel(o),s=e.last(r);e.isArray(a)?(s=Number(e.last(r)),t.pushByPathToHostModel(o,n.value,s)):(e.isUndefined(a)||a[s]!==n.value)&&t.setByPathToHostModel(r,n.value)},remove:function(e,t){e.removeByPathInHostModel(i(t.path))},replace:function(t,n){var r,o,a=i(n.path),s=e.last(a);if(a.length>1&&!function(t,n){var r=e.initial(n);return t.isPathExistInHostModel(r)&&e.isArray(t.getByPathInHostModel(r))}(t,a)?(o=t.getKeysByPathInHostModel(e.initial(a)),r=e.includes(o,s)):r=t.isPathExistInHostModel(a),!r){var u=new Error("replace operation in nonexisting path");throw u.patch=n,u}t.setByPathToHostModel(a,n.value)},move:function(e,t){var n=i(t.from),r=i(t.path),o=e.getByPathInHostModel(n);e.removeByPathInHostModel(n),e.setByPathToHostModel(r,o)},copy:function(e,t){var n=i(t.from),r=i(t.path),o=e.getByPathInHostModel(n);e.setByPathToHostModel(r,o)},test:function(t,n){var r=i(n.path);if(!e.isEqual(t.getByPathInHostModel(r),n.value)){var o=new Error("test operation failed");throw o.patch=n,o}}};return{applyPatchList:function(e,t){t&&t.length&&t.forEach(function(e,t){if(!t||!a[t.op]){var n=new Error("Patch not properly formatted");throw n.patch=t,n}a[t.op](e,t)}.bind(null,e))},getPathArray:i}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_;e.exports=(r=n(0),o=n(574),i=n(575),a=n(576),s=n(577),u=n(578),c=n(579),l=n(580),p=n(581),d=n(582),g=n(584),f=n(585),m=n(586),v=n(587),y=n(595),E=n(243),I=n(597),S=n(598),h=n(599),P=n(600),A=n(601),T=n(602),O=n(16),C=n(19),_=n(2),{fix:function(e){var t=_.INTERACTIONS.DOCUMENT_SERVICES_DATA_FIXERS,n=[{fixer:o,config:{fixMobileOnly:!1,fedopsTag:t.BADLY_DUPLICATED_PAGES}},{fixer:a,config:{fixMobileOnly:!1,fedopsTag:t.FIVE_GRID_LINE_FULL_WIDTH}},{fixer:i,config:{fixMobileOnly:!1,fedopsTag:t.ADI_GROUP}},{fixer:s,config:{fixMobileOnly:!1,fedopsTag:t.BROKEN_ANCHORS}},{fixer:u,config:{fixMobileOnly:!1,fedopsTag:t.DESIGN_DUPLICATED_IDS}},{fixer:c,config:{fixMobileOnly:!1,fedopsTag:t.ORPHAN_SLIDER}},{fixer:l,config:{fixMobileOnly:!1,fedopsTag:t.EMPTY_MOBILE_STRIP_COLUMN_CONTAINER}},{fixer:p,config:{fixMobileOnly:!1,fedopsTag:t.SITE_MEMBERS}},{fixer:d,config:{fixMobileOnly:!1,fedopsTag:t.TEXT_COMPONENET}},{fixer:g,config:{fixMobileOnly:!1,fedopsTag:t.VECTOR_IMAGE}},{fixer:f,config:{fixMobileOnly:!1,fedopsTag:t.VISUAL_FOCUS}},{fixer:m,config:{fixMobileOnly:!0,fedopsTag:t.MOBILE_ANIMATION}},{fixer:v,config:{fixMobileOnly:!1,fedopsTag:t.STYLES}},{fixer:y,config:{fixMobileOnly:!1,fedopsTag:t.DUPLICATE_ITEMS_REF_IN_MENU}},{fixer:E,config:{fixMobileOnly:!1,fedopsTag:t.SOAP_ORDER}},{fixer:I,config:{fixMobileOnly:!1,fedopsTag:t.MESH_LAYOUT_READY_SITE}},{fixer:S,config:{fixMobileOnly:!1,fedopsTag:t.ROUTERS}},{fixer:h,config:{fixMobileOnly:!1,fedopsTag:t.SOSP}},{fixer:P,config:{fixMobileOnly:!1,fedopsTag:"language-selector-fixer"}},{fixer:A,config:{fixMobileOnly:!0,fedopsTag:t.MENU_CONTAINER}},{fixer:T,config:{fixMobileOnly:!1,fedopsTag:t.ADD_MISSING_PAGE_STYLE}}];C.utils.fedopsLogger.interactionStarted(t.ALL),r.forEach(n,function(t){!O.isMobileSupported(e)&&r.get(t,["config","fixMobileOnly"])||t.fixer.exec(e)}),C.utils.fedopsLogger.interactionEnded(t.ALL)}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_;e.exports=(o=n(0),i=n(62),a=n(2),s=n(11),u=n(1),c=n(244),l=n(211),p=function(e){return e.map(function(e){return e.id}).join(",")},d=function(e,t,n,r,o){return e.siteAPI.reportBI(i.SOAP_ORDER_FIXER,function(e,t,n,r){return{is_changed:e,soap_order_before:e?p(t):"",soap_order_after:e?p(n):"",components_attached_to_header:e?p(r):""}}(t,n,r,o))},g=function(e,t){return e.pointers.full.components.getPagesContainer(t)},f=function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(t,["layout"]))},m=function(e,t){return o.get(f(e,t),"fixedPosition",!1)},v=function(e){return e.pointers.data.getDataItemFromMaster("masterPage")},y=function(e){return function(e){return e.dal.full.get(e.pointers.getInnerPointer(v(e),"layoutSettings"))||{}}(e).soapCompsAroundPagesContainer},E=function(e,t){return o.includes(u.masterPageLayoutUtils.MASTER_PAGES_SECTIONS[t.type],function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))}(e,t))},I=function(e,t){return o.reject(t,function(t){return E(e,t)&&!function(e,t){return e.pointers.isSamePointer(t,g(e,t.type))}(e,t)||m(e,t)})},S=function(e,t){return e.pointers.full.components.getChildren(t)},h=function(e,t,n){return o.findIndex(t,function(t){return e.pointers.isSamePointer(t,n)})},P=function(e,t,n,r){return h(e,t,n)<h(e,t,r)},A=function(e,t,n){o.isEmpty(t)||(T(e,t,n),function(e,t,n){var o=e.pointers.full.components.getChildrenContainer(t),i=e.dal.full.get(o),a=i.length-n,s=[].concat(r(i.slice(a,i.length)),r(i.slice(0,a)));e.dal.full.set(o,s)}(e,n,t.length))},T=function(e,t,n){return o.forEach(t,function(t){return s.setContainer(e,t,t,n)})},O=function(e,t){return function(e,t){return o.filter(t,function(t){return!E(e,t)})}(e,S(e,e.pointers.full.components.getMasterPage(t)))},C=function(e,t,n,r){var i=function(e,t){return e.pointers.full.components.getHeader(t)}(e,t),a=function(t){return function(e,t){return f(e,t).y}(e,t)<function(e,t){var n=f(e,t);return n.y+n.height}(e,i)};if(!i||m(e,i))return[];var u=O(e,t),c=o.filter(u,function(t){return!m(e,t)&&function(e,t,n){return s.canSetContainer(e,t,n)}(e,t,i)&&a(t)}),l=o.reduce(c,function(t,o){var a=P(e,n,o,i),s=P(e,r,o,i);return a&&!s?t.attachToBack.push(o):!a&&s&&t.attachToFront.push(o),t},{attachToBack:[],attachToFront:[]}),p=l.attachToBack,d=l.attachToFront;return A(e,p,i),T(e,d,i),p.concat(d)},_=function(e){var t=a.VIEW_MODES.DESKTOP,n=e.pointers.full.components.getMasterPage(t),i=S(e,n),s=function(e,t){var n=S(e,t),i=o.filter(n,function(t){return E(e,t)||m(e,t)}),a=h(e,i,g(e,t.type));return[].concat(r(i.slice(0,a)),r(I(e,n)),r(i.slice(a+1,i.length)))}(e,n);if(o.isEqual(i,s))d(e,!1);else{var u=C(e,t,i,s);!function(e,t,n){var r=e.pointers.full.components.getChildrenContainer(t),i=e.dal.full.get(r),a=o.sortBy(i,function(e){var t=e.id;return o.findIndex(n,{id:t})});e.dal.full.set(r,a)}(e,n,s),d(e,!0,i,s,u)}},{exec:function(e){if(!function(e){return!y(e)}(e)||!function(e){return l(e,e.pointers.full.components.getMasterPage(a.VIEW_MODES.DESKTOP))}(e))return!1;c(e),_(e),function(e){var t=v(e),n=e.dal.full.get(t);e.dal.full.set(t,o.merge({},n,{layoutSettings:{soapCompsAroundPagesContainer:!0}}))}(e),e.siteAPI.createPageAnchors("masterPage")}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y;e.exports=(r=n(0),o=n(596),i=n(62),a=n(2),s=n(11),u=n(54),c={SITE_HEADER:"HEADER",PAGES_CONTAINER:"PAGES",SITE_FOOTER:"FOOTER"},l=function(e,t){return t.top-e.bottom},p=function(e){return r.omitBy(e,function(e){return!e})},d=function(e,t,n){var r=e.pointers.getInnerPointer(t,"layout"),o=e.dal.get(r);o.y+=n,e.dal.set(r,o)},g=function(e){return!!c[e.id]},f=function(e,t,n){var o=n.top,a=n.pointer;if(!n.isFixed){var u=r(t).filter(function(e){return e.bottom>o}).map("pointer").value();r.forEach(u,function(e,t){return function(n){e.siteAPI.reportBI(i.SECTION_LAYOUT_MIGRATION_REPARENT,{component_id:n.id,new_container_id:t.id})}}(e,a)),r.forEach(u,function(e,t){return function(n){return s.setContainer(e,n,n,t)}}(e,a))}},m=function(e,t,n){if(e.config.closeSectionGaps)return{};var o,i=function(e,t,n){if(!n.pagesToFooterGap)return n;var o,i={top:t.bottom,bottom:t.bottom+n.pagesToFooterGap};return n.pagesToFooterGap<=20&&!r.some(e,(o=i,function(e){return!(e.top>o.bottom||e.bottom<o.top)}))?r.assign({},n,{pagesToFooterGap:0}):n}(t,n.PAGES,n.gaps);return o=i,r.pickBy(o,function(e){return e>0})},v=function(e,t,n){var i=n.SITE_HEADER,a=n.SITE_FOOTER,s=function(e,t){return r.get(function(e,t){return e.dal.get(e.pointers.getInnerPointer(t,"layout"))}(e,t),"anchors.0.distance",0)}(e,t)+o.boundingLayout.getBoundingY(i)+o.boundingLayout.getBoundingHeight(i);return{PAGES_CONTAINER:{y:s,height:a.y-s}}},y=function(e){var t=a.VIEW_MODES.DESKTOP,n=e.pointers.components.getMasterPage(t),o=e.pointers.components.getChildren(n),i=function(e,t){return r.reduce(t,function(t,n){return t[n.id]=u.getComponentLayout(e,n),t},{})}(e,o),s=e.siteAPI.isPageLandingPage(e.siteAPI.getPrimaryPageId())?v(e,n,i):{};return r.map(o,function(e,t){return r.assign({i:t,pointer:e},function(e,t,n){var o=r.assign({},e[t],n[t]);return{top:o.y,bottom:o.y+o.height,isFixed:!!o.fixedPosition}}(i,e.id,s))})},function(e){if(!function(e){return function(e){return e.dal.get(e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"))||{}}(e).useDesktopSectionsLayout}(e)){var t=y(e),n=function(e){var t=r(e).filter(function(e){var t=e.pointer;return g(t)}).reduce(function(e,t){return e[c[t.pointer.id]]=t,e},{}),n=t.HEADER,o=t.PAGES,i=t.FOOTER;return{PAGES:o,FOOTER:i,gaps:p({headerToPagesGap:l(n,o),pagesToFooterGap:l(o,i)})}}(t),o=r.filter(t,r.conforms({isFixed:function(e){return!e},pointer:function(e){return!g(e)}}));f(e,o,n.FOOTER),function(e,t){var n=t.gaps,r=t.PAGES,o=t.FOOTER;n.headerToPagesGap&&n.headerToPagesGap<0&&d(e,r.pointer,-1*n.headerToPagesGap),n.pagesToFooterGap&&n.pagesToFooterGap<0&&d(e,o.pointer,-1*n.pagesToFooterGap)}(e,n);var a=m(e,o,n);!function(e,t){var n=e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=e.dal.get(n);e.dal.set(n,r.merge({},o,{useDesktopSectionsLayout:!0},t))}(e,a),function(e,t,n){e.siteAPI.reportBI(i.SECTION_LAYOUT_MIGRATION_RUN),r.forEach(t,function(t,o){e.siteAPI.reportBI(i.SECTION_LAYOUT_MIGRATION_CLOSE_GAP,{gap_size:t,gap_type:o,is_closed:!r.has(n,o)})})}(e,n.gaps,a),e.siteAPI.createPageAnchors("masterPage")}})},function(e){e.exports=JSON.parse('{"layout":{"docked":{"top":{"px":85},"hCenter":{"px":0}},"x":0,"y":0},"componentType":"platform.components.AppWidget","type":"Container","components":[],"data":{"type":"AppController","name":"Widget1","applicationId":"46b2ad43-5720-41d2-8436-2058979cb53f","controllerType":"controllerType","id":"dataItem-placeholder","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false}},"mobileHints":{"type":"MobileHints","recommendedWidth":280,"recommendedHeight":187,"author":"studio","metaData":{"isPreset":false,"schemaVersion":"1.0","isHidden":false},"id":"mobileHints-jx4qjbak"},"style":"appWidget1","activeModes":{}}')},function(e,t){e.exports={APP_BUILDER_PREVIEW_APP_ID:"46b2ad43-5720-41d2-8436-2058979cb53f"}},function(e,t){e.exports=T},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(1),o=n(238),i=r.displayedOnlyStructureUtil,a=i.getRefHostCompId,s=i.getUniqueRefId,u=i.getReferredCompId,c=i.isRefPointer,{getUniqueRefCompPointer:function(e,t,n){var r=e.pointers.components.getViewMode(t),o=s(t.id,n.id);return e.pointers.components.getUnattached(o,r)},getRefHostCompPointer:function(e,t){var n=e.pointers.components.getViewMode(t),r=a(t.id);return r?e.pointers.components.getUnattached(r,n):void 0},getTemplateCompPointer:function(e,t){var n=e.pointers.components.getViewMode(t),r=u(t.id);return r?e.pointers.components.getUnattached(r,n):void 0},isReferredComponent:function(e,t){return c(t)},removeAllOverrides:o.removeAllOverrides,openReferredComponent:o.openReferredComponent,closeWidgetToReferredComponent:o.closeWidgetToReferredComponent,getGhostRefComponents:function(e,t){return e.pointers.referredStructure.getGhostRefComponents(t.id)},getComponentToCreateRef:o.getComponentToCreateRef,unGhostifyComponent:o.unGhostifyComponent})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f;e.exports=(r=n(0),o=n(2),i=n(61),a=n(142),s=n(140),u=n(209),c=n(103),l=n(662)(void 0,{encodeWhenSerializing:!0}).serialize,p=function(e,t){var n=t.code,r=t.document,o=t.codeIntelligence,i=function(e){var t=e.socketAPI;if(!t)throw new Error("Cannot save to local server - no socket!");return t}(e),a=!!i.updateCodeIntelligence,s=r?i.updateDocument(r):Promise.resolve(),u=n?i.updateCodeFiles(n):Promise.resolve(),c=o&&a?i.updateCodeIntelligence(o):Promise.resolve();return Promise.all([s,u,c])},d=function(e,t){return function(n){var r=n.fileId,o=n.content,i=function(e){return c.isPageFile(e)},a=function(n){var r=["pagesData","masterPage","data","document_data",c.getPageId(n)],o=t&&t.getIn(r);return e.getIn(r,o)},u=s.getVirtualDescriptor(r,!1);if(i(u)&&!a(u))return null;var l=function(e){if(i(e)){var t=a(e);return{pageId:c.getPageId(e),title:t.get("title"),isPopup:t.get("isPopup")}}return{}}(u);return{path:u.location,content:o,metaData:l}}},g=function(e,t){var n=a.getChangesBetweenSnapshots(e,t),o=n.toSave,i=n.toCopy,s=n.toDelete,u=d(t,e);return{modifiedFiles:r.compact(o.map(function(e){return u(e)})),copiedFiles:i.map(function(e){var t=e.srcFileId,n=e.destFileId;return{source:u({fileId:t}),target:u({fileId:n})}}),deletedFiles:Object.keys(s).map(function(e){return u({fileId:e})})}},f=function(e,t){var n=r.keys(t.pages);return{codeIntelligenceSchemaVersion:"1.0",elementsMap:{pages:u.getNicknameToTypeMap(e,n),site:{commonComponents:u.getNicknameToTypeMap(e,[o.MASTER_PAGE_ID])[o.MASTER_PAGE_ID]}}}},{save:function(e,t,n){var r=l(n.toJS()),o=g(t,n),i=f(e,r);return p(e,{code:o,document:r,codeIntelligence:i})},clone:function(e){return i.loadAllFiles(e).then(function(){return i.loadAllFilesFromGrid(e)}).then(function(t){var n=e.dal.full.immutable.getCurrentSnapshot(),o=l(n.toJS()),i=d(n),a=r.compact(t.map(function(e){return i({fileId:e.path,content:e.content})})),s=f(e,o);return p(e,{code:{modifiedFiles:a},document:o,codeIntelligence:s})})},saveCode:function(e,t,n){var r=g(t,n);return p(e,{code:r})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(11),r=n(10),o=n(2),i={};function a(n,r){return e.filter(r,function(e){return!t.isHorizontallyStretchedToScreen(n,e)})}function s(t,n){if(1===e.size(n))return e.filter(n,function(e,t){return r.public.isAlignable(e,t)}.bind(this,t));var o=a(t,n);return 1===o.length&&(o=[]),o}function u(e,t,n){return l(n)?s(e,t):t}function c(t,n,r){return e.isFunction(i[r])?i[r](t,n,r):n}function l(t){return e.includes([o.COMP_ALIGNMENT_OPTIONS.LEFT,o.COMP_ALIGNMENT_OPTIONS.RIGHT,o.COMP_ALIGNMENT_OPTIONS.CENTER,o.COMP_DISTRIBUTION_OPTIONS.HORIZONTAL,o.COMP_DISTRIBUTION_OPTIONS.BOTH,o.COMP_MATCH_SIZE_OPTIONS.WIDTH,o.COMP_MATCH_SIZE_OPTIONS.BOTH],t)}return i[o.COMP_MATCH_SIZE_OPTIONS.WIDTH]=a,i[o.COMP_MATCH_SIZE_OPTIONS.BOTH]=a,i[o.COMP_ALIGNMENT_OPTIONS.LEFT]=u,i[o.COMP_ALIGNMENT_OPTIONS.RIGHT]=u,i[o.COMP_ALIGNMENT_OPTIONS.CENTER]=u,i[o.COMP_ALIGNMENT_OPTIONS.TOP]=u,i[o.COMP_ALIGNMENT_OPTIONS.BOTTOM]=u,i[o.COMP_ALIGNMENT_OPTIONS.MIDDLE]=u,i[o.COMP_DISTRIBUTION_OPTIONS.HORIZONTAL]=a,i[o.COMP_DISTRIBUTION_OPTIONS.BOTH]=a,{canAlign:function(t,n,r){if(!r||!e.size(n))return!1;var o=c(t,n,r);return e.size(o)>0},canDistribute:function(t,n,r){return r&&e.size(c(t,n,r))>1},canMatchSize:function(t,n,r){return r&&e.size(c(t,n,r))>1},isHorizontalAxis:l,getFilteredComponentsToApplyAction:c}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(148),r=(n(25),n(70)),o=n(51),i=n(86),a=n(85),s=n(110),u="Only manual lists are supported",c="List does not exist",l="Type does not exist",p="List views do not exist",d="Data selector does not exist",g="Template's type definition is not valid",f="Template's view definitions are not valid",m="The template is missing an item view",v="New List";function y(e){throw new Error(e)}function E(t,n,r,o){var i=n?e.pick(r,n.itemIds):r;return function(e,t,n){var r=s.createSelector(e,t);return s.setManualSelector(e,r,n),r}(t,o,e.values(i))}return{generateTemplate:function(t,n){var o=r.getListDef(t,n)||y(c),i=r.getSelector(t,n)||y(d);if("ManualSelectedList"!==i.type)throw new Error(u);var s=r.getViews(t,n);e.isEmpty(s)&&y(p);var g,f=r.getType(t,n);return{type:f||y(l),views:e.values(s),items:(g=a.getAllItemsOfType(t,f.name),e.mapValues(g,function(t){return e.omitBy(t,function(t,n){return"_iid"!==n&&e.startsWith(n,"_")})})),dataSelector:i,displayName:o.displayName||v}},createListFromTemplate:function(t,n){if(e.isEmpty(n.type))throw new Error(g);if(e.isEmpty(n.views))throw new Error(f);var s=e.map(n.views,function(t){return e.clone(t)}),u=o.createType(t,n.type);!function(t,n){e.forEach(t,function(e){e.forType="Array"===e.forType?"Array":n})}(s,u);var c=function(e,t){var n=i.createViewsWithSameName(e,t);return i.getViewById(e,n[0]).name}(t,s),l=function(t,n,r){return e.transform(n,function(e,n){var o=a.createItem(t,r,n);e[n._iid||o]=o},{})}(t,n.items,u),p=E(t,n.dataSelector,l,u),d={displayName:n.displayName,dataSelector:p,type:u,viewName:c};return r.createList(t,d)},setItemViewFromTemplate:function(n,o,i){if(e.isEmpty(i.type))throw new Error(g);if(e.isEmpty(i.views))throw new Error(m);var a=r.getType(n,o)||y(l),s=e.filter(i.views,{forType:i.type.name}),u=t.viewsTemplatesUtils.getMatchingViewsForType(s,i.type,a);e.forEach(u,function(e){r.replaceItemView(n,o,e)})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(23),r=n(43),o=n(9),i=t.fonts,a={fontSize:{defaultValue:null,parsedStyleKey:"size"},fontFamily:{defaultValue:null,parsedStyleKey:"family"},bold:{defaultValue:!1,parsedStyleKey:"bold"},italic:{defaultValue:!1,parsedStyleKey:"italic"},underline:{defaultValue:!1,parsedStyleKey:"underline"},color:{defaultValue:null,parsedStyleKey:"color"},backgroundColor:{defaultValue:null,parsedStyleKey:null},lineHeight:{defaultValue:null,parsedStyleKey:"lineHeight"},lineThrough:{defaultValue:!1,parsedStyleKey:null}},s=["fontSize","lineHeight"],u='Cannot set "fontClass" together with additional attributes',c="Cannot set fontClass to null";function l(t){return e.forEach(s,function(n){t[n]&&e.isString(t[n])&&(t[n]=parseInt(t[n],10))}),t}function p(t,n){if(n.fontClass){var r=function(t,n){var r=i.fontUtils.parseStyleFont(n,o.fonts.getAll(t),o.colors.getAll(t));return e.reduce(a,function(t,n,o){var i=n.parsedStyleKey&&r[n.parsedStyleKey];return i&&(t[o]=e.isString(i)?i.replace(/[{}]/g,""):i),t},{})}(t,n.fontClass),s=!1;e.forOwn(r,function(e,t){n[t]=n[t]||e,s=s||n[t]!==e}),s&&(n.fontClass=null)}return n}return{convertFieldPropsToViewDefProps:function(t,n){if(!e.isUndefined(t.fontClass)&&(o=t,i=e.keys(o),s=e.keys(a),p=e.intersection(i,s),!e.isEmpty(p)))throw new Error(u);var o,i,s,p;if(null===t.fontClass)throw new Error(c);if(function(t,n){return e.isUndefined(t.fontClass)&&!e.isEmpty(t)&&n&&n.fontClass}(t,n))(t=e.defaults(t,n)).style=null;else if(t.fontClass){var d=e.mapValues(a,"defaultValue");(t=e.defaults({},d,t)).style=r.styleMapping.fontClassToStyle(t.fontClass)}return delete t.fontClass,l(t)},convertViewDefPropsToFieldProps:function(e,t){return t.fontClass=r.styleMapping.styleToFontClass(t.style)||null,delete t.style,t.fontClass&&(t=p(e,t)),l(t)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(43),r=n(148),o=n(4),i=n(11),a=t.viewsUtils;function s(e){return parseInt(e,10)}function u(t,n){var r=a.getCompProp("spacers",t);return"vertical"===n?e.sum([s(r["xax-before"]||0),s(r["xax-after"]||0)]):e.sum([s(r.before||0),s(r.after||0)])}function c(e){return"Field"===a.getCompProp("name",e)||"manual"===a.getCompProp("width-mode",e)?a.getCompProp("width",e):0}function l(t,n){var r=e.map(n,function(e){return c(e)+u(e,t)});return"vertical"===t?e.max(r):e.sum(r)}function p(t,n){var o=a.getCompProp("items",t);if(!o||0===o.length)return 0;var i=a.getCompProp("name",t);if("FieldBox"===i){var s=r.fieldBoxProxyUtils.getFieldBoxDef(a.getCompProp,n,t),u=a.getCompProp("css",s).width,c=a.getCompProp("orientation",t);return"auto"===u?l(c,a.getCompProp("items",s)):u}var d=function(e,t){switch(e){case"VBox":return"vertical";case"HBox":return"horizontal";default:return t}}(i,n),g=e.map(o,function(e){return p(e,d)});return"vertical"===d?e.max(g):e.sum(g)}return{getSpacers:u,getFieldMinWidth:c,getFieldBoxMinWidth:l,getAppPart2MinWidth:p,updateAppPart2MinWidth:function(t,n,r,a){if("DESKTOP"===n.type&&e.has(r,"hidden")){var s=p(a,null);s>o.layout.get(t,n).width&&i.updateCompLayout(t,n,{width:s})}}}}()},function(e,t,n){e.exports=function(){var e=n(43),t=n(9),r="wysiwyg.viewer.components.WRichText";function o(t){var n=t.comp.name;return e.proxyFactory.getProxyClass(n,!0)}return{getStyle:function(n,i){return o(i).componentType===r?i.comp.style:e.styleData.getSkinAndStyle(t.styles.getAll(n),i.comp.name,i.comp.styleNS,i.comp.style,i.comp.skin).styleId||null},getCompProxyClass:o}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(59),r=n(25),o=n(109),i=n(22),a={primaryTask:o,secondaryTasks:[]};function s(t){return{event:e.partial(i.event,t),error:e.partial(i.error,t)}}return{reload:function(t){t.dal.full.removeByPath(r.getAppbuilderPath());var n=[];e.forEach(r.getAppbuilderMetadataPath("requestedPartNames"),function(e){var r="requestedPartNames"!==e?{}:[];n=n.concat(e),t.dal.full.setByPath(n,r)}),t.dal.takeSnapshot(o.getTaskName())},save:function(e,n,r,o){e.setOperationsQueue.flushQueueAndExecute(function(){var i=[a,e.dal,n,r,s(e)];o?t.runFullSaveTasks.apply(t,i):t.runPartialSaveTasks.apply(t,i)})}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(1),(i={})[o.blogAppPartNames.FEED]=["MasonryPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"],i[o.blogAppPartNames.CUSTOM_FEED]=["Masonry","MediaBottom","MediaLeft","MediaRight","MediaTop","MediaZigzag"],{getBlogPaginationCustomizationsByAppPartName:function(e){return r.map(i[e],function(e){return{type:"AppPartCustomization",forType:"Array",format:"*",view:e,fieldId:"vars",key:"pageNavigationType",value:"pagination"}})}})},function(e,t){e.exports=function(e){return{fieldId:"vars",forType:"Post",format:"*",key:"shouldUseNewSocialShareButtons",type:"AppPartCustomization",value:!0,view:e}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(34);function r(n){return e.head(t.filterAppsDataByType(n,"appbuilder"))}return{getInstanceId:function(e){return r(e).instanceId},getApplicationId:function(e){return r(e).applicationId}}}()},,,,,,,,,,function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w,b,M,R,N,x,L,B,k,F,U,H,V,W,G,z,j,Y,K,q,Q,X,Z,J,$,ee,te,ne,re,oe,ie,ae,se,ue,ce,le,pe,de,ge,fe,me,ve,ye,Ee,Ie,Se,he,Pe,Ae,Te,Oe,Ce,_e,De,we,be,Me,Re,Ne,xe,Le,Be,ke,Fe,Ue,He,Ve,We,Ge,ze,je,Ye,Ke,qe,Qe,Xe,Ze,Je,$e,et,tt,nt,rt;e.exports=(r=n(2),o=n(52),i=n(22),a=n(62),s=n(39),u=n(162),c=n(13),l=n(26),p=n(31),d=n(438),g=n(568),f=n(569),m=n(570),v=n(571),y=n(572),E=n(573),I=n(242),S=n(603),h=n(212),P=n(605),A=n(240),T=n(72),O=n(11),C=n(158),_=n(3),D=n(74),w=n(18),b=n(244),M=n(606),R=n(607),N=n(68),x=n(66),L=n(146),B=n(12),k=n(19),F=n(6),n(608),n(630),U=n(83),H=n(176),V=n(632),W=n(118),G=n(36),z=n(53),j=n(633),Y=n(635),K=n(640),q=n(7),Q=n(4),X=n(248),Z=n(641),J=n(642),$=n(17),ee=n(50),te=n(159),ne=n(643),re=n(179),oe=n(131),ie=n(10),ae=n(239),se=n(60),ue=n(644),ce=n(645),le=n(646),pe=n(647),de=n(98),ge=n(648),fe=n(168),me=n(649),ve=n(228),ye=n(650),Ee=n(229),Ie=n(41),Se=n(651),he=n(184),Pe=n(652),Ae=n(76),Te=n(55),Oe=n(125),Ce=n(132),_e=n(21),De=n(130),we=n(35),be=n(154),Me=n(200),Re=n(654),Ne=n(655),xe=n(656),Le=n(189),Be=n(203),ke=n(32),Fe=n(657),Ue=n(150),He=n(658),Ve=n(108),We=n(659),Ge=n(663),ze=n(664),je=n(665),Ye=n(160),Ke=n(250),qe=n(666),Qe=n(94),Xe=n(54),Ze=n(89),Je=n(667),$e=n(9),et=n(151),tt=n(668),nt=n(669),rt=n(102),{constants:r,biErrors:o,bi:i,biEvents:a,biEventTypes:s,siteMetadataPropertiesInfo:u,siteMetadata:c,componentStructureInfo:l,componentModes:p,componentsLoader:d,undoRedo:g,customElements:f,responsiveLayout:m,breakpoints:v,responsiveStyles:y,scrollAnchors:E,documentServicesDataFixer:I,dataFixersConfig:S,mobilePreSaveOperation:h,patchData:P,autosave:A,componentLayout:T,structure:O,documentMode:C,dataModel:_,anchors:D,page:w,sectionsLayoutMigrator:b,setOperationQueueUtils:M,dsQTrace:R,modesUtils:N,dataIds:x,jsonConfig:L,utils:B,contextAdapter:k,hooks:F,temp:{tmpErrors:U,idGenerator:H,visualFocusData:V,componentA11yAPI:W,actionsAndBehaviors:G,appControllerData:z,appStudioComponents:j,appStudio:Y,appStudioWidgets:K,componentDetectorAPI:q,component:Q,refComponent:X,snapshotAPI:Z,stylableEditorAPI:J,componentStylesAndSkinsAPI:$,componentCode:ee,componentBehaviors:te,wixVideoAPI:ne,componentScroll:re,mobileActions:oe,componentsMetaData:ie,createCompDriver:ae,connections:se,feedback:ue,fonts:ce,inlinePopup:le,browserThemeColor:pe,layouters:de,globalImageQualityData:ge,vectorImageAPI:fe,svgFiltersDefinitions:me,mainMenu:ve,menuAPI:ye,basicMenuItemMethods:Ee,mobileConversionFacade:Ie,mobileSettings:Se,quickActions:he,quickActionsVersionUtils:Pe,quickActionBarManager:Ae,mergeAggregator:Te,mobilePresetsHandler:Oe,menuContainer:Ce,pageData:_e,pagesGroup:De,platform:we,provision:be,pages:Me,serialization:Re,sessionState:Ne,viewerInfoChangedEmitter:xe,apiCallBiService:Le,livePreview:Be,platformConstants:ke,renderPlugins:Fe,routers:Ue,routersPointers:He,saveAPI:Ve,localMode:We,siteMembers:Ge,siteSegments:ze,smartBoxes:je,multiComponentsUtils:Ye,multiComponentsUtilsValidations:Ke,grouping:qe,groupingUtils:Qe,structureUtils:Xe,arrangement:Ze,meshMigrationUtil:Je,theme:$e,tpa:et,tpaCore:tt,validation:nt,wixCode:rt,wixapps:n(676)},wixCodeDS:rt,platform:we,wixCodeConstants:n(24),wFacebookComment:n(198),component:Q})},function(e,t,n){e.exports=function(){var e=n(0),t=n(44),r={FB_USERNAME_IS_NOT_STRING:"FB_USERNAME_IS_NOT_STRING",FB_USERNAME_INVALID_CHARS:"FB_USERNAME_INVALID_CHARS",FB_USERNAME_TOO_LONG:"FB_USERNAME_TOO_LONG",FB_THUMBNAIL_IS_NOT_STRING:"FB_THUMBNAIL_IS_NOT_STRING"},o={FB_USERNAME_MAX_LENGTH:250};function i(t,n){if(!e.isString(n))return{success:!1,errorCode:r.FB_USERNAME_IS_NOT_STRING};if(n.length>o.FB_USERNAME_MAX_LENGTH)return{success:!1,errorCode:r.FB_USERNAME_TOO_LONG};var i,a=(i=n,e.uniq(i.match(/[^a-zA-Z0-9\.]/g)));return a&&a.length?{success:!1,errorCode:r.FB_USERNAME_INVALID_CHARS,errorContent:a}:{success:!0}}return{facebook:{setThumbnail:function(n,o){var i=function(t){if(!e.isString(t))return{success:!1,errorCode:r.FB_THUMBNAIL_IS_NOT_STRING};return{success:!0}}(o);if(!i.success)throw new Error(i.errorCode);t.setProperty(n,t.PROPERTY_NAMES.SOCIAL_THUMBNAIL,o||"")},getThumbnail:function(e){return t.getProperty(e,t.PROPERTY_NAMES.SOCIAL_THUMBNAIL)},setUsername:function(n,r){var o=i(n,r);if(!o.success)throw new Error(o.errorCode);var a=t.getProperty(n,t.PROPERTY_NAMES.META_TAGS);e.find(a,{name:"fb_admins_meta_tag"}).value=r||"",t.setProperty(n,t.PROPERTY_NAMES.META_TAGS,a)},getUsername:function(n){var r=t.getProperty(n,t.PROPERTY_NAMES.META_TAGS);return e.find(r,{name:"fb_admins_meta_tag"}).value},validateUsername:i,ERRORS:r}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(44),{get:function(e){return o.getProperty(e,o.PROPERTY_NAMES.FAVICON)},set:function(e,t){var n=function(e){return r.isString(e)?{success:!0}:{success:!1,errorCode:i.FAVICON_IS_NOT_STRING}}(t);if(!n.success)throw new Error(n.errorCode);o.setProperty(e,o.PROPERTY_NAMES.FAVICON,t||"")},ERRORS:i={FAVICON_IS_NOT_STRING:"FAVICON_IS_NOT_STRING"}})},function(e,t,n){var r;e.exports=(r=n(44),{getFeatures:function(e){return r.getProperty(e,r.PROPERTY_NAMES.PREMIUM_FEATURES)},setFeatures:function(e,t){r.setProperty(e,r.PROPERTY_NAMES.PREMIUM_FEATURES,t)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(44),r={SITE_NAME_IS_EMPTY:"SITE_NAME_IS_EMPTY",SITE_NAME_IS_NOT_STRING:"SITE_NAME_IS_NOT_STRING",SITE_NAME_INVALID_CHARS:"SITE_NAME_INVALID_CHARS",SITE_NAME_ENDS_WITH_HYPHEN:"SITE_NAME_ENDS_WITH_HYPHEN",SITE_NAME_TOO_SHORT:"SITE_NAME_TOO_SHORT",SITE_NAME_TOO_LONG:"SITE_NAME_TOO_LONG",SITE_NAME_ALREADY_EXISTS:"SITE_NAME_ALREADY_EXISTS"},o={MIN_LENGTH:4,MAX_LENGTH:20};function i(t,n){var o=a(n);return o.success?function(t,n){n=c(n);var r=e.without(u.call(this,t),s(t));return e.includes(e.invokeMap(r,"toLowerCase"),n)}(t,n)?{success:!1,errorCode:r.SITE_NAME_ALREADY_EXISTS}:{success:!0,extraInfo:c(n)}:o}function a(t){if(!e.isString(t))return{success:!1,errorCode:r.SITE_NAME_IS_NOT_STRING};if(e.isEmpty(t))return{success:!1,errorCode:r.SITE_NAME_IS_EMPTY};var n=function(t){return e.uniq(t.match(/[^a-zA-Z0-9\s\-]/g))}(t);return n&&n.length?{success:!1,errorCode:r.SITE_NAME_INVALID_CHARS,errorContent:n}:function(e){return"-"===e.slice(-1)}(t)?{success:!1,errorCode:r.SITE_NAME_ENDS_WITH_HYPHEN}:(t=c(t)).length<o.MIN_LENGTH?{success:!1,errorCode:r.SITE_NAME_TOO_SHORT}:t.length>o.MAX_LENGTH?{success:!1,errorCode:r.SITE_NAME_TOO_LONG}:{success:!0,extraInfo:c(t)}}function s(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_NAME)}function u(e){return t.getProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES)}function c(e){return e.replace(/([^\s\w\d_\-])/g,"").replace(/\s+/g,"-").replace(/-+$/g,"").toLowerCase()}return{set:function(n,r){var o=i(n,r);if(!o.success)throw new Error(o.errorCode);var l=s(n);t.setProperty(n,t.PROPERTY_NAMES.SITE_NAME,c(r)),a(l).success&&function(n,r){var o=u(n);o=e.without(o,r),t.setProperty(n,t.PROPERTY_NAMES.USED_META_SITE_NAMES,o)}(n,l)},get:s,sanitize:function(e,t){return c(t)},validate:i,getUsedSiteNames:u,markSiteNameAsUsed:function(e,n){var r=t.getProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES);r.push(n),t.setProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES,r)},ERRORS:r}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(44),{cookies:{enable:function(e,t){if(!r.isBoolean(t))throw new Error("argument isEnabled must be boolean");o.setProperty(e,o.PROPERTY_NAMES.SUPPRESS_COOKIES,!t)},isEnabled:function(e){return!o.getProperty(e,o.PROPERTY_NAMES.SUPPRESS_COOKIES)}}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(7),i=n(3),a=["news","menu","faq"],s="wixapps.integration.components.AppPart",{hasAppPage:function(e){var t=function(e){var t=e.pointers.page.getPageData("masterPage");return e.dal.get(t)}(e);return!!r.find(t,{type:"AppPage",appPageType:"AppBuilderPage"})},hasOldApp:function(e){var t=e.pointers.general.getClientSpecMap(),n=e.dal.get(t),u={};r.forEach(a,function(e){var t=r.find(n,{type:"wixapps",packageName:e});if(t){var o=t.applicationId;u[o]=t}});var c=r.find(n,{packageName:"ecommerce"});if(c&&(u[c.applicationId]=c),r.isEmpty(u))return!1;var l=o.getComponentByType(e,s);return r.some(l,function(t){var n=i.getDataItem(e,t);return!!u[n.appInnerID]})},hasNewBlog:function(e){var t=e.pointers.general.getClientSpecMap(),n=e.dal.get(t);return!!r.find(n,["appDefinitionName","Wix Blog"])}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(23),o=n(65),i=n(66),a=n(6),s=n(20).services,u=s.dataValidators,c=s.schemasService,l=t.constants.DATA_TYPES;function p(e,t,n,r,o,i){return function(e,t,n,r,o,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=[],c=a.executeHookAndUpdateValue(e,a.HOOKS.DESERIALIZE.BEFORE,void 0,[o,r],n),l=g(e,t,c,r,o,i,u,void 0,s),p=u.reverse();return d(e,p),l}(e,t,n,r,o,i,arguments.length>6&&void 0!==arguments[6]&&arguments[6])}function d(e,t){for(var n=null,r=0;r<t.length;r++){var o=t[r],i=o.pointer;!n&&i.component&&(n=i.component),i.component=n,i.refPath=o.refPath;var a=o.item;e.dal.set(i,a)}}function g(t,n,r,o,i,a,s,c){var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=f(t,n,r,o,i,g,s,c=c||[],l);e.set(p,"metaData.isPreset",!1);var d=t.pointers.data.getItemWithOptional(i,p.id,n,a);return d.useOriginalLanguage=l,u.validateDataBySchema(p,i),s.push({pointer:d,item:p,refPath:c}),p.id}function f(t,n,r,a,s,u,l,p){var d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],g=a||i.generateNewId(s),f={},m={id:g},v=t.pointers.data.getItem(s,g,n);t.dal.isExist(v)&&(f=t.dal.full.get(v)),r.type=r.type||e.get(f,"type");var y,E,I=r.type;if(!c.getSchema(s,I))throw new Error("missing schema (schemaType: ".concat(s," schemaName: ").concat(I,") for the given data item"));function S(e,r){return"#".concat(u?u(t,n,r,r.id,s,null,l,p.concat(e),d):r.id||i.generateNewId(s))}return u?e.forOwn(r,function(t,n){e.isPlainObject(t)&&o.isOfType(s,I,n,"ref")?m[n]=S(n,t):o.isOfType(s,I,n,"refList")?m[n]=e.map(t,S.bind(null,n)):"id"!==n&&(m[n]=t)}):m=e.defaults(m,r),E=m,(y=f).type&&E.type&&!e.isEqual(y.type,E.type)||(m=e.assign(f,m)),function(t){t.metaData=e.assign({isPreset:!1,schemaVersion:"1.0",isHidden:!1},t.metaData)}(m),m}function m(t,n,r,o,i){var a=f(t,n,o,i||o.id,r);e.set(a,"metaData.isPreset",!1);var s=t.pointers.data.getItemWithOptional(r,a.id,n);return u.validateDataBySchema(a,r),d(t,[{pointer:s,item:a,refPath:[]}]),a.id}var v=function(n){return e.isString(n)&&t.stringUtils.startsWith(n,"#")&&n.replace("#","")};return{addSerializedItemToPage:function(e,t,n,r,o){return p(e,t,n,r,o)},addSerializedStyleItemToPage:function(e,t,n){return p(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"masterPage",function(e){if(!e||"StylesInBreakpoint"!==e.type)return e;return{type:"RefArray",values:e.stylesInBreakpoints.map(function(e){return e.breakpoint?{type:"BreakpointRelation",breakpoint:e.breakpoint,ref:e}:e})}}(t),n,l.theme)},addSerializedDataItemToPage:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return p(e,t,n,r,l.data,void 0,o)},addSerializedPropertyItemToPage:function(e,t,n,r,o){return p(e,t,n,r,l.prop,o)},addSerializedDesignItemToPage:function(e,t,n,r,o){return p(e,t,n,r,l.design,o)},addSerializedBehaviorsItemToPage:function(e,t,n,r){return p(e,t,n,r,l.behaviors)},addSerializedLayoutItemToPage:function(e,t,n,o){return p(e,t,function(e){if(!e||"LayoutData"!==e.type)return e;return{type:"RefArray",values:[].concat(r(e.itemLayouts||[]),r(e.componentLayouts||[]),r(e.containerLayouts||[])).map(function(e){return e.breakpoint?{type:"BreakpointRelation",breakpoint:e.breakpoint,ref:e}:e})}}(n),o,l.layout)},addSerializedAnchorDataItemToPage:function(e,t,n,r){return p(e,t,n,r,l.anchors)},addSerializedBreakpointItemToPage:function(e,t,n,r){return p(e,t,n,r,l.breakpoints)},addSerializedConnectionsItemToPage:function(e,t,n,r){return p(e,t,n,r,l.connections)},addSerializedMobileHintsItemToPage:function(e,t,n,r,o){return p(e,t,n,r,l.mobileHints,o)},addDeserializedItemToPage:m,addDeserializedStyleItemToPage:function(e,t,n,r){return m(e,t,l.theme,n,r)},deserializeDataItem:function(e,t,n){return f(e,null,t,t.id,n,function(e,t,r){return"#".concat(r.id||i.generateNewId(n))},null,[])},serializeDataItem:function t(n,r,i,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(n.dal.full.isExist(i)){i=e.assign({},i,{useOriginalLanguage:!0});var u=n.dal.full.get(i),c=n.pointers.data.getPageIdOfData(i),l=u;if(!0!==s){var p=e.assign({},i,{useOriginalLanguage:!1}),d=n.dal.full.get(p);l=e.defaults(e.omitBy(d,e.isNil),u)}a&&delete l.id;var g=l.type;return e.forOwn(l,function(t,n){var i,a=o.isOfType(r,g,n,"ref");if(t&&a)t=f(t);else{var s=o.isOfType(r,g,n,"refList");t&&s&&(i=t,t=e.compact(e.map(i,function(e){return f(e)})))}l[n]=t}),l}function f(o){var i=function(t,n,r,o){var i=e.isObject(n)?n.id:v(n);return t.pointers.data.getItem(o,i,r)}(n,o,c,r);return t(n,r,i,a,s)}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r={LAYOUT:{UPDATE_BEFORE:"before_layout_update",UPDATE_AFTER:"after_layout_update"},COMPONENT:{STYLE_UPDATE_AFTER:"after_style_update"},ADD:{BEFORE:"before_add",AFTER:"after_add",IS_OPERATION_ALLOWED:"isOperationAllowed_add"},DATA:{UPDATE_BEFORE:"data_update_before",UPDATE_AFTER:"data_update_after",SET_BY_POINTER_AFTER:"data_set_by_pointer_after",AFTER_GET:"after_get_data",AFTER_UPDATE_CONNECTIONS:"data_after_update_connections"},DESIGN:{UPDATE_BEFORE:"design_update_before",UPDATE_AFTER:"design_update_after"},MOBILE_HINTS:{UPDATE_BEFORE:"mobile_hints_update_before"},SITE_BACKGROUND_UPDATE:{AFTER:"after_site_background_update"},PROPERTIES:{UPDATE_BEFORE:"properties_update_before",UPDATE_AFTER:"properties_update_after"},BEHAVIORS:{UPDATE_AFTER:"behaviors_update_after"},ADD_ROOT:{BEFORE:"before_add_root",AFTER:"after_add_root",IS_OPERATION_ALLOWED:"isOperationAllowed_add_root",GET_CONTAINER_TO_ADD_TO:"get_container_to_add_to"},ADD_PAGE:{AFTER:"after_add_page"},DUPLICATE_ROOT:{BEFORE:"before_duplicate_root",AFTER:"after_duplicate_root"},REMOVE:{BEFORE:"before_remove",AFTER:"after_remove",IS_OPERATION_ALLOWED:"isOperationAllowed_remove"},DUPLICATE:{BEFORE:"before_duplicate",IS_OPERATION_ALLOWED:"isOperationAllowed_duplicate"},DESERIALIZE:{BEFORE:"before_deserialize"},SERIALIZE:{SET_CUSTOM:"set_custom_serialize",CHILDREN_BEFORE:"before_serialize_children"},CHANGE_PARENT:{BEFORE:"before_change_parent",AFTER:"after_change_parent"},CHANGE_COMPONENT_VIEW_MODE:{BEFORE:"before_change_component_view_mode"},SWITCH_VIEW_MODE:{AFTER:"after_switch_view_mode",MOBILE:"switch_to_mobile_view"},MOBILE_CONVERSION:{BEFORE:"before_mobile_conversion",AFTER:"after_mobile_conversion"},MOBILE_MERGE:{BEFORE:"before_mobile_merge"},RELAYOUT_MOBILE_PAGE:{AFTER:"after_relayout_page"},PUBLISH:{BEFORE:"before_site_publish"},AUTOSAVE:{ACTION:"autosave_action"},SAVE:{SITE_SAVED:"site_saved",VALIDATION_ERROR:"validation_error"},WIX_CODE:{FLUSH:"wixcode_flush",SET_NICKNAME_BEFORE:"wixcode_set_nickname_before",SET_NICKNAME_AFTER:"wixcode_set_nickname_after",FILE_CONTENT_CHANGED:"wixcode_file_content_changed"},METADATA:{MOVE_DIRECTIONS:"meta_data_move_directions",REMOVABLE:"meta_data_removable",DUPLICATABLE:"meta_data_duplicatable",CAN_REPARENT:"meta_data_can_reparent",RESIZABLE_SIDES:"meta_data_resizable_sides",ROTATABLE:"meta_data_rotatable",FIXED_POSITION:"meta_data_fixed_position",CONTAINABLE:"meta_data_containable",LAYOUT_LIMITS:"meta_data_layout_limits",SHOULD_AUTO_SET_NICKNAME:"meta_data_should_auto_set_nickname",A11Y_CONFIGURABLE:"meta_data_a11y_configurable",HIDE_AS_GHOST:"hideAsGhost"},MULTILINGUAL:{AFTER_CHANGE_LANGUAGE:"after_change_language"},PLATFORM:{APP_PROVISIONED:"platform_app_provisioned",APP_UPDATED:"platform_app_updated",AFTER_CONTROLLERS_SET_STATE:"after_platform_controllers_set_state"},CONNECTION:{AFTER_DISCONNECT:"after_connection_disconnect"},ADD_TPA:{AFTER:"after_tpa_app_add",COMPONENT_DEFINITION_MODIFIER:"component_definition_modifier_before_add_tpa"},PAGE:{AFTER_NAVIGATE_TO_PAGE:"after_navigate_to_page"},UNDO_REDO:{AFTER_APPLY_SNAPSHOT:"after_apply_snapshot"},REMOVE_COMP_MODE:{BEFORE:"before_remove_comp_mode"}},o=e(r).flatMap(function(t){return e.flatMap(t)}).reduce(function(e,t){return e[t]=!0,e},Object.create(null));function i(e){if(!o[e])throw new Error("Invalid Hook Name ".concat(e))}return{createHandler:function(){var n=Object.create(null),o={isRunningRecursiveHooksAllowed:!0};function a(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.wSpy.logCallBackRegistration(i,"setHook",Array.prototype.slice.call(arguments),"at setHook"),i){var s=n[r];s||(n[r]=s=Object.create(null));var u=s[o];if(u){if(a&&e.find(u,"isExternal"))return}else s[o]=u=[];var c={func:i,isExternal:a};return e(u).map("func").some(function(e){return i===e})||u.push(c),i}}function s(t,r,a){if(i(t),o.isRunningRecursiveHooksAllowed){var s=n[t];s&&(r&&e.forEach(s[r],a),e.forEach(s[""],a))}}function u(e,n){e.isExternal&&(o.isRunningRecursiveHooksAllowed=!1),t.wSpy.logCallBackExecution(e.func,"applyHook",Array.prototype.slice.call(arguments));var r=e.func.apply(this,n);return o.isRunningRecursiveHooksAllowed=!0,r}return{HOOKS:r,unregisterHooks:function(t){var r=e.isArray(t)?t:[t];e.forEach(r,function(e){n[e]={}})},unregisterComponentHook:function(e,t){n[e]&&n[e][t]&&(n[e][t]=[])},unregisterHook:function(t,r,o){if(o=o||"",n[t]&&n[t][o]){var i=n[t][o];e.remove(i,["func",r])}},registerHook:function(e,t,n){return i(e),a(e,n,t,!1)},registerExternalHook:function(e,t,n){i(e),a(e,n,t,!0)},executeHook:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.noop,i=!1;return s(t,n,function(e){var t=u(e,r);if(i||o(t))return i=!0,!1}),!i},executeHooksAndCollectValues:function(t,n,r){var o=[];return s(t,n,function(t){var n=u(t,r);e.isUndefined(n)||o.push(n)}),o},executeHookAndUpdateValue:function(t,n,r,o,i){var a=e.cloneDeep(i);return s(n,r,function(e){a=u(e,[t,a].concat(o))}),a}}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(65),o=n(12),i=n(278),a=n(6),s=t.constants.DATA_TYPES,u={data:["MAIN_MENU","CUSTOM_MENUS","CUSTOM_MAIN_MENU"],props:[],style:[]};function c(e,t,n){if(!e||!t)return null;var r=e.pointers.getInnerPointer(t,n),o=(e.dal.isExist(r)?e.dal:e.dal.full).get(r);return o?o.replace("#",""):null}function l(t,n,o,i){if(t.dal.isExist(o)){var a,s,c=t.dal.get(o);if(c&&(a=n,s=o.id,!e.includes(u[a],s)))r.executeForDataItemRefs(n,c,function(e){if(e){var r=t.pointers.data.getItem(n,e.replace("#",""),i);l(t,n,r,i)}}),t.dal.remove(o)}}function p(e,t){if(e.dal.isExist(t)&&!i.isDataItemPersistent(e,t)){var n=e.pointers.data.getPageIdOfData(t);l(e,s.data,t,n)}}function d(e,t){return(e.pointers.components.getPageOfComponent(t)||e.pointers.full.components.getPageOfComponent(t)).id}return{removeItemRecursivelyByType:function(e,t){if(e.dal.isExist(t)&&!i.isDataItemPersistent(e,t)){var n=e.pointers.data.getPageIdOfData(t);l(e,t.type,t,n)}},removeDataItemRecursively:p,removeDesignItemRecursively:function(e,t){if(e.dal.isExist(t)){var n=e.pointers.data.getPageIdOfData(t);l(e,s.design,t,n)}},removeConnectionsItem:function(e,t){var n=c(e,t,"connectionQuery");if(n){var r=d(e,t),o=e.pointers.data.getConnectionsItem(n,r);l(e,s.connections,o,r);var i=e.pointers.getInnerPointer(t,"connectionQuery");e.dal.full.remove(i)}},removeBehaviorsItem:function(e,t){var n=c(e,t,"behaviorQuery");if(n){var r=d(e,t),i=e.pointers.data.getBehaviorsItem(n,r);l(e,s.behaviors,i,r);var u=e.pointers.getInnerPointer(t,"behaviorQuery");e.dal.full.remove(u);var p=o.getComponentType(e,t);a.executeHook(a.HOOKS.BEHAVIORS.UPDATE_AFTER,p,[e])}},removeMobileHintsItem:function(e,t){var n=c(e,t,"mobileHintsQuery");if(!n||e.pointers.page.is)return null;var r=d(e,t),o=e.pointers.data.getMobileHintsItem(n,r);p(e,o)},deleteDesignItem:function(e,t){if(e&&t){var n=c(e,t,"designQuery");if(!n)return null;var r=d(e,t),o=e.pointers.data.getDesignItem(n,r);l(e,s.design,o,r)}},deletePropertiesItem:function(e,t){if(e&&t){var n=c(e,t,"propertyQuery");if(!n)return null;var r=d(e,t),i=e.pointers.data.getPropertyItem(o.stripHashIfExists(n),r);l(e,s.prop,i,r)}},deleteDataItem:function(e,t){if(e&&t){var n=c(e,t,"dataQuery");if(!n)return null;var r=d(e,t),o=e.pointers.data.getDataItem(n,r);p(e,o)}}}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o=["MAIN_MENU","CUSTOM_MENUS","CUSTOM_MAIN_MENU","IMAGE_QUALITY"],{isDataItemPersistent:function(e,t){var n=e.dal.get(t);return n&&r.includes(o,n.id)}})},function(e,t){e.exports=O},function(e,t){e.exports=C},function(e,t){e.exports={mobileConversionConfig:{hideByDefault:!0}}},function(e,t,n){var r;e.exports=(r=n(0),{isRepeatable:!1,styleCanBeApplied:!1,layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap(),o=r.get(n,["custom",t.id],{});return{minHeight:o.minHeight,minWidth:o.minWidth}},containableByStructure:n(8).notContainableByPopup,mobileConversionConfig:{desktopOnly:!0}})},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(3),{"wysiwyg.viewer.components.WSiteStructure":!0,"mobile.core.components.SiteStructure":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"mobile.core.components.Page":!0,"core.components.Page":!0,"wixapps.integration.components.AppPage":!0,"wysiwyg.viewer.components.ScreenWidthContainer":!0,"wysiwyg.viewer.components.StripContainer":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShowSlide":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":function(e,t){if(e.pointers.components.getViewMode(t)===r.VIEW_MODES.MOBILE)return!0;var n=0===e.pointers.components.getSiblings(t).length,i=e.pointers.components.getParent(t),a=o.getPropertiesItem(e,i);return n&&a.fullWidth}})},function(e,t,n){var r,o;e.exports=(r=n(1),o=n(0),{isRepeatable:!1,rotatable:!0,layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap();return{minWidth:o.get(n,["minWidth",t.id],r.siteConstants.COMP_SIZE.MIN_WIDTH)}}})},function(e,t,n){e.exports=function(){n(8);var e=n(2);return{moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,styleCanBeApplied:!0,mobileConversionConfig:{isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}()},function(e,t,n){var r;e.exports={resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:180,maxWidth:980,minHeight:180,maxHeight:1024},styleCanBeApplied:!0}},function(e,t,n){var r,o;e.exports=(r=n(3),o=n(2),{isRepeatable:!1,resizableSides:function(e,t){var n=r.getDataItem(e,t).showStream?[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.BOTTOM,o.RESIZE_SIDES.RIGHT]:[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT];return n},layoutLimits:{minWidth:280,minHeight:575,maxWidth:500}})},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={resizableSides:[]}},function(e,t,n){e.exports=function(){n(0),n(3);var e=n(2),t=n(1);function r(e,n){var r=e.pointers.getInnerPointer(n,"layout"),o=e.dal.get(r);return t.dockUtils.isStretched(o)}return{mobileConversionConfig:{category:"graphic"},styleCanBeApplied:!0,rotatable:function(e,t){return!r(e,t)},resizableSides:function(){return[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT]},moveDirections:function(t,n){return r(t,n)?[e.MOVE_DIRECTIONS.VERTICAL]:[e.MOVE_DIRECTIONS.HORIZONTAL,e.MOVE_DIRECTIONS.VERTICAL]},fullWidth:function(e,n){return function(e,n){var r=e.pointers.getInnerPointer(n,"layout"),o=e.dal.get(r);return t.dockUtils.isHorizontalDockToScreen(o)}(e,n)},fullWidthByStructure:function(e,n){return!!t.dockUtils.isHorizontalDockToScreen(n.layout)},canBeStretched:!0,heightAuto:!0}}()},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t,n){var r,o,i;e.exports=(r=n(2),o=n(91),i=n(5),{resizableSides:[r.RESIZE_SIDES.BOTTOM],moveDirections:function(e){if(i.isOpen("sv_zeroGapsThreshold"))return[r.MOVE_DIRECTIONS.VERTICAL];var t=o.getInitialGapMap(e);return t&&t.aboveHeader>=r.SITE_SEGMENTS_GAP_THRESHOLD?[r.MOVE_DIRECTIONS.VERTICAL]:[]},canBeFixedPosition:!0,removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,enforceContainerChildLimitsByHeight:function(e,t){return!e.pointers.components.isMobile(t)},styleCanBeApplied:function(e){var t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},hiddenable:!1,collapsible:!1,mobileConversionConfig:{preserveAspectRatio:!1,minHeight:90,topRightMargin:[90,90],descendantImageScaleFactor:.7,siteSegmentRole:"SITE_HEADER",category:"siteSegments"}})},function(e,t,n){var r,o,i;e.exports=(r=n(2),o=n(91),i=n(5),{resizableSides:[r.RESIZE_SIDES.BOTTOM],moveDirections:function(e){return e.siteAPI.getMasterPageLayoutSettings().useDesktopSectionsLayout?[]:i.isOpen("sv_zeroGapsThreshold")?[r.MOVE_DIRECTIONS.VERTICAL]:o.getInitialGapMap(e).aboveFooter>=r.SITE_SEGMENTS_GAP_THRESHOLD?[r.MOVE_DIRECTIONS.VERTICAL]:[]},canBeFixedPosition:function(e,t){return!e.pointers.components.isMobile(t)},removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,styleCanBeApplied:function(e){var t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},hiddenable:!1,collapsible:!1,mobileConversionConfig:{preserveAspectRatio:!1,siteSegmentRole:"SITE_FOOTER",category:"siteSegments"}})},function(e,t){e.exports={rotatable:!0}},function(e,t,n){var r;e.exports={resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:110,maxWidth:400}}},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(3),i=n(12),{resizableSides:[],defaultMobileProperties:{iconSize:35,spacing:15},mobileConversionConfig:{fixedSize:function(e,t,n){var a=e.dal.get(e.pointers.data.getPropertyItem(i.stripHashIfExists(t.propertyQuery),n)),s=o.getDataItemById(e,i.stripHashIfExists(t.dataQuery),n),u=r.get(s,["items","length"],0),c=r.get(a,"iconSize",0),l=c*u+r.get(a,"spacing",0)*(u-1),p="HORIZ"===r.get(a,"orientation","HORIZ");return{width:p?l:c,height:p?c:l}}},heightAuto:!0,widthAuto:!0})},function(e,t){e.exports={isRepeatable:!1}},function(e,t,n){var r,o,i;e.exports=(r=n(1),o=n(0),i=n(2),{layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap()||{},i=t.id;return{minWidth:o.get(n,["minWidth",i],r.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:o.get(n,["minHeight",i],r.siteConstants.COMP_SIZE.MIN_HEIGHT)}},mobileConversionConfig:{hideByDefault:function(e,t,n){var r=e.pointers.components.getMasterPage(i.VIEW_MODES.MOBILE),o=e.pointers.components.getComponent(i.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,r),a=e.dal.isExist(o);return"masterPage"===n&&!a}}})},function(e,t){e.exports={rotatable:!0,resizableSides:[]}},function(e,t,n){var r;e.exports={anchors:{to:{allow:!0,lock:(r=n(2)).ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[],moveDirections:[],removable:!1,duplicatable:!1,fullWidth:!0,collapsible:!1,hiddenable:!1}},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(45),{anchors:{to:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.NEVER},from:!1},resizableSides:[],moveDirections:[],containable:!1,duplicatable:!1,removable:!1,fullWidth:!0,styleCanBeApplied:function(e,t){return!(e.siteAPI.getCurrentPopupId()===t.id)},hiddenable:!1,collapsible:!1,dockable:!1,mobileConversionConfig:{shouldApplyPreset:!1,marginX:20,category:"page"},maximumChildrenNumber:function(e,t){return t&&o.isWidgetPage(e,t.id)?1:Number.MAX_VALUE}})},function(e,t){e.exports={minimalChildrenNumber:2,resizableSides:[],canBeFixedPosition:!1,mobileConversionConfig:{category:"boxContainer",filterChildrenWhenHidden:!0,isTightContainer:!0,nestOverlayingSiblings:!1,marginX:0}}},function(e,t,n){var r,o,i;e.exports=(r=n(3),o=n(2),i=[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.BOTTOM,o.RESIZE_SIDES.RIGHT],{isRepeatable:!1,mobileConversionConfig:{hideByDefault:!0},resizableSides:function(e,t){return"original"===r.getPropertiesItem(e,t).displayMode?[]:i}})},function(e,t,n){var r,o,i;e.exports=(r=n(2),o=n(91),i=n(5),{anchors:{to:{allow:!0,allowBottomBottom:!1,lock:r.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[],moveDirections:function(e){return e.siteAPI.getMasterPageLayoutSettings().useDesktopSectionsLayout?[]:i.isOpen("sv_zeroGapsThreshold")?[r.MOVE_DIRECTIONS.VERTICAL]:o.getInitialGapMap(e).abovePagesContainer>=r.SITE_SEGMENTS_GAP_THRESHOLD?[r.MOVE_DIRECTIONS.VERTICAL]:[]},removable:!1,duplicatable:!1,containable:!1,fullWidth:!1,hiddenable:!1,collapsible:!1,mobileConversionConfig:{marginX:20,siteSegmentRole:"PAGES_CONTAINER",category:"siteSegments"}})},function(e,t){e.exports={resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={rotatable:!0}},function(e,t,n){var r;e.exports={resizableSides:[(r=n(2)).RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],fullWidth:!0,mobileConversionConfig:{isScreenWidth:!0,preserveAspectRatio:!1}}},function(e,t,n){var r,o;e.exports=(r=n(2),n(29),o=n(8),{resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:o.containableByFullWidthPopup,mobileConversionConfig:{hideWhenEmptyBackgroundContainer:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,minHeight:200,preserveAspectRatio:!1}})},function(e,t,n){var r;e.exports={styleCanBeApplied:!0,resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:250}}},function(e,t,n){var r,o;e.exports=(r=n(1),o=n(0),{rotatable:!0,styleCanBeApplied:!0,layoutLimits:function(e,t,n){var i=e.siteAPI.getSiteMeasureMap(),a={minWidth:o.get(i,["minWidth",t.id],r.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:o.get(i,["minHeight",t.id],r.siteConstants.COMP_SIZE.MIN_HEIGHT)};if(n&&n.scale){var s=function(e,t){var n=e.pointers.getInnerPointer(t,"layout.scale");return e.dal.get(n)||1}(e,t);if(s!==n.scale){var u=n.scale/s;return o.mapValues(a,function(e){return e*u})}}return a},disableable:!0})},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(2),{anchors:{to:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],containable:!1})},function(e,t,n){e.exports=function(){n(0),n(15);var e=n(8),t=n(2);function r(t,n,r){var o=e.getComponentType(t,r);return e.isSiteStructure(o)}return{canBeFixedPosition:!0,removable:!1,resizableSides:function(e,n){return n.type===t.VIEW_MODES.MOBILE?[t.RESIZE_SIDES.BOTTOM]:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT,t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM]},moveDirections:function(e,n){return n.type===t.VIEW_MODES.MOBILE?[]:[t.MOVE_DIRECTIONS.VERTICAL,t.MOVE_DIRECTIONS.HORIZONTAL]},duplicatable:!1,containable:r,containableByStructure:r,fullWidth:function(e,n){return n.type===t.VIEW_MODES.MOBILE},enforceContainerChildLimitsByHeight:!0,styleCanBeApplied:!1,hiddenable:!0,collapsible:!0,mobileConversionConfig:{preserveAspectRatio:!1,siteSegmentRole:"SUBHEADER",category:"siteSegments",isTightContainer:!0,hasTightMarginBetweenChildren:!0}}}()},function(e,t,n){var r;e.exports={anchors:{to:{allow:!0,lock:(r=n(2)).ANCHORS.LOCK_CONDITION.ALWAYS,distance:0},from:{allow:!1,lock:r.ANCHORS.LOCK_CONDITION.NEVER}},resizableSides:[],moveDirections:[],removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,collapsible:!1,hiddenable:!1}},function(e,t){e.exports={resizableSides:[]}},function(e,t,n){var r,o;e.exports=(r=n(3),o=n(2),{styleCanBeApplied:!0,canBeStretched:!0,resizableSides:function(e,t){return"flexibleHeight"===r.getPropertiesItem(e,t).imageMode?[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT]:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.BOTTOM,o.RESIZE_SIDES.RIGHT]},mobileConversionConfig:{minHeight:200}})},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0,defaultMobileProperties:{textMode:"noText"}}},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0}},function(e,t){e.exports={isRepeatable:!1}},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0,mobileConversionConfig:{fixedSize:{width:280,height:240}}}},function(e,t,n){var r,o;e.exports=(r=n(3),o=n(2),{isRepeatable:!1,resizableSides:function(e,t){return r.getPropertiesItem(e,t).uri?[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT]:[]},mobileConversionConfig:{preserveAspectRatio:!1}})},function(e,t,n){var r,o,i;e.exports=(r=n(2),o={"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutEnvelope":{minWidth:505,maxWidth:980,minHeight:126,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutFlat":{minWidth:505,maxWidth:980,minHeight:98,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutShiny":{minWidth:505,maxWidth:980,minHeight:98,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":{minWidth:724,maxWidth:1e3,minHeight:85,maxHeight:300},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":{minWidth:800,maxWidth:1e3,minHeight:81,maxHeight:300},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormPlaceholderSkin":{minWidth:235,maxWidth:980,maxHeight:1024}},i={minWidth:235,maxWidth:980,minHeight:120,maxHeight:1024},{resizableSides:[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],styleCanBeApplied:!0,layoutLimits:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"skin"));return o[n]||i}})},function(e,t,n){var r;e.exports=(r=n(0),{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0,layoutLimits:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),o=e.pointers.components.getPageOfComponent(t).id,i=e.dal.get(e.pointers.data.getThemeItem(n,o)),a=parseInt(r.get(i,"style.properties.strokewidth",0),0),s=a+1,u=a+1,c=r.get(i,"svgId"),l=e.pointers.svgShapes.getSvgShapePointer(c),p=e.pointers.getInnerPointer(l,"boxBoundaries"),d=e.dal.get(p),g=r.isEmpty(d)?0:d.width/d.height;return g&&(g>1?s=(u=a+1)*g:u=(s=a+1)/g),{minWidth:Math.ceil(s),minHeight:Math.ceil(u),maxHeight:2e3}}})},function(e,t,n){var r;e.exports=(r=n(0),{canBeFixedPosition:!0,layoutLimits:{minWidth:40,minHeight:40},containable:!1,modal:function(e,t){var n=e.pointers.general.getRenderFlag("componentPreviewStates"),o=e.dal.get(n,{});return"open"===r.get(o,t.id)},styleCanBeApplied:function(e){var t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},mobileOnly:!0})},function(e,t){e.exports={mobileOnly:!0}},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(167),r.defaults({mobileOnly:!0,hiddenable:!1,moveDirections:[]},o))},function(e,t,n){var r;e.exports={mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0,keepIfVerticalDivider:!0},rotatable:!0,styleCanBeApplied:!0,resizableSides:[(r=n(2)).RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],widthAuto:!0}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={resizableSides:[]}},function(e,t,n){var r,o;e.exports=(r=n(15),o=n(2),{isRepeatable:!1,resizableSides:function(e){return"MOBILE"===r.getViewMode(e)?[]:[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT]},layoutLimits:function(e){return"MOBILE"===r.getViewMode(e)?{}:{minWidth:400}},mobileConversionConfig:{stretchHorizontally:!0}})},function(e,t,n){var r;e.exports={resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:500}}},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(3),i=n(2),a=n(46),s={defaultMobileProperties:{layout:"vertical"},layoutLimits:function(e,t){var n=o.getDataItem(e,t).options.length;return{minWidth:"vertical"===o.getPropertiesItem(e,t).layout?60:60*n}},resizableSides:[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]},r.merge(s,a))},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(3),i=n(2),a=n(46),s={defaultMobileProperties:{layout:"vertical"},layoutLimits:function(e,t){var n=o.getDataItem(e,t).options.length;return{minWidth:"vertical"===o.getPropertiesItem(e,t).layout?60:60*n}},resizableSides:[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]},r.assign(s,a))},function(e,t){e.exports={isRepeatable:!1,resizableSides:[],defaultMobileProperties:{size:"standard"}}},function(e,t,n){var r,o,i;e.exports=(r=n(8),o=n(2),i=n(338),{rotatable:!0,styleCanBeApplied:!0,resizableSides:function(e,t){var n=e.dal.get(t),i=e.pointers.components.getPageOfComponent(t);return r.isMaintainWPhotoAspectRatio(e,n,i.id)?[]:[o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.BOTTOM,o.RESIZE_SIDES.RIGHT]},layoutLimits:function(e,t){var n=e.dal.get(t),o=e.pointers.components.getPageOfComponent(t);return{aspectRatio:r.isMaintainWPhotoAspectRatio(e,n,o.id)?i.getStageAspectRatio(e,t):null}},mobileConversionConfig:{isSuitableForProportionGrouping:!0,category:"photo",preserveAspectRatio:function(e,t,n){return r.isMaintainWPhotoAspectRatio(e,t,n)}}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(2),i=n(12),{getImageAspectRatio:function(e,t){var n=e.dal.get(t),a=e.pointers.components.getPageOfComponent(t),s=e.pointers.data.getDataItem(i.stripHashIfExists(n.dataQuery),a.id),u=e.dal.get(s),c={};if(t.type===o.VIEW_MODES.MOBILE){var l=e.pointers.data.getPropertyItem(i.stripHashIfExists(n.propertyQuery),a.id);c=e.dal.get(l)}return function(e,t){var n=e.width/e.height;return!r.isEmpty(e.crop)&&r.isEmpty(t.overrideCrop)?n=e.crop.width/e.crop.height:r.isEmpty(r.get(t,"overrideCrop"))||(n=t.overrideCrop.width/t.overrideCrop.height),n}(u,c)},getStageAspectRatio:function(e,t){var n=e.dal.get(t).layout;return n.width/n.height}})},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[],mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(169);function o(e,t,n){var r=e.dataQuery.replace("#",""),o=t.pointers.data.getDataItem(r,n);return t.dal.get(o)}return{isRepeatable:!1,crossSiteDuplicatable:!1,mobileConversionConfig:{hideByDefault:function(t,n,i){var a=o(n,t,i),s=r.getWidgetData(t,a);return e.isEmpty(s.mobileUrl)},minHeight:function(t,n,i){var a=o(n,t,i),s=r.getWidgetData(t,a);return e.get(s,"componentFields.minHeightInMobile")},stretchHorizontally:function(t,n,i){var a=o(n,t,i),s=r.getWidgetData(t,a);return!0===e.get(s,"shouldBeStretchedByDefaultMobile")}},canBeStretched:function(n,o){var i=t.getDataItem(n,o),a=r.getWidgetData(n,i);return!0===e.get(a,"canBeStretched")},nickname:function(e,t){return r.nickname(e,t)}}}()},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(38),i=n(169),a=o.common.metaData.PERMITTED_GLUED_TPAS_IN_MOBILE,{isRepeatable:!1,resizableSides:[],moveDirections:[],containable:!1,fullWidth:!1,crossSiteDuplicatable:!1,mobileConversionConfig:{structuralItem:!0,convertFixedPositionToAbsolute:!0,nonLayoutComponent:!0,desktopOnly:function(e,t,n){var o=t.dataQuery,i=e.pointers.data.getDataItem(function(e){return r.isString(e)&&"#"===e[0]?e.slice(1):e}(o),n),s=e.dal.get(i);return!function(e,t){if(t){var n=e.pointers.general.getClientSpecMap(),o=e.dal.get(n)[t]||{};return r.includes(a,o.appDefinitionId)}return!1}(e,r.get(s,"applicationId"))},minHeight:function(e,t,n){var o=function(e,t,n){var r=e.dataQuery.replace("#",""),o=t.pointers.data.getDataItem(r,n);return t.dal.get(o)}(t,e,n),a=i.getWidgetData(e,o);return r.get(a,"componentFields.minHeightInMobile")}},nickname:function(e,t){return i.nickname(e,t)}})},function(e,t){e.exports={resizableSides:[],moveDirections:[],fullWidth:!0,containable:!1,duplicatable:!1,crossSiteDuplicatable:!1,removable:!1,mobileConversionConfig:{marginX:20}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(3),o=n(171),i=n(8),a=n(117),s=n(92),u=n(1).blogAppPartNames;function c(e,t){return e.pointers.components.isMasterPage(t)||e.pointers.components.isInMasterPage(t)}function l(t,n,i){var a=r.getDataItem(t,n),s=o.getPackageName(t,a.appInnerID);return"blog"===s&&e.includes(i,o.getAppPartRole(t,s,a.appPartName))}return{layoutLimits:function(e,n){return r.getDataItem(e,n).appPartName===u.HERO_IMAGE?{minHeight:t.HERO_IMAGE.MIN_HEIGHT}:{}},resizableSides:function(e,n){var i=[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT],s=r.getDataItem(e,n),u=o.getPackageName(e,s.appInnerID),c=o.getAppPartDefinition(e,u,s.appPartName);return a.descriptorUtils.doesAllowHeightResize(c,s.viewName)&&(i=i.concat([t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM])),i},containable:function(e,t,n){return n&&!(function(e,t,n){return c(e,t)!==c(e,n)}(e,t,n)&&function(e,t){return l(e,t,["BLOG_FEED","SINGLE_POST","RELATED_POSTS"])}(e,t))},containableByStructure:function(e,t,n){var r=!i.notContainableByPopup.apply(i,arguments),o=e.pointers.components.getPageOfComponent(n),a=s.isSinglePost(e,o.id);if("ea63bc0f-c09f-470c-ac9e-2a408b499f22"===t.data.appPartName){var c=t.data,l=c.type,p=c.appPartName;return a&&!e.pointers.data.getDataItemWithPredicate({type:l,appPartName:p},o.id)}var d=t.data.appPartName===u.RELATED_POSTS;return!(r||d&&!a)},canBeStretched:function(e,t){return l(e,t,["POST_GALLERY","BLOG_FEED","CUSTOM_FEED"].concat(["RELATED_POSTS"]))},mobileConversionConfig:{fixedSize:function(t,n,o){var i=r.getDataItemById(t,n.dataQuery.replace("#",""),o),a=e.get(i,"appPartName");return a===u.POSTS_GALLERY||a===u.RELATED_POSTS?{height:n.layout.height}:{}}}}}()},function(e,t,n){e.exports=function(){var e=n(2),t=n(3),r=n(172),o=n(15),i=n(8);function a(e,n){return!o.isMobileView(e)&&r.wasPartLoadedSuccessfully(e,function(e,n){var r=t.getDataItem(e,n);if(!r)throw new Error("Can't find data for component id ".concat(n.id));return r.appPartName}(e,n))}return{isRepeatable:!1,resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],removable:!0,duplicatable:a,crossSiteDuplicatable:a,containableByStructure:i.notContainableByPopup,usingLegacyAppPartSchema:!0}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(8),r=n(2),o=n(29),i=["mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage"];function a(n,r,a){if(a){var s=t.getComponentType(n,a),u=n.pointers.components.getPageOfComponent(a);return e.includes(i,s)&&!o.isPopup(n,u.id)}return!1}return{resizableSides:[],moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],containable:a,containableByStructure:a,fullWidth:!0,fullWidthByStructure:!0,collapsible:!1,mobileConversionConfig:{isInvisible:!0}}}()},function(e,t,n){var r;e.exports={isRepeatable:!1,canBeStretched:!0,defaultMobileProperties:function(e,t,n){return{numCols:2,margin:n.margin<=3?n.margin:15,textMode:{titleAndDescription:"titleOnly",descriptionOnly:"noText"}[n.textMode]||n.textMode}},resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]}},function(e,t,n){var r,o;e.exports=(r=n(3),o=n(2),{isRepeatable:!1,resizableSides:function(e,t){var n=r.getPropertiesItem(e,t),i=[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT];return"horizontal"===n.orientation?i.concat([o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM]):i}})},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(8),{mobileConversionConfig:{isScreenWidth:!0},moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:o.containableByFullWidthPopup})},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(8),{isRepeatable:!1,mobileConversionConfig:{isScreenWidth:!0},moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:o.containableByFullWidthPopup})},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(3),o=n(12);function i(e,t){return!!r.getPropertiesItem(e,t).fitToScreenWidth}return{isRepeatable:!1,mobileConversionConfig:{isScreenWidth:function(t,n,r){var i=t.dal.get(t.pointers.data.getPropertyItem(o.stripHashIfExists(n.propertyQuery),r));return e.get(i,"fitToScreenWidth",!1)}},moveDirections:function(e,n){return r=i(e,n),o=[t.MOVE_DIRECTIONS.VERTICAL],r||o.push(t.MOVE_DIRECTIONS.HORIZONTAL),o;var r,o},resizableSides:function(e,n){return i(e,n)?[]:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT]},fullWidth:i,fullWidthByStructure:function(e,t){return!!t.props.fitToScreenWidth}}}()},function(e,t,n){var r;e.exports={isRepeatable:!1,resizableSides:[(r=n(2)).RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]}},function(e,t,n){var r,o;e.exports=(r=n(3),o={DEFAULT:{minWidth:10,minHeight:10},VIMEO:{minWidth:100,minHeight:100},YOUTUBE:{minWidth:200,minHeight:200},DAILYMOTION:{minWidth:100,minHeight:100},FACEBOOK:{minWidth:100,minHeight:100}},{isRepeatable:!1,styleCanBeApplied:!0,layoutLimits:function(e,t){var n=r.getDataItem(e,t);return o[n.videoType]||o.DEFAULT},defaultMobileProperties:{autoplay:!1}})},function(e,t){e.exports={canBeStretched:!0,styleCanBeApplied:!0,layoutLimits:{minWidth:45,minHeight:70},defaultMobileProperties:function(e,t,n){return{margin:Math.min(20,n.margin),numCols:n.numCols>=2?2:1}},mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t,n){var r,o;e.exports=(r=n(1),o=n(0),{rotatable:!0,layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap();return{minWidth:o.get(n,["minWidth",t.id],r.siteConstants.COMP_SIZE.MIN_WIDTH)}}})},function(e,t){e.exports={isRepeatable:!1,resizableSides:[]}},function(e,t){e.exports={isRepeatable:!1,layoutLimits:{minWidth:250,minHeight:50}}},function(e,t,n){var r;e.exports=(r=n(2),{layoutLimits:{minWidth:10},rotatable:!0,isProportionallyResizable:!0,resizableSides:function(e,t){return function(e,t){var n=e.pointers.getInnerPointer(t,"layout");return!!e.dal.get(n).rotationInDegrees}(e,t)?[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]:[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT,r.RESIZE_SIDES.BOTTOM]},defaultMobileProperties:{packed:!1,minHeight:null},mobileConversionConfig:{isSuitableForProportionGrouping:!0,category:"text",preserveAspectRatio:!1,shouldEnlargeToFitWidth:!0},heightAuto:!0})},function(e,t,n){var r;e.exports=(r=n(0),{isRepeatable:!1,styleCanBeApplied:!0,mobileConversionConfig:{isScreenWidth:!0,desktopOnly:function(e,t,n){var o=t.dataQuery,i=e.pointers.data.getDataItem(function(e){return r.isString(e)&&"#"===e[0]?e.slice(1):e}(o),n);return"#CUSTOM_MAIN_MENU"===(e.dal.get(i)||{menuRef:"#CUSTOM_MAIN_MENU"}).menuRef},fixedSize:{height:48}}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(3),{isRepeatable:!1,layoutLimits:function(e,t){return{minHeight:25*function(e,t){var n=o.getDataItem(e,t),i=r.isString(n.menuRef)?n.menuRef.replace("#",""):n.menuRef.id,a=o.getDataItemById(e,i).items;return r.filter(a,"isVisible").length}(e,t),minWidth:100}}})},function(e,t){e.exports={isRepeatable:!1,canBeStretched:!0,styleCanBeApplied:!0,mobileConversionConfig:{desktopOnly:!0}}},function(e,t){e.exports={canBeStretched:!0,styleCanBeApplied:!0,mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t){e.exports={canBeStretched:!0,styleCanBeApplied:!0,defaultMobileProperties:function(e,t,n){return{margin:Math.min(20,n.margin),numCols:Math.min(2,n.numCols)}},mobileConversionConfig:{preserveAspectRatio:!1}}},function(e,t){e.exports={styleCanBeApplied:!0,mobileConversionConfig:{category:"boxContainer",minHeight:50,isSuitableForProportionGrouping:!0,filterChildrenWhenHidden:!0},heightAuto:!0}},function(e,t,n){var r,o,i;e.exports=(r=n(2),o=n(12),i={mobileConversionConfig:{createMobilePresets:!1},hiddenable:!1,styleCanBeApplied:!1,moveDirections:[],canBeFixedPosition:!1,duplicatable:!1,groupable:!1,removable:!0,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,layoutLimits:{minWidth:50,minHeight:50},resizableSides:function(e,t){var n=r.RESIZE_SIDES,i=n.LEFT,a=n.RIGHT,s=n.BOTTOM,u=n.TOP,c=e.dal.get(t),l=e.pointers.components.getPageOfComponent(t),p=l&&l.id,d=e.pointers.data.getPropertyItem(o.stripHashIfExists(c.propertyQuery),p),g=e.dal.get(d),f={left:{top:[s,a],center:[s,a],bottom:[u,a]},center:{top:[s,a,i],center:[u,s,a,i],bottom:[u,a,i]},right:{top:[s,i],center:[s,i],bottom:[u,i]}},m={left:[a],center:[a,i],right:[i]},v={top:[s],center:[u,s],bottom:[u]};return{nineGrid:function(){return f[g.horizontalAlignment][g.verticalAlignment]},fullHeight:function(){return m[g.horizontalAlignment]},fullWidth:function(){return v[g.verticalAlignment]}}[g.alignmentType]()},defaultMobileProperties:function(e,t,n){return{horizontalAlignment:"nineGrid"===n.alignmentType?"center":n.horizontalAlignment,horizontalOffset:0,verticalOffset:0}}},n(5).isOpen("sv_movePopup")&&delete i.moveDirections,i)},function(e,t){e.exports={styleCanBeApplied:!0}},function(e,t){e.exports={mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0}},function(e,t,n){e.exports=function(){var e=n(8),t="wysiwyg.viewer.components.BoxSlideShow";function r(t,n,r,o){if(o){var i=t?o.componentType:e.getComponentType(n,o);return e.isComponentSuitableForNonRenderingState(i)}return!1}return{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,containable:function(n,r,o){return e.getComponentType(n,o)===t},canContain:r.bind(null,!1),canContainByStructure:r.bind(null,!0)}}()},function(e,t){e.exports={isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,defaultMobileProperties:{flexibleBoxHeight:!1,shouldHideOverflowContent:!0,navigationButtonMargin:22,navigationButtonSize:15,navigationDotsGap:15,navigationDotsMargin:24,navigationDotsSize:6},mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,filterChildrenWhenHidden:!0,marginX:0}}},function(e,t,n){var r,o;e.exports=(r=n(8),o="wysiwyg.viewer.components.StateBox",{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!0,enforceContainerChildLimitsByHeight:!0,containable:function(e,t,n){return r.getComponentType(e,n)===o}})},function(e,t,n){var r,o;e.exports=(r=n(8),o="wysiwyg.viewer.components.StateBox",{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!0,enforceContainerChildLimitsByHeight:!0,containable:function(e,t,n){return r.getComponentType(e,n)===o}})},function(e,t){e.exports={minimalChildrenNumber:1,isRepeatable:!1,enforceContainerChildLimitsByWidth:!0,enforceContainerChildLimitsByHeight:!1,mobileConversionConfig:{structuralContainer:!0,isTightContainer:!0,nestOverlayingSiblings:!1,filterChildrenWhenHidden:!0,marginX:0}}},function(e,t,n){e.exports=function(){var e=n(2),t=n(8),r="wysiwyg.viewer.components.StateStrip";function o(e,n,r,o){if(o){var i=e?o.componentType:t.getComponentType(n,o);return t.isComponentSuitableForNonRenderingState(i)}return!1}return{enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canContain:o.bind(null,!1),canContainByStructure:o.bind(null,!0),containable:function(e,n,o){return t.getComponentType(e,o)===r},mobileConversionConfig:{nestOverlayingSiblings:!1,structuralItem:!0,stackLayout:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}()},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(8),{isRepeatable:!1,isTightContainer:!0,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,containableByStructure:o.containableByFullWidthPopup,mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,isScreenWidth:!0,filterChildrenWhenHidden:!0,marginX:0,preserveAspectRatio:!1}})},function(e,t,n){e.exports=function(){var e=n(2),t=n(8),r="wysiwyg.viewer.components.StripContainerSlideShow";function o(e,n,r,o){if(o){var i=e?o.componentType:t.getComponentType(n,o);return t.isComponentSuitableForNonRenderingState(i)}return!1}return{enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canContain:o.bind(null,!1),canContainByStructure:o.bind(null,!0),containable:function(e,n,o){return t.getComponentType(e,o)===r},mobileConversionConfig:{nestOverlayingSiblings:!1,structuralItem:!0,stackLayout:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}()},function(e,t){e.exports={mobileOnly:!0,anchors:{to:!1,from:!1},moveDirections:[],resizableSides:[],dockable:!1,alignable:!1,groupable:!1,canContainByStructure:!0,hiddenable:!1}},function(e,t){e.exports={mobileOnly:!0,anchors:{to:!1,from:!1},moveDirections:[],resizableSides:[],dockable:!1,alignable:!1,groupable:!1,containableByStructure:!0,hiddenable:!1}},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(8),{isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,containableByStructure:o.containableByFullWidthPopup,defaultMobileProperties:{flexibleBoxHeight:!1,shouldHideOverflowContent:!0,navigationButtonMargin:22,navigationButtonSize:15,navigationDotsGap:15,navigationDotsMargin:24,navigationDotsSize:6},mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,isScreenWidth:!0,filterChildrenWhenHidden:!0,marginX:0,preserveAspectRatio:!1}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(2),o=n(8),i=n(29),a=n(3),s=["wysiwyg.viewer.components.PopupContainer"],{minimalChildrenNumber:1,canContain:function(e,t,n){return"wysiwyg.viewer.components.Column"===o.getComponentType(e,n)},canContainByStructure:function(e,t,n){return"wysiwyg.viewer.components.Column"===n.componentType},containable:function(e,t,n){if(!n)return!1;var r=o.getComponentType(e,n),a=e.siteAPI.getFocusedRootId(),u=i.isPopup(e,a),c=s.includes(r);return u?c:o.isHeaderOrFooterOrPageOrMasterPage(r)},containableByStructure:o.containableByFullWidthPopup,moveDirections:[r.MOVE_DIRECTIONS.VERTICAL],resizableSides:function(e,t){var n=1===e.pointers.components.getChildren(t).length;return e.pointers.components.isMobile(t)&&!n?[]:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM]},fullWidth:function(e,t){return a.getPropertiesItem(e,t).fullWidth},fullWidthByStructure:function(e,t){return t.props.fullWidth},canBeFixedPosition:!1,mobileConversionConfig:{nestOverlayingSiblings:!1,hideWhenEmptyBackgroundContainer:!0,filterChildrenWhenHidden:!0,isScreenWidth:!0,marginX:0,category:"columns"}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(46),r.assign({heightAuto:!0},o))},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(46),r.assign({},o))},function(e,t,n){e.exports=n(46)},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(3),i=n(2),a=n(46),s=function(e,t){return!!o.getDataItem(e,t).label},u={mobileConversionConfig:{category:"graphic",inlineWhenGrouped:!0},resizableSides:function(e,t){return s(e,t)?[i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.RIGHT]:[]},layoutLimits:function(e,t){var n={minWidth:60};return s(e,t)||r.assign(n,{minWidth:12,minHeight:12,aspectRatio:1}),n}},r.assign({},a,u))},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(1),i=n(46),a={layoutLimits:function(e,t){var n=e.siteAPI.getSiteMeasureMap()||{},i=t.id;return{minWidth:r.get(n,["minWidth",i],o.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:r.get(n,["minHeight",i],o.siteConstants.COMP_SIZE.MIN_HEIGHT)}}},r.merge(a,i))},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(2),i=n(3),{duplicatable:function(e,t,n){if(e.siteAPI.isMobileView())return!1;var r=e.pointers.isSamePointer(e.pointers.components.getParent(t),n),o=n&&e.pointers.components.getChildren(n).length;return r&&o<5},groupable:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!0,anchors:{to:{allow:!0,lock:o.ANCHORS.LOCK_CONDITION.NEVER},from:{allow:!1,lock:o.ANCHORS.LOCK_CONDITION.ALWAYS}},isContainCheckRecursive:!1,mobileConversionConfig:{structuralItem:!0,filterChildrenWhenHidden:!0,stretchHorizontally:!0,minHeight:200,category:"column",preserveAspectRatio:!1,hideWhenEmptyBackgroundContainer:!0,fixedSize:function(e,t,n){var o=t.designQuery&&i.getDesignItemById(e,t.designQuery.replace("#",""),n),a=r.get(o,["background","mediaRef"]);return(a=a&&(a.posterImageRef||a)||{}).height&&a.width?{width:320,height:320*a.height/a.width}:null}}})},function(e,t,n){var r,o,i,a,s,u,c,l;e.exports=(r=n(0),o=n(8),i=n(2),a=n(3),s=["wysiwyg.viewer.components.MediaControls","wysiwyg.viewer.components.MediaOverlayControls"],u=i.MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS.minHeight,c=i.MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS.maxWidth-40,l=function(e){return Math.round(Math.min(u,c/e))},{isRepeatable:!1,rotatable:function(e){return e.siteAPI.isExperimentOpen("se_videobox_rotate")},flippable:function(e){return e.siteAPI.isExperimentOpen("se_videobox_flip")},canContain:function(e,t,n){var i=o.getComponentType(e,n);return r.includes(s,i)},canContainByStructure:function(e,t,n){var o=n.componentType;return r.includes(s,o)},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,enforceMaxDimensionsOnProportionalResize:!0,preserveAspectRatio:!0,ignoreChildrenOnProportionalResize:["wysiwyg.viewer.components.MediaControls"],resizableSides:function(e,t){var n=a.getDesignItem(e,t);return o.isMaintainVideoBoxAspectRatio(n)?[]:[i.RESIZE_SIDES.TOP,i.RESIZE_SIDES.LEFT,i.RESIZE_SIDES.BOTTOM,i.RESIZE_SIDES.RIGHT]},layoutLimits:function(e,t){var n=a.getDesignItem(e,t),s=o.getVideoBoxAspectRatio(n),u=o.isMaintainVideoBoxAspectRatio(n)?{aspectRatio:s}:{};return e.pointers.components.isMobile(t)?r.assign(u,i.MEDIA_PLAYER_MOBILE_LAYOUT_LIMITS,{minHeight:l(s)}):r.assign(u,i.MEDIA_PLAYER_LAYOUT_LIMITS)},mobileConversionConfig:{filterChildrenWhenHidden:!0,nestOverlayingSiblings:!1,fixedSize:function(e,t,n){var r=a.getDesignItemById(e,t.designQuery.replace("#",""),n),i=o.getVideoBoxAspectRatio(r),s=o.isMaintainVideoBoxAspectRatio(r),u=c;return{width:u,height:s?Math.round(u/i):Math.max(t.layout.height*(u/t.layout.width),l(i))}}}})},function(e,t){e.exports={anchors:{to:!1,from:!1},dockable:!1,alignable:!1,removable:!1,groupable:!1,rotatable:function(e){return e.siteAPI.isExperimentOpen("se_videobox_rotate")},duplicatable:!1,canBeFixedPosition:!1,mobileConversionConfig:{minHeight:44}}},function(e,t){e.exports={anchors:{to:!1,from:!1},resizableSides:[],dockable:!1,alignable:!1,removable:!1,groupable:!1,rotatable:function(e){return e.siteAPI.isExperimentOpen("se_videobox_rotate")},duplicatable:!1,canBeFixedPosition:!1,enforceMaxDimensionsOnProportionalResize:!0,layoutLimits:function(){return{minWidth:50,minHeight:50,aspectRatio:1}},mobileConversionConfig:{preserveAspectRatio:!0,fixedSize:function(e,t){var n=e.pointers.components.getParent({id:t.id,type:"DESKTOP"}),r=e.dal.get(e.pointers.getInnerPointer(n,"layout")),o=t.layout.width*t.layout.height/(r.width*r.height),i=Math.max(r.height*(280/r.width),120),a=Math.max(Math.sqrt(280*o*i),50);return{width:a,height:a}}}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(8),o=n(53),i=n(3),a=["core.components.Page","mobile.core.components.Page","wixapps.integration.components.AppPage","responsive.components.Section","responsive.components.HeaderSection","responsive.components.FooterSection","responsive.components.MembersAreaSection"];function s(t,n,o){var i=r.getComponentType(t,n);return o&&r.isHeaderOrFooterOrPageOrMasterPage(i)||e.includes(a,i)||r.isPopupPageOrPopupContainer(t,n)}function u(t,n,r,i){var a=o.getControllerStageData(t,n,r.controllerType,r.applicationId);return e.get(a,i)}return{containable:function(e,t,n){var r=i.getDataItem(e,t);return s(e,n,!1!==u(e,t.id,r,"enableShowOnAllPages")&&!1!==u(e,t.id,r,"toggleShowOnAllPagesEnabled"))},containableByStructure:function(e,t,n){return s(e,n,!0)},container:!1,canContain:!1,canContainByStructure:!1,resizableSides:[],alignable:!1,hiddenable:!1,collapsible:!1,fullWidth:!1,fullWidthByStructure:!1,canBeFixedPosition:!1,groupable:!1,mobileConversionConfig:{nonLayoutComponent:!0},removable:function(e,t){var n=i.getDataItem(e,t);return!1!==u(e,t.id,n,"removable")},duplicatable:function(e,t){var n=i.getDataItem(e,t);return!1!==u(e,t.id,n,"duplicatable")},crossSiteDuplicatable:!1,nickname:r.getControllerNickname,isVisible:function(e,n){var r=i.getDataItem(e,n),a=r.applicationId,s=r.controllerType,u=e.pointers.platform.getAppManifestPointer(r.applicationId),c=e.dal.isExist(u),l=o.getControllerStageData(e,n.id,s,a),p=e.pointers.general.getRenderFlag("showControllers"),d=e.dal.get(p);return t.appManifest.controllerStageData.isControllerVisible(l,c,d)}}}()},function(e,t){e.exports={containableByStructure:!1}},function(e,t,n){e.exports=function(){var e=n(0),t=(n(2),n(8));function r(e){return!t.isContainer(e)&&t.isComponentSuitableForNonRenderingState(e)}return{isRepeatable:!1,canContainByStructure:function(n,o,i){return function(n){if(!n.components)return r(n.componentType);var o=t.getChildrenTypesDeep([n]);return e.every(o,r)}(i)},canContain:function(n,o,i){return function(n,o){var i=n.pointers.components.getChildrenRecursively(o);return e.every(i.concat(o),function(e){return r(t.getComponentType(n,e))})}(n,i)},mobileConversionConfig:{nestOverlayingSiblings:!1,createMobilePresets:!1,filterChildrenWhenHidden:!0}}}()},function(e,t,n){e.exports=function(){var e=n(0);function t(t,n,r,o){return!(o.id===n.id&&function(t,n){var r=t.pointers.full.components.getChildren(n);return e.size(r)>0}(t,n))}return{isRepeatable:!1,defaultMobileProperties:{closeMethod:"outerClick"},canContain:t,canContainByStructure:t}}()},function(e,t,n){var r,o;e.exports=(r=n(0),{enforceContainerChildLimitsByWidth:!1,layoutLimits:function(e,t){var n=r.head(e.pointers.full.components.getChildren(t)),o=n&&e.dal.full.get(e.pointers.getInnerPointer(n,["layout"]));return{minWidth:r.get(o,"width")}},canBeStretched:!0,isRepeater:!0,isRepeatable:!1,resizableSides:[(o=n(2)).RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT],mobileConversionConfig:{filterChildrenWhenHidden:!0,stretchHorizontally:!0}})},function(e,t,n){var r,o;e.exports=(r=n(2),o=n(8),{mobileConversionConfig:{stretchHorizontally:function(e,t,n){var i=e.pointers.components.getPage(n,r.VIEW_MODES.DESKTOP),a=e.pointers.full.components.getComponent(t.id,i),s=e.pointers.full.components.getParent(a);return"wysiwyg.viewer.components.Repeater"===(s?o.getComponentType(e,s):null)}}})},function(e,t,n){var r,o,i;e.exports=(r=n(2),o=n(12),i=Object.freeze({MANUAL:"manual",AUTO:"auto"}),{defaultMobileProperties:{columnLayout:"manual"},mobileConversionConfig:{fixedSize:function(e,t){return{height:t.layout.height}}},resizableSides:function(e,t){var n=[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT],a=e.dal.get(t),s=e.pointers.components.getPageOfComponent(t),u=s&&s.id,c=e.pointers.data.getPropertyItem(o.stripHashIfExists(a.propertyQuery),u);return e.dal.get(c).heightLayout!==i.AUTO&&n.push(r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM),n}})},function(e,t,n){var r;e.exports=(r=n(2),{mobileConversionConfig:{hideByDefault:function(e){var t=e.pointers.components.getMasterPage(r.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(r.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t);return!e.dal.isExist(n)},fixedSize:{width:40,height:26}},defaultMobileProperties:function(e,t,n){return n}})},function(e,t){e.exports={mobileConversionConfig:{category:"boxContainer",minHeight:50,isSuitableForProportionGrouping:!0,filterChildrenWhenHidden:!0}}},function(e,t,n){e.exports=function(){var e=n(0),t=n(53),r=n(8),o=n(15),i=["wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripColumnsContainer"];function a(n,r,o){return e.get(t.getControllerStageDataByControllerRef(n,o),["behavior",r])}return{groupable:!1,minimalChildrenNumber:1,maximumChildrenNumber:1,forceMaintainIDsOnSerialize:!0,container:!0,isRepeatable:!1,canContainByStructure:function(t,n,o,a){return!t.pointers.isSamePointer(n,a)||!e.includes(i,o.componentType)||!function(t){if(!t.components)return r.isComponentSuitableForNonRenderingState(t.componentType);var n=r.getChildrenTypesDeep([t]);return e.every(n,r.isComponentSuitableForNonRenderingState)}(t)},canContain:function(t,n,o){return function(t,n){var o=t.pointers.components.getChildrenRecursively(n);return e.every(o.concat(n),function(e){var n=r.getComponentType(t,e);return r.isComponentSuitableForNonRenderingState(n)})}(t,o)},canBeFixedPosition:function(e,t){return!1!==a(e,"pinnable",t)},containable:function(e,t,n){return!function(e,t,n){return e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n)||!e.pointers.components.isInMasterPage(t)&&e.pointers.components.isInMasterPage(n)}(e,t,n)||!o.isMobileView(e)&&!1!==a(e,"toggleShowOnAllPagesEnabled",t)},duplicatable:function(e,t){return!1!==a(e,"duplicatable",t)},crossSiteDuplicatable:!1,nickname:r.getControllerNickname,mobileConversionConfig:{category:"appWidget",isTightContainer:!0,marginX:0,filterChildrenWhenHidden:!0}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(2),i=n(173),r.defaultsDeep({containable:function(e,t,n){var r=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE),i=e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,r);return n&&!e.pointers.isSamePointer(n,i)},styleCanBeApplied:!0},i))},function(e,t){e.exports={removable:!1,hiddenable:!1,mobileConversionConfig:{isDockingAllowed:!0,isFixedPositionAllowed:!0,isAllowedToBeChildOfMasterPage:!0,isNonContainableFullWidth:!0}}},function(e,t){e.exports={styleCanBeApplied:!0,heightAuto:!0}},function(e,t){e.exports={isRepeatable:!1,resizableSides:[],shouldAutoSetNickname:!1,mobileConversionConfig:{stretchHorizontally:!0}}},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(46),i={mobileConversionConfig:{fixedSize:function(e,t){var n=t.layout,r=n.width,o=n.height,i=r,a=o;return r>280?i=280:r<24&&(i=24),o<24&&(a=24),{width:i,height:a}}},rotatable:!0,a11yConfigurable:!0},r.assign({},o,i))},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(406),i=["disableable","rotatable","moveDirections","resizableSides","canBeFixedPosition","layoutLimits","mobileConversionConfig","defaultMobileProperties","isRepeatable","styleCanBeApplied","canBeStretched"],a={isExternal:!0},s={isRepeatable:!1},r.mapValues(o.default,function(e){return r(e).pick(i).defaults(s).assign(a).value()}))},function(e,t){e.exports=_},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(408),i=n(409),r.merge(o,i))},function(e,t){e.exports=D},function(e,t){e.exports=w},function(e){e.exports=JSON.parse('[{"paletteName":"Lets Hear It For The Boys","paletteTags":["Super Load Movers"],"color_1":"#000000","color_2":"#FFFFFF","color_11":"#F0F0F0","color_12":"#C0C0C0","color_13":"#909090","color_14":"#606060","color_15":"#303030","color_16":"#B2BDE6","color_17":"#8896CD","color_18":"#3A54B4","color_19":"#273878","color_20":"#131C3C","color_21":"#FFF2D4","color_22":"#FEE6AA","color_23":"#BFAD7F","color_24":"#7F7355","color_25":"#40392A","color_26":"#FFC5BD","color_27":"#FF8B7B","color_28":"#BF685C","color_29":"#80463E","color_30":"#40231F","color_31":"#A8D5DE","color_32":"#78B2BE","color_33":"#2A8A9D","color_34":"#1C5C69","color_35":"#0E2E34"},{"paletteName":"I See Red","paletteTags":["Electronic Shop"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#D4D4D4","color_13":"#909090","color_14":"#606060","color_15":"#303030","color_16":"#D0DACC","color_17":"#A9B6A4","color_18":"#7D9174","color_19":"#53614D","color_20":"#2A3027","color_21":"#DCD4C8","color_22":"#B9AB98","color_23":"#8B8072","color_24":"#5D564C","color_25":"#2E2B26","color_26":"#DBCECF","color_27":"#B7A7A7","color_28":"#93797A","color_29":"#625151","color_30":"#312829","color_31":"#C4D0D5","color_32":"#99A6AB","color_33":"#6D7B81","color_34":"#3C4F57","color_35":"#1E282C"},{"paletteName":"Im a Bumble Bee","paletteTags":["the bakery"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#D4D4D4","color_13":"#909090","color_14":"#606060","color_15":"#000000","color_16":"#A0C2E8","color_17":"#709DD1","color_18":"#0D5EBA","color_19":"#093F7C","color_20":"#041F3E","color_21":"#F6CCB0","color_22":"#EEB188","color_23":"#E57022","color_24":"#994B17","color_25":"#4C250B","color_26":"#F1EEA7","color_27":"#E4DE7B","color_28":"#D6CC11","color_29":"#8F880B","color_30":"#474406","color_31":"#B2E0BB","color_32":"#86C091","color_33":"#3FA152","color_34":"#2A6B37","color_35":"#15361B"},{"paletteName":"Licorice Allsorts In Blue","paletteTags":["Real Estate"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#231111","color_12":"#452222","color_13":"#745656","color_14":"#B89C9C","color_15":"#E8DFDF","color_16":"#321F1F","color_17":"#653F3F","color_18":"#C97D7D","color_19":"#E0A2A2","color_20":"#E4B9B9","color_21":"#081F4E","color_22":"#0F3E9B","color_23":"#637EB4","color_24":"#8FA4CD","color_25":"#B2C3E6","color_26":"#1F373B","color_27":"#3F6F75","color_28":"#5EA6B0","color_29":"#9BC5CA","color_30":"#C1E0E5","color_31":"#353223","color_32":"#6A6447","color_33":"#9E966A","color_34":"#D3C88D","color_35":"#E9E3C2"},{"paletteName":"Pretty in Pink","paletteTags":["wedding 01"],"color_1":"#000000","color_2":"#FEFDFD","color_11":"#F0FAFF","color_12":"#CADDE6","color_13":"#9AAEB8","color_14":"#515E65","color_15":"#292F33","color_16":"#A4F7D5","color_17":"#77EEBE","color_18":"#00E689","color_19":"#00995B","color_20":"#004D2E","color_21":"#C7FCF2","color_22":"#91F9E6","color_23":"#6DBBAD","color_24":"#497D73","color_25":"#243E3A","color_26":"#C2E3D8","color_27":"#9CC6B9","color_28":"#61AA93","color_29":"#417162","color_30":"#203931","color_31":"#B6CDE1","color_32":"#91ABC2","color_33":"#6587A4","color_34":"#205685","color_35":"#102B43"},{"paletteName":"Tranquil Sea","paletteTags":["spa reesort"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#F3F2DC","color_12":"#C2C2B0","color_13":"#929184","color_14":"#616158","color_15":"#31302C","color_16":"#C0CBDE","color_17":"#96A4BE","color_18":"#5C739D","color_19":"#3D4D69","color_20":"#1F2634","color_21":"#F0E7CB","color_22":"#E0D19C","color_23":"#A89D75","color_24":"#70694E","color_25":"#383427","color_26":"#FCDDB5","color_27":"#F8CA90","color_28":"#F59A28","color_29":"#A3671B","color_30":"#52330D","color_31":"#BAD4D4","color_32":"#8EA9AA","color_33":"#607F80","color_34":"#2B5455","color_35":"#162A2A"},{"paletteName":"My Blue Sneakers","paletteTags":["amazing smile"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#0E1821","color_12":"#1C3142","color_13":"#516371","color_14":"#8293A1","color_15":"#C5D0D9","color_16":"#1E2A4B","color_17":"#3D5495","color_18":"#5B7EE0","color_19":"#A5B7EA","color_20":"#C4D1F5","color_21":"#053342","color_22":"#2B8FB3","color_23":"#50C4ED","color_24":"#86D2ED","color_25":"#ABE0F2","color_26":"#1D2932","color_27":"#395264","color_28":"#567B96","color_29":"#92A8B9","color_30":"#BDCFDC","color_31":"#3F3C1F","color_32":"#7D793E","color_33":"#BCB55D","color_34":"#FAF17C","color_35":"#FCF8BD"},{"paletteName":"Chefs Like Orange","paletteTags":["Papas"],"color_1":"#FDFDFE","color_2":"#000000","color_11":"#F2F2F2","color_12":"#B6B6B6","color_13":"#898989","color_14":"#5B5B5B","color_15":"#2E2E2E","color_16":"#FFE5D9","color_17":"#FFC1A3","color_18":"#FFAA81","color_19":"#7E5541","color_20":"#3F2B21","color_21":"#FFEFE8","color_22":"#F9DED3","color_23":"#DEC3B8","color_24":"#645954","color_25":"#322C2A","color_26":"#CCDBD9","color_27":"#A4B6B4","color_28":"#75928E","color_29":"#4E615F","color_30":"#27312F","color_31":"#BFC8D7","color_32":"#959EAE","color_33":"#697386","color_34":"#35435D","color_35":"#1B222F"},{"paletteName":"Corporate Blues","paletteTags":["James Consulting"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#222120","color_12":"#43423F","color_13":"#72716F","color_14":"#A1A09E","color_15":"#D0CFCD","color_16":"#2F261E","color_17":"#5E4D3D","color_18":"#BC9979","color_19":"#D4B9A1","color_20":"#E3D5C8","color_21":"#252D28","color_22":"#4B5A51","color_23":"#708779","color_24":"#A0AFA6","color_25":"#CBD7D0","color_26":"#4F3316","color_27":"#9E662C","color_28":"#ED9942","color_29":"#F3C89B","color_30":"#F9DCBD","color_31":"#282829","color_32":"#505052","color_33":"#78797C","color_34":"#A0A1A5","color_35":"#CFCFD2"},{"paletteName":"At The Car Wash Yeah","paletteTags":["moving company"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#CCCCCC","color_13":"#808080","color_14":"#555555","color_15":"#2A2A2A","color_16":"#FFEEBC","color_17":"#FFDE7A","color_18":"#FFC824","color_19":"#AA8924","color_20":"#554412","color_21":"#FFE0E3","color_22":"#FFC5C9","color_23":"#E68E94","color_24":"#A85258","color_25":"#6B1E23","color_26":"#FED1BF","color_27":"#FEBA9E","color_28":"#FD763F","color_29":"#A94F2A","color_30":"#542715","color_31":"#DFA3A6","color_32":"#C07275","color_33":"#A01F24","color_34":"#6B1518","color_35":"#350A0C"},{"paletteName":"Sleeping Beauty Wakes","paletteTags":["interiors and co"],"color_1":"#000000","color_2":"#FFFFFF","color_11":"#1C191C","color_12":"#494549","color_13":"#777377","color_14":"#A4A0A4","color_15":"#D2CDD2","color_16":"#552018","color_17":"#A94130","color_18":"#FE6148","color_19":"#FEB0A3","color_20":"#FFCAC2","color_21":"#141E3F","color_22":"#273C7D","color_23":"#67759E","color_24":"#929DBE","color_25":"#B8C2DF","color_26":"#1F3624","color_27":"#3D6C47","color_28":"#5CA26B","color_29":"#97C1A0","color_30":"#C0E0C7","color_31":"#243236","color_32":"#48656D","color_33":"#6B97A3","color_34":"#8FC9D9","color_35":"#C4E3EC"},{"paletteName":"Elephant Walks","paletteTags":["Coach"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#DBDBDB","color_13":"#B3B3B3","color_14":"#7A7A7A","color_15":"#333333","color_16":"#EDBFAF","color_17":"#EB9C81","color_18":"#E3815F","color_19":"#755144","color_20":"#332926","color_21":"#C5F0E7","color_22":"#96DBCD","color_23":"#71D4C0","color_24":"#52706A","color_25":"#293835","color_26":"#DEE8B7","color_27":"#D0E094","color_28":"#BBD16D","color_29":"#707857","color_30":"#2F312B","color_31":"#D5D9ED","color_32":"#AFB6E0","color_33":"#919AC7","color_34":"#6E77A8","color_35":"#252838"},{"paletteName":"Skin Tone Portrait","paletteTags":["interior design"],"color_1":"#000000","color_2":"#FFFFFF","color_11":"#323232","color_12":"#5B5B5B","color_13":"#848484","color_14":"#ADADAD","color_15":"#FFFFFF","color_16":"#3A3321","color_17":"#746743","color_18":"#AE9A64","color_19":"#C9BD9E","color_20":"#E4DBC4","color_21":"#282634","color_22":"#504B67","color_23":"#7D7A8D","color_24":"#A6A3B3","color_25":"#CDCAD9","color_26":"#36241C","color_27":"#6D4737","color_28":"#A36B53","color_29":"#C2A092","color_30":"#E0C7BC","color_31":"#282828","color_32":"#515151","color_33":"#797979","color_34":"#A1A1A1","color_35":"#D0D0D0"},{"paletteName":"Feelings Are Overrated","paletteTags":["The Soccer club"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#EFEFEF","color_12":"#BFBFBF","color_13":"#8F8F8F","color_14":"#606060","color_15":"#303030","color_16":"#ADC5D8","color_17":"#839CB1","color_18":"#54728A","color_19":"#154063","color_20":"#0A2032","color_21":"#FCDACB","color_22":"#FAB598","color_23":"#BC8872","color_24":"#7D5B4C","color_25":"#3F2D26","color_26":"#C1E5C5","color_27":"#9BCCA1","color_28":"#5DB267","color_29":"#3E7745","color_30":"#1F3B22","color_31":"#C3CBDA","color_32":"#9CA5B5","color_33":"#727C90","color_34":"#3E4E6B","color_35":"#1F2736"},{"paletteName":"Lolas Nature Trip","paletteTags":["Lifestyle Mentor"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#DBDBDB","color_13":"#8F8F8F","color_14":"#606060","color_15":"#303030","color_16":"#CCD2DB","color_17":"#A4ABB6","color_18":"#748092","color_19":"#4D5561","color_20":"#272B31","color_21":"#F1FFEB","color_22":"#DAF9CC","color_23":"#A3B59A","color_24":"#576452","color_25":"#2C3229","color_26":"#F2F2D0","color_27":"#E3E3A6","color_28":"#CFCF84","color_29":"#686842","color_30":"#343421","color_31":"#CED6D5","color_32":"#A3ACAB","color_33":"#758381","color_34":"#4E5756","color_35":"#272C2B"},{"paletteName":"Black & White","paletteTags":["Photography Studio"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#DBDBDB","color_13":"#8F8F8F","color_14":"#606060","color_15":"#303030","color_16":"#F5B8BC","color_17":"#EB9499","color_18":"#E13A44","color_19":"#96272D","color_20":"#4B1317","color_21":"#C1F3ED","color_22":"#88E6DC","color_23":"#28D9C7","color_24":"#44736E","color_25":"#0F4842","color_26":"#AFD7FA","color_27":"#86C1F5","color_28":"#178AF0","color_29":"#0F5CA0","color_30":"#082E50","color_31":"#D7D4D1","color_32":"#AFACA9","color_33":"#878380","color_34":"#5F5A55","color_35":"#302D2B"},{"paletteName":"Minimalist White","paletteTags":["Dawkins&Dodger"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#EDEBF2","color_12":"#BEBCC2","color_13":"#8E8D91","color_14":"#5F5E61","color_15":"#2F2F30","color_16":"#C7CDD0","color_17":"#979EA0","color_18":"#676E71","color_19":"#363E41","color_20":"#1B1F21","color_21":"#C6DFDC","color_22":"#9EB2B0","color_23":"#778684","color_24":"#4F5958","color_25":"#282D2C","color_26":"#F0DFD8","color_27":"#EBC9BC","color_28":"#DBAB97","color_29":"#A67560","color_30":"#5C4339","color_31":"#D7D3D2","color_32":"#AEAAA9","color_33":"#858180","color_34":"#5D5755","color_35":"#2F2C2B"},{"paletteName":"Hot Pink Bites","paletteTags":["Fashion Photographer"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#BEBCC2","color_13":"#8E8D91","color_14":"#5F5E61","color_15":"#2F2F30","color_16":"#FFEEBC","color_17":"#FFDC73","color_18":"#F2BD1E","color_19":"#AA8925","color_20":"#554412","color_21":"#E8E6C4","color_22":"#D2CE90","color_23":"#BBB546","color_24":"#7D792F","color_25":"#3E3C17","color_26":"#BEDED7","color_27":"#94BCB4","color_28":"#599B8D","color_29":"#3B675E","color_30":"#1E342F","color_31":"#C7CFD3","color_32":"#9AA3A8","color_33":"#6D777C","color_34":"#3D4A50","color_35":"#1F2528"},{"paletteName":"Business Edition","paletteTags":["success consulting"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#2F2E2E","color_12":"#595858","color_13":"#828181","color_14":"#ACABAB","color_15":"#F2F2F2","color_16":"#4D1916","color_17":"#9B312D","color_18":"#E84A43","color_19":"#F09E9A","color_20":"#F7BFBD","color_21":"#141A2D","color_22":"#293559","color_23":"#5F6883","color_24":"#8D95AC","color_25":"#B9C0D5","color_26":"#4F4B13","color_27":"#9E9625","color_28":"#EDE138","color_29":"#F3ED96","color_30":"#F9F5BA","color_31":"#283E23","color_32":"#517C45","color_33":"#78BA68","color_34":"#ACD1A3","color_35":"#D3E8CE"},{"paletteName":"White on Black","paletteTags":["Jack Banks Photography"],"color_1":"#FFFFFF","color_2":"#000000","color_11":"#FFFFFF","color_12":"#BEBCC2","color_13":"#8E8D91","color_14":"#5F5E61","color_15":"#2F2F30","color_16":"#B2DED6","color_17":"#85BDB3","color_18":"#409C8C","color_19":"#2B685D","color_20":"#15342F","color_21":"#FFDBC6","color_22":"#FEB88D","color_23":"#BF8A6A","color_24":"#7F5C47","color_25":"#402E23","color_26":"#C0EEF5","color_27":"#9FE1EA","color_28":"#50CFE0","color_29":"#358A95","color_30":"#1B454B","color_31":"#BFC8D7","color_32":"#959EAE","color_33":"#697386","color_34":"#35435D","color_35":"#1B222F"}]')},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A,T,O,C,_,D,w,b;e.exports=(o=n(0),i=n(165),a=n(164),s=n(1),u=n(10),c=s.masterPageLayoutUtils.MASTER_PAGES_SECTIONS,l=function(e,t,n){return e.pointers.components.getChildren(t)[n]},p=function(e,t){return e.pointers.components.getPagesContainer(t)},d=function(e){return"wysiwyg.viewer.components.PagesContainer"===e},g=function(e,t){return d(u.getComponentType(e,t))},f=function(e,t){var n=e.pointers.getInnerPointer(t,"layout.fixedPosition");return!!e.dal.get(n)},m=function(e,t,n){return!!i.canSwapComponents(e,t,n)&&(!(!f(e,t)||!f(e,n))||(h(e,t)?h(e,n):!h(e,n)||g(e,n)))},v=function(e,t,n,r){var i=e.dal.full,s=e.pointers.full.components.getChildrenContainer(t),u=i.get(s),c=o.sortBy([n,r],function(e){return e[0]}),l=a.swapGroups(u,c[0],c[1]);i.set(s,l)},y=function(e,t,n,r){var o=e.dal.full,i=e.pointers.full.components.getChildrenContainer(t),s=o.get(i),u=a.moveGroupToIndex(s,n,r);o.set(i,u)},E=function(e,t){var n=e.pointers.full.components.getParent(t),r=e.pointers.full.components.getChildren(n),i=o.findIndex(r,{id:s.displayedOnlyStructureUtil.getRepeaterTemplateId(t.id)});return[i,i]},I=function(e,t){return g(e,t)?O(e,t):E(e,t)},S=function(e,t){return o.includes(c[t],e)},P=function(e,t,n){return 0===n?n:a.findPrev(t,function(t){return h(e,t)||f(e,t)},n)+1},A=function(e,t,n){var r=t.length-1;if(n===r)return n;var o=a.findNext(t,function(t){return h(e,t)||f(e,t)},n);return-1===o?r:o-1},T=function(e,t,n){var r=o.findIndex(n,{id:t.id});return[P(e,n,r),A(e,n,r)]},O=function(e,t){var n=e.pointers.full.components.getParent(t);return T(e,t,e.pointers.full.components.getChildren(n))},D=function(e,t){return[e,t]},w=function(e){return o.reject(e,function(e){var t=r(e,2);return t[0]>t[1]})},b=function(e,t,n){var i=n.type,a=e.pointers.full.components.getChildren(n),s=p(e,i),u=r(T(e,s,a),2),c=u[0],l=u[1];return!(S(t.componentType,i)&&!d(t.componentType)||function(e){return o.get(e,["layout","fixedPosition"],!1)}(t))?[D(c,l+1)]:w([D(0,c),D(l+1,a.length)])},{shouldUseMasterPageArrangement:function(e,t){return function(e,t){return e.pointers.isSamePointer(t,e.pointers.components.getMasterPage(s.constants.VIEW_MODES.DESKTOP))}(e,t)&&function(e){return o.get(function(e){return e.dal.get(e.pointers.getInnerPointer(function(e){return e.pointers.data.getDataItemFromMaster("masterPage")}(e),"layoutSettings"))}(e),"soapCompsAroundPagesContainer",!1)}(e)},isMasterPageSection:h=function(e,t){return S(u.getComponentType(e,t),t.type)},getPrevCompIndexInDisplayedJson:_=function(e,t){var n=e.pointers.components.getParent(t),r=e.pointers.components.getChildren(n),i=o.findIndex(r,{id:t.id});return a.findPrev(r,function(n){return m(e,t,n)},i)},getNextCompIndexInDisplayedJson:C=function(e,t){var n=e.pointers.components.getParent(t),r=e.pointers.components.getChildren(n),i=o.findIndex(r,{id:t.id});return a.findNext(r,function(n){return m(e,t,n)},i)},findValidIndexForNewChild:function(e,t,n){var r=b(e,t,n),o=e.pointers.full.components.getChildren(n);return a.findNearestValidIndex(o,o.length,r)},findValidIndexForChild:function(e,t,n,i){var s=e.pointers.full.components.getChildren(n),u=o.reject(s,function(n){return e.pointers.isSamePointer(t,n)});i=o.isUndefined(i)?u.length:i;var c=function(e,t,n){var i=e.pointers.full.components.getChildren(n),a=o.reject(i,function(n){return e.pointers.isSamePointer(t,n)}),s=p(e,t.type),u=r(T(e,s,a),2),c=u[0],l=u[1];return h(e,t)&&!g(e,t)||f(e,t)?w([D(0,c),D(l+1,a.length)]):[D(c,l+1)]}(e,t,n);return a.findNearestValidIndex(u,i,c)},moveMasterPageSectionBackward:function(e,t){var n=_(e,t),r=e.pointers.components.getParent(t),o=l(e,r,n);v(e,r,I(e,t),I(e,o))},moveMasterPageSectionForward:function(e,t){var n=C(e,t),r=e.pointers.components.getParent(t),o=l(e,r,n);v(e,r,I(e,t),I(e,o))},moveMasterPageChildToFront:function(e,t){var n=e.pointers.components.getParent(t);if(h(e,t))!function(e,t,n){var r=e.dal.full,o=e.pointers.full.components.getChildrenContainer(t),i=r.get(o),s=a.moveGroupToEndOfArray(i,n);r.set(o,s)}(e,n,I(e,t));else{var r=e.pointers.full.components.getChildren(n),i=o.findIndex(r,{id:"PAGES_CONTAINER"}),s=A(e,r,i);y(e,n,E(e,t),s)}},moveMasterPageChildToBack:function(e,t){var n=e.pointers.components.getParent(t);if(h(e,t))!function(e,t,n){var r=e.dal.full,o=e.pointers.full.components.getChildrenContainer(t),i=r.get(o),s=a.moveGroupToStartOfArray(i,n);r.set(o,s)}(e,n,I(e,t));else{var r=e.pointers.full.components.getChildren(n),i=o.findIndex(r,{id:"PAGES_CONTAINER"}),s=P(e,r,i);y(e,n,E(e,t),s)}}})},function(e,t){var n,r,o,i,a,s;e.exports=(n=["entrance","animation","scrub"].concat(["mask","3d"]),r=["exit"],o=["animation","background"],i=["transition","pageTransition"],a=[],s={AllComponents:n.concat(r),PopupContainer:n.concat(r),WRichText:n.concat(["text"]).concat(r),WSiteStructure:i,Page:i,AppPage:i,Anchor:a,FlashComponent:a,PagesContainer:a,Header:a,Footer:n,TPAWidget:a,TPASection:a,TPAGluedWidget:a,TPAMultiSection:a,AppPart:a,AppPart2:a,Masonry:a,Accordion:a,Impress:a,Freestyle:a,Collage:a,Honeycomb:a,StripShowcase:a,StripSlideshow:a,Thumbnails:a,TPA3DGallery:a,TPA3DCarousel:a,FlickrBadgeWidget:a,GoogleMap:a,HtmlComponent:a,PinItPinWidget:a,PinterestPinIt:a,FacebookLikeBox:a,SkypeCallButton:a,SoundCloudWidget:a,SpotifyFollow:a,SpotifyPlayer:a,Video:a,VKShareButton:a,WTwitterTweet:a,WTwitterFollow:a,YouTubeSubscribeButton:a,MediaControls:a,MediaOverlayControls:a,StripContainer:o,StripContainerSlideShowSlide:o,StateBoxState:o,StateBoxFormState:o,StateStrip:o,StateStripState:o,Column:n.concat(o),StripColumnsContainer:n.concat(o),BoxSlideShowSlide:o},Object.freeze(s),{getSchema:function(){return s}})},function(e,t){var n;e.exports=(n={screenIn:{groups:["animation","entrance"]},inlinePopupIn:{groups:["animation","entrance"]},inlinePopupOut:{groups:["exit","animation"]},bgScrub:{groups:["animation","background"]},pageTransition:{groups:["transition","pageTransition"]},exit:{groups:["exit","animation"]},load:{groups:["transition","pageTransition"]},modeIn:{groups:["animation","entrance"]},modeOut:{groups:["animation","exit"]},modeChange:{groups:["animation","entrance"]},scrollScrub:{groups:["scrub"]},backToTopIn:{groups:["animation","entrance"]}},Object.freeze(n),{getSchema:function(){return n}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,i,a,s,u,c,l;e.exports=(o=n(0),i=n(2),a={general:[{name:"Fade",groups:["animation"],params:{}},{name:"Position",groups:["animation"],params:{}},{name:"Rotate",groups:["animation"],params:{}},{name:"Scale",groups:["animation"],params:{}}],in:[{name:"ArcIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"DropIn",groups:["entrance","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"DropClipIn",groups:["entrance","animation"]},{name:"ExpandIn",groups:["entrance","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"FadeIn",groups:["entrance","animation"],params:{}},{name:"FlipIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FloatIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FlyIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["top","top left","top right","left","bottom","bottom left","bottom right","right"]}}},{name:"FoldIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"Reveal",groups:["mask","entrance","animation"],params:{direction:{type:"list",list:["top","right","center","bottom","left"]}}},{name:"SlideIn",groups:["mask","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"SpinIn",groups:["entrance","animation"],params:{cycles:{type:"number",min:.25,max:15,step:.25},direction:{type:"list",list:["cw","ccw"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"TurnIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"BounceIn",groups:["entrance","animation"],params:{bounce:{type:"list",list:["soft","medium","hard"]},direction:{type:"list",list:["top left","top right","center","bottom right","bottom left"]}}},{name:"GlideIn",groups:["entrance","animation"],params:{angle:{type:"angle"},distance:{type:"number",min:0,max:300,step:1}}}],out:[{name:"ArcOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"PopOut",groups:["exit","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"CollapseOut",groups:["exit","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"FadeOut",groups:["exit","animation"],params:{}},{name:"FlipOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FloatOut",groups:["exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FlyOut",groups:["exit","animation"],params:{direction:{type:"list",list:["top","top left","top right","left","bottom","bottom left","bottom right","right"]}}},{name:"FoldOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"Conceal",groups:["mask","exit","animation"],params:{direction:{type:"list",list:["top","right","center","bottom","left"]}}},{name:"SlideOut",groups:["mask","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"SpinOut",groups:["exit","animation"],params:{cycles:{type:"number",min:1,max:15,step:1},direction:{type:"list",list:["cw","ccw"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"TurnOut",groups:["exit","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"BounceOut",groups:["exit","animation"],params:{bounce:{type:"list",list:["soft","medium","hard"]},direction:{type:"list",list:["top left","top right","center","bottom right","bottom left"]}}},{name:"GlideOut",groups:["exit","animation"],params:{angle:{type:"angle"},distance:{type:"number",min:0,max:300,step:1}}}],background:[{name:"ContainerFixedBg",groups:["animation","background"],params:{}},{name:"BackgroundReveal",groups:["animation","background"],params:{}},{name:"BackgroundParallax",groups:["animation","background"],params:{}},{name:"BackgroundZoom",groups:["animation","background"],params:{}},{name:"BackgroundFadeIn",groups:["animation","background"],params:{}},{name:"BackgroundBlurIn",groups:["animation","background"],params:{}},{name:"SiteBackgroundParallax",groups:["animation","background"],params:{}}],modes:[{name:"ModesMotion",groups:["entrance","animation"]}]},s={duration:{type:"number",min:0,max:4,step:.05},delay:{type:"number",min:0,max:8,step:.1}},u=[],o.forEach(a,function(e){u=u.concat(o.map(e,function(e){var t=o.cloneDeep(e);return t.type="animation",t.params=t.params||{},o.includes(t.groups,"animation")&&o.defaults(t.params,s),t}))}),c=u,l=[{type:"scrub",name:"AnimateAfterScroll",groups:["scrub"],viewMode:i.VIEW_MODES.DESKTOP,params:{animations:[]}},{type:"scrub",name:"ScrubAnimation",groups:["scrub"],viewMode:i.VIEW_MODES.MOBILE,params:{animations:[]}}],[].concat([{type:"widget",name:"runCode",params:{callbackId:"",compName:""}},{type:"widget",name:"runAppCode",params:{callbackId:"",compName:""}}],l,[{type:"site",name:"openPopup",params:{delay:2,openInDesktop:!0,openInMobile:!1}},{type:"site",name:"prefetchPages",params:{prefetchFilters:{}}}],r(c)))},function(e,t){e.exports=[{name:"CrossFade",groups:["transition","pageTransition"],legacyName:"crossfade"},{NoTransition:"NoTransition",groups:["transition","pageTransition"],legacyName:"none"},{OutIn:"OutIn",groups:["transition","pageTransition"],legacyName:"outIn"},{name:"SlideHorizontal",groups:["transition","pageTransition"],legacyName:"swipeHorizontalFullScreen"},{name:"SlideVertical",groups:["transition","pageTransition"],legacyName:"swipeVerticalFullScreen"}]},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y;e.exports=(r=n(0),o=n(26),i=n(8),a=n(29),s=n(417),u=n(93),c=n(418),l=n(419),p=n(420),d=n(421),g=n(422),f=n(423),m=n(424),v=n(425),y={"wysiwyg.viewer.components.MatrixGallery":s,"wysiwyg.common.components.anchor.viewer.Anchor":p,"wysiwyg.viewer.components.WSiteStructure":l,"wysiwyg.viewer.components.Column":r.noop,"wysiwyg.viewer.components.StripColumnsContainer":r.noop,"wysiwyg.viewer.components.WRichText":d,"wysiwyg.viewer.components.FiveGridLine":f,"wysiwyg.viewer.components.VerticalLine":g,"wysiwyg.viewer.components.PopupContainer":m,"wysiwyg.viewer.components.QuickActionBar":v},{getPlugin:function(e,t){var n=o.getType(e,t),r=y[n];return!r&&i.isLegacyFullWidthContainer(e,t)&&(r=a.isPopup(e,t.id)?c:u),r}})},function(e,t,n){var r;e.exports=(r=n(0),function(e,t,n,o){var i=e.getSiteMeasureMap(),a=r.get(i.custom,[o.id,"itemsContainer","height"]),s=r.get(i.custom,[o.id,"showMore","height"]);return a&&s?{height:a+s}:{}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(93),function(e,t){return r.assign(o.call(this,e,t),{height:Math.max(t.height,e.getScreenHeight())})})},function(e,t,n){var r;e.exports=(r=n(2),function(e,t){var n=e.isMobileView();return{x:n?t.x:0,y:t.y,width:n?e.getSiteWidth():e.getSiteMeasureMap().clientWidth,height:e.getSiteMeasureMap().height[r.MASTER_PAGE_ID]}})},function(e,t){var n,r;e.exports=(n=141,r=68,function(e,t){var o=t.width,i=e.getSiteMeasureMap().clientWidth-(n+r);return e.isMobileView()&&(i=i-(e.getSiteMeasureMap().clientWidth-e.getSiteWidth())/2-13,o=140),{x:i,y:t.y,height:0,width:o}})},function(e,t){e.exports=function(e,t,n,r){return{height:e.getSiteMeasureMap().minHeight[r.id]}}},function(e,t){var n;e.exports=(n=25,function(e,t){var r={};return t.width<n&&(r.x=t.x-n/2,r.width=n),r})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(93),i=25,function(e,t,n){var a={};return t.height<i&&(a.y=t.y-i/2,a.height=i),n&&n.fullScreenModeOn&&r.merge(a,o(e,t,n)),a})},function(e,t,n){var r;e.exports=(r=n(93),function(e,t,n){return"fullWidth"===n.alignmentType?r(e,t):{}})},function(e,t,n){e.exports=function(){var e=n(0),t=34;function r(t,n,r,o){return"right"===r.alignment&&e.has(o,"qab-right")?t.width.screen-n-o["qab-right"]:e.has(o,"qab-left")?o["qab-left"]:(t.width.screen-n)/2}function o(e,t,n){return e.clientHeight-t-n["qab-bottom"]}return function(e,n,i,a,s){var u=e.getSiteMeasureMap(),c=function(e,n,r,o,i){return!r.hideText&&i["text-overflow"]&&e.width["".concat(o.id,"maxTextWidth")]>0?n+t+e.width["".concat(o.id,"maxTextWidth")]:n}(u,n.width,i,a,s),l=u.height["".concat(a.id,"actionsContainer")];return{x:(u.clientWidth-u.width.screen)/2+r(u,c,i,s),y:o(u,l,s),width:c,height:l}}}()},function(e,t){e.exports=b},function(e,t,n){e.exports=function(){var e=n(0),t="warning";function r(){return{"wysiwyg.viewer.components.StripContainer":{deprecated:t,message:"This component will be deprecated"},"wysiwyg.viewer.components.ClipArt":{deprecated:t,message:"This component will be deprecated"}}}return{isComponentDeprecated:function(t){return"error"===e.get(r(),[t,"deprecated"])},shouldWarnForDeprecation:function(n){return e.get(r(),[n,"deprecated"])===t},getDeprecationMessage:function(t){return"".concat(t,"|").concat(e.get(r(),[t,"message"]))}}}()},function(e,t,n){var r,o;e.exports=(r=n(429),o=n(430),n(431),n(432),n(433),n(434),n(435),{initialize:function(e){o.initialize(e),r.initialize(e)}})},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(73),o=n(47);function i(n,o,i,a){var s=a[o],u=s.getAttribute("data-svg-id"),c=s.querySelector("svg");if(u&&c){var l=n.pointers.svgShapes.getSvgShapePointer(u),p=n.pointers.getInnerPointer(l,t.svgUtils.SVG_STORES.BOX_BOUNDARIES);if(n.dal.get(l)&&e.isEmpty(n.dal.get(p))){var d="preserve"===s.getAttribute("data-preserve-viewbox"),g=function(e){var t=r(e.getAttribute("data-viewbox").split(" "),4);return{x:t[0],y:t[1],width:t[2],height:t[3]}}(s),f=d&&e.some(g)?g:function(e){var t=e.getBBox();return{x:t.x,y:t.y,width:t.width,height:t.height}}(c);e.some(f)&&n.dal.set(p,f)}}}var a=["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape","wysiwyg.viewer.components.PopupCloseIconButton","wysiwyg.viewer.components.MediaControls","wysiwyg.viewer.components.MediaOverlayControls","wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.BackToTopButton"];return{initialize:function(t){o.registerShapesMeasureFunction(a,e.partial(i,t))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(47);function r(t){var n=t.getBoundingClientRect(),r=e.toArray(t.children),o=n.left,i=n.top;return n=function t(n,r){r=r||{left:-Number.MAX_VALUE,right:Number.MAX_VALUE,top:-Number.MAX_VALUE,bottom:Number.MAX_VALUE};var o=window.document.createRange();r=e.reduce(n,function(e,n){var r,i=function(e){var t,n,r=e.childNodes,o="";for(t=0;t<r.length;t++)3===(n=r[t]).nodeType&&(o+=n.textContent.trim());return o}(n);return i?(o.selectNodeContents(n),(r=o.getBoundingClientRect()).width&&r.height&&(e.left=Math.min(e.left,r.left),e.top=Math.min(e.top,r.top),e.right=Math.max(e.right,r.right),e.bottom=Math.max(e.bottom,r.bottom))):e=t(n.children,e),e},r);return r}(r,n={left:n.right,right:n.left,top:n.bottom,bottom:n.top}),{dx:Math.floor(n.left)-o,dy:Math.floor(n.top)-i,width:Math.ceil(n.right-n.left),height:Math.ceil(n.bottom-n.top)}}function o(t,n,o,i){var a=i[n],s=t.pointers.general.getTextRuntimeOverallBorders(),u=e.isUndefined(a.dataset.minHeight)?0:parseInt(a.dataset.minHeight,10),c=a.querySelector(".measurer");if(o.minHeight[n]=Math.max(u,e.get(c,"offsetTop",a.offsetHeight)),a.textContent.trim()&&!t.siteAPI.isMobileView()){var l=r(a);t.siteAPI.isMobileView()||t.dal.set(t.pointers.getInnerPointer(s,n),l)}}return{initialize:function(n){t.registerAdditionalMeasureFunction("wysiwyg.viewer.components.WRichText",e.partial(o,n))}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(47),i=n(1),o.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),o.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),o.registerCustomMeasure("wysiwyg.viewer.components.Group",function(e,t,n,o,a){var s=a.isMobileView,u=i.dataUtils.getChildrenData(o.structure,s()),c=function(e,t){var n,o,a,s;return n=a=Number.MAX_VALUE,o=s=-Number.MAX_VALUE,r.forEach(e,function(e){var r=e.layout,u=t.left&&t.left[e.id]?t.left[e.id]:r.x,c=t.width&&t.width[e.id]?t.width[e.id]:r.width,l=t.top&&t.top[e.id]?t.top[e.id]:r.y,p=t.height&&t.height[e.id]?t.height[e.id]:r.height,d=i.boundingLayout.getBoundingLayout({x:u,y:l,width:c,height:p,rotationInDegrees:r.rotationInDegrees});n=Math.min(n,d.x),o=Math.max(o,d.x+d.width),a=Math.min(a,d.y),s=Math.max(s,d.y+d.height)}),{left:n,right:o,top:a,bottom:s}}(u,t);t.left[e]=o.layout.x,u.length>0&&(t.width[e]=c.right-c.left,t.height[e]=c.bottom-c.top,t.top[e]=o.layout.y+c.top,t.left[e]=o.layout.x+c.left,r.forEach(u,function(e){t.top[e.id]=e.layout.y-c.top,t.left[e.id]=e.layout.x-c.left}))}),void o.registerPatcher("wysiwyg.viewer.components.Group",function(e,t,n,o,a){t.css(e,{width:n.width[e],height:n.height[e],top:n.top[e],left:n.left[e]});var s=i.dataUtils.getChildrenData(o.structure,a.isMobileView());r.forEach(s,function(e){t.css(e.id,{top:n.top[e.id],left:n.left[e.id]})})}))},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),o=n(47);function i(n,o,i){var a=i[n],s=t.contentAreaUtil.getContentAreaMarkerForElement(a);s&&e.merge(o,{left:r({},n,0),width:r({},n,s.offsetWidth),relativeToScreenOverrides:r({},n,{x:a.offsetLeft,width:a.offsetWidth})})}o.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripColumnsContainer",function(n,o,i){var a=i[n],s=a.getBoundingClientRect(),u=s.left,c=s.width,l=t.contentAreaUtil.getContentAreaMarkerChildOnNode(a);l&&e.merge(o,{left:r({},n,0),width:r({},n,l.offsetWidth),relativeToScreenOverrides:r({},n,{x:u,width:c})})}),o.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripContainerSlideShow",i),o.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripContainerSlideShowSlide",i),o.registerAdditionalMeasureFunction("wysiwyg.viewer.components.Column",function(n,o,i,a){var s=i[n],u=s.getBoundingClientRect(),c=u.left,l=u.width,p=t.contentAreaUtil.getContentAreaMarkerChildOnNode(s);p&&e.merge(o,{left:r({},n,Math.floor(p.getBoundingClientRect().left+a.getSiteX())),width:r({},n,p.offsetWidth),relativeToScreenOverrides:r({},n,{x:c,width:l})})})}()},function(e,t,n){e.exports=void n(47).registerAdditionalMeasureFunction("wysiwyg.viewer.components.VerticalLine",function(e,t,n){var r=n[e];t.width[e]=parseInt(r.style.width,10),t.left[e]=parseInt(r.style.left,10)})},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i,a,s;e.exports=(o=n(0),i=n(1),a=n(47),s="platform.components.AppWidget",a.registerMeasureChildrenFirst(s,!0),a.registerRequestToMeasureDom(s),a.registerCustomMeasure(s,function(e,t,n,a,s){var u=s.isMobileView,c=r(i.dataUtils.getChildrenData(a.structure,u()),1)[0];c&&(t.width[e]=o.get(t,["width",c.id],c.layout.width),t.height[e]=o.get(t,["height",c.id],c.layout.height))}),void a.registerPatcher(s,function(e,t,n){t.css(e,{width:n.width[e],height:n.height[e]})}))},function(e,t,n){var r,o;e.exports=(r=n(47),o=n(1),void r.registerAdditionalMeasureFunction("mobile.core.components.Page",function(e,t,n,r,i){t.pageBottomByComponents[e]=o.layoutUtils.getPageBottomChildEnd(t,n,r.isMobileView(),i)+t.containerHeightMargin[e]},"pageBottomPlugin"))},function(e,t,n){var r,o;e.exports=(r=n(437),(o={})["wysiwyg.viewer.components.PopupContainer"]=r,o)},function(e,t,n){var r,o;e.exports=(r=n(1),o=n(26),function(e,t,n){var i={width:n.width,height:n.height},a=o.getPropertiesItem(e,t);i.x=r.compAlignmentUtils.getLeft(a,i.width,e.siteAPI.getScreenWidth(),e.siteAPI.getSiteWidth()),"fullWidth"===a.alignmentType&&(i.x=Math.max(i.x,0));var s=e.siteAPI.getSiteMeasureMap();return i.y=r.compAlignmentUtils.getTop(a,i.height,s.innerHeight.screen),i})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,a,s,u,c,l;e.exports=(o=n(0),i=n(64),a=n(1),s=n(5),u=n(439),c=n(182),l=i.viewerCompsService,{loadExternalComponentsForDS:function(e,t){var n=t.componentsToLoad;if(s.isOpen("registerComponentsDynamically")){var i="".concat(requirejs.toUrl("wix-ui-santa"),"/"),l="ALL"===n;if(l||o.isArray(n))return(l?function(e){return u.loadAll(e)}(i):function(e,t){return Promise.all(o(t).filter(u.exists).map(function(t){return u.load(t,e)}).value())}(i,n)).then(function(t){o(t).flatMap().forEach(function(t){return c.registerComponent(e,t)})}).catch(function(e){return a.log.error("Could not load external components from ".concat(i),e)});if(n)throw new Error("componentsToLoad in DS config must be either the string 'ALL' or an array of component types. received ".concat(r(n)," instead"))}},loadViewerComponents:function(e,t){return Promise.all(t.map(function(e){return l.loadAndRegister(e)})).catch(function(e){a.log.error("Error loading viewer components during DS init: ".concat(t),e)})}})},function(e,t){e.exports=M},function(e,t,n){var r,o,i,a,s,u,c,l,p,d;e.exports=(r=n(0),o=n(19),i=n(166),a=n(174),s=["disableable","rotatable","moveDirections","resizableSides","canBeFixedPosition","layoutLimits","mobileConversionConfig","defaultMobileProperties"],u={isRepeatable:!1},c={isExternal:!0},l=r.invert(a),p=function(e){return l[e]},d={registerMetaData:function(e,t){i[e]?function(e){var t=new Error('Unable to register a component metaData for type "'.concat(e,'" that is already registered'));o.utils.fedopsLogger.captureError(t,{tags:{metaDataRegistration:!0,failedMetaDataRegistration:!0},extra:{componentType:e}})}(e):i[e]=t},registerExternalMetaData:function(e,t){var n=function(e){return r(e).keys().reject(p).value()}(t);n.length&&function(e,t,n){var r=new Error('Unable to use illegal meta data key(s) "'.concat(e.join(", "),'" for component "').concat(t,'"'));o.utils.fedopsLogger.captureError(r,{tags:{metaDataRegistration:!0},extra:{illegalKeys:e,metaDataToRegister:n}})}(n,e,t=r.omit(t,n));var i=r(t).pick(s).defaults(u).assign(c).value();return d.registerMetaData(e,i)},unregisterExternalMetaData:function(e){(function(e){return r.get(i,[e,"isExternal"],!1)})(e)&&delete i[e]}})},function(e,t){e.exports=function(e,t,n,r){r.data.compId=t.id}},function(e,t,n){var r,o,i,a,s,u,c,l,p,d;e.exports=(r=n(0),o=n(1),i=n(9),a=o.vectorImageConversionUtils,s=a.vectorImageDefaults,u=a.convertStyleToDesignData,c=a.convertStyle,l=a.convertData,p=a.convertProperties,d=a.convertStructure,{beforeAdd:function(e,t,n,o){o.design=o.design||{type:"VectorImageDesignData"};var a=o.skin,g=(e.pointers.components.getPageOfComponent(n)||e.pointers.full.components.getPageOfComponent(n)).id,f=r.isString(o.style),m=f?i.styles.get(e,o.style,g):o.style,v=o.data,y=o.design,E=o.props;d(o,s),c(m,s),u(y,m,s),l(v,s,a),p(E,s),function(e){var t=r.get(e,["modes","overrides"]);r.forEach(t,function(e){e.style&&(e.design={},u(e.design,e.style,s),r.unset(e,"style"))})}(o),function(e){if("RepeatedData"===e.data.type){var t={type:"RepeatedData",original:e.design,overrides:{}};r.forEach(e.data.overrides,function(n,o){t.overrides[o]=r.clone(e.design)}),e.design=t}}(o),f&&i.styles.update(e,o.style,m,g)}})},function(e,t){e.exports={beforeAdd:function(e,t,n,r){r.componentType="wysiwyg.viewer.components.WPhoto",r.props.displayMode="fill"}}},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(116),i=n(4),a=n(98),s=n(17),u=["rd","brd","brw","alpha-brd"],c={"wysiwyg.viewer.components.BoxSlideShowSlide":"wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBoxState":"wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateBoxFormState":"wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStripState":"wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StripContainerSlideShowSlide":"wysiwyg.viewer.components.StripContainerSlideShow"},{updateSlidesStyle:function(e,t,n,o){var i=r.omitBy(o.style.properties,function(e,t){return n.style.properties[t]===e});if(!r(i).keys().intersection(u).isEmpty()){var c=a.getNonMasterChildren(e,t),l={style:{properties:{}}};r.forEach(u,function(e){l.style.properties[e]=i[e]}),r.forEach(c,function(t){var n,o,i,a,u;n=e,o=t,i=l,a=s.style.get(n,o),u=r.cloneDeep(a),u=r.merge(u,i),s.style.fork(n,o,u)})}},verifySlideShowStructureOnAdd:function(e,t,n,i){var a=o.getSlidesFromChildrenByStructure(i.components),s=a.length>0,u=r.find(a,function(e){return!r.includes(o.getMatchingChildSlideType(i.componentType),e.componentType)});if(!s||u)throw new Error("Invalid slideShow structure definition")},verifySlideShowStructureOnDelete:function(e,t,n){if(!n&&!function(e,t){var n=e.pointers.components.getParent(t),r=i.getType(e,t);return i.getType(e,n)!==c[r]}(e,t)){var a=e.pointers.components.getParent(t),s=e.pointers.components.getChildren(a),u=r.map(s,function(t){return{componentType:i.getType(e,t)}});if(1===o.getSlidesFromChildrenByStructure(u).length)throw new Error("can't delete the last slide")}}})},function(e,t){e.exports={createRegistrar:function(){var e;return{setContextProvider:function(t){e=t},getNicknameContext:function(t,n){return e?e(t,n):null}}}}},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),i=n(2),a=n(3),s=n(6),u=n(26),c=n(31),l=n(41),p=n(10),d=n(16),g=n(5),f=n(12),m=i.DATA_TYPES,v="custom",y=["dataQuery","designQuery"],E=f.stripHashIfExists;function I(e,t,n){return n||p.shouldForceMaintainIDsOnSerialize(e,t)}function S(n,c,p,g,f,m,E){var P;if(m=e.defaults({maintainIdentifiers:I(n,c,m.maintainIdentifiers)},m),g=g||function(t){var n=t.pointers.general.getMobileStructuresPointer(),r=t.dal.get(n),o={};return e.forOwn(r,function t(n){o[n.id]=e.omit(e.clone(n),"components");e.forEach(n.components,t)}),o}(n),n.pointers.page.isExists(c.id)){var A=n.pointers.page.getPagePointer(c.id),T=n.pointers.getInnerPointer(A,["structure"]);P=n.dal.full.get(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},T,{source:"serialize"}))}else P=n.dal.full.get(c);if(!P)return null;var O=t.displayedOnlyStructureUtil.isRepeatedComponent(c.id);P=e.reduce(y,function(e,r){return e[r]&&(m.itemId?e[r]=t.displayedOnlyStructureUtil.getUniqueDisplayedId(e[r],m.itemId):O&&(e[r]=n.dal.get(n.pointers.getInnerPointer(c,r)))),e},P);var C=n.pointers.full.components.getPageOfComponent(c),_=C.id;if(h(n,P,p,m,_,f,E),m.ignoreChildren)delete P.components;else{var D=e.clone(m);O&&(D.itemId=t.displayedOnlyStructureUtil.getRepeaterItemId(c.id)),s.executeHook(s.HOOKS.SERIALIZE.CHILDREN_BEFORE,P.componentType,[P,D]),function(t,n,r,o,i,a,s,u){var c=t.pointers.full.components.getChildren(r);c.length&&(n.components=e.map(c,function(e){return S(t,e,null,i,a,s,u)}))}(n,P,c,0,g,f,D,E),m.maintainIdentifiers&&d.serializeMobileChildren(n,P,_,D,g,f,E,S)}m.maintainIdentifiers||(delete P.mobileComponents,delete P.id);var w={},b=[n,c,w];return s.executeHook(s.HOOKS.SERIALIZE.SET_CUSTOM,P.componentType,b),e.isEmpty(w)||(P[v]=e.defaults(P[v]||{},w)),c.type===i.VIEW_MODES.DESKTOP&&d.serializeMobileStructure(n,c,P,_,g,f,m,h,S,{componentStructureInfo:u,mobileConversionFacade:l,dataModel:a}),P}function h(t,n,r,i,s,u,c){u(n),function(t,n,r,o,i,a){var s=r.dataQuery;if(s){var u=n.repeatedItemIds,c=e.isArray(u)&&u.length>0;r.data=c?A(t,s,o,i,u,P):P(t,s,o,i,a),n.maintainIdentifiers&&r.data&&(r.data.id=E(s)),delete r.dataQuery}}(t,i,n,s,r,c),T(t,i.maintainIdentifiers,n,s),function(e,t,n,r){if(!n.mobileHintsQuery)return;var o=e.pointers.data.getMobileHintsItem(E(n.mobileHintsQuery),r);n.mobileHints=a.serializeDataItem(e,m.mobileHints,o,!0),t&&n.mobileHints&&(n.mobileHints.id=E(n.mobileHintsQuery));delete n.mobileHintsQuery}(t,i.maintainIdentifiers,n,s),function(t,n,r,i){if(!g.isOpen("sv_newLayoutAPI"))return function(e,t,n,r){if(!n.layoutQuery)return;var o=e.pointers.data.getItem(m.layout,E(n.layoutQuery),r);n.layoutResponsive=a.convertNewLayoutToOld(a.serializeDataItem(e,m.layout,o,!0)),t&&n.layoutResponsive&&(n.layoutResponsive.id=E(n.layoutResponsive));delete n.layoutQuery}(t,n,r,i);if(!r.layoutQuery)return;var s=t.pointers.data.getItem(m.layout,E(r.layoutQuery),i),u=a.serializeDataItem(t,m.layout,s,!0);if("RefArray"!==u.type)return;var c=a.getDefaultLayoutObject(u),l=Array.from(function(e){var t=new Set;if("RefArray"!==e.type||!e.values)return t;return e.values.forEach(function(e){"BreakpointRelation"===e.type&&t.add(e.breakpoint.replace("#",""))}),t}(u)).map(function(e){return o({},e,a.getLayoutInBreakpointObject(e)(u))}).reduce(e.assign,{});if(r.layouts=c,r.scopedLayouts=l,n){var p=E(r.layoutQuery);e.isEmpty(r.layouts)||(r.layouts.id=p),e.isEmpty(r.scopedLayouts)||(r.scopedLayouts.id=p)}delete r.layoutQuery}(t,i.maintainIdentifiers,n,s),function(e,t,n,r){if(n.anchorQuery){var o=E(n.anchorQuery),i=e.pointers.data.getItem(m.anchors,o,r);n.anchor=a.serializeDataItem(e,m.anchors,i,!0),t&&n.anchor&&(n.anchor.id=o),delete n.anchorQuery}}(t,i.maintainIdentifiers,n,s),C(t,i,n,s),D(t,i.maintainIdentifiers,n,s),function(e,t,n,r){if(n.behaviorQuery){var o=e.pointers.data.getBehaviorsItem(E(n.behaviorQuery),r);n.behaviors=a.serializeDataItem(e,m.behaviors,o,!0),t&&n.behaviors&&(n.behaviors.id=n.behaviorQuery),delete n.behaviorQuery}}(t,i.maintainIdentifiers,n,s),function(e,t,n,r){if(n.connectionQuery){var o=e.pointers.data.getConnectionsItem(E(n.connectionQuery),r);n.connections=a.serializeDataItem(e,m.connections,o,!0),t&&n.connections&&(n.connections.id=n.connectionQuery),delete n.connectionQuery}}(t,i.maintainIdentifiers,n,s),function(e,t,n,r){if(n.breakpointsQuery){var o=e.pointers.data.getBreakpointsDataItem(E(n.breakpointsQuery),r);n.breakpoints=a.serializeDataItem(e,m.breakpoints,o,!0),t&&n.breakpoints&&(n.breakpoints.id=n.breakpointsQuery),delete n.breakpointsQuery}}(t,i.maintainIdentifiers,n,s),e.get(n,"modes.overrides")&&function(t,n,r,o,i){e.forEach(n,function(e){i(e),D(t,r.maintainIdentifiers,e,o),C(t,r,e,o),T(t,r.maintainIdentifiers,e,o)})}(t,n.modes.overrides,i,s,u)}function P(e,t,n,r,o){var i=r||e.pointers.data.getDataItem(E(t),n);return a.serializeDataItem(e,m.data,i,!0,o)}function A(n,r,o,i,s,u){var c=a.createDataItemByType(n,"RepeatedData");return c.original=u(n,r,o,i),c.overrides=e.zipObject(s,e.map(s,function(e){var i=t.displayedOnlyStructureUtil.getUniqueDisplayedId(r,e);return u(n,i,o)})),c}function T(e,t,n,r){if(n.propertyQuery){var o=E(n.propertyQuery),i=e.pointers.data.getPropertyItem(o,r);n.props=a.serializeDataItem(e,m.prop,i,!t),t&&n.props&&(n.props.id=o),delete n.propertyQuery}}function O(e,t,n,r){var o=r||e.pointers.data.getDesignItem(E(t),n);return a.serializeDataItem(e,m.design,o,!0)}function C(t,n,r,o){var i=r.designQuery;if(i){var a=n.repeatedItemIds,s=e.isArray(a)&&a.length>0,u=t.pointers.data.getDesignItem(E(i),o);r.design=s?A(t,i,o,u,a,O):O(t,i,o,u),n.maintainIdentifiers&&r.design&&(r.design.id=E(i)),delete r.designQuery}}function _(t,n){return"custom"===t.styleType?n?t:e.omit(t,"id"):t.id}function D(t,n,r,o){if(g.isOpen("sv_newStyleAPI"))!function(t,n,r,o){if(r.styleId){var i=t.pointers.data.getThemeItem(r.styleId,o),s=a.serializeDataItem(t,m.theme,i,!1);if("RefArray"===s.type){var u=a.refArray.extractValues(s);e.reduce(u,function(e,t){if("BreakpointRelation"===t.type){e.scopedStyles=e.scopedStyles||{};var r=a.breakpointRelation.extractBreakpoint(t),o=a.breakpointRelation.extractRef(t);e.scopedStyles[r]=_(o,n)}else e.style=_(t,n);return e},r)}else r.style=_(s,n);delete r.styleId}}(t,n,r,o);else if(r.styleId){var i=t.pointers.data.getThemeItem(r.styleId,o),s=t.dal.get(t.pointers.getInnerPointer(i,"type")),u=t.dal.get(t.pointers.getInnerPointer(i,"styleType"));"RefArray"===s||"custom"===u?(r.style=a.convertNewResponsiveStyleToOld(a.serializeDataItem(t,m.theme,i,!0)),n&&(r.style.id=r.styleId)):r.style=r.styleId,delete r.styleId}}return{serializeComponent:function(t,n,r,o,i,a,s,u){var p=f.replaceRuntimeRefWithOriginal(t,n),d=S(t,p,r,a,s=s||e.noop,{shouldAddMobilePresets:l.shouldCreateMobilePreset(t,p),ignoreChildren:o,maintainIdentifiers:i},u);return d&&(d.activeModes=function(t,n){var r={},o=t.pointers.full.components.getParent(n);for(;o;){var i=c.getComponentActiveModeIds(t,o);e.merge(r,i),o=t.pointers.full.components.getParent(o)}return r}(t,p)),d}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h,P,A;e.exports=(r=n(0),o=n(27),i=n(12),a=n(52),s=n(448),u=n(450),c=n(125),l=n(55),p=n(96),d=n(97),g=n(452),f=n(95),m=n(457),v=n(458),y=n(1),E=n(6),I=n(2),S=n(459),h=n(122),P=n(460),A=n(126),{mobileConversion:function(e){var t=e.ps,n=e.heuristicStrategy||t.dal.get(t.pointers.general.getMobileConversionHeuristicStrategy()),T=d.getConversionSettings({conversionType:"FULL",heuristicStrategy:n});function O(e){var n=r.map(e.updatedPageIds,function(e){return t.pointers.components.getPage(e,I.VIEW_MODES.MOBILE)});r.forEach(n,r.partial(m.convertModes,t)),E.executeHook(E.HOOKS.MOBILE_CONVERSION.AFTER,null,[t,n,e.commitConversionResults]),e.commitConversionResults&&l.commitResults(t),r.forEach(e.updatedPageIds,function(e){return t.siteAPI.createPageAnchors(e,{forceMobileStructure:!0,applyGroupingAnchors:!0})})}function C(e,n,r){var o=t.pointers.components.getPage(n,I.VIEW_MODES.MOBILE),i=t.pointers.getInnerPointer(o,"mobileComponents");t.dal.full.set(i,e),p.updateHiddenComponentsOnPage(t,n),p.markPageAsInitialized(t,n),n===I.MASTER_PAGE_ID&&(v.applyDataToTinyMenu(t),v.addAdditionalStyles(t)),r&&O({updatedPageIds:[n],commitConversionResults:r.commitConversionResults})}function _(e,t){r.forEach(e,function(e,t){return C(e,t)}),t&&O({updatedPageIds:r.keys(e),commitConversionResults:t.commitConversionResults})}function D(e,a){var l=r.values(o.conversionUtils.getAllCompsInStructure(e)).concat(o.conversionUtils.isMasterPage(e)?[]:[e]),p=!a;if(e.mobileComponents=[],r.forEach(l,function(n){var r=a&&o.conversionUtils.getComponentByIdFromStructure(n.id,a)||n,s=u.modifyComponentProperties(t,n,e.id,{override:p}),c=r.propertyQuery&&t.pointers.data.getPropertyItem(i.stripHashIfExists(r.propertyQuery),e.id),l=!p&&c&&t.dal.isExist(c)?r.propertyQuery:n.propertyQuery;n.propertyQuery=r.propertyQuery=s||l,g.createConversionData(t,n,e.id)}),a){var f=r.filter(o.conversionUtils.getAllCompsInStructure(a),function(e){return A.isMobileOnlyComponentToBeMockedInDesktop(e)});r.forEach(f,function(n){return g.createConversionDataForMobileOnlyComp(t,n,e.id)})}return S.reduceAllTextsData(t,l,e.id),function(e,i){return c.applyPresetsToConversionData(t,e,i.id),r.forEach(e,function(e){var a=r.get(e,["conversionData","preset"]);if(a){var c=Math.random()<.1;a.conversionData.isCustomPreset&&c&&t.siteAPI.reportBI(s.events.CUSTOM_MOBILE_PRESET_APPLIED,{componentId:e.id,pageId:i.id});var l=d.getConversionSettings({conversionType:"MERGE_PRESET",heuristicStrategy:n});u.createPropertiesAccordingToPreset(t,a,i.id),o.conversion.mergeDesktopStructureWithMobile(e,a,l),r.set(e,["conversionData","preset"],a)}else r.has(e,["conversionData","mobileProps"])&&u.createPropertiesAccordingToConversionData(t,e,i.id)}),i}(l,r.set(e,"conversionData",r.get(e,"conversionData",{})))}function w(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=r.get(l.getAggregatedPages(t),"desktop");_(r.mapValues(n,function(e){var t=D(y.objectUtils.cloneDeep(e)),n=P.extractNonLayoutComponentsFromPages(e,t),r=o.conversion.convertDesktopPageToMobile(t,o.conversionUtils.getChildren(t),T);return P.insertNonLayoutComponentsToPage(t,n),r}),{commitConversionResults:e})}var b=function(e,t){var n=r.get(e,I.MASTER_PAGE_ID,null);if(!n)return!1;var i=r.get(t,I.MASTER_PAGE_ID,null);if(!i)return!0;var a=o.conversionUtils.getChildren(n),s=o.conversionUtils.getChildren(i),u={id:"SOSP_CONTAINER_CUSTOM_ID"};return r.some(a,u)&&!r.some(s,u)};return{getComponentsOrder:function(e){var n=d.getConversionSettings({heuristicStrategy:"accessibility",conversionType:"FULL"}),i=function(e){return r.get(e,["conversionData","componentsOrder"],function(e){return r.map(e.components,"id")}(e))},a=t.pointers.page.getComponentsMapPointer(e,I.VIEW_MODES.DESKTOP),s=t.dal.get(a,!0),u=y.mobileUtils.buildDeepStructure(s[e],s);!function(e){e.mobileComponents=[];var n=r.values(o.conversionUtils.getAllCompsInStructure(e)).concat(o.conversionUtils.isMasterPage(e)?[]:[e]);r.forEach(n,function(n){g.createConversionData(t,n,e.id)})}(u),o.conversion.inspectStructure(u,o.conversionUtils.getChildren(u),n);var c=o.conversionUtils.getAllCompsInStructure(u),l=function(e){return"RESCALE_VIRTUAL_GROUP"===c[e].componentType};return r.reduce(c,function(e,t){if(!r.has(t,"components")||l(t.id))return e;var n=r.reduce(i(t),function(e,t){return e.concat(l(t)?i(c[t]):[t])},[]);return r.set(e,t.id,n)},{})},inspect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=t.dal.get(t.pointers.page.getAllPagesPointer()),i=r.mapValues(n,function(e,n){return t.dal.get(t.pointers.page.getPagePointer(n))});return r.transform(i,function(t,n,i){var a=n.structure.DESKTOP,s=y.mobileUtils.buildDeepStructure(a[i],a);D(s),o.conversion.inspectStructure(s,o.conversionUtils.getChildren(s),e);var u=r.transform(o.conversionUtils.getAllCompsInStructure(s),function(e,t){return r.isEmpty(r.get(t,["conversionData","componentsOrder"]))||(e[t.id]=t.conversionData.componentsOrder),e},{});return t.reducedPages.push(s),t.componentsOrder.push(u),t},{reducedPages:[],componentsOrder:[]})},executeConversion:function(e){return o.conversion.convertDesktopPageToMobile(e,o.conversionUtils.getChildren(e),T)},runMobileMergeOnAllPages:function(e){var i,s;if(y.loggingUtils.performance.start(y.loggingUtils.performanceMetrics.MOBILE.MERGE_ALL_PAGES),i=I.VIEW_MODES.DESKTOP,s=t.pointers.components,r.every([s.getFooter(i),s.getHeader(i),s.getPagesContainer(i)],t.dal.isExist))if(f.hasMobileStructure(t)){E.executeHook(E.HOOKS.MOBILE_MERGE.BEFORE,null,[t]);var u=l.getAggregatedPages(t);if(!r.isEmpty(u)){var c=u.desktop,p=u.mobile;!function(e,t){var n=r.difference(r.keys(e),r.keys(t));r.forEach(n,function(n){var r=e[n],i=y.objectUtils.cloneDeep(r);t[n]=i,D(i);var a=P.extractNonLayoutComponentsFromPages(r,i);o.conversion.convertDesktopPageToMobile(i,[],T),P.insertNonLayoutComponentsToPage(i,a)})}(c,p);var g={};r.forOwn(c,function(e,t){var n=p[t];D(e,n),g[t]=P.extractNonLayoutComponentsFromPages(e,n),A.handleComponentsBeforeMobileAlgo(e,n)});var m=d.getConversionSettings({conversionType:"MERGE_ALL_PAGES",heuristicStrategy:n});m.fixMasterPageStructureOrder=b(c,p);var v=o.conversion.mergeDesktopPagesWithMobile(c,p,m);r.forOwn(c,function(e,t){var n=p[t];P.insertNonLayoutComponentsToPage(n,g[t]),A.handleComponentsAfterMobileAlgo(e,n)}),_(v,{commitConversionResults:e}),y.loggingUtils.performance.finish(y.loggingUtils.performanceMetrics.MOBILE.MERGE_ALL_PAGES)}}else w(e);else t.siteAPI.reportBI(a.MOBILE_STRUCTURE_NOT_SAVED_DUE_TO_CORRUPTION)},runMobileMergeOnPage:function(e,t,n){D(e,t);var r=P.extractNonLayoutComponentsFromPages(e,t);A.handleComponentsBeforeMobileAlgo(e,t);var i=o.conversion.mergeDesktopStructureWithMobile(e,t,n);P.insertNonLayoutComponentsToPage(t,r),A.handleComponentsAfterMobileAlgo(e,t),C(i,e.id,{commitConversionResults:!1})},runMobileConversionOnPage:function(e){y.loggingUtils.performance.start(y.loggingUtils.performanceMetrics.MOBILE.CONVERT_PAGE);var t=y.objectUtils.cloneDeep(e);D(t);var n=P.extractNonLayoutComponentsFromPages(e,t),r=o.conversionUtils.getChildren(t),i=o.conversion.convertDesktopPageToMobile(t,r,T);P.insertNonLayoutComponentsToPage(t,n),C(i,e.id,{commitConversionResults:!1}),y.loggingUtils.performance.finish(y.loggingUtils.performanceMetrics.MOBILE.CONVERT_PAGE)},runMobileConversionOnAllPages:w,syncMobileSite:function(){var e=l.getAggregatedPages(t);if(!r.isEmpty(e)){var n=r.difference(r.keys(e.desktop),r.keys(e.mobile));r.forEach(n,function(t){var n=y.objectUtils.cloneDeep(e.desktop[t]);e.mobile[t]=n}),h.validateMobileHintsOnPages(t,r.keys(e.desktop));var i={};r.forOwn(e.desktop,function(t,n){var r=e.mobile[n];D(t,r),i[n]=P.extractNonLayoutComponentsFromPages(t,r),A.handleComponentsBeforeMobileAlgo(t,r)});var a=o.conversion.synchronizePages(e.desktop,e.mobile);r.forOwn(e.desktop,function(t,n){var r=e.mobile[n];P.insertNonLayoutComponentsToPage(r,i[n]),A.handleComponentsAfterMobileAlgo(t,r)}),_(a,{commitConversionResults:!0})}},applyConvertedComponentsMap:_,applyConvertedComponentsToPage:C,prepareConversion:D}}})},function(e,t,n){e.exports={events:n(449).events}},function(e){e.exports=JSON.parse('{"CUSTOM_MOBILE_PRESET_APPLIED":{"endpoint":"editor","eventId":664,"src":38,"params":{"component_id":"componentId","page_id":"pageId"}}}')},function(e,t,n){e.exports=function(){var e=n(0),t=n(12),r=n(2),o=n(10),i=n(3),a=function(t,n){return e.get(i.getMobileHintsItem(t,n),"hidden",!1)};function s(n,r,o){var a=e.get(r,["conversionData","mobileProps"],{});if(e.isEmpty(a))return!1;var s=i.generateNewPropertiesItemId(),u=n.pointers.data.getPropertyItem(t.stripHashIfExists(s),o),c=e.set(a,"id",s);return n.dal.set(u,c),r.propertyQuery=s,!0}return{modifyComponentProperties:function(n,i,s,u){var c=i.propertyQuery,l=i.componentType;if(!c||!l)return null;var p=n.pointers.data.getPropertyItem(t.stripHashIfExists(c),s);if(!p)return null;var d=n.pointers.components.getPage(s,r.VIEW_MODES.DESKTOP),g=n.pointers.components.getComponent(i.id,d);if(a(n,g))return null;var f=n.dal.get(p);if(!f)return null;var m=o.public.getDefaultMobileProperties(n,i,f);if(!m)return null;var v=function(n){var o=t.stripHashIfExists(n);return(e.startsWith(o,r.DOM_ID_PREFIX.MOBILE)?"":r.DOM_ID_PREFIX.MOBILE)+o}(c),y=n.pointers.data.getPropertyItem(t.stripHashIfExists(v),s),E=n.dal.get(y)||{};return e.get(E,"metaData.autoGenerated",!0)||u.override?(e.mergeWith(E,f,{metaData:{autoGenerated:!0}},m,function(t,n){if(e.isArray(n)&&e.isArray(t))return n}),E.id=v,n.dal.set(y,E),v):v},createPropertiesAccordingToPreset:function t(n,r,o){s(n,r,o)&&delete r.conversionData.mobileProps,r.components&&e.forEach(r.components,function(e){return t(n,e,o)})},createPropertiesAccordingToConversionData:s}}()},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e,t=n(0),i=n(6),a=n(55),s=n(27),u=n(1),c=n(3),l=n(2),p=n(31),d=n(75),g={STUDIO:"studio",DUPLICATE:"duplicate"},f={nestOverlayingSiblings:!1,keepIfVerticalDivider:!1,isSuitableForProportionGrouping:!1,hideByDefault:!1},m={GENERAL_HINTS_PROPERTIES:["id","metaData","type"],GENERAL_PRESET_DATA:["author"],SIZE_DATA:["recommendedHeight","recommendedWidth","recommendedScale","originalCompId"],OFFSET_DATA:["offsetX","offsetY","offsetOrigin","orderIndex"]},v=function(e,t,n){return e.pointers.components.getPage(t,n||l.VIEW_MODES.DESKTOP)},y=function(e){return function(e){return e&&t.some(m.SIZE_DATA,function(n){return t.has(e,n)})}(e)||function(e){return e&&t.some(m.OFFSET_DATA,function(n){return t.has(e,n)})}(e)},E=function(e,n,r){return t.get(c.getMobileHintsItemById(e,r.mobileHintsQuery,n),"orderIndex")};function I(e,n,r){var o=t.set({},r,p.getMobileActiveModesMap(e,r));return u.fullToDisplayedJson.getDisplayedJson(n,o,r).structure}function S(e,n){var r=e.pointers.components.getPageOfComponent(n),o=e.siteAPI.getDeepStructure?e.siteAPI.getDeepStructure(n):e.dal.full.get(n),i=function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[n.id]=n,t.forEach(n.components,function(t){return e(t,r)}),r}(o);return function n(o){var a=I(e,o,r.id);if(t.get(a,"mobileStructure")){var u=s.mobileHints.parseMobilePreset(a);!function(e,n,r,o){t.forEach(n,function(n,i){var a=e.pointers.full.components.getComponent(i,r),s=o[i],u=I(e,s,r.id);t.has(u,["mobileStructure","props"])&&(n.props=u.mobileStructure.props),c.updateMobileHintsItem(e,a,n)})}(e,u,r,i),function(e,n,r){t.forEach(n,function(t){var n=e.pointers.full.components.getComponent(t,r),o=e.pointers.getInnerPointer(n,"mobileStructure");e.dal.full.remove(o)})}(e,t.keys(u),r)}else t.forEach(o.components,function(e){n(e)})}(o)}function h(e,n){var r=e.pointers.components.getChildren(n);t.forEach(r,h.bind(null,e));var o=c.getMobileHintsItem(e,n);t.get(o,"author")===g.DUPLICATE&&c.deleteMobileHintsItem(e,n)}function P(e,t,n){var r=e.pointers.components.getComponent(t,v(e,n,l.VIEW_MODES.MOBILE));if(!r||!e.dal.isExist(r))return null;if(!d.isMobileComponentPropertiesSplit(e,r))return null;var o=c.getPropertyItemPointer(e,r);return o&&e.dal.isExist(o)?e.dal.get(o):null}function A(e,n,r){if(!e.pointers.components.isMobile(n)){var i=c.getMobileHintsItem(e,n);if(y(i)){var a=t.omit(i,[].concat(o(r),o(m.GENERAL_HINTS_PROPERTIES)));c.deleteMobileHintsItem(e,n),t.isEmpty(a)||c.updateMobileHintsItem(e,n,a)}}}function T(e,n){var r=t.concat(m.OFFSET_DATA,m.SIZE_DATA,m.GENERAL_PRESET_DATA);A(e,n,r);var o=e.pointers.components.getChildren(n);t.forEach(o,function(t){return T(e,t)})}function O(e,t){A(e,t,m.OFFSET_DATA)}function C(e,n){var r=e.pointers.components.getChildren(n);t.forEach(r,function(t){return O(e,t)}),_(e,n)}function _(e,t){A(e,t,["recommendedHeight"]);var n=e.pointers.components.getParent(t);n&&!e.pointers.components.isPage(n)&&_(e,n)}var D=(r(e={},i.HOOKS.CHANGE_PARENT.BEFORE,function(e,t,n){if(!e.pointers.components.isMobile(t)){T(e,t),C(e,n);var r=e.pointers.components.getParent(t);C(e,r)}}),r(e,i.HOOKS.ADD_ROOT.BEFORE,function(e,t,n){e.pointers.components.isMobile(t)||e.pointers.components.isPage(t)||(C(e,n),O(e,t),e.pointers.components.isPage(n)||T(e,t))}),r(e,i.HOOKS.REMOVE.BEFORE,function(e,t,n){if(!(e.pointers.components.isMobile(t)||e.pointers.components.isPage(t)||n)){var r=e.pointers.components.getParent(t);C(e,r)}}),e);function w(e,n,r){return t.isEmpty(n)||t.every(n,function(n){return t.isNumber(E(e,r,n))})?t(n).reject(["conversionData.mobileHints.hidden",!0]).sortBy(function(t){return E(e,r,t)}).map("id").value():null}return{createDuplicateMobilePreset:function(e,n,r,o){var i=e.pointers.components.getMobilePointer(r);if(n&&i&&e.dal.isExist(i)){var s=e.siteAPI.isQaMode(),c=a.getCommittedMobileComponent(e,n,i);if(c&&(s||!y(o.mobileHints))){var l=P(e,i.id,n);t.set(o,"mobileStructure",{layout:u.objectUtils.cloneDeep(c.layout),props:l?t.omit(l,"id"):void 0,metaData:{originalCompId:i.id,author:g.DUPLICATE}})}}},removeAutomaticPresets:h,initialize:function(){i.registerHook(i.HOOKS.ADD_ROOT.AFTER,S),t.forEach(D,function(e,t){return i.registerHook(t,e)}),i.registerHook(i.HOOKS.MOBILE_CONVERSION.AFTER,function(e,n,r){r&&t.forEach(n,function(t){return h(e,e.pointers.components.getPage(t.id,l.VIEW_MODES.DESKTOP))})})},applyPresetsToConversionData:function e(n,r,o){t.forEach(r,function(r){var i=c.getMobileHintsItemById(n,r.mobileHintsQuery,o);if(e(n,r.components,o),y(i)){var a=i.originalCompId,s=a?P(n,a,o):null;t.assign(r.conversionData,{mobileScale:i.recommendedScale||r.conversionData.mobileScale,mobileProps:s||i.props||r.conversionData.mobileProps},f),t.assign(r.conversionData.mobileHints,t.pick(i,["recommendedHeight","recommendedWidth","offsetX","offsetY","offsetOrigin"]),{recommendedComponentsOrder:w(n,r.components,o)})}})},testAPI:{getRecommendedComponentsOrder:w,handleMobileStructure:S,getMobilePropsIfForked:P,removePresetData:A,removeAllPresetDataRecursively:T,removeOffsetDataOfChildren:C,removeHeightOfParent:_}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(27),r=n(23),o=n(12),i=n(9),a=n(10),s=n(3),u=n(8),c=n(453);function l(e,t){var n=t.styleId;return n?i.styles.get(e,n):null}function p(t,n,r){return e.get(n.designQuery&&s.getDesignItemById(t,n.designQuery.replace("#",""),r),"background")}function d(t,n,r){var o=e.get(n,"mobileHintsQuery","");return e.get(o?s.getMobileHintsItemById(t,o,r):{},"hidden",!1)}function g(t,n,r){return e.has(p(t,n,r),"mediaRef")}function f(t,n){var r=e.get(t,"conversionData",{}),o=e.assign(r,n);e.assign(t,{conversionData:e.omitBy(o,e.isNull)})}return{createConversionData:function(n,i,s){var m=a.public.getMobileConversionConfig(n,i,s),v=e.assign({},e.clone(i),{conversionData:m}),y={},E=function(t,n){return+(""+e.get(l(t,n),["style","properties","brw"],"0")).match(/\d/g).join("")}(n,i);y.borderWidth=E||null,y.isSolidColorBackground=function(t,n,r){return"columns"===e.get(n,["conversionData","category"])?1===e.size(n.components)&&!g(t,n.components[0],r):("column"===e.get(n,["conversionData","category"])||"wysiwyg.viewer.components.StripContainer"===n.componentType)&&!g(t,n,r)}(n,v,s)||null;var I=function(t,n,r,o){if(o||"column"===e.get(n,["conversionData","category"]))return+e.get(p(t,n,r),"colorOpacity",1);if("mobile.core.components.Container"!==n.componentType)return 1;var i=l(t,n),a=e.get(i,"skin");return"wysiwyg.viewer.skins.area.RectangleArea"!==a&&"wysiwyg.viewer.skins.area.DefaultAreaSkin"!==a?1:+e.get(i,["style","properties","alpha-bg"],1)}(n,v,s,y.isSolidColorBackground);y.isSemiTransparentContainer=I<1,y.isTransparentContainer=!E&&0===I,y.backgroundColor=function(t,n,r){var o=n.designQuery?e.get(p(t,n,r),"color",null):e.get(l(t,n),["style","properties","bg"],null);return o?o.replace(/[{}]/g,""):null}(n,i,s),y.shouldApplyPreset=function(t,n,i){var a=e.get(n,["modes","definitions"]);if(e.isEmpty(a))return!0;var s=n.propertyQuery,u=s?t.pointers.data.getPropertyItem(o.stripHashIfExists(s),i):null;if(!u)return!0;var c=t.dal.get(u)||{},l=c.mobileDisplayedModeId&&e.find(a,"modeId",c.mobileDisplayedModeId);return e.get(l,"type")!==r.siteConstants.COMP_MODES_TYPES.DEFAULT}(n,i,s),y.mobileHints={hidden:d(n,i,s)};var S=c.getComponentSpecificConversionData(n,i,s);e.assign(y,S);var h=n.dal.get(n.pointers.general.getDockedRuntimeLayout());e.has(i,["layout","docked"])&&h[i.id]&&e.assign(i.layout.docked,h[i.id]),y.isScreenWidth=y.isScreenWidth||r.dockUtils.isHorizontalDockToScreen(i.layout)||r.dockUtils.isFullPageComponent(i.layout)||null,y.isNonContainableFullWidth=u.isNonContainableFullWidth(i.componentType),e.assign(y,m),f(i,y),function(n){e.defaults(n,{layout:{}}),delete n.layout.anchors,t.conversionUtils.isSiteSegmentOrPage(n)||t.conversionUtils.isMasterPage(n)?e.assign(n.layout,{fixedPosition:!1}):e.defaults(n.layout,{height:e.get(n,["conversionData","layoutLimits","minHeight"]),width:e.get(n,["conversionData","layoutLimits","minWidth"])},{height:r.siteConstants.COMP_SIZE.MIN_HEIGHT,width:r.siteConstants.COMP_SIZE.MIN_WIDTH,x:t.conversionConfig.COMPONENT_MOBILE_MARGIN_X,y:t.conversionConfig.COMPONENT_MOBILE_MARGIN_Y})}(i)},createConversionDataForMobileOnlyComp:function(e,t,n){f(t,a.public.getMobileConversionConfig(e,t,n)||{})}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(454),i=n(455),a=function(e,t){return i.getVectorImageConversionData(t)},s={"wysiwyg.viewer.components.SiteButton":o.getButtonConversionData,"wysiwyg.viewer.components.VectorImage":a,"wysiwyg.viewer.components.WPhoto":a,"wysiwyg.viewer.components.ClipArt":a},{getComponentSpecificConversionData:function(e,t,n){return r.get(s,t.componentType,r.noop)(e,t,n)||null}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g;e.exports=(r=n(0),o=n(27),i=n(1),a=n(9),s=14,u=10,c=24,l={breakPoints:[16,19,24],value:[42,48,54]},p={breakPoints:[7,14,20,30,100],value:[120,160,200,240,280]},d=function(e,t){var n=t.breakPoints,o=Math.min(e,r.last(n)),i=r.findIndex(n,function(e){return o<=e});return t.value[i]},g=function(e,t){return{height:d(e,l),width:d(t,p)}},{getButtonConversionData:function(e,t,n){var l=function(e,t,n){if(!t)return s;var o=a.styles.get(e,t,n),i=r.get(o,["style","properties","fnt"],""),u=r.get(i.match(/\d+px/),"0","".concat(s," + 'px'"));return+r.get(u.match(/\d+/),"0",s)}(e,t.styleId,n),p=function(e,t,n){if(!t)return u;var o=e.pointers.data.getDataItem(t.replace("#",""),n);return r.get(e.dal.get(o),"label","").length||u}(e,t.dataQuery,n),d=Math.min(o.textUtils.convertFontSizeByTextLength(l,p),c),f={};return f.fixedSize=g(d,p),f.mobileScale=function(e,t){return e/i.mobileUtils.convertFontSizeToMobile(t,1)}(d,l),f}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(456),i={upToSize:60,convert:o.roundToNearestDecade},a={upToSize:400,convert:o.scaleByFactor,paramsForConvert:[o.buildScaleFactorDataStructure(.7,60,o.roundToNearestDecade)]},s={upToSize:980,convert:r.constant(280)},u=function(e,t){var n=[o.buildRangeDataStructure(i.upToSize,i.convert),o.buildRangeDataStructure(a.upToSize,a.convert,a.paramsForConvert),o.buildRangeDataStructure(s.upToSize,s.convert)],r=o.scaleByRange(e,n);return{width:r,height:o.scaleProportionally(t,r,e)}},{getVectorImageConversionData:function(e){var t=r.get(e,["layout","width"],0),n=r.get(e,["layout","height"],0);return{fixedSize:u(t,n)}}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o;e.exports=(o=n(0),{roundToNearestDecade:function(e){return 10*Math.round(e/10)},buildRangeDataStructure:function(e,t,n){return{upToValue:e,valueHandler:t,additionalParamsForHandler:n||[]}},buildScaleFactorDataStructure:function(e,t,n){return{scaleFactor:e,minValueLimit:t,roundFunction:n||Math.round}},scaleByRange:function(e,t){var n=Math.min(e,o.last(t).upToValue),i=o.find(t,function(e){return n<=e.upToValue}),a=i.valueHandler;return o.isFunction(a)?a.apply(void 0,[e].concat(r(i.additionalParamsForHandler))):a},scaleByFactor:function(e,t){var n=e*t.scaleFactor,r=t.roundFunction(n);return Math.max(t.minValueLimit,r)},scaleProportionally:function(e,t,n){var r=t&&n?t/n:1;return Math.round(e*r)}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(31),{convertModes:function(e,t){var n=e.pointers.components.getDesktopPointer(t),i=e.pointers.full.components.getChildrenRecursively(n),a=r(n).concat(i).flatMap(function(t){return o.getComponentModes(e,t)}).compact().filter(function(e){return"copyOverrides"===r.get(o.metaData,[e.type,"mobileConversionConfig"])}).map("modeId").value();if(!r.isEmpty(a)){var s=e.pointers.full.components.getChildrenRecursively(t);r.forEach(s,function(t){var n=e.pointers.components.getDesktopPointer(t),o=e.dal.full.get(e.pointers.componentStructure.getModes(n));if(o){var i=r(o.overrides).map(function(e){return r.defaults({modeIds:r.intersection(e.modeIds,a)},e)}).filter(function(e){return r.size(e.modeIds)}).value();r.isEmpty(i)||e.dal.full.set(e.pointers.componentStructure.getModes(t),r.defaults({overrides:i},o))}})}}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d;e.exports=(r=n(0),o=n(3),i=n(20),a=n(2),s=n(9),u=n(27),c="loginSocialBarRef",l="TinyMenu",p="TINY_MENU",d=function(e,t){return"wysiwyg.viewer.components.LoginSocialBar"===e.dal.get(e.pointers.getInnerPointer(t,"componentType"))},{applyDataToTinyMenu:function(e){var t=e.pointers.components.getPage(a.MASTER_PAGE_ID,a.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(a.MOBILE_ONLY_COMPONENTS.TINY_MENU,t);if(n&&e.dal.isExist(n)){!function(e,t){var n=e.pointers.data.getDataItemFromMaster("TINY_MENU");if(!e.dal.isExist(n)){var a=e.pointers.getInnerPointer(t,"dataQuery");e.dal.set(a,"#".concat(p));var s=i.services.createDataItemByType(l),u=r.assign({id:p},s);o.setDataItemByPointer(e,n,u,"data")}}(e,n),function(e,t){var n=e.pointers.getInnerPointer(t,"connectionQuery");e.dal.isExist(n)||(e.dal.set(n,"TINY_MENU_CONNECTION"),o.updateConnectionsItem(e,t,[]))}(e,n);var s=function(e){var t=e.pointers.components.getHeader(a.VIEW_MODES.DESKTOP),n=e.pointers.components.getChildrenRecursively(t),o=e.pointers.components.getPage(a.MASTER_PAGE_ID,a.VIEW_MODES.DESKTOP),i=e.pointers.components.getChildrenRecursively(o),s=r.unionBy(n,i,function(e){return e.id});return r.find(s,function(t){return d(e,t)})}(e),u=e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("TINY_MENU"),c),g=o.getConnectionsItem(e,n),f=o.getPlatformAppConnections(e,n),m=r.reject(g,function(e){var t=e.type,n=e.role;return r.find(f,{type:t,role:n})});if(s){var v=e.dal.get(e.pointers.getInnerPointer(s,"dataQuery"));e.dal.set(u,v);var y=o.getPlatformAppConnections(e,s),E=r.union(m,y);o.updateConnectionsItem(e,n,E)}else e.dal.isExist(u)&&(e.dal.remove(u),o.updateConnectionsItem(e,n,m))}},addAdditionalStyles:function(e){r.forOwn(u.mobileOnlyComponents.getAdditionalStyles(),function(t,n){if(!s.styles.get(e,n)){var o=r.assign({type:"TopLevelStyle",styleType:"system",id:n,metaData:{isHidden:!1,isPreset:!1}},t);s.styles.createAndAddStyleItem(e,o,n)}})}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(9),t=n(0),o=n(3),i=n(27),a=n(1);function s(n,r){if(t.isEmpty(r))return null;if(/^#\w{3,6}$/.test(r))return r;var o=t.get(r.match(/^\{(color_\d+)\}$/),1,"");return o?e.colors.get(n,o):null}var u=function(e){return/^color_\d+$/.test(e)},c=function(e){return/^font_\d{1,10}$/.test(e)},l=function(e){return t.pickBy(e,t.identity)};function p(n,r){if(u(r))return l({textColor:e.colors.get(n,r)});if(!c(r))return{};var o=e.fonts.get(n,r),i=/^\w+\s\w+\s\w+\s(-?\d+(?:\.\d+)?)px\/[\w\-.]*\s('[^']*'|[\w#$%&'()*+,.:;?@^_`~-]*)\s({\w+}|#\w{3,6})?$/.exec(o),a=s(n,t.get(i,3,""));return l({fontSize:+t.get(i,1,0),fontName:t.get(i,2),textColor:a})}function d(e){return t.size(e)?(e=" ".concat(e),l({fontSize:+t.get(e.match(/font-size:\s?(\d+(\.\d+)?)px/i),1,0),textAlignment:t.get(e.match(/text-align:\s?(left|right|center)/i),1),textColor:t.get(e.match(/[^-]color:\s*(#[\da-f]{3,6}|[a-z]{3,20})/i),1)})):{}}function g(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fontSize:0,fontName:"",textAlignment:"left",textColor:""},a={textLength:0,accumulatedFontSize:0,accumulatedNormalizedFontSize:0,textAlignments:[],textColors:[],fontNames:[]};if(t.get(n,"nodeType")===n.TEXT_NODE){var s=n.textContent.trim().length;return t.assign({textLength:s,accumulatedFontSize:s*o.fontSize,accumulatedNormalizedFontSize:s*i.textUtils.getFontSizeByFontName(o.fontName,o.fontSize)},s>0?{textAlignments:[o.textAlignment],fontNames:[o.fontName],textColors:[o.textColor]}:{textAlignments:[],textColors:[],fontNames:[]})}if(!n||!t.size(n.childNodes))return a;var u={};if(n.nodeType===n.ELEMENT_NODE){var c=n.getAttribute("class"),l=n.getAttribute("style");t.defaults(u,d(l),p(e,c))}return t.defaults(u,o),t.reduce(n.childNodes,function(t,n){var o=g(e,n,u);return{fontNames:[].concat(r(t.fontNames),r(o.fontNames)),textColors:[].concat(r(t.textColors),r(o.textColors)),textAlignments:[].concat(r(t.textAlignments),r(o.textAlignments)),textLength:t.textLength+o.textLength,accumulatedFontSize:t.accumulatedFontSize+o.accumulatedFontSize,accumulatedNormalizedFontSize:t.accumulatedNormalizedFontSize+o.accumulatedNormalizedFontSize}},a)}function f(e,n){var r=g(e,n),o=r.textLength,s=r.accumulatedNormalizedFontSize/o,u=function(e,t){return i.textUtils.convertFontSizeByTextLength(e,t)/a.mobileUtils.convertFontSizeToMobile(e,1)}(s,o),c=r.accumulatedFontSize/r.textLength,l=a.mobileUtils.convertFontSizeToMobile(c||0,1);return{fontNames:t.uniq(r.fontNames),textLength:o,actualTextWidth:"undefined"!=typeof window?n.clientWidth+1:void 0,textAlignments:t.uniq(r.textAlignments),textColors:t.uniq(r.textColors),averageFontSize:c,mobileAdjustedAverageFontSize:l,averageNormalizedFontSize:s,mobileScale:u}}return{reduceAllTextsData:function(e,n,r){var s=a.fragment.document.createElement("DIV"),u=t(n).filter(i.conversionUtils.isTextComponent).map(function(n){return function(e,n,r,i){var s=a.fragment.document.createElement("DIV");return s.innerHTML=n.dataQuery?t.get(o.getDataItemById(e,n.dataQuery.replace("#",""),r),"text",""):"",s.setAttribute("style","opacity: 0; max-width: none !important; white-space: nowrap; position: absolute"),i.appendChild(s),{htmlElement:s,component:n}}(e,n,r,s)}).value();window.document.body.appendChild(s),t.forEach(u,function(n){return t.assign(n.component.conversionData,f(e,n.htmlElement))}),window.document.body.removeChild(s)},testAPI:{getTextColorValue:s,getFontDataByClassName:p,getFontDataByStyleAttribute:d,getAccumulatedTextStats:g}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(27);function r(n){var i=t.conversionUtils.getChildren(n),a=e.remove(i,o);return e.concat(a,e.flatMap(i,r))}function o(t){var n=e.get(t,["conversionData","desktopOnly"],!1),r=e.get(t,["conversionData","nonLayoutComponent"],!1);return!n&&r}return{extractNonLayoutComponentsFromPages:function(n,o){var i=r(n);return o&&!e.isEmpty(i)&&function n(r,o){var i=t.conversionUtils.getChildren(r);e.remove(i,function(t){return e.some(o,["id",t.id])}),e.forEach(i,function(e){return n(e,o)})}(o,i),i},insertNonLayoutComponentsToPage:function(n,r){var o,i;!function(n,r){e.forEach(r,function(t){return e.assign(t.layout,{width:0,height:0,x:0,y:0})}),t.conversionUtils.addComponentsTo(n,r)}((o=n,1===(i=t.conversionUtils.getChildren(o)).length&&"wysiwyg.viewer.components.PopupContainer"===i[0].componentType?i[0]:o),r)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(116),r=n(4),o=n(10),i=n(11);function a(n,r,i){return e.includes(t.getMatchingChildSlideType(r),o.getComponentType(n,i))}function s(t,n,o){return e.reject(r.getChildren(t,n),a.bind(null,t,o))}function u(t,n,o){return e.filter(r.getChildren(t,n),a.bind(null,t,o))}function c(t,n){var i=o.getComponentType(t,n),a=e.find(u(t,n,i),function(e){return r.isRenderedOnSite(t,e)}),c=s(t,n,i);return a?[a].concat(c):c}function l(e,t,n){if(e.pointers.components.isPage(t))return null;for(var i=r.getContainer(e,t);i&&!e.pointers.components.isPage(i);){if(o.getComponentType(e,i)===n)return i;i=r.getContainer(e,i)}return null}function p(e,n,r){var i=o.getComponentType(e,n),a=t.getMatchingChildSlideType(r);return"MOBILE"!==n.type&&i!==a&&!!l(e,n,r)}return{getMasterChildren:s,getNonMasterChildren:u,getCurrentRenderedChildren:c,isMasterChild:function(e,n,r){var o=t.getMatchingChildSlideType(r);return p(e,n,r)&&!l(e,n,o)},canBeMasterChild:p,toggleMasterChild:function(n,r,a){var s,u=l(n,r,a),p=t.getMatchingChildSlideType(a);u&&o.getComponentType(n,r)!==p&&(s=l(n,r,p)?u:e.find(c(n,u),function(e){return o.getComponentType(n,e)===p}),i.setContainer(n,void 0,r,s))},getParentCompWithOverflowHidden:function(e,t,n){var o=l(e,t,n);return r.properties.get(e,o).shouldHideOverflowContent?o:null}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(1);function o(e,n,r,o){var i=t.getDataItem(e,n);i.text=r,i.linkList=o,t.updateDataItem(e,n,i)}var i=function(t,n,i,a){var s=e.clone(a);e.forEach(i,function(e){if(e.id){var t=r.guidUtils.getUniqueId("link","-",{bucket:"links"});s=s.replace("#".concat(e.id),"#".concat(t)),e.id=t}}),o(t,n,s,i)};return{setLinksCustomData:function(n,o,i){var a=n.pointers.components.getAllDisplayedOnlyComponents(o);return e.forEach(a,function(o){var a=t.getDataItem(n,o),s=r.displayedOnlyStructureUtil.getRepeaterItemId(o.id),u=s||o.id;e.has(a,"linkList")&&a.linkList.length>0&&e.set(i,["linkList",u],a.linkList)}),{success:!0,description:"Added text links to the custom component structure"}},fixTextLinksAfterSetContainerToRepater:function(n,i,a){if(r.displayedOnlyStructureUtil.isRepeatedComponent(a.id)){var s=n.pointers.components.getAllDisplayedOnlyComponents(i),u=t.getDataItem(n,i);e.forEach(s,function(r){var i,a,s,c,l=t.getDataItem(n,r),p=(i=l.text,a=u.linkList,s=l.linkList,c=e.clone(i),e.forEach(a,function(e,t){var n=e.id,r=s[t].id;c=c.replace("#".concat(n),"#".concat(r))}),c);o(n,r,p,l.linkList)})}},duplicateLinksDataItems:function(t,n,o){if(!o.custom)return{success:!0,description:"Duplicated text links data items"};var a=t.pointers.components.getAllDisplayedOnlyComponents(n);return e.forEach(a,function(n){var a=r.displayedOnlyStructureUtil.getRepeaterItemId(n.id),s=a||o.originCompId,u=a?o.data.overrides[a]:o.data,c=e.cloneDeep(o.custom.linkList[s]);i(t,n,c,u.text)}),{success:!0,description:"Duplicated text links data items"}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(76),r=n(184),o=n(4),i=n(30);function a(t,n){var r=o.data.get(t,n);return e.get(t.siteAPI.getClientSpecMap(),[r.applicationId,"appDefinitionId"])===i.APP_DEF_ID.CHAT}return{addedGluedWidget:function(e,n){a(e,n)&&!function(e){return r.isEnabled(e)}(e)&&t.addQuickActionBar(e)},willRemoveGluedWidget:function(n,r){a(n,r)&&e(t.getActions(n)).reject("isDynamic").isEmpty()&&t.removeQuickActionBar(n)}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(76),i=n(3),{enforceIconLimitations:function(e,t,n){var a=r.defaults({},n,i.getDataItem(e,t));o.validateActionItemData(a),r.assign(n,r.pick(a,["itemType","icon","text"]))}})},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,i;e.exports=(o=n(0),i=n(1),function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=i.urlUtils.parseUrl(t),this.url.query={}}var t,n,a;return t=e,(n=[{key:"addLangParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.lang=e),this}},{key:"addOriginParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.eo=window.btoa(e)),this}},{key:"addDevAppParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.appDefinitionId=e),this}},{key:"addCompIdParam",value:function(){return this.url.query.compId="MarketPanel",this}},{key:"addAppMarketTests",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.experiment=e),this}},{key:"addMetaSiteIdParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.metaSiteId=e),this}},{key:"addModalParams",value:function(e,t,n){return e&&(this.url.path+="/".concat(e,"/").concat(t,"/"),n&&(this.url.path+="".concat(n,"/"))),this}},{key:"addSiteIdParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.siteId=e),this}},{key:"addTagsParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.query=e),this}},{key:"addOpenAppParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.openAppDefId=e),this}},{key:"addAppMarketParams",value:function(e){return e&&(this.url.query.appMarketParams=e),this}},{key:"addNewWixStores",value:function(e){return o.isUndefined(e)||(this.url.query.newWixStores="".concat(e)),this}},{key:"addCategoryParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.categorySlug=e),this}},{key:"addBiReferralInfoParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.referralInfo=e),this}},{key:"addBiReferralInfoCategoryParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.referralInfoCategory=e),this}},{key:"addBiSectionParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.section=e),this}},{key:"addAddingMethodParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.addingMethod=e),this}},{key:"addStateParam",value:function(e){return e&&!o.isEmpty(e)&&(this.url.query.state=e),this}},{key:"build",value:function(){return i.urlUtils.buildFullUrl(this.url)}}])&&r(t.prototype,n),a&&r(t,a),e}())},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(3),i=n(6),a=n(27),s=n(55),u=n(41),c=n(97),{setComponentDisplayMode:function(e,t,n){var l=e.pointers.components.getDesktopPointer(t);if(!function(e,t){var n=e.dal.full.get(e.pointers.componentStructure.getModesDefinitions(t));return r.size(n)>1}(e,l))return null;var p=e.pointers.components.getPageOfComponent(t).id,d=e.pointers.page.getPagePointer(p);o.updatePropertiesItem(e,l,{mobileDisplayedModeId:n});var g=e.dal.get(e.pointers.getInnerPointer(d,"componentType"));i.executeHook(i.HOOKS.MOBILE_CONVERSION.BEFORE,g,[e,d]);var f=s.getPage(e,p),m=a.conversionUtils.extractMobilePage(f);!function e(t,n){var o=r.remove(t,n);return!r.isEmpty(o)||r.some(t,function(t){return e(t.components,n)})}(a.conversionUtils.getChildren(m),{id:t.id});var v=c.getConversionSettings({conversionType:"MERGE_DISPLAY_MODE"});u.runMobileMergeOnPage(e,f,m,v)}})},function(e,t,n){e.exports=function(){var e=n(11),t=n(10),r=n(4),o=n(27),i=n(0),a=function(e,n,r,o){return t.public.getMobileConversionConfigByName(e,e.dal.get(n),o,r)},s=function(e,t,n){return i.filter(n,function(n){return c(r.layout.get(e,n))>t.y})},u=function(t,n,o){return e.updateCompLayout(t,n,{y:r.layout.get(t,n).y+o})},c=function(e){return e.y+e.height},l=function(e){return[e.y,c(e)]},p=function(e,t,n){return i.filter(n,function(n){return o.conversionUtils.getRangesOverlap(l(r.layout.get(e,n)),l(t))>0})};function d(e,t,n){var o=p(e,t,n),a=function(e,t,n){if(i.isEmpty(n))return{overlappingSiblingsOffset:0,lowerSiblingsOffset:t.height};var o=i.minBy(n,function(t){return r.layout.get(e,t).y}),a=r.layout.get(e,o).y-t.y,s=i.maxBy(n,function(t){return c(r.layout.get(e,t))}),u=c(t)-c(r.layout.get(e,s));if(a>0&&u>0)return{overlappingSiblingsOffset:a,lowerSiblingsOffset:a+u};if(a>0&&u<=0)return{overlappingSiblingsOffset:a,lowerSiblingsOffset:a};if(a<=0&&u>0)return{overlappingSiblingsOffset:0,lowerSiblingsOffset:u};return{overlappingSiblingsOffset:0,lowerSiblingsOffset:0}}(e,t,o);a.overlappingSiblingsOffset>0&&i.forEach(o,function(t){return u(e,t,-a.overlappingSiblingsOffset)});var s=i.difference(n,o);return a.lowerSiblingsOffset>0&&i.forEach(s,function(t){return u(e,t,-a.lowerSiblingsOffset)}),a.lowerSiblingsOffset}function g(e,t,n){return{freedRect:n=n||r.layout.get(e,t),parentPointer:r.getContainer(e,t),affectedComps:s(e,n,r.getSiblings(e,t))}}return{hideMobileComponent:function(t,n,o){if((arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateLayout:!0}).updateLayout){var s=g(t,n);r.deleteComponent(t,n,!1),function t(n,o,s){var u=d(n,o.freedRect,o.affectedComps);if(0!==u){var c=r.layout.get(n,o.parentPointer),l=a(n,o.parentPointer,s,"minHeight")||0,p=i.max([c.height-u,l]);if(e.updateCompLayout(n,o.parentPointer,{height:p}),r.getContainer(n,o.parentPointer)){var f=i.assign(c,{y:c.y+p,height:c.height-p});t(n,g(n,o.parentPointer,f),s)}}}(t,s,o)}else r.deleteComponent(t,n,!1)}}}()},function(e,t){e.exports={id:"MediaContainer0",style:{type:"ComponentStyle",styleType:"custom",compId:"",componentClassName:"wysiwyg.viewer.components.MenuContainer",pageId:"",skin:"wysiwyg.viewer.skins.inlinePopup.DefaultInlinePopup",style:{groups:{},properties:{bg:"color_15","alpha-bg":.6},propertiesSource:{bg:"theme","alpha-bg":"value"}},metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},type:"Container",components:[],skin:"wysiwyg.viewer.skins.inlinePopup.DefaultInlinePopup",layout:{width:260,height:200,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!0,docked:{top:{px:0},bottom:{px:0},right:{px:0}}},componentType:"wysiwyg.viewer.components.MenuContainer",behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FloatIn","delay":0,"duration":0.5,"params":{"direction":"right"},"action":"inlinePopupIn","targetId":"","viewMode":"MOBILE"},{"name":"Conceal","delay":0,"duration":0.5,"params":{"direction":"right"},"action":"inlinePopupOut","targetId":"","viewMode":"MOBILE"}]'},design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"{color_11}",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0,showOverlayForMediaType:"WixVideo",mediaRef:null,imageOverlay:null,filterEffect:null},charas:"design-jr0840d9",dataChangeBehaviors:[]}}},function(e,t){e.exports={type:"Component",skin:"wysiwyg.viewer.skins.inlinePopupToggle.inlinePopupToggleSkin4",layout:{width:50,height:50,x:261,y:19,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.MenuToggle",style:{type:"ComponentStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-bg":"0","alpha-bgOpen":"0",bg:"color_11",bgOpen:"color_11",bordercolor:"color_15",bordercolorOpen:"color_15","boxShadowToggleOn-shd":"false","boxShadowToggleOn-shdOpen":"false",lineColor:"color_15",lineColorOpen:"color_15",shd:"0px 1px 4px 0px rgba(0,0,0,0.6)",shdOpen:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{"alpha-bg":"value","alpha-bgOpen":"value",bg:"theme",bgOpen:"theme",bordercolor:"theme",bordercolorOpen:"theme","boxShadowToggleOn-shd":"value","boxShadowToggleOn-shdOpen":"value",lineColor:"theme",lineColorOpen:"theme",shd:"value",shdOpen:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.MenuToggle",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.inlinePopupToggle.inlinePopupToggleSkin4"},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"action":{"sourceId":"MENU_AS_CONTAINER_TOGGLE","name":"click","type":"comp"},"behavior":{"targetId":"MENU_AS_CONTAINER","name":"toggle","type":"comp"}}]'},activeModes:{}}},function(e,t){e.exports={type:"Component",skin:"wysiwyg.viewer.skins.ExpandableMenuSkin",layout:{width:188,height:392,x:30,y:100,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.ExpandableMenu",data:{type:"CustomMenuDataRef",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},menuRef:"#CUSTOM_MAIN_MENU"},props:{type:"ExpandableMenuProperties",metaData:{schemaVersion:"1.0",autoGenerated:!1},itemsAlignment:"left",menuArrowDirection:"right",originalHeight:225,menuItemHeight:56},style:{type:"ComponentStyle",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{SKINS_fntSubmenu:"normal normal normal 16px/1.4em din-next-w01-light {color_14}",SKINS_submenuBR:"90px",SKINS_submenuMargin:"0","alpha-SKINS_bgSubmenu":"0","alpha-bg":"0","alpha-bgexpanded":"0","alpha-bgh":"1","alpha-bgs":"0","alpha-bgsSub":"0","alpha-brd":.2,arrowColor:"color_15",bg:"color_11",bgexpanded:"color_11",bgh:"#E6EAF5",bgs:"color_11",bgsSub:"color_11","boxShadowToggleOn-shd":"false",brd:"color_15",brw:"0px 0px 0px 0px",fnt:"font_7",fntSubMenu:"font_7",menuSpacing:"10",rd:"90px",separatorHeight:"15",sepw:"1",shd:"0px 1px 4px 0px rgba(0,0,0,0.6)",subMenuSpacing:25,textSpacing:"0",txt:"color_15",txtexpanded:"color_15",txts:"color_18",txtsSub:"color_18"},propertiesSource:{SKINS_fntSubmenu:"value",SKINS_submenuBR:"value",SKINS_submenuMargin:"value","alpha-SKINS_bgSubmenu":"value","alpha-bg":"value","alpha-bgexpanded":"value","alpha-bgh":"value","alpha-bgs":"value","alpha-bgsSub":"value","alpha-brd":"value",arrowColor:"theme",bg:"theme",bgexpanded:"theme",bgh:"value",bgs:"theme",bgsSub:"theme","boxShadowToggleOn-shd":"value",brd:"theme",brw:"value",fnt:"theme",fntSubMenu:"theme",menuSpacing:"value",rd:"value",separatorHeight:"value",sepw:"value",shd:"value",subMenuSpacing:"value",textSpacing:"value",txt:"theme",txtexpanded:"theme",txts:"theme",txtsSub:"theme"},groups:{}},componentClassName:"wysiwyg.viewer.components.ExpandableMenu",pageId:"",compId:"",skin:"wysiwyg.viewer.skins.ExpandableMenuSkin"},connections:{type:"ConnectionList",items:[{type:"WixCodeConnectionItem",role:"expandableMenu1"}]},activeModes:{}}},function(e,t,n){var r,o,i;e.exports=(r=n(0),o={color1:"color_11",color2:"color_15",color3:"color_13"},i={color1:"#000000",color2:"#FFFFFF"},{getBackToTopButtonDefinition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{layout:{fixedPosition:!0,width:44,height:44,scale:1,rotationInDegrees:0,docked:r.defaults({},t,{bottom:{px:20},right:{px:20}}),y:522,x:262},componentType:"wysiwyg.viewer.components.BackToTopButton",type:"Component",skin:"skins.viewer.VectorImageSkin",data:{type:"VectorImage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},svgId:e?"a3c153_64191a64b70a446fb44c9be3fce6df77.svg":"a3c153_8f424995247e4e4b9083564be3aa7c01.svg",link:{type:"AnchorLink",anchorDataId:"SCROLL_TO_TOP",pageId:"#masterPage",anchorName:"Top of Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}},props:{type:"VectorImageProperties",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1,autoGenerated:!1},displayMode:"fit"},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FadeIn","delay":0,"duration":0.5,"action":"backToTopIn","targetId":"","viewMode":"MOBILE","params":{}}]',metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},design:{type:"VectorImageDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},overrideColors:e?i:o,shapeStyle:{opacity:e?.6:1}},style:{type:"ComponentStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{groups:{},properties:{},propertiesSource:{}},componentClassName:"wysiwyg.viewer.components.VectorImage",pageId:"",compId:"",styleType:"custom",skin:"skins.viewer.VectorImageSkin"},connections:{type:"ConnectionList",items:[{type:"WixCodeConnectionItem",role:"backToTop"}],metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},activeModes:{}}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(133),r=(n(5),n(13)),o=n(22),i=n(52);function a(e){return r.getProperty(e,r.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES)||[]}function s(e){return r.getProperty(e,r.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD)||{}}function u(t,n,o){var i=a(t),s=o?e.union(i,[n]):e.difference(i,[n]);r.setProperty(t,r.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES,s)}function c(t,n){var r=a(t);return e.includes(r,n)}function l(n,o,i){var a=e.isObject(i)?i.value:i;if(e.isNull(a))return g(n,o,null);var s=c(n,o);u(n,o,!0);var l={siteId:r.getProperty(n,r.PROPERTY_NAMES.SITE_ID),metaSiteId:r.getProperty(n,r.PROPERTY_NAMES.META_SITE_ID),pageId:o,password:a};d(n,t.ENDPOINTS.PASSWORD_PROTECTION,o,s,l)}function p(t,n,o,i){n[o]=n[i],function(e,t){r.setProperty(e,r.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD,t)}(t,n);var s=a(t),u=e.union(s,[o]);r.setProperty(t,r.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES,u)}function d(e,n,r,o,i,a,s){t.sendWithPs(e,n,i,function(t){t.result?(g(e,r,t.result),a&&a()):f(e,r,o,t.errorCode,t.errorDescription,s)},function(t,n){f(e,r,o,-1,n,s)})}function g(e,t,n){var o=s(e);o[t]=n,r.setProperty(e,r.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD,o),u(e,t,n)}function f(e,t,n,r,a,s){throw function(e,t,n){u(e,t,n)}(e,t,n),o.error(e,i.PASSWORD_PROTECTION_HASH_GENERATION_FAILED,{serverErrorCode:r,errorDescription:a}),s&&s(),new Error("Remote error, cannot update password for page with id ".concat(t,": ").concat(a,". Error code: ").concat(r))}return{getPasswordProtectedPages:a,isPageProtected:c,setPagePassword:l,duplicatePagePassword:function(n,o,i,a,l){if(c(n,i)){var g=s(n);if(e.has(g,i))return p(n,g,o,i),void(a&&a());var f=c(n,o);u(n,o,!0);var m={siteId:r.getProperty(n,r.PROPERTY_NAMES.SITE_ID),metaSiteId:r.getProperty(n,r.PROPERTY_NAMES.META_SITE_ID),pageId:o,sourcePageId:i};d(n,t.ENDPOINTS.PASSWORD_PROTECTION_DUPLICATE,o,f,m,a,l)}else l&&l()},setPageToNoRestriction:function(e,t){l(e,t,{value:null})},isPagesProtectionOnServerOn:function(){return!0}}}()},function(e,t,n){var r;e.exports=(r=n(0),{isPlatformAppInstalled:function(e,t){if(!t)return!1;var n=r.get(t,"appDefinitionId"),o=r.get(e,[n],{});return!r.isEmpty(o)}})},function(e,t){e.exports=R},function(e,t){e.exports=N},function(e,t,n){var r,o,i,a,s,u,c,l,p,d;e.exports=(o=n(0),i=n(1),a=n(13),s=n(137),u=i.urlUtils.joinURL,c=/\d+\.\d+\.\d+/,l=function(e,t,n,r,i){if(function(e){return/^https?\:\/\/localhost/.test(e)}(r))return r;var a,s=o.trimEnd(u(t,"services"),"/"),l=e.replace(s,o.trimEnd(n,"/"));return/^\d+\.\d+\.\d+$/.test(r)&&(a=r,l=l.replace(c,a)),"true"===i&&(l=l.replace(/^https:\/\//,"http://")),l},d=function(e,t){var n=p(e),r="?sdkVersion=".concat(n),i=o.isEmpty(t.extraNamespaces)?void 0:o.join(t.extraNamespaces,","),u=i?"&extraNamespaces=".concat(i):"",c=a.getProperty(e,a.PROPERTY_NAMES.META_SITE_ID),l="&metaSiteId=".concat(c),d=a.getProperty(e,a.PROPERTY_NAMES.USER_ID),g="&userId=".concat(d),f=s.getEditorType(),m="&editorType=".concat(f);return o.join([r,u,l,g,m],"")},{createWorkerIframe:function(e,t){var n=window.document.createElement("iframe");return n.id=e,n.src=t,n.style.display="none",n=window.document.body.appendChild(n)},getEditorSdkUrl:p=function(e){var t=e.dal.get(e.pointers.general.getServiceTopology()),n=e.siteAPI.getCurrentUrl(),r=o.get(n,"query");return r.EditorSdkSource||r.editorSdkSource||u(o.get(t,["scriptsLocationMap","js-platform-editor-sdk"],""),"lib","editorSDK.min.js")},addWorkerHandler:function(e){r&&window.removeEventListener("message",r),r=e,window.addEventListener("message",r)},getAppsContainerUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dal.get(e.pointers.general.getServiceTopology()),r=n.scriptsLocationMap["santa-platform-apps-container"],i="https://editor.".concat(n.serverName,"/_partials/"),a=e.siteAPI.getCurrentUrl(),s=o.get(a,"query"),c=n.scriptsDomainUrl,p=l(r,c,i,s.PlatformContainerSource,s.PlatformContainerHttp),g=d(e,t);return u(p,"index.html".concat(g))}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(32),i=function(e,t){return{intent:o.Intents.PLATFORM_WORKER,type:o.MessageTypes.ADD_APPS,apps:r.map(e,function(e){return r.pick(e,["applicationId","appFields.platform.editorScriptUrl","appDefinitionId","firstInstall","origin","instance","instanceId","appUrlQueryParams"])}),initData:t}},r.mapValues({triggerEvent:function(e,t){return{intent:o.Intents.PLATFORM_WORKER,type:o.MessageTypes.TRIGGER_EVENT,applicationId:e,args:t}},addApp:function(e,t){return i([e],t)},addApps:i,notifyAppUpdated:function(e,t){return{intent:o.Intents.PLATFORM_WORKER,type:o.MessageTypes.NOTIFY_APP_UPDATED,applicationId:e,payload:t}},notifyRemoveApp:function(e){return{intent:o.Intents.PLATFORM_WORKER,type:o.MessageTypes.REMOVE_APP,applicationId:e}},notifyMigrate:function(e,t){return{intent:o.Intents.PLATFORM_WORKER,type:o.MessageTypes.MIGRATE,applicationId:e,payload:t}}},function(e){return r.flow(e,JSON.stringify)}))},function(e,t,n){e.exports=n(479).create(!0)},function(e,t,n){var r;e.exports=(r=n(0),{create:function(e){var t={},n={},o=function(e){return t[e]};return{get:o,set:function(n,i){var a=o(n);return t[n]=a&&e?r.merge({},a,i):i,t[n]},lock:function(e){n[e]=1},unlock:function(e){delete n[e]},isLocked:function(e){return n[e]},keys:function(){return t&&r.keys(t)||[]},clear:function(){t={},n={}}}}})},function(e,t,n){(function(t){e.exports=function(){var e=n(0),r=n(1),o=function(t){return e.get(t,"getResponseHeader")},i={INFO:"info",WARN:"warn",ERROR:"error"},a=/\[request-id:\s(\d+\.\d+)\]/,s=e.noop,u=[-12,-15,-16],c="Message was not specified although level is error. See stack_trace",l=["ReactSource","EditorSource","experiments","petri_ovr","WixCodeRuntimeSource","debug","debugViewer"];function p(){try{var t=e.get(window.parent,"location.href"),n=r.urlUtils.parseUrl(t),o=Object.keys(n.query).some(function(e){return"wixCodeForceKibanaReport"===e}),i=!!t&&(function(t){return e.includes(t,"://localhost")}(t)||function(t){var n=r.urlUtils.parseUrl(t);return Object.keys(n.query).some(function(t){return e.includes(l,t)})}(t));return o||!i}catch(e){return!0}}function d(n,o,i){if("undefined"!=typeof window&&p()&&(!window.isMockWindow||void 0===t||t.jasmine.isSpy(r.ajaxLibrary.ajax))){i||(i=1);var a=function(t){return e.flow(m,v,y,I,h,g,P,A)(t)}(n);(function(e,t){var n={type:"POST",url:"".concat(e,"/logstash/events"),dataType:"text",contentType:"application/json",data:JSON.stringify(t),xhrFields:{withCredentials:!0},crossDomain:!0};return new Promise(function(e,t){n.success=e,n.error=function(e,n,r){t({xhr:e,errorType:n,error:r})},r.ajaxLibrary.ajax(n)})})(o,a).then(s,function(){i>2?function(t){var n,r=window.localStorage.getItem("wixCodePendingMonitoring");try{var o=r?JSON.parse(r):[];n=e.isArray(o)?o:[]}catch(e){n=[]}var i=JSON.stringify(n.concat(t));try{window.localStorage.setItem("wixCodePendingMonitoring",i)}catch(e){}}(a):d(n,o,i+1),s()})}}function g(t){if(!e.isError(t.message))return t;var n=t.message,r={};return n.stack?(r.stackTrace=n.stack,r.message=n.message):r.message=n.toString(),e.merge({},t,r)}function f(t){return e.isError(t)&&!!t.xhr}function m(t){if(!f(t.message))return t;var n=e.assign({x_seen_by:o(t.message.xhr)?t.message.xhr.getResponseHeader("x-seen-by"):t.message.xhr.headers.get("x-seen-by")},e.mapKeys(e.get(t,"message.request.headers"),function(t,n){return e.snakeCase(n)}));return e.merge({},t,{params:n})}function v(t){if(!f(t.message))return t;var n=function(e){var t=a.exec(e);if(t&&t[1])return t[1]}(S(t.message.xhr.responseText).errorDescription);return n?e.merge({},t,{requestId:n}):t}function y(t){if(!f(t.message))return t;var n=S(t.message.xhr.responseText).errorCode;return e.isNil(n)?t:e.merge({},t,{errorCode:n.toString()})}function E(t){return function(t){return e.isError(t)&&"RequestAbortError"===t.name}(t)||function(t){return e.isError(t)&&"RequestTimeoutError"===t.name}(t)||function(t){if(!f(t))return!1;var n=S(t.xhr.responseText).errorCode;return n&&e.includes(u,n)}(t)||function(t){return e.isError(t)&&"WixCodeNotWriteableError"===t.name}(t)}function I(t){return E(t.message)?e.merge({},t,{level:i.WARN}):t}function S(e){if(!e)return{};try{return JSON.parse(e)}catch(e){return{}}}function h(t){return t.message||t.level!==i.ERROR?t:e.merge({},t,{message:new Error(c)})}function P(t){return e.isString(t.message)?t:e.merge({},t,{message:JSON.stringify(t.message)})}function A(t){return e.merge({},t,{params:{url:e.get(window,"location.href","")}})}return{levels:i,trace:function(t,n){!function(t){if(!e.isString(t)||0===t.length)throw new Error("parameter `baseUrl` is invalid, received: ".concat(t))}(n);var o="".concat(n,"/v1"),a=new Date,s=a.getTime(),u=e.merge({},{source:"wix-code-client",level:i.INFO,userActionId:r.guidUtils.getGUID()},t,{timestamp:a.toJSON(),actionPosition:"start"});return d(u,o),function(t){var n=new Date,r=(n.getTime()-s)/1e3;d(t=e.merge({},u,t,{timestamp:n.toJSON(),duration:r,actionPosition:"end"}),o)}},_setResponseCallback:function(t){s=t||e.noop}}}()}).call(this,n(193))},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(31),i=n(1),a=n(16),{activatePageMobileHoverModes:function(e,t){var n=e.pointers.components.getPage(t.id,i.constants.VIEW_MODES.DESKTOP),s=e.pointers.components.getChildrenRecursively(n);r(s).filter(function(e,t){return!!function(e,t){var n=o.getComponentModes(e,t);return r.find(n,{type:"HOVER"})}(e,t)}.bind(null,e)).forEach(a.prepareComponentStructureForMobileAlgorithm.bind(null,e,o))}})},function(e,t,n){var r,o,i;e.exports=(r=n(3),o=n(16),i=n(4),{removeMobileCropOverrideIfNeeded:function(e,t,n){var a=r.getDataItem(e,t),s=n.uri&&a.uri!==n.uri;o.wPhoto.removeMobileCropOverrideIfNeeded(e,t,s,{dataModel:r,component:i})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(4),o=n(75),i=n(197);function a(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"layout"));i.layoutPlayerChildren(e,t,n)}var s={horizontal:function(e){e.offsetX.value*=-1},vertical:function(e){e.offsetY.value*=-1},both:function(e){e.offsetY.value*=-1,e.offsetX.value*=-1}},u={horizontal:function(e){var t=e.topLeft,n=e.topRight,r=e.bottomLeft,o=e.bottomRight;e.topLeft=n,e.bottomLeft=o,e.topRight=t,e.bottomRight=r},vertical:function(e){var t=e.topLeft,n=e.topRight,r=e.bottomLeft,o=e.bottomRight;e.topLeft=r,e.bottomLeft=t,e.topRight=o,e.bottomRight=n},both:function(e){var t=e.topLeft,n=e.topRight,r=e.bottomLeft,o=e.bottomRight;e.topLeft=o,e.bottomLeft=n,e.topRight=r,e.bottomRight=t}};return{setPlayerIdAfterAddHook:function(n,i,a,s,u,c){!function(n,i,a){if("wysiwyg.viewer.components.MediaPlayer"===r.getType(n,a)){var s=a.id,u=r.getType(n,i),c=o.getComponentPropertiesByType(n,u);e.get(c,["properties","playerId"])&&t.updatePropertiesItem(n,i,{playerId:s})}}(n,i,c)},layoutPlayerChildren:a,flipCssStyle:function(e,n,r){var o,i,a,c=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"designQuery")),r=e.pointers.components.getPageOfComponent(t),o=e.pointers.data.getDesignItem(n.replace("#",""),r.id);return e.dal.get(o)}(e,n),l=c.cssStyle,p=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"propertyQuery")),r=e.pointers.components.getPageOfComponent(t),o=e.pointers.data.getPropertyItem(n.replace("#",""),r.id);return e.dal.get(o)}(e,n);if(l&&r.flip!==p.flip){var d=(o=p.flip,i=r.flip,a={vertical:"horizontal",horizontal:"vertical"},o&&"none"!==o?"none"===i?o:"both"===o?a[i]:"both"===i&&a[o]||i:i);if(l.cssBoxShadow){var g=l.cssBoxShadow;s[d](g[0])}if(l.cssBorderRadius){var f=l.cssBorderRadius;u[d](f)}t.updateDesignItem(e,n,{background:c.background,cssStyle:l})}},layoutChildrenOnMobileConversion:function(t,n){e.forEach(n,function(n){var o=r.getChildren(t,n,!0),i=e.filter(o,function(e){return"wysiwyg.viewer.components.MediaPlayer"===r.getType(t,e)});e.forEach(i,function(e){return a(t,e)})})}}}()},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(11),r=n(12),i="wysiwyg.viewer.components.MediaControls",a="wysiwyg.viewer.components.MediaOverlayControls",s=.65,u=51,c={TOP_LEFT:{min:135,max:225},TOP_RIGHT:{min:45,max:135},BOTTOM_RIGHT:{min:315,max:45},BOTTOM_LEFT:{min:225,max:315}};function l(e,t,n){return n>e&&n<t}function p(e,t){var n=function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"propertyQuery")),o=e.pointers.components.getPageOfComponent(t),i=e.dal.get(e.pointers.data.getPropertyItem(r.stripHashIfExists(n),o.id)).playerId;return e.pointers.components.getComponent(i,o)}(e,t);return{playerPointer:n,playerLayout:e.dal.get(e.pointers.getInnerPointer(n,"layout"))}}function d(e,t){var n=o({},e),r=Math.min(t.width,t.height)*s;return(n.width>r||n.height>r)&&(n.width=r,n.height=r),n.y=(t.height-n.height)/2,n.x=(t.width-n.width)/2,n.rotationInDegrees=t.rotationInDegrees?360-t.rotationInDegrees:0,n}function g(e,t){var n=o({},e),r=t.rotationInDegrees,i=t.width,a=t.height;return n.width=u,n.x=i-n.width,n.y=a-n.height,l(c.TOP_RIGHT.min,c.TOP_RIGHT.max,r)?n.y=0:l(c.TOP_LEFT.min,c.TOP_LEFT.max,r)?(n.x=0,n.y=0):l(c.BOTTOM_LEFT.min,c.BOTTOM_LEFT.max,r)&&(n.x=0),n.rotationInDegrees=t.rotationInDegrees?360-t.rotationInDegrees:0,n}return{layoutPlayerChildren:function(n,r,o){var s=function(t,n){var r=t.pointers.components.getChildren(n);return e.reduce(r,function(e,n){var r=t.dal.get(t.pointers.getInnerPointer(n,"componentType")),o=t.dal.get(t.pointers.getInnerPointer(n,"layout"));return e[r]={compPointer:n,compLayout:o},e},{})}(n,r),u=e.get(s,a),c=e.get(s,i);if(u){var l=d(u.compLayout,o);t.updateCompLayout(n,u.compPointer,l,!0)}if(c){var p=g(c.compLayout,o);t.updateCompLayout(n,c.compPointer,p,!0)}},positionBigPlay:function(t,n,r,o,i){if(!i){var a=p(t,n).playerLayout;e.assign(r,d(r,a))}},positionControlsBar:function(t,n,r,o,i){if(!i){var a=p(t,n).playerLayout;e.assign(r,g(r,a))}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r=n(4),o=n(10),i=n(11),a=n(12),s=n(75),u=n(2),c="wysiwyg.viewer.components.StripColumnsContainer";function l(t,n){var r=e.head(t.pointers.components.getChildren(n)),s=t.pointers.components.getChildren(r);e.forEach(s,function(e){(a.getComponentType(t,e)===c||o.public.isFullWidth(t,e))&&i.reparentComponentToPage(t,e,!0)})}return{handleFullWidthPropertyChange:function(n,r,o){var i=t.getPropertiesItem(n,r);i.fullWidth&&e.get(o,"fullWidth",i.fullWidth)!==i.fullWidth&&l(n,r)},handleSplitToColumns:function(e,t,n){1===e.pointers.components.getChildren(n).length&&l(e,n)},handleColumnDeletion:function(e,n,r){if(!r){var o=e.pointers.components.getParent(n);if(2===e.pointers.components.getChildren(o).length){!function(e,t){t.type!==u.VIEW_MODES.DESKTOP&&(s.isMobileComponentPropertiesSplit(e,t)||s.splitMobileComponentProperties(e,t))}(e,o),t.updatePropertiesItem(e,o,{rowMargin:0,columnsMargin:0,siteMargin:0,frameMargin:0})}}},deleteContainerIfHasNoMoreColumns:function(e,t,n,o,i,a,s){e.pointers.components.getChildren(s).length||n||r.deleteComponent(e,s)}}}()},function(e,t){e.exports=function(e,t,n,r){r.layout.x=0}},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(4),function(e,t,n,i){var a=e.pointers.components.getChildren(n);if(r.find(a,function(t){return o.getType(e,t)===i.componentType}))throw new Error("Only one SiteRegionContainer allowed")})},function(e,t,n){var r,o;e.exports=(r=n(11),o=n(82),function(e,t,n,i,a,s){o.upgradeUrl(e,t,"facebook.likes",{forceMainPage:r.isShowOnAllPages(e,s)})})},function(e,t,n){var r;e.exports=(r=n(82),function(e,t){r.upgradeUrl(e,t,"pinterest")})},function(e,t,n){var r;e.exports=(r=n(82),function(e,t){r.upgradeUrl(e,t,"vk")})},function(e,t,n){var r,o;e.exports=(r=n(3),o=n(82),function(e,t){var n=r.getDataItem(e,t),i=n.urlChoice&&"site"===n.urlChoice.toLowerCase();o.upgradeUrl(e,t,"facebook.shares",{forceMainPage:i})})},function(e,t,n){var r,o,i;e.exports=(r=n(36),o=n(15),i=n(18),{getContainerToAddTo:function(e,t){return e.pointers.components.isPage(t)&&i.popupPages.isPopup(e,t.id)?i.popupPages.getCurrentMainContainer(e):t},removeDeadBehaviors:function(e,t){if(i.popupPages.isPopup(e,t.id)){var n=o.getViewMode(e);i.getPageIdList(e,!0).map(function(t){return e.pointers.components.getPage(t,n)}).forEach(function(n){r.removeComponentsBehaviorsWithFilter(e,n,{behavior:{targetId:t.id}})})}},removeBehaviorsFromAddedPage:function(e,t){r.removeComponentsBehaviorsWithFilter(e,t,{behavior:{name:"openPopup"}})}})},function(e,t,n){var r,o;e.exports=(r=n(3),o=n(11),{replaceFullScreenPropertyWithDocking:function(e,t){var n=r.getPropertiesItem(e,t);n&&n.fullScreenModeOn&&(o.setDock(e,t,{left:{vw:0},right:{vw:0}}),r.updatePropertiesItem(e,t,{fullScreenModeOn:!1}))}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(60),o=n(4),i=n(3),a=n(7),s=n(199);function u(n,i,s,u,c){var l=function(t,n){return e(t).chain().get("custom.relatedConnections").transform(function(t,r,o){t[e.get(n,o,o)]=r},{}).value()}(s,c),p=e.keys(l),d=o.getPage(n,i).id,g=d===t.siteConstants.MASTER_PAGE_ID?null:d;!function(t,n,o,i){e.forEach(t,function(t){var a=e.get(n,t.id,[]);e.forEach(a,function(e){r.connect(o,t,i,e.role,e.config,e.isPrimary)})})}(a.getAllComponents(n,g,function(t){return e.includes(p,t.id)}),l,n,i)}return{handleControllerDeletion:function(t,n){!function(t,n){var o=r.getConnectedComponents(t,n);e.forEach(o,function(e){r.disconnect(t,e,n)})}(t,n),s.removePlatformApplicationFromPageIfLastController(t,n),s.removeControllerFromStateMap(t,n)},handleControllerSerialization:function(t,n,o){!function(t,n,o){var i=r.getConnectedComponents(t,n);if(!e.isEmpty(i)){var a=e.transform(i,function(o,i){o[i.id]=e.filter(r.get(t,i),{controllerRef:n})},{});e.set(o,"relatedConnections",a)}}(t,n,o),s.addControllerStateToSerializedStructure(t,n,o)},handleControllerAddition:function(e,t,n,r,o){u(e,t,n,0,o),s.setControllerStateFromSerializedStructure(e,t,n),s.addPlatformAppToPageIfFirstController(e,t,n.data.applicationId)},handleControllerParentChange:function(n,a,u){var c=i.getDataItem(n,a).applicationId;!function(n,i,a){var s=o.getPage(n,a).id;if(s!==t.siteConstants.MASTER_PAGE_ID){var u=r.getConnectedComponents(n,i);e(u).reject(function(e){return o.getPage(n,e).id===s}).forEach(function(e){r.disconnect(n,e,i)})}}(n,a,u),s.removePlatformApplicationFromPageIfLastController(n,a),s.addPlatformAppToPageIfFirstController(n,a,c,o.getPage(n,u))}}}()},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o={},i=[function(e){return r.debounce(e,10)},function(e){return r.throttle(e,1e3)}],a=function(e,t,n,r,o){t.forEach(function(t){return o(e,t,{eventType:n,eventPayload:r})})},{notifyAppsOnCustomEvent:function(e,t,n,s){var u=function(e){return o[e]?Array.from(o[e]):null}(t);if(u)return r.flow(i)(a)(e,u,t,n,s)},registerAppToEvents:function(e,t){r.forEach(t,function(t){o[t]||(o[t]=new Set),o[t].add(e)})}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(13),i=n(101),{notifyOnFirstSaved:function(e,t,n){var a=o.generalInfo.getMetaSiteId(e);r.forEach(t,function(t){var r=t.applicationId,o=t.instance,s=t.instanceId;n(e,r,i.factory.siteWasFirstSaved({metaSiteId:a,instance:o,instanceId:s}))}),e.siteAPI.updateBiData({metaSiteId:a})},removeGhostStructureForApp:function(e,t){var n=t.appDefinitionId;e.siteDataAPI.siteData.removeGhostStructureData(n)}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(3),o=n(14),i=n(4);function a(t){return e.compact([e.get(t,"applicationId")])}function s(n,r){return e(e.get(r,"items")).reject(function(t){return e.isEqual(t.type,"WixCodeConnectionItem")}).map("controllerId").compact().flatMap(function(e){return a(t.getDataItemById(n,e))}).value()}return{appsOfComp:function(n,u,c){var l=[];return u&&"AppController"===u.type?l=function(n,r,o){if(e.has(r,"applicationId"))return a(r);return a(t.getDataItem(n,o))}(n,u,c):u&&"TPAWidget"===u.type?l=function(t,n){var r=e.get(n,"applicationId"),i=o.getWidgetData(t,r,e.get(n,"widgetId"));return e.has(i,"componentFields.componentUrl")?[n.appDefinitionId]:[]}(n,u):u&&"ConnectionList"===u.type?l=s(n,u):!u&&c&&(l=a(t.getDataItem(n,c))),e.isEmpty(l)&&c&&(l=e([].concat(r(i.getAncestorsFromFull(n,c)),[c])).flatMap(function(e){return t.getConnectionsItem(n,e)}).compact().reject(function(t){return e.isEqual(t.type,"WixCodeConnectionItem")}).flatMap(function(r){return a(t.getDataItem(n,e.get(r,"controllerRef")))}).uniq().value()),l},appsOfControllerStateMap:function(n,r){return e(e.get(r,"configured")).flatMap(function(e){return a(t.getDataItem(n,e))}).compact().sortedUniq().value()},appsOfConnectionItem:s,getAppOfController:function(t,n){var r=i.data.get(t,n);return e.get(r,"applicationId")}}}()},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e,t=n(0),o=n(4),i=n(14),a=n(3),s=n(6),u=n(5),c=n(1),l={appBuilderPreviewApp:"46b2ad43-5720-41d2-8436-2058979cb53f"},p={appBuilder:"appBuilder"};function d(e,n,r){return t(e).filter(function(e){return n(e,r)}).map("appDefinitionId").compact().value()}function g(e,n){return!("Dashboard"===e.appType||t.includes(n,t.get(e,"appDefinitionId"))||t.includes(n,"appBuilder")&&(v(e)||y(e)))}function f(e,n){return t.includes(n,t.get(e,"appDefinitionId"))||t.includes(n,"appBuilder")&&(v(e)||y(e))}function m(e){var n=i.getAppsData(e),r=t.find(n,{type:"siteextension"});return r&&!t.get(r,"permissions.revoked")?r.appDefinitionId:null}function v(e){return t.has(e,["appFields","platform","studio"])}function y(e){var n=t.values(t.get(e,"widgets",{}));return t.some(n,function(e){return t.has(e,["componentFields","appStudioFields"])})}function E(e,n){if("wysiwyg.viewer.components.Repeater"===o.getType(e,n))return{compsIdsToReset:t.map(o.getChildren(e,n,!0),"id").concat([n.id]),resetRuntime:!0};var r=o.getAncestors(e,n).find(function(t){return"wysiwyg.viewer.components.Repeater"===o.getType(e,t)});if(r){var i=c.displayedOnlyStructureUtil.getRepeaterTemplateId(n.id),s=a.getRuntimeDataItem(e,r);if(s)return{compsIdsToReset:t.map(s.items,function(e){return c.displayedOnlyStructureUtil.getUniqueDisplayedId(i,e)}).concat(r.id),resetRuntime:!0}}return{compsIdsToReset:[n.id],resetRuntime:!0}}return{getAllowedApps:function(e){var n=i.getAppsData(e);return u.isOpen("sv_livePreview_all")?d(n,g,t.values(l)):d(n,f,t.values(p))},addDependantApps:function(e,n){var r=i.getAppsData(e),o=t.filter(r,function(e){return t.includes(n,e.appDefinitionId)});if(t.includes(n,"dataBinding")||t.some(o,function(e){return y(e)})){var a=m(e);a&&!t.includes(n,a)&&n.push(a)}return n},getWixCodeAppDefIdIfExists:m,optionsModifiersAllApps:(e={},r(e,s.HOOKS.DATA.UPDATE_AFTER,E),r(e,s.HOOKS.PROPERTIES.UPDATE_AFTER,E),r(e,s.HOOKS.CONNECTION.AFTER_DISCONNECT,E),r(e,s.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,E),e),optionsModifiers:{dataBinding:function(e,t){if(o.getAncestorsFromFull(e,t).some(function(t){return"wysiwyg.viewer.components.Repeater"===o.getType(e,t)}))return{resetRuntime:!0}}}}}()},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(101),i=n(102),a=n(35),s=n(150),u=n(151),{beforePageRemoveHook:function(e,t){var n=s.getRouterRef.byPage(e,t);n&&(function(e,t,n){var i=s.get.byRef(e,t),u=a.getAppDataByAppDefId(e,i.appDefinitionId).applicationId,c=r.findKey(i.pages,function(e){return e===n});a.notifyApplication(e,u,o.factory.pageDeleted({pageRole:c}))}(e,n,t.id),s.pages.removePageFromRouter(e,n,t.id))},duplicatePageCodeIfRequired:function(e,t,n){(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&i.duplicatePageCode(e,t,n)},removePageFromPlatformApps:function(e,t){a.removePageFromPlatformApps(e,t)},addOriginCompIdToWidgetsOnPage:function(e,t){u.addOriginCompIdToWidgetsOnPage(e,t)},fixDuplicatedPageCodeBehaviors:function(e,t){var n=e.pointers.page.getPagePointer(t),o=e.pointers.getInnerPointer(n,"structure"),i=e.dal.full.get(o);!function e(t,n,o){if(n.behaviorQuery){var i,a=t.pointers.data.getBehaviorsItem(n.behaviorQuery,o),s=t.dal.get(a);try{i=JSON.parse(s.items)}catch(e){}var u=!1;r(i).filter(["action.type","comp"]).reject(["action.sourceId",n.id]).forEach(function(e){u=!0,e.action.sourceId=n.id,e.behavior.targetId=o,r.has(e,"behavior.params.compId")&&(e.behavior.params.compId=n.id)}),u&&(s.items=JSON.stringify(i),t.dal.set(a,s))}r.forEach(n.components,function(n){e(t,n,o)})}(e,i,t)}})},function(e,t,n){var r;e.exports=(r=n(0),n(501),{initPaths:function(e){var t=[e.pointers.wixCode.getRoot(),e.pointers.wixCode.getNonUndoableRoot(),e.pointers.wixCode.getUndoableRoot(),e.pointers.wixCode.getModifiedFileContentMap(),e.pointers.wixCode.getLoadedFileContentMap(),e.pointers.wixCode.getDuplicatedFilesInfoMap(),e.pointers.wixCode.getUndoableModifiedFileContentMap(),e.pointers.wixCode.getFilePathToIdMap(),e.pointers.wixCode.getBundleCacheKillerMap(),e.pointers.wixCode.getWixCodeModel(),e.pointers.wixCode.getWixCodeAppData(),e.pointers.wixCode.getAreChildrenLoadedMap(),e.pointers.wixCode.getLoadedChildrenMap(),e.pointers.wixCode.getDirectoryFlagByDeletedPathMap()];r.forEach(t,function(t){e.dal.isExist(t)||e.dal.set(t,{})})}})},function(e,t,n){e.exports=function(){var e=n(64),t=n(58),r=n(24),o="wixCode",i=e.pointerGeneratorsRegistry;i.registerPointerType(o,function(){return null},function(){return!0});var a={getRoot:function(e,t){return t.getPointer("wixCodeRoot",o,r.paths.BASE)},getNonUndoableRoot:function(e,t){return t.getPointer("wixCodeNonUndoableRoot",o,r.paths.NON_UNDOABLE_BASE_PATH)},getUndoableRoot:function(e,t){return t.getPointer("wixCodeUndoableRoot",o,r.paths.UNDOABLE_BASE_PATH)},getModifiedFileContentMap:function(e,t){return t.getPointer("modifiedFileContents",o,r.paths.MODIFIED_FILE_CONTENTS)},getModifiedFileContent:function(e,t,n){return t.getPointer("modifiedFileContents_".concat(n),o,r.paths.MODIFIED_FILE_CONTENTS.concat(n))},getLoadedFileContentMap:function(e,t){return t.getPointer("loadedFileContents",o,r.paths.LOADED_FILE_CONTENTS)},getLoadedFileContent:function(e,t,n){return t.getPointer("loadedFileContents_".concat(n),o,r.paths.LOADED_FILE_CONTENTS.concat(n))},getUndoableModifiedFileContentMap:function(e,t){return t.getPointer("undoableModifiedFileContents",o,r.paths.UNDOABLE_MODIFIED_FILE_CONTENTS)},getUndoableModifiedFileContent:function(e,t,n){return t.getPointer("undoableModifiedFileContents_".concat(n),o,r.paths.UNDOABLE_MODIFIED_FILE_CONTENTS.concat(n))},getFilePathToIdMap:function(e,t){return t.getPointer("filePathToIdMap",o,r.paths.FILE_PATH_TO_ID_MAP)},getFilePathId:function(e,t,n){return t.getPointer("filePathToIdMap_".concat(n),o,r.paths.FILE_PATH_TO_ID_MAP.concat(n))},getDuplicatedFilesInfoMap:function(e,t){return t.getPointer("duplicatedFilesInfo",o,r.paths.DUPLICATED_FILES_INFO)},getGlobalBundleCacheKiller:function(e,n){return n.getPointer("globalBundleCacheKiller",o,t.wixCodeUserScriptsService.paths.GLOBAL_CACHE_KILLER)},getBundleCacheKillerMap:function(e,n){return n.getPointer("bundleCacheKillers",o,t.wixCodeUserScriptsService.paths.CACHE_KILLERS_MAP)},getBundleCacheKiller:function(e,n,r){return n.getPointer("bundleCacheKillers_".concat(r),o,t.wixCodeUserScriptsService.paths.CACHE_KILLERS_MAP.concat(r))},getLoadedChildrenMap:function(e,t){return t.getPointer("loadedChildren",o,r.paths.LOADED_CHILDREN)},getLoadedChildren:function(e,t,n){return t.getPointer("loadedChildren_".concat(n),o,r.paths.LOADED_CHILDREN.concat(n))},getAreChildrenLoadedMap:function(e,t){return t.getPointer("areChildrenLoaded",o,r.paths.ARE_CHILDREN_LOADED)},getAreChildrenLoaded:function(e,t,n){return t.getPointer("areChildrenLoaded_".concat(n),o,r.paths.ARE_CHILDREN_LOADED.concat(n))},getWixCodeModel:function(e,t){return t.getPointer("wixCodeModel",o,r.paths.WIX_CODE_MODEL)},getWixCodeAppData:function(e,t){return t.getPointer("appData",o,r.paths.WIX_CODE_APP_DATA)},getGridAppId:function(e,t){return t.getPointer("gridAppId",o,r.paths.GRID_APP_ID)},getIsAppReadOnly:function(e,t){return t.getPointer("isAppReadOnly",o,r.paths.IS_APP_READ_ONLY)},getDirectoryFlagByDeletedPathMap:function(e,t){return t.getPointer("directoryFlagByDeletedPath",o,r.paths.DIRECTORY_FLAG_BY_DELETED_PATH)}};i.registerDataAccessPointersGenerator(o,a)}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(503),o=n(106),i=n(512),a=n(1),s=function(){try{i.setState(null),i.setAnotherSaveRequested(!1)}catch(e){a.log.error(e)}},{save:function(e,t){return function(e,t){var n=i.getState();return n?(i.setAnotherSaveRequested(!0),n):((n=new Promise(function(n,a){function s(){i.getAnotherSaveRequested()?(i.setAnotherSaveRequested(!1),r(e,o,t,s,u)):n()}function u(n){i.getAnotherSaveRequested()?(i.setAnotherSaveRequested(!1),r(e,o,t,s,u)):a(n)}r(e,o,t,s,u)})).then(s,s),i.setState(n),n)}(e,t)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(59),r=n(22);function o(t){return{event:e.partial(r.event,t),error:e.partial(r.error,t)}}return function(e,n,r,i,a){var s=[{primaryTask:n,secondaryTasks:[]},e.dal,i,function(e){a(e.document)},o(e)];r?t.runFullSaveTasks.apply(t,s):t.runPartialSaveTasks.apply(t,s)}}()},function(e,t){e.exports=x},function(e,t){e.exports=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDataSchemasClientForBrowser=t.WixDataSchemas=void 0;var r,o=n(208),i=(r=o)&&r.__esModule?r:{default:r},a=n(511);t.WixDataSchemas=i.default,t.createDataSchemasClientForBrowser=a.createDataSchemasClientForBrowser},function(e,t,n){"use strict";var r=n(508),o=n(509),i=n(510);function a(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function s(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=o({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:i(a),n(i(o),a,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(n):e[t]=n,e},Object.create(null))):r}t.extract=s,t.parse=u,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return a(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach(function(e){void 0!==e&&i.push(n(r,e,i.length))}),i.join("&")}return a(r,t)+"="+a(o,t)}).filter(function(e){return e.length>0}).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:u(s(e),t)}}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))o.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var p=0;p<s.length;p++)i.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function a(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var u=i[s];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.createDataSchemasClientForBrowser=function(t,n,r){return new i.default(e.fetch,t,n,r)};var r,o=n(208),i=(r=o)&&r.__esModule?r:{default:r}}).call(this,n(193))},function(e,t){var n,r;e.exports=(n=null,r=!1,{getState:function(){return n},setState:function(e){n=e},getAnotherSaveRequested:function(){return r},setAnotherSaveRequested:function(e){r=e}})},function(e,t,n){e.exports=function(){var e=n(35),t=n(61),r=n(24);function o(e,n){var o=t.getRoots(e).pages.location;return"".concat(o).concat(n).concat(r.JS_EXTENSION)}return{getFileId:o,hasCode:function(t,n){return e.pageHasPlatformApp(t,n,r.WIX_CODE_APP_ID)},readCode:function(e,n){var r=o(e,n),i=t.getVirtualDescriptor(e,r,!1);return t.readFile(e,i)}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(35),n(2),o=n(61),i=n(24),{duplicatePageCode:function(e,t,n){if(!r.pageHasPlatformApp(e,n,i.WIX_CODE_APP_ID))return Promise.resolve();var a=function(e,t){var n="public/pages/".concat(t,".js");return o.getVirtualDescriptor(e,n,!1)}(e,n),s=function(e){return o.getVirtualDescriptor(e,"public/pages",!0)}(e),u="".concat(t,".js");return o.copyFile(e,a,s,u)}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o;e.exports=(o=n(0),{getWidgetDisplayName:function(e,t){if(!e||!e.api)return null;var n=e.api,i=o.assign({},o.assign.apply(o,[{}].concat(r(n))));return o.has(i,t)?o.get(i[t],"widgetDisplayName")||t:null}})},function(e,t){e.exports=B},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f;e.exports=(r=n(1),o=n(518),i=n(212),a=n(519),s=n(520),u=n(521),c=n(522),l=n(529),p=[s,u,i,c,l,o],d=[s,u,l],g=[s,u,a],f=i,{save:function(e){for(var t=e.runtimeConfig.supportMobile?r.functionUtils.runMultiple(p):r.functionUtils.runMultiple(d),n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.apply(void 0,[e].concat(o))},saveAsTemplate:r.functionUtils.runMultiple(g),autosave:f})},function(e,t,n){e.exports=n(144).meshLayoutReadySiteDataPreSaveFixer},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(18),function(e){var t=r(o.getPageIdList(e,!0)).transform(function(t,n){t[n]=e.pointers.page.getPageData(n)},{}).mapValues(e.dal.get.bind(e.dal)).mapValues(function(e){return r.pickBy(e,"metaData")}).value();r.forEach(t,function(e,t,n){r.forEach(t,function(t){t.metaData.isPreset=!0;var r=e.pointers.data.getDataItem(t.id,n);e.dal.set(r,t)})}.bind(null,e))})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(21);function o(e){return e>1}return function(n){var i=n.pointers.general.getUrlFormat();if(n.dal.get(i)!==t.siteConstants.URL_FORMATS.HASH_BANG){var a=r.getPagesList(n),s=e(a).map(r.getPageUriSEO.bind(null,n)).countBy().pickBy(o).value();if(!e.isEmpty(s))throw new Error("Found pages with duplicate url title: ".concat(JSON.stringify(s)))}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(1),i=n(21),function(e){var t=e.pointers.general.getUrlFormat();if(e.dal.get(t)!==o.siteConstants.URL_FORMATS.HASH_BANG){var n=i.getPagesList(e),a=i.getForbiddenPageUriSEOs(e),s=r.reduce(n,function(t,n){var r=i.getPageUriSEO(e,n);return r&&a[r.toLowerCase()]&&t.push(r),t},[]);if(!r.isEmpty(s))throw new Error("Found pages with forbidden url title: ".concat(JSON.stringify(s)))}})},function(e,t,n){e.exports=function(){var e=n(0),t=(n(23),n(523)),r=n(145);function o(e){var t=e.dal.full.immutable.getLastSnapshotByTagName("reordering")||e.dal.full.immutable.getInitialSnapshot();return e.dal.takeSnapshot("reordering"),[t,e.dal.full.immutable.getLastSnapshotByTagName("reordering")]}return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!!e.isUndefined(i.shouldReorderDOM)||i.shouldReorderDOM;if(a){var s=o(n),u=r.getChangedPages(s[0],s[1]);t.reorderComponents(n,e.noop,e.noop,u)}}}()},function(e,t,n){e.exports=function(){var e=n(1),t=n(0),r=n(41),o=e.constants;function i(e){var n,r,o=(n=e,r=t.invert(n),function(e){var n=t.get(e,"id",e),o=r[n];return o?Number(o):-1});return function(e,t){return o(e)-o(t)}}function a(e,t,n){var r=e.pointers.full.components.getChildrenContainer(t),o=e.dal.full.get(r);"wysiwyg.viewer.components.HoverBox"!==e.dal.get(t).componentType&&o.sort(i(n)),e.dal.full.set(r,o)}function s(e,n){return new Promise(function(r,o){t.delay(function(){var t;try{t=e(n),r(t)}catch(e){o(e)}})})}function u(e,t,n,r){var i=e.pointers.components.getPage(t,o.VIEW_MODES.DESKTOP),s=e.pointers.full.components.getComponent(n,i);s&&a(e,s,r)}function c(e,n){return i=[function(){return r.getComponentsOrder(e,n)},function(r){if("masterPage"!==n){var i=e.pointers.components.getPage(n,o.VIEW_MODES.DESKTOP);a(e,i,r[n])}return t.omit(r,n)},function(r){return function(e,n,r){return Promise.all(t.transform(r,function(r,o,i){var a=s(t.partial(u,e,n,i,o));return r.push(a),r},[]))}(e,n,r)}],t.reduce(i,function(e,t){return e.then(function(e){return s(t,e)})},Promise.resolve());var i}return{reorderComponents:function(e,n,r,o){Promise.all(t.map(o,t.partial(c,e))).then(n).catch(r)}}}()},function(e,t){e.exports={UNKNOWN_SERVER_ERROR:"UNKNOWN_SERVER_ERROR",HTTP_REQUEST_ERROR:"HTTP_REQUEST_ERROR",SAVE_DISABLED_IN_DOCUMENT_SERVICES:"SAVE_DISABLED_IN_DOCUMENT_SERVICES",SAVE_BLOCKED_BY_DOCUMENT_SERVICES:"SAVE_BLOCKED_BY_DOCUMENT_SERVICES",SAVE_IN_PROGRESS:"SAVE_IN_PROGRESS",NOT_LOGGED_IN:"NOT_LOGGED_IN",SESSION_EXPIRED:"SESSION_EXPIRED",USER_NOT_AUTHORIZED_FOR_SITE:"USER_NOT_AUTHORIZED_FOR_SITE",CONCURRENT_SAVE:"CONCURRENT_SAVE_ERROR",SITE_NAME_TAKEN:"SITE_NAME_TAKEN_ERROR",DUPLICATE_COMPONENTS:"DUPLICATE_COMPONENTS",DATA_REFERENCE_MISMATCH:"DATA_REFERENCE_MISMATCH",MISSING_CONTAINERS:"MISSING_CONTAINERS",APP_CONTROLLER_REFERENCE_MISMATCH:"APP_CONTROLLER_REFERENCE_MISMATCH",DESIGN_REFERENCE_MISMATCHES:"DESIGN_REFERENCE_MISMATCHES",BEHAVIOR_REFERENCE_MISMATHCHES:"BEHAVIOR_REFERENCE_MISMATHCHES",PROPERTY_REFERENCE_MISMATCHES:"PROPERTY_REFERENCE_MISMATCHES",STYLE_REFERENCE_MISMATCHES:"STYLE_REFERENCE_MISMATCHES",CONNECTION_LIST_REFERENCE_MISMATCHES:"CONNECTION_LIST_REFERENCE_MISMATCHES",SITE_DESERIALIZATION_ERROR:"SITE_DESERIALIZATION_ERROR",SAVE_PUBLISH_DISABLED_ON_SERVER:"SAVE_PUBLISH_DISABLED_ON_SERVER",SAVE_PUBLISH_RC_FAILED_ON_SERVER:"SAVE_PUBLISH_RC_FAILED_ON_SERVER",CONCURRENT_AUTO_SAVE:"CONCURRENT_AUTO_SAVE",SITE_STALE_STATE_FROM_AUTO_SAVE:"SITE_STALE_STATE_FROM_AUTO_SAVE",AUTOSAVE_DISABLE_FROM_SERVER:"AUTOSAVE_DISABLE_FROM_SERVER"}},function(e,t){e.exports={INVALID_VERSION_TYPE:"INVALID_VERSION_TYPE",NO_GRID_APP_ID:"NO_GRID_APP_ID",NO_STUDIO_APP_APP_ID:"NO_STUDIO_APP_APP_ID",UNKNOWN_SERVER_ERROR:"UNKNOWN_SERVER_ERROR",USER_NOT_AUTHORIZED_FOR_APP:"USER_NOT_AUTHORIZED_FOR_APP"}},function(e,t,n){var r,o,i,a;e.exports=(r=n(527),o=n(528),i=n(1),a=[r,o],{fixData:function(e,t,n,r){return i.loggingUtils.performance.start(i.loggingUtils.performanceMetrics.SAVE.SAVE_DATA_FIXER),a.forEach(function(o){o.exec(e,t,n,r)}),i.loggingUtils.performance.start(i.loggingUtils.performanceMetrics.SAVE.SAVE_DATA_FIXER),e}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(3),o=n(62),i=t.constants,a=i.DATA_TYPES,s=i.PAGE_DATA_DATA_TYPES;function u(e,t,n,r){var o=n.getIn([e,"data",s[r],t]);return o&&o.toJS()}function c(t,n,r,o,i){var a=u(t,n.id,i,r);return!a||!e.isEqual(a[o],n[o])}function l(e,t,n,r,o,i){var a=function(e,t,n,r){return u(e,t.replace("#",""),n,r)}(e,t,r,i);a&&!o[a.id]&&(o[a.id]=a,p(e,a,i,n,r,!1,o))}function p(t,n,o,i,a,s,p){"Page"===n.type&&n.pageBackgrounds&&function(t,n,r,o,i,a){var s=u(t,n.id,o,r);e.forEach(["desktop","mobile"],function(e){(!s||!s.pageBackgrounds||s.pageBackgrounds[e].ref!==n.pageBackgrounds[e].ref)&&l(t,n.pageBackgrounds[e].ref,o,i,a,r)})}(t,n,o,i,a,p);var d=n.type;e.forEach(n,function(g,f){if(g)if(!r.isOfType(o,d,f,"ref")||s&&!c(t,n,o,f,i)){if(r.isOfType(o,d,f,"refList")&&(!s||c(t,n,o,f,i))){var m=g,v=s&&u(t,n.id,i,o),y=v?e.difference(m,v[f]):m;e.forEach(y,function(e){l(t,e,i,a,p,o)})}}else l(t,g,i,a,p,o)})}function d(t,n,r,i,a){var u={};e.forEach(t,function(e){p(function(e,t,n){var r=["data",s[t],e.id],o=n.findEntry(function(e){return Boolean(e.getIn(r))});return o&&o[0]}(e,n,i),e,n,r,i,!0,u)});var c=function(t,n){return e.reduce(n,function(n,r,o){return e.isEqual(r,t[o])||(n[o]=r),n},{})}(t,u);e.isEmpty(c)||function(t,n,r){var i={dataType:n,dataItemType:e(t).map("type").uniq().value().toString()};r&&r.event&&r.event(o.DATA_ITEM_REFS_SAVE_DATAFIXER,i)}(c,n,a),e.assign(t,u)}return{exec:function(t,n,r,o){if(n){var i=t.dataDelta[s.data],u=t.dataDelta[s.design];e.isEmpty(i)||d(i,a.data,n.get("pagesData"),r.get("pagesData"),o),e.isEmpty(u)||d(u,a.design,n.get("pagesData"),r.get("pagesData"),o)}}}}()},function(e,t,n){var r;e.exports=(r=n(0),{exec:function(e,t,n){var o=e.pagesPlatformApplications;o&&(function(e,t){var n=t.getIn(["rendererModel","clientSpecMap"]).toJS();e[r.chain(n).find({type:"siteextension"}).get("appDefinitionId").value()]=r.assign({},e.wixCode),delete e.wixCode}(o,n),e.pagesPlatformApplications=r.transform(o,function(e,t,n){r.forOwn(t,function(t,r){e[r]=e[r]||[],e[r].push(n)})},{}))}})},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,a,s,u,c,l,p,d,g,f,m,v;e.exports=(i=n(0),a=n(1),s=n(5),u=n(30),c=n(13),l=n(7),p=n(19),d=n(2),g=n(3),f={appPart:["wixapps.integration.components.AppPart"],appPart2:["wixapps.integration.components.AppPart2"],tpa:i.concat(i.values(u.COMP_TYPES),i.values(u.TPA_COMP_TYPES))},m=function(e){var t=function(t){return l.getAllComponentsFromFull(e,void 0,void 0,t)};return{components:i([]).concat(t("DESKTOP"),t("MOBILE")).uniqBy("id").flatMap(function(t){return{structure:{componentType:e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))},data:g.getDataItem(e,t)||{}}}).compact().value(),clientSpecMap:e.dal.get(e.pointers.general.getClientSpecMap())}},v=function(e){var t=e.pointers.data.getDataItemFromMaster(a.siteConstants.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"layoutSettings"),r=e.dal.get(n);return i.get(r,"mechanism")===a.siteConstants.LAYOUT_MECHANISMS.MESH},function(e){p.utils.fedopsLogger.interactionStarted(d.INTERACTIONS.CALCULATE_SITE_META_DATA_RENDER_HINTS);var t=function(e){return s.isOpen("ds_thunderboltNewRenderHints")?function(e,t){var n=t._,r=["wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPAGluedWidget"],o=["platform.components.AppController","platform.components.AppWidget"];function i(e,t){var r=n.get(e,t,0);n.set(e,t,r+1)}var a=e.components,s=e.clientSpecMap,u={componentsCount:{},applications:{}};return n.forEach(a,function(e){var t=e.structure.componentType;if(i(u.componentsCount,[t]),n.includes(r,t)){var a=e.data.widgetId,c=(n.find(s,function(e){var t=e.widgets;return n.get(t,[a])})||{}).appDefinitionId;i(u.applications,"".concat(c,".widgetsCount.").concat(a))}else if(n.includes(o,t)){var l=e.data,p=l.applicationId,d=l.controllerType;i(u.applications,"".concat(p,".controllersCount.").concat(d))}}),u}(m(e),{_:i}):{}}(e),n=c.getProperty(e,c.PROPERTY_NAMES.SITE_META_DATA);n.renderHints=i.defaults(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({isMeshReady:v(e),containsAppPart:l.getComponentByType(e,f.appPart).length>0,containsAppPart2:l.getComponentByType(e,f.appPart2).length>0,containsTPA:l.getComponentByType(e,f.tpa).length>0},t),n.renderHints),c.setProperty(e,c.PROPERTY_NAMES.SITE_META_DATA,n),p.utils.fedopsLogger.interactionEnded(d.INTERACTIONS.CALCULATE_SITE_META_DATA_RENDER_HINTS)})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g;e.exports=(r=n(145),o=n(109),i=n(221),a=n(223),s=n(540),u=n(106),c=n(224),l=n(225),p=n(226),d=n(227),g=n(5),{getSaveTasksConfig:function(e){var t=g.isOpen("atomicSaveCode");return{primaryTask:r,requiredTasks:t?[u]:[],secondaryTasks:[a,t?c:s,o,l,p,d,i.create(e)]}}})},function(e,t,n){var r;e.exports=(r=n(0),{getItemsDiff:function(e,t,n,o){var i=[],a=[];return e.forEach(function(e,s){e.forEach(function(e,u){var c=t.getIn([s,u]);if(c){var l=e.toJS(),p=c.toJS();if(!r.isEqual(r.omit(l,n),r.omit(p,n))){var d=o?o(l,p):p;i.push(d)}}else a.push(u)})}),{created:t.reduce(function(t,n,r){var o=e.get(r),i=o?n.filterNot(function(e,t){return o.has(t)}):n;return t.concat(i.toList().toJS())},[]),updated:i,deleted:a}}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(84),o=n(1),i=n(533),a=n(25),s=n(85),u=n(536);function c(e){return["".concat(o.urlUtils.origin(),"/apps/appBuilder/published/").concat(e.applicationInstanceId)]}function l(e){return["".concat(o.urlUtils.origin(),"/apps/appBuilder/saved/").concat(e.applicationInstanceId,"?checkConcurrentModification=true")]}function p(e){return new u(e.event,e.error)}function d(){var e,t,n=new Promise(function(n,r){e=n,t=r});return{resolve:e,reject:t,promise:n}}function g(t,n){return e(t).filter("success").transform(function(t,r){var o=r.payload.id,i=e.find(n.created,{_iid:o});i&&t.push({path:a.getItemPath(i._type,o,"_state"),value:s.STATES.SAVED})},[]).value()}return{saveRepo:function(n,r,i){var s=p(i);s.beforeSavingRepo(n);var u=d();if(r){e(r.dataSelectors).filter(function(t){return e.isUndefined(t.dataProviderId)}).forEach(function(e){e.dataProviderId="wixdb"});var c={urls:l(n),data:e.assign({applicationInstanceVersion:n.applicationInstanceVersion,dataProviders:{wixdb:{type:"WixDb"}},tags:{},pages:{}},r)};o.requestsUtil.createAndSendRequest(c,function(e,t){if(t||!e.success)u.reject({errorCode:t?e:e.errorCode,changes:null}),s.errorSavingRepo(n,e,t);else{s.successSavingRepo(n,e);var r=null;e.payload.applicationInstanceVersion&&(r=[{path:a.getApplicationInstanceVersionPath(),value:e.payload.applicationInstanceVersion}],n.applicationInstanceVersion=e.payload.applicationInstanceVersion),u.resolve({changes:r})}},t.ajax)}else s.skippedSavingRepo(n),u.resolve(null);return u.promise},saveItems:function(n,r,u){var c=p(u);c.beforeSavingItems(n,r);var l=d();if(e.some(r,function(e){return e.length>0})){var f={urls:["".concat(o.urlUtils.origin(),"/apps/appBuilder/1/editor/Batch?checkConcurrentModification=true")],data:{operations:i.getSaveItemsOperations(n,r)}};o.requestsUtil.createAndSendRequest(f,function(t,o){var i=e.get(t,"payload.results");if(o||!t.success){var u=i?function(t,n){return e(t).filter("success").transform(function(t,r){var o=r.payload.id,i=e.find(n.created,{_iid:o});if(i)return i._state=s.STATES.SAVED,void t.push({path:a.getItemPath(i._type,o),value:i});e.find(n.deleted,o)&&t.push({path:a.getItemPath(i._type,o),undefined:void 0})},[]).value()}(i,r):null;l.reject({errorCode:o?t:t.errorCode,changes:u}),c.errorSavingItems(n,t,o)}else l.resolve({changes:g(i,r)}),c.successSavingItems(n,t)},t.ajax)}else c.skippedSavingItems(n),l.resolve(null);return l.promise},saveRepoAndItems:function(t,n,o,i){var a=this,s=[];function u(e){e&&s.push.apply(s,r(e))}var c=d();return this.saveRepo(t,n,i).then(function(n){return u(e.get(n,"changes")),a.saveItems(t,o,i)}).catch(function(t){u(e.get(t,"changes"));var n={changes:s,errorCode:t.errorCode};c.reject(n)}).then(function(t){u(e.get(t,"changes")),c.resolve({changes:s})}).catch(function(t){u(e.get(t,"changes"));var n={changes:s,errorCode:t.errorCode};c.reject(n)}),c.promise},publish:function(e,n){var r=p(n),i=d(),a={urls:c(e),data:{}};return r.beforePublish(e),o.requestsUtil.createAndSendRequest(a,function(t,n){n||!t.success?(i.reject({errorCode:n?t:t.errorCode}),r.errorPublish(e,t,n)):(i.resolve(t.payload),r.successPublish(e))},t.ajax),i.promise}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=[i,a,s,function(e,t){var n=t.created;if(0===n.length)return[];return[{name:"CreateTypes",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,types:n}}]}],r=[i,a,s],o=[function(e,t){if(0===t.length)return[];return[{name:"PublishItems",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,itemIds:t}}]},function(e,t){if(0===t.length)return[];return[{name:"PublishTypes",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,names:t}}]}];function i(t,n){return e.map(n.created,function(e){return{name:"CreateItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,item:e}}})}function a(t,n){return e.map(n.updated,function(e){return{name:"UpdateItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,item:e}}})}function s(t,n){return e.map(n.deleted,function(e){return{name:"DeleteItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,itemId:e}}})}function u(t,n,r){return e(t).map(function(e){return e(n,r)}).flattenDeep().value()}return{getSaveOperations:function(e,n){return u(t,e,n)},getSaveItemsOperations:function(e,t){return u(r,e,t)},getPublishOperations:function(e,t){return u(o,e,t)}}}()},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(43),i=n(3),a=n(1).linkTypes,{convertWLinkToWixappsData:function(e){var t={linkId:e.id};switch(e.type){case a.PAGE_LINK:r.assign(t,{_type:"wix:PageLink",pageId:r.isPlainObject(e.pageId)?e.pageId.id:e.pageId});break;case a.DYNAMIC_PAGE_LINK:var n=r.isPlainObject(e.anchorDataId)?e.anchorDataId.id:e.anchorDataId;r.assign(t,{_type:"wix:DynamicPageLink",routerId:e.routerId,innerRoute:e.innerRoute,anchorDataId:n||""});break;case a.EXTERNAL_LINK:var o=e.url.split("://");1===o.length&&(o=["http"].concat(o)),r.assign(t,{_type:"wix:ExternalLink",target:e.target,protocol:o[0],address:o[1]});break;case a.DOCUMENT_LINK:r.assign(t,{_type:"wix:DocLink",docId:e.docId,docName:e.name});break;case a.PHONE_LINK:r.assign(t,{_type:"wix:PhoneLink",phoneNumber:e.phoneNumber});break;case a.EMAIL_LINK:r.assign(t,{_type:"wix:MailLink",email:e.recipient,subject:e.subject});break;case a.ANCHOR_LINK:r.assign(t,{_type:"wix:AnchorLink",anchorName:e.anchorName,anchorDataId:r.isPlainObject(e.anchorDataId)?e.anchorDataId.id:e.anchorDataId,pageId:r.isPlainObject(e.pageId)?e.pageId.id:e.pageId})}return t},convertWixappsDataToWLink:function(e,t){return o.linksConverter(t,function(t,n){return t=r.isString(t)&&t.replace("#",""),n=r.isString(n)&&n.replace("#",""),i.getDataItemById(e,t,n)})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(25);function r(e,n){var r=t.getOffsetFromServerTimePath(),o=e.dal.getByPath(r);return new Date(n-o).toISOString()}return{getCurrentTime:function(t){return r(t,e.now())},normalizeDate:r}}()},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,i,a,s;e.exports=(o=n(0),i=n(537),a=n(538),s=n(1),function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventCallback=t,this._errorCallback=n}var t,n,u;return t=e,(n=[{key:"sendEvent",value:function(e,t){try{this._eventCallback(e,t)}catch(e){s.log.error("Error sending BI event",e)}}},{key:"sendError",value:function(e,t){try{this._errorCallback(e,t)}catch(e){s.log.error("Error sending BI error event",e)}}},{key:"beforeSavingItems",value:function(e,t){var n=e.applicationInstanceId,r=e.applicationInstanceVersion,a=t.created,s=t.updated,u=t.deleted;this.sendEvent(i.BEFORE_SAVING_ITEMS,{app_instance_id:n,app_instance_version:r,item_ids_to_create:o.map(a,"_iid").join(","),item_ids_to_update:o.map(s,"_iid").join(","),item_ids_to_delete:u.join(",")})}},{key:"successSavingItems",value:function(e,t){var n=e.applicationInstanceId,r=e.applicationInstanceVersion,a=[];if(o.get(t,"payload.results")){var s=o.isArray(t.payload.results)?o.map(t.payload.results,"payload"):[t.payload.results.payload];a=s&&o.map(s,"id")}this.sendEvent(i.SUCCESS_SAVING_ITEMS,{app_instance_id:n,app_instance_version:r,saved_item_ids:a.join(",")})}},{key:"skippedSavingItems",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.SKIPPED_SAVING_ITEMS,{app_instance_id:t,app_instance_version:n})}},{key:"errorSavingItems",value:function(e,t,n){var r=e.applicationInstanceId,o=e.applicationInstanceVersion;this.sendError(a.LIST_BUILDER_ERROR_SAVING_ITEMS,{app_instance_id:r,app_instance_version:o,error_code:t?t.errorCode:n,error_description:t&&t.errorDescription})}},{key:"beforeSavingRepo",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.BEFORE_SAVING_REPO,{app_instance_id:t,app_instance_version:n})}},{key:"successSavingRepo",value:function(e,t){var n=e.applicationInstanceId,r=e.applicationInstanceVersion;this.sendEvent(i.SUCCESS_SAVING_REPO,{app_instance_id:n,old_app_instance_version:r,new_app_instance_version:o.get(t,"payload.applicationInstanceVersion")})}},{key:"skippedSavingRepo",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.SKIPPED_SAVING_REPO,{app_instance_id:t,app_instance_version:n})}},{key:"errorSavingRepo",value:function(e,t,n){var r=e.applicationInstanceId,o=e.applicationInstanceVersion;this.sendError(a.LIST_BUILDER_ERROR_SAVING_REPO,{app_instance_id:r,app_instance_version:o,error_code:t?t.errorCode:n,error_description:t&&t.errorDescription})}},{key:"beforePublish",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.BEFORE_PUBLISH,{app_instance_id:t,app_instance_version:n})}},{key:"successPublish",value:function(e){var t=e.applicationInstanceId,n=e.applicationInstanceVersion;this.sendEvent(i.SUCCESS_PUBLISH,{app_instance_id:t,app_instance_version:n})}},{key:"errorPublish",value:function(e,t,n){var r=e.applicationInstanceId,o=e.applicationInstanceVersion;this.sendError(a.LIST_BUILDER_ERROR_PUBLISH,{app_instance_id:r,app_instance_version:o,error_code:t?t.errorCode:n,error_description:t&&t.errorDescription})}}])&&r(t.prototype,n),u&&r(t,u),e}())},function(e,t){e.exports={BEFORE_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:201,fields:{app_instance_id:"string",app_instance_version:"string",item_ids_to_create:"string",item_ids_to_update:"string",item_ids_to_delete:"string"}},SUCCESS_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:202,fields:{app_instance_id:"string",app_instance_version:"string",saved_item_ids:"string"}},SKIPPED_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:203,fields:{app_instance_id:"string",app_instance_version:"string"}},BEFORE_SAVING_REPO:{src:59,endpoint:"listim2",evid:211,fields:{app_instance_id:"string",app_instance_version:"string"}},SUCCESS_SAVING_REPO:{src:59,endpoint:"listim2",evid:212,fields:{app_instance_id:"string",old_app_instance_version:"string",new_app_instance_version:"string"}},SKIPPED_SAVING_REPO:{src:59,endpoint:"listim2",evid:213,fields:{app_instance_id:"string",app_instance_version:"string"}},BEFORE_PUBLISH:{src:59,endpoint:"listim2",evid:221,fields:{app_instance_id:"string",app_instance_version:"string"}},SUCCESS_PUBLISH:{src:59,endpoint:"listim2",evid:222,fields:{app_instance_id:"string",app_instance_version:"string"}}}},function(e,t){e.exports={LIST_BUILDER_ERROR_SAVING_ITEMS:{src:40,endpoint:"trg",errorName:"list_builder_error_saving_items",errorCode:101,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}},LIST_BUILDER_ERROR_SAVING_REPO:{src:40,endpoint:"trg",errorName:"list_builder_error_saving_repo",errorCode:102,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}},LIST_BUILDER_ERROR_PUBLISH:{src:40,endpoint:"trg",errorName:"list_builder_error_publish",errorCode:103,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}}}},function(e,t){e.exports=function(){function e(e){return e.getIn(["wixapps","appbuilder","descriptor","applicationInstanceVersion"])}function t(e){var t=e.getIn(["rendererModel","clientSpecMap"]).find(function(e){return"appbuilder"===e.get("type")});return t&&t.get("instanceId")}return{getAppInstance:function(n){return{applicationInstanceId:t(n),applicationInstanceVersion:e(n)}},getAppInstanceId:t,getAppVersion:e}}()},function(e,t,n){e.exports=function(){var e=n(143),t=n(106),r=n(224);function o(e,n,o,i){t.fullSave(e,n,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{changes:[]};r.fullSave(e,n,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{changes:[]};o({changes:t.changes.concat(e.changes)})},i)},i)}return{partialSave:o,fullSave:o,firstSave:o,saveAsTemplate:o,autosave:function(){return t.autosave.apply(t,arguments)},publish:function(e,t){t()},getTaskName:e.getTaskName,getSnapshotTags:e.getSnapshotTags}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(5),o=n(73),i=n(107),a=n(77),s=n(102),{installCollections:function(e,t,n){return r.isOpen("ds_provision_with_collections")?function(e,t){return o.requestsUtil.fetchJson("https://apps.wix.com/app-studio-server/getToken/".concat(e,"/").concat(t)).then(function(e){if(!e)throw new Error("bad response");return e.token})}(t,n).then(function(t){if(t)return function(e){return new Promise(function(t,n){if(!a.isProvisioned(e))return s.provision(e,{onSuccess:t,onError:n});t()})}(e).then(function(){return function(e,t){return a.ensureAppIsWriteable(e).then(function(){var n=i.getCodeAppInfoFromPS(e);return o.requestsUtil.fetchJson("https://www.wix.com/_api/cloud-data-packaging/v1/install-data",{mode:"cors",method:"POST",credentials:"include",headers:{Authorization:n.signedInstance},body:JSON.stringify({signedInstance:n.signedInstance,gridAppId:n.appId,packageToken:t})})})}(e,t)})}):Promise.resolve()}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(84),i=n(4),a=n(15),s=function(e,t){var n=o(window);return(n.height()-e.height)/2+n.scrollTop()-t.y},u=function(e){return null!==e&&!isNaN(e)},{getCompLayoutFrom:function(e,t,n){if(n&&u(n.x)&&u(n.y)){var o=n,c=o.x,l=o.y;return r.isNumber(c)||(c=parseInt(c,10)),r.isNumber(l)||(l=parseInt(l,10)),{width:n.width,height:n.height,x:c,y:l}}var p=a.getViewMode(e),d=e.pointers.components.getPagesContainer(p),g=i.layout.get(e,d);if(n=n||{},t.width=n.width||t.width,t.height=n.height||t.height,t.defaultPosition)switch(t.defaultPosition.region){case"header":var f=e.pointers.components.getHeader(p),m=i.layout.get(e,f);return function(e,t,n){var o={y:n.height/2-t.height/2,width:t.width,height:t.height};switch(e){case"LEFT":return r.merge(o,{x:0});case"RIGHT":return r.merge(o,{x:n.width-t.width});default:return r.merge(o,{x:n.width/2-t.width/2})}}(t.defaultPosition.placement,t,m);case"footer":var v=e.pointers.components.getFooter(p),y=i.layout.get(e,v);return function(e,t,n,o){var i={y:n.height+o.height/2-t.height/2,width:t.width,height:t.height};switch(e){case"LEFT":return r.merge(i,{x:0});case"RIGHT":return r.merge(i,{x:o.width-t.width});default:return r.merge(i,{x:o.width/2-t.width/2})}}(t.defaultPosition.placement,t,g,y);default:return function(e,t,n){var o={width:t.width,height:t.height};switch(e){case"TOP_LEFT":return r.merge(o,{x:0,y:0});case"TOP_CENTER":return r.merge(o,{x:n.width/2-t.width/2,y:0});case"TOP_RIGHT":return r.merge(o,{x:n.width-t.width,y:0});case"CENTER_LEFT":return r.merge(o,{x:0,y:s(t,n)});case"CENTER_RIGHT":return r.merge(o,{x:n.width-t.width,y:s(t,n)});case"BOTTOM_LEFT":return r.merge(o,{x:0,y:n.height-t.height});case"BOTTOM_CENTER":return r.merge(o,{x:n.width/2-t.width/2,y:n.height-t.height});case"BOTTOM_RIGHT":return r.merge(o,{x:n.width-t.width,y:n.height-t.height});default:return r.merge(o,{x:n.width/2-t.width/2,y:s(t,n)})}}(t.defaultPosition.placement,t,g)}return{width:t.width,height:t.height,x:g.width/2-t.width/2,y:s(t,g)}}})},function(e,t,n){e.exports=function(){var e=n(0),t=(n(84),n(9)),r=n(4),o=n(17),i=n(7),a=n(18),s=n(14),u=n(157),c=n(112),l=n(37),p=n(100),d=n(30),g=n(230),f="WIDGET",m="PAGE",v=function(n,r,a,s){var u;if(r)if(a)e.includes(t.styles.getAllIds(n),a)&&(u=a);else{var c=i.getComponentById(n,s);u=o.style.getId(n,c)}return u};function y(t,n,r,o){var i=t.siteAPI.getFocusedRootId(),a=e.get(r,"widget.wixPageId")||i,u=s.getWidgetDataFromTPAWidgetId(t,n.appDefinitionId,e.get(r,"widget.tpaWidgetId"));return{pageId:a,widgetId:e.get(u,"widgetId"),showOnAllPages:e.get(r,"widget.allPages"),styleId:v(t,r.copyStyle,r.styleId,o)}}var E=function(t,n,r,o,i){var a=t.siteAPI.getFocusedRootId(),u=e.get(i,"widget.wixPageId")||a;t.pointers.page.isExists(u)||i.widget.allPages?s.getWidgetDataFromTPAWidgetId(t,r.appDefinitionId,e.get(i,"widget.tpaWidgetId"))?function(t,n,r,o,i){e.assign(t,y(n,i,t,r)),g.provisionWidget(n,o,i.appDefinitionId,t)}(i,t,o,n,r):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"No widget found."}):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"pageId was not found."})},I=function(e,t,n,r,o){if(r)switch(o.componentType){case"WIDGET":E(e,t,r,n,o);break;case"PAGE":h(e,t,r,n,o);break;default:e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"componentType not supported."})}else e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"General Error."})},S=function(t,n,r){return{pageId:e.get(n,"page.pageId"),title:e.get(n,"page.title"),styleId:v(t,n.copyStyle,n.styleId,r),layout:P(n),isHidden:e.get(n,"page.isHidden"),requireLogin:e.get(n,"page.requireLogin")}};var h=function(t,n,r,o,i){var a=s.getWidgetDataFromTPAPageId(t,r.appDefinitionId,e.get(i,"page.pageId"));a?s.isMultiSectionInstanceEnabled(r,a.widgetId)?function(t,n,r,o,i){e.assign(r,S(t,r,i)),g.provisionMultiSection(t,n,o.appDefinitionId,r)}(t,n,i,r,o):l.isSectionInstalledByTpaPageId(t,r.applicationId,e.get(a,"appPage.id"))?t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Page already installed."}):function(t,n,r,o){e.assign(n,S(t,n,r)),t.setOperationsQueue.asyncPreDataManipulationComplete(o)}(t,i,o,r):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"No page found."})},P=function(t){var n={};return e.isNumber(t.x)&&(n.x=t.x),e.isNumber(t.y)&&(n.y=t.y),e.isNumber(t.width)&&(n.width=t.width),e.isNumber(t.height)&&(n.height=t.height),n},A=function(t,n,o){if("WIDGET"===o.componentType){var i=t.siteAPI.getPrimaryPageId(),s=t.pointers.page.getPagePointer(i);return r.getComponentToAddRef(t,s,o,e.get(o,"optionalCustomId"))}return a.getPageIdToAdd(t)},T=function(t,n,r,o){if(r){var i=l.getAllAppCompsByAppId(t,n.applicationId);return e.find(i,{widgetId:e.get(r,"widgetId")})||e.find(i,{widgetId:null})}return o({onError:"No widget found."}),null},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t?p.getAppMarketDataAsync(e,t).then(function(r){r&&!r.error?(n.componentType=r.hasSection?"PAGE":"WIDGET",n.componentToAddRef=A(e,0,n),n.componentType===f?(n.layout=C(n),n.pageId&&!e.pointers.page.isExists(n.pageId)&&delete n.pageId,g.provisionWidget(e,n.componentToAddRef,t,n)):n.componentType===m&&(u.alreadyInstalled(e,t)?e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Section already installed"}):(n.layout=D(n),g.provisionSection(e,n.componentToAddRef,t,n,n.callback)))):e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Application with ".concat(t," appDefinitionId do not exist.")})}):e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"appDefinitionId is mandatory."})},C=function(t){var n={};return t&&e.isNumber(t.x)&&e.isNumber(t.y)&&(n={x:t.x,y:t.y}),n},_=function(t){return"WIDGET"===e.get(t,"componentType")?C(t):D(t)},D=function(t){var n={};return t&&(e.isNumber(t.x)&&(n.x=t.x),e.isNumber(t.y)&&(n.y=t.y),e.isNumber(t.width)&&(n.width=t.width),e.isNumber(t.height)&&(n.height=t.height)),n};return{provisionComp:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.appDefinitionId;if(o)if(l.isAppInstalledBy(t,o))n=s.getAppDataByAppDefinitionId(t,o),r.componentToAddRef=A(t,0,r),I(t,r.componentToAddRef,r.compId,n,r);else{var i=e.clone(r);e.forEach(e.keys(r),function(e){delete r[e]}),r.appFlow=!0,r.componentOptions=i,r.componentOptions.layout=_(i),r.callback=i.callback,O(t,o,r)}else t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"appDefinitionId is mandatory."})},addComponent:function t(n,r,o){if(r.onError)e.isFunction(o.callback)&&o.callback(r);else{if(o.appFlow){var a=o.callback||e.noop;o.callback=function(){var l=s.getAppDataByAppDefinitionId(n,o.componentOptions.appDefinitionId);if(function(t,n){var r=e.find(t.widgets,function(t){return"WIDGET"===n.componentType?t.tpaWidgetId===n.widget.tpaWidgetId:"PAGE"===n.componentType?e.get(t,"appPage.id")===n.page.pageId:null});return!!e.get(r,"autoAddToSite")}(l,o.componentOptions))!function(e,t,n,r){var o,a;if("WIDGET"===t.componentType){if(o=s.getWidgetDataFromTPAWidgetId(e,n.appDefinitionId,t.widget.tpaWidgetId),a=T(e,n,o,r)){var l=i.getComponentById(e,a.id);c.invokeWidgetCallback({callback:r},l,!0)}}else if("PAGE"===t.componentType&&(o=s.getWidgetDataFromTPAPageId(e,n.appDefinitionId,t.page.pageId),a=T(e,n,o,r))){var p=e.pointers.components.getPage(a.pageId,e.siteDataAPI.siteData.getViewMode());u.invokeSectionCallback({callback:r},p,a.id,!0)}}(n,o.componentOptions,l,a);else{var p={componentType:o.componentOptions.componentType,componentToAddRef:A(n,o.componentOptions.appDefinitionId,o.componentOptions),callback:a};p.componentType===f?e.assign(p,y(n,l,o.componentOptions,o.compId)):p.componentType===m&&e.assign(p,S(n,o.componentOptions,o.compId)),t(n,r,p)}}}switch(o.componentType){case"WIDGET":g.addAppWrapper(d.TYPE.TPA_WIDGET,n,r,o.componentToAddRef,r.appDefinitionId,o);break;case"PAGE":if(o.appFlow)g.addSection(n,r,o.componentToAddRef,r.appDefinitionId,o);else{var p=s.getWidgetDataFromTPAPageId(n,r.appDefinitionId,e.get(o,"pageId"));p&&(s.isMultiSectionInstanceEnabled(r,p.widgetId)?g.addMultiSection(n,r,o.componentToAddRef,r.appDefinitionId,o):l.isSectionInstalledByTpaPageId(n,r.applicationId,e.get(p,"appPage.id"))||g.addSubSection(n,o.componentToAddRef,r.appDefinitionId,o))}}}},provisionApp:O,addApp:function(t,n,r,o){if(n.onError)e.isFunction(o.callback)&&o.callback(n);else switch(o.componentType){case f:g.addAppWrapper(d.TYPE.TPA_WIDGET,t,n,o.componentToAddRef,r,o);break;case m:g.addSection(t,n,o.componentToAddRef,r,o)}}}}()},function(e,t){e.exports={getComponentDefinition:function(e){return{addHoneycomb:{layout:{rotationInDegrees:0,width:626,height:723,scale:1,x:130,y:32,fixedPosition:!1},componentType:"tpa.viewer.components.Honeycomb",type:"Component",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin",data:{items:[{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569}],type:"ImageList"},props:{numOfColumns:4,numOfHoles:2,imageShape:"hexagon",expandEnabled:!1,margin:1,font:"arial",imageScale:"x1",textMode:"titleAndDescription",alignText:"left",rolloverAnimation:"colorOnly",galleryImageOnClickAction:"zoomMode",type:"HoneycombProperties",layoutSeed:50},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i4skqikv",styleType:"custom",style:{propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}}}[e&&e.compType]}}},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f;e.exports=(r=n(0),o=n(23),i=n(38),a=n(14),s=n(13),u=n(4),c=n(7),l=n(28),p=n(88),d=function(e){var t,n,o=p.current.get(e),i=p.original.get(e),a=p.getFull(e),s=l.getCurrency(e),u=l.getTimeZone(e);return o&&(r.get(i,"languageCode")===o?(t=i.locale,n="true"):(t=r.get(r.find(a,{languageCode:o}),"locale"),n="false")),{lang:o,dateNumberFormat:t,isPrimaryLanguage:n,currency:s,timeZone:u}},g=function(e,t,n){if(t.url){var o=a.getAppData(e,t.applicationId),l=s.getProperty(e,s.PROPERTY_NAMES.LANGUAGE_CODE)||"en",p=e.siteAPI.getCurrentUrl(),g=i.common.utils.appendProtocolToUrlIfNeeded(t.url,p),m=i.common.utils.getDebuggingParamsFromUrl(p),v=d(e),y=r.get(e.siteAPI.getTpaCompPreviewData("sharedQueryParams"),"deviceTypeForTPA","desktop"),E="mobile"===t.deviceType?"mobile":y,I=u.data.get(e,c.getComponentById(e,t.origCompId));return new i.common.TPAUrlBuilder(g).addLocale(l).addOrigCompId(t.origCompId).addCompId(n).addDeviceType(E).addViewMode("editor").addInstance(o.instance).addOrigin(t.origin).addMultipleQueryParams(m).addQueryParamsFromFunc(f,r.get(t,"bi")).setHash(t.hash).addExternalId(r.get(I,"referenceId")).addLang(v.lang).addDateNumberFormat(v.dateNumberFormat).addIsPrimaryLanguage(v.isPrimaryLanguage).addCurrency(v.currency).addTimeZone(v.timeZone).build()}return null},f=function(e,t){if(r.isObject(t))try{t=JSON.stringify(t),e.build().length<2083-t.length&&e.addCbi(t)}catch(e){o.log.error("could not add CBI param to URL:",e)}},{getSettingsModalParams:function(e,t,n){var r=o.guidUtils.getUniqueId();return n.compId=r,n.url=g(e,t,r),n.title=n.title||"",n},getSettingsUrl:function(e,t,n,o,l){var p=a.getAppData(e,t),g=r.get(l,"isNewVersion",!1),m=p.settingsUrl,v=p.widgets&&p.widgets[n];if(v){var y=r.get(v,"settings");m=(g?r.get(y,"urlV2"):r.get(y,"url"))||m}var E=r.get(l,"width")?l.width:p.settingsWidth,I=s.getProperty(e,s.PROPERTY_NAMES.LANGUAGE_CODE)||"en",S=d(e),h=e.siteAPI.getCurrentUrl(),P=i.common.utils.getDebuggingParamsFromUrl(h),A="mobile"===r.get(e.siteAPI.getTpaCompPreviewData("sharedQueryParams"),"deviceTypeForTPA","desktop"),T=u.data.get(e,c.getComponentById(e,o)),O=new i.common.TPAUrlBuilder(m).addInstance(p.instance).addLocale(I).addOrigCompId(o).addWidth(r.toString(E)).addEndpointType("settings").addViewMode("editor").addCompId("tpaSettings").addMultipleQueryParams(P).addQueryParamsFromFunc(f,r.get(l,"bi")).addExternalId(r.get(T,"referenceId")).addLang(S.lang).addDateNumberFormat(S.dateNumberFormat).addIsPrimaryLanguage(S.isPrimaryLanguage).addCurrency(S.currency).addTimeZone(S.timeZone);return(e.siteAPI.isMobileView()||A)&&(O=O.addDeviceType("mobile")),O.build()},getSettingsModalUrl:g})},function(e,t){var n,r,o,i,a,s;e.exports=(o=function(e,t,o){return function(i){try{r(e,{intent:o||n.TPA_RESPONSE,callId:t.callId,type:t.type,res:i,status:!0})}catch(e){}}},a=function(e){return e===n.TPA_MESSAGE_PREVIEW},s=function(e){var t;try{e.data?t=JSON.parse(e.data):e.originalEvent&&e.originalEvent.data&&(e=e.originalEvent,t=JSON.parse(e.data))}catch(e){}return t},{Intents:n={TPA_MESSAGE:"TPA",TPA_MESSAGE_PREVIEW:"TPA_PREVIEW",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",TPA_PREVIEW_RESPONSE:"TPA_PREVIEW_RESPONSE",PINGPONG_PREFIX:"pingpong:"},callPostMessage:r=function(e,t,n){var r="";try{r=JSON.stringify(t)}catch(e){return}e.postMessage||(e=e.contentWindow),e.postMessage(r,n||"*")},generateResponseFunction:o,isTPAMessage:i=function(e){return e===n.TPA_MESSAGE||e===n.TPA_MESSAGE2},fixOldPingPongMessageType:function(e){return e.replace(n.PINGPONG_PREFIX,"")},handleTPAMessage:function(e,t,r,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=s(u);l&&i(l.intent)&&!c[l.type]?r(e,l,o(u.source,l),u):l&&a(l.intent)&&r(e,l,o(u.source,l,n.TPA_PREVIEW_RESPONSE),u)}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(1),{generateRouterId:function(e){for(var t=o.guidUtils.getUniqueId("routers","-");r(e).keys().includes(t);)t=o.guidUtils.getUniqueId("routers","-");return t}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(1),i=n(549),a=n(3),s=n(9),{beforeAdd:function(e,t,n,u){if(!r.get(u,"props.menuItemHeight")&&r.get(u,"layout.height")){var c=u.layout.height,l=a.getDataItemById(e,u.data.menuRef.replace("#","")).items,p=r.filter(l,"isVisible").length,d=r.isString(u.style),g=e.pointers.components.getPageOfComponent(n).id,f=d?s.styles.get(e,u.style,g):u.style,m=parseInt(f.style.properties.sepw||f.style.properties.separatorHeight||0,10),v=i[u.skin],y=o.verticalMenuCalculations.getItemHeight(c,m,p,v);u.props.menuItemHeight=y}}})},function(e,t){e.exports=k},function(e,t,n){e.exports=function(){var e=n(0);function t(t,n){var r=t.pointers.data.getDataItem(n,n),o=e.get(t.dal.get(r),"pageBackgrounds",{}),i=o.mobile;i&&!i.mediaSizing&&(i.mediaSizing="viewport",t.dal.merge(r,{pageBackgrounds:o}))}return{setMobileMediaSizing:t,setMobileMediaSizingByPointer:function(e,n){t(e,n.id)},setMediaSizingForDevice:function(e,n,r){"mobile"===r&&t(e,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(36);function o(e){return e?t.VIEW_MODES.MOBILE:t.VIEW_MODES.DESKTOP}return{handleHeaderLayoutChange:function(t,n,i){var a=t.dal.get(n).layout;if(!e.isUndefined(i.fixedPosition)&&a.fixedPosition!==i.fixedPosition&&!1===i.fixedPosition){var s={type:"scrub",viewMode:o(t.siteAPI.isMobileView())};r.removeComponentsBehaviorsWithFilter(t,n,s)}}}}()},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(1),o=n(60),i=n(4),a=n(3),s=n(7),u=n(129),c="platform.components.AppController",l="platform.components.AppWidget";function p(t,n){return e.map(n,function(n){var r=e.get(n,"controllerId");return t[r]?e.assign({},n,{controllerId:t[r]}):n})}function d(t,n,r,o){return e(r).filter(function(r){return function(t,n,r,o){var i=e.get(o,"controllerId");return e(n).map(function(n){return e.get(a.getDataItem(t,n),"id")}).some(function(e){return i===e||e===r[i]})}(t,n,o,r)}).thru(e.partial(p,o)).value()}function g(t,n,o,a,p,g){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};u.updateNicknameContextByNewContainer(t,n,a,o);var m=e.get(a,"connections.items"),v=e.reject(m,{type:"WixCodeConnectionItem"});if(!e.isEmpty(v)){var y=function(t,n,o,a){var u=n?o:t.pointers.full.components.getPageOfComponent(a).id,p=s.getAllComponents(t,u,function(e){return i.getType(t,e)===c}),d=e.filter([a].concat(r(i.getAncestorsFromFull(t,a))),function(e){return i.getType(t,e)===l});return[].concat(r(p),r(d))}(t,g,a.id,o),E=d(t,y,v,f),I=e.difference(m,v);e.set(a,"connections.items",I.concat(E))}}return{updateSerializedConnectionsData:function(e,t,n,r,o,i,a){i||g.apply(void 0,arguments)},updateSerializedConnectionsDataForPage:function(e,t,n,r,o){var i=n.connections;g(e,null,null,n,r,!0,o),i&&a.addSerializedConnectionsItemToPage(e,t.id,i,r)},removeInvalidConnections:function(n,r,a){var s=i.getPage(n,r).id,u=i.getPage(n,a).id;if(s!==t.siteConstants.MASTER_PAGE_ID&&s!==u){var c=n.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(r);e.forEach(c,function(t){var r=o.getPlatformAppConnections(n,t);e.forEach(r,function(r){var a,s=e.get(r,"controllerRef");i.getPage(n,s).id===u||(a=s,e.some(c,function(e){return n.pointers.isSamePointer(e,a)}))||o.disconnect(n,t,s)})})}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t="wysiwyg.viewer.components.ContactForm",r="ContactForm";function o(t,n){var r=t.dal.get(t.pointers.general.getContactFormsMetaData())[n.id];e.merge(n,r)}function i(t,n,r){if(r){var o=t.pointers.general.getContactFormsMetaData(),i=t.dal.get(o)[r.id],a=e.assign({},i,e.pick(r,e.keys(i))),s=t.pointers.getInnerPointer(o,r.id);t.dal.set(s,a)}}return{initContactFromHooks:function(e){e.registerHook(e.HOOKS.DATA.AFTER_GET,o,r),e.registerHook(e.HOOKS.DATA.UPDATE_BEFORE,i,t)}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(199),i=n(4),a=n(3),s=["width","height"],{beforeAddHook:function(e,t,n,o){!function(e){if(1!==r.size(e.components))throw new Error("Invalid app widget structure - must have single child")}(o),function(e){if(!e.layouts){var t=e.components[0];r.merge(t,{layout:{x:0,y:0}}),r.forEach(s,function(n){r.has(e,["layout",n])?t.layout[n]=e.layout[n]:r.has(t,["layout",n])&&r.set(e,["layout",n],t.layout[n])})}}(o)},handleAppWidgetAddition:function(e,t,n){o.setControllerStateFromSerializedStructure(e,t,n),o.addPlatformAppToPageIfFirstController(e,t,n.data.applicationId)},handleAppWidgetDeletion:function(e,t){o.removePlatformApplicationFromPageIfLastController(e,t),o.removeControllerFromStateMap(e,t)},handleAppWidgetSerialization:function(e,t,n){o.addControllerStateToSerializedStructure(e,t,n)},handleAppWidgetParentChange:function(e,t,n){var r=a.getDataItem(e,t).applicationId;o.removePlatformApplicationFromPageIfLastController(e,t),o.addPlatformAppToPageIfFirstController(e,t,r,i.getPage(e,n))}})},function(e,t,n){var r;e.exports=(r=n(158),{removeComponentHook:function(e,t){(r.getComponentPreviewState(e)||{})[t.id]&&r.setComponentPreviewState(e,t.id,null)}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(4),i=n(10),{setMobileComponentAsDead:function(e,t){if(!(e.pointers.components.isPage(t)||e.pointers.components.isMobile(t)||e.dal.full.isExist(t))){var n=e.pointers.full.components.getMobilePointer(t);if(e.dal.full.isExist(n)){var a=e.pointers.full.components.getParent(n);a&&function(e,t){var n=r.get(e.pointers.full.components.getPageOfComponent(t),"id",""),o=e.dal.full.get(t);return!i.public.getMobileConversionConfigByName(e,o,"nonLayoutComponent",n)}(e,n)&&function(e,t,n){var r=e.dal.full.get(t),i={id:"dead-".concat(r.id),type:"Container",componentType:"to.be.removed.by.MobileMerge",layout:r.layout,components:[]},a=e.pointers.full.components.getChildrenContainer(n),s=o.getComponentToAddRef(e,n,i,i.id);e.dal.full.push(a,i,s)}(e,n,a),r(e.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(n)).forEach(function(t){e.dal.full.isExist(t)&&e.dal.full.remove(t)})}}}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(11),i=n(3),{beforeUpdateCheckboxData:function(e,t,n){if(!r.isEmpty(n.label)&&r.isEmpty(i.getDataItem(e,t).label)){var a=e.dal.get(t),s=i.getPropertiesItem(e,t),u=r.clamp(a.layout.height,12,100);i.setPropertiesItem(e,t,r.assign(s,{buttonSize:u})),o.updateCompLayoutAndAdjustLayout(e,t,{width:u+200},!0)}},afterUpdateCheckboxData:function(e,t,n){if(r.isEmpty(i.getDataItem(e,t).label)&&!r.isEmpty(n.label)){var a=i.getPropertiesItem(e,t).buttonSize||18;o.updateCompLayoutAndAdjustLayout(e,t,{width:a,height:a},!0)}}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(11),i=n(4),a=n(45),s=n(16),{copyRootComponentDockedLayout:function(e,t){r.forEach(r.filter(t,function(t){var n=t.id;return a.isWidgetPage(e,n)}),function(t){var n=r.head(i.getChildren(e,e.pointers.components.getDesktopPointer(t))),a=o.getDock(e,n);r.isEmpty(a)||s.syncDockData(e,n,a,o)})}})},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(3),o=n(560).labelUtils,i=o.minInputHeight,a=o.defaultInputHeight;function s(n,o,a,s){var u="DESKTOP"===s?"inputHeight":"inputHeightMobile",c=n.dal.get({type:s,id:o.id});if(c){var l=Math.max(c.layout.height,i);t.setPropertiesItem(n,o,e.assign(a,r({},u,l)))}}return{beforeUpdateInputLabelData:function(n,r,o){if(!e.isEmpty(o.label)&&e.isEmpty(t.getDataItem(n,r).label)){var i=t.getPropertiesItem(n,r),a=e.partial(s,n,r,i);a("DESKTOP"),a("MOBILE")}},beforeUpdateInputLabelLayout:function(n,o,s){if(s.height){var u=n.pointers.components.isMobile(o)?"inputHeightMobile":"inputHeight",c=n.dal.get(o),l=t.getPropertiesItem(n,o),p=!e.isEmpty(t.getDataItem(n,o).label),d=c.layout,g=(l[u]||a)+s.height-d.height,f=p?g:s.height,m=Math.max(i,f);t.setPropertiesItem(n,o,e.assign(l,r({},u,m)))}}}}()},function(e,t){e.exports=F},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(31),i=n(7),a=n(68),s=n(4),u="wysiwyg.viewer.components.SiteRegionContainer",{removeOverridesPointingToMode:function(e,t,n){var c=o.getComponentActiveModeIds(e,t),l=!r.includes(c,n);l&&o.activateComponentMode(e,t,n);var p=i.getComponentByType(e,u,t),d=a.getSOSPModes(e),g=r.map(d,"modeId");r.forEach(p,function(i){var a=o.overrides.getAllOverrides(e,i);if(function(e,t){return r(e).flatMap("modeIds").includes(t)}(a,n)){var u=r.reduce(a,function(e,t){var o=t.modeIds,i=r.cloneDeep(t);return i.modeIds=r.without(o,n),r.isEmpty(i.modeIds)||e.push(i),e},[]),c=r.flatMap(u,"modeIds");r.isEmpty(u)||r.isEmpty(r.intersection(c,g))?s.remove(e,i):(l&&o.deactivateCompMode(e,t,n),o.overrides.updateComponentOverrides(e,i,u))}})}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(22),i=n(62),{afterAddInput:function(e,t,n){r.isString(n.props.placeholder)&&n.data.placeholder!==n.props.placeholder&&o.event(e,i.INPUT_WRONG_PLACEHOLDER,{comp_id:t.id})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(23),r=n(1),o=n(2),i=n(65),a=n(3),s=n(129),u=n(196),c=n(50),l=n(238),p=t.constants.DATA_TYPES,d=function(t){return e(t).split("-").slice(0,-1).value().join("-")};var g={StyledText:!0},f=function(e){return!g[e]};var m=r.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE,v={data:a.addSerializedDataItemToPage,props:a.addSerializedPropertyItemToPage,design:a.addSerializedDesignItemToPage,behaviors:a.addSerializedBehaviorsItemToPage,connections:function(t,n,r,i){var s=t.pointers.components.getPage(n,o.VIEW_MODES.DESKTOP);r.items=e.reject(r.items,function(e){var n=e.type,r=e.role;return"WixCodeConnectionItem"===n&&c.hasComponentWithThatNickname(t,s,r)}),e.isEmpty(r.items)||a.addSerializedConnectionsItemToPage(t,n,r,i)},mobileHints:a.addSerializedMobileHintsItemToPage,style:function(e,t,n,r){return a.addSerializedStyleItemToPage(e,n,r,t)}};function y(t,n,o){var i=(o.custom||{}).overriddenData;i&&function(t,n,o){var i=t.pointers.full.components.getPageOfComponent(n).id;e.forEach(o,function(e){var o=e.compId,a=e.itemType,s=e.dataItem,u=v[a];if(u){var c=r.displayedOnlyStructureUtil.createRefIdWithSuffix(n.id,o,"-".concat(m[a]));u(t,i,s,c)}})}(t,n,i)}return u.registerCustomGetter("wysiwyg.viewer.components.RefComponent",function(t,n,r,o){var i,a,s,u=t.pointers.full.components.getPageOfComponent(n);return e(n).thru(t.pointers.referredStructure.getConnectionOverrides).mapKeys(function(e){return d(e.id)}).mapValues(function(e){return c.getNicknameByConnectionPointer(t,e,u,o)}).assign((i={},a=n.id,s=r,a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i)).pickBy().value()}),{beforeDeserialize:function(t,n,o,a){if(a){var s=t.pointers.data.getItem(o,a);if(f(n.type)&&r.displayedOnlyStructureUtil.isRefPointer(s)){var u=function t(n,o,a,s){if(!e.isObject(s))return s;var u=n.pointers.data.getItem(a,s.id);r.displayedOnlyStructureUtil.isRefPointer(u)||(s.id=r.guidUtils.getUniqueId(o,"-",{bucket:"innerRefs"}));var c=s.type;return e.forOwn(s,function(r,u){e.isPlainObject(r)&&i.isOfType(a,c,u,"ref")?s[u]=t(n,o,a,r):i.isOfType(a,c,u,"refList")?s[u]=e.map(r,t.bind(null,n,o,a)):"id"!==u&&(s[u]=r)}),s}(t,d(a),o,n);return o===p.connections?function(t,n){return n.items=e.reject(n.items,function(e){var n=e.controllerId;if(!e.isPrimary)return!1;var o=t.pointers.data.getItem(p.connections,n);return r.displayedOnlyStructureUtil.isRefPointer(o)}),n}(t,u):u}}return n},afterAddComponent:function(t,n,r){y(t,n,r),t.setOperationsQueue.waitForChangesApplied(function(){var o=t.pointers.components.getPageOfComponent(n),i=t.pointers.components.getChildrenRecursively(n);s.generateNicknamesForComponents(t,i,o),function(t,n,r){var o=r.custom||{},i=o.overrideRootNickname,s=o.overrideRootData,u=e.head(t.pointers.components.getChildren(n));if(i&&c.setNickname(t,u,i),s){var l=t.pointers.full.components.getPageOfComponent(n).id,p=a.getDataItemPointer(t,u).id;v.data(t,l,s,p)}}(t,n,r)})},setCustomSerializeData:l.setCustomSerializeData,removeAllOverrides:function(e,t){return l.removeAllOverrides(e,t,!1)}}}()},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,i,a,s,u,c,l,p;e.exports=(o=n(0),i=n(6),a=n(12),s=n(239),u=n(567).default,c={beforeUpdateProperties:{hookName:i.HOOKS.PROPERTIES.UPDATE_BEFORE,pluginDataType:"properties"},beforeUpdateData:{hookName:i.HOOKS.DATA.UPDATE_BEFORE,pluginDataType:"data"},beforeUpdateLayout:{hookName:i.HOOKS.LAYOUT.UPDATE_BEFORE,pluginDataType:"layout"}},l=function(e){return function(t){return o.merge(e,t)}},{createHookDefinition:function(e,t){var n=c[e],i=n.hookName,a=n.pluginDataType;if(i)return{hookName:i,hook:function(e,t){return function(n,i,a){if(o.isFunction(t)){var u=s(n,i,{overrides:r({},e,{update:l(a)}),read:!0,write:!0});t(u,o.cloneDeep(a))}}}(a,t)}},beforeUpdateData:(p=function(e,t){return function(n,i,c){var p=a.getComponentType(n,i),d=o.get(u,[p,e]);o.isFunction(d)&&d(s(n,i,{overrides:r({},t,{update:l(c)}),read:!0,write:!0}),o.cloneDeep(c))}})("beforeUpdateData","data"),beforeUpdateLayout:p("beforeUpdateLayout","layout"),beforeUpdateProperties:p("beforeUpdateProperties","properties")})},function(e,t,n){var r,o;e.exports=(r=n(4),o=n(3),function(e,t){return{layout:{get:function(){return r.layout.get(e,t)}},data:{get:function(){return o.getDataItem(e,t)}},properties:{get:function(){return r.properties.get(e,t)}},isMobile:function(){return e.pointers.components.isMobile(t)}}})},function(e,t,n){var r,o,i;e.exports=(r=n(4),o=n(11),i=n(3),function(e,t){var n=function(n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n.apply(void 0,[e,t].concat(o))}};return{layout:{update:n(o.updateCompLayout)},data:{update:n(i.updateDataItem)},properties:{update:n(r.properties.update)}}})},function(e,t){e.exports=U},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){var e=n(0),t=n(214),o=n(219),i=n(1),a=n(6),s=n(240),u=n(241),c="initial state";function l(t){return e.isEqual(t,["runtime"])}function p(e){e.runtimeConfig.nextHistorySnapshotId=i.guidUtils.getGUID()}function d(e,t){u.applyPatchList(e,t)}function g(n,r,i){return e.mapValues(r,function(r){return function(n,r,i){var a,s;r.full.isPathExistInHostModel(n)&&(s=r.full.immutable.getByPath(n));var u=i.getIn(n),c=!1;return e.isUndefined(s)&&!e.isUndefined(u)?(c=!0,a=t(o.Map(),o.Map([[n[0],u]]))):!e.isUndefined(s)&&e.isUndefined(u)?(c=!0,a=t(o.Map([[n[0],s]]),o.Map())):a=t(s,u),e.map(a.toJS(),function(t){return e.assign({},t,{path:c?n.join("/"):n.join("/").concat(t.path)})})}(r,n,i)})}function f(t,n,r,o){var i=function(t,n){return e(n).filter(t.full.isPathExist).transform(function(e,n){var r=n.join(".");l(n)?e[r]=function(e){return e.displayedJsonDal.jsonData.runtime}(t):e[r]=t.getByPath(n)},{}).value()}(t,o),a=g(t,r,n),s=function(t){return t?e(t).map(function(e){return e.path.split("/")[1]}).uniq().value():[]}(a.pagesData);return t.transaction(function(){!function(t,n){e.forEach(n,e.partial(d,t))}(t.full,a)}),function(t,n){e.forEach(n,function(e,n){var r=n.split(".");l(r)?function(e,t){e.displayedJsonDal.jsonData.runtime=t}(t,e):t.full.setByPath(r,e)})}(t,i),s}function m(t,n,r,o,i){var s=function(t){var n=e.map(t,e.last);return e.zipObject(n,t)}(r),u=n.full.immutable.getSnapshotByTagAndIndex("undoRedo",t.historyIndex,s),c=f(n,u,s,o);e.forEach(c,function(e){i.createDisplayedPage(e)}),e.isEmpty(c)||a.executeHook(a.HOOKS.UNDO_REDO.AFTER_APPLY_SNAPSHOT)}function v(t){return e.map(t,function(t){return e.isString(t)?[t]:t})}function y(e){s.canAutosave(e)&&a.executeHook(a.HOOKS.AUTOSAVE.ACTION)}function E(t){return e.last(t)}function I(t){return e.isEmpty(t)?null:E(t).params}function S(t){return e.isEmpty(t)?null:E(t).label}function h(t){return e.isEmpty(t)?null:E(t).snapshotId}return function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.undoablePaths=v(n),this.nonUndoablePaths=v(r),this.undoStack=[],this.redoStack=[],this.ps=e,p(e),this.add(c)}var n,o,i;return n=t,(o=[{key:"undo",value:function(){if(!this.canUndo())return null;var t=this.undoStack.pop();this.redoStack.push(t);var n=e.last(this.undoStack);return this.ps.setOperationsQueue.runSetOperation(m,[n,this.ps.dal,this.undoablePaths,this.nonUndoablePaths,this.ps.siteAPI]),y(this.ps),n.label}},{key:"applyLatestSnapshot",value:function(){var t=e.last(this.undoStack);return t?(this.ps.setOperationsQueue.runSetOperation(m,[t,this.ps.dal,this.undoablePaths,this.nonUndoablePaths,this.ps.siteAPI]),t.label):null}},{key:"redo",value:function(){if(!this.canRedo())return null;var t=this.redoStack.pop();this.undoStack.push(t);var n=e.last(this.undoStack);return this.ps.setOperationsQueue.runSetOperation(m,[n,this.ps.dal,this.undoablePaths,this.nonUndoablePaths,this.ps.siteAPI]),y(this.ps),n.label}},{key:"add",value:function(t,n,r){var o=this;this.clearRedoStack();var i,a,s={placeHolder:!0,params:n||null,label:t||""},u=this.canUndo()&&(i=r,(a=this.undoStack)[a.length-1].snapshotId===i);if(u){var l=this.undoStack.pop();s.params=e.assign({},l.params,n,{label:s.label})}else if(r===this.ps.runtimeConfig.nextHistorySnapshotId)return;this.ps.setOperationsQueue.flushQueueAndExecute(function(){u&&o.ps.dal.removeLastSnapshot("undoRedo"),s.historyIndex=o.ps.dal.takeSnapshot("undoRedo"),s.snapshotId=function(e){var t=e.runtimeConfig.nextHistorySnapshotId;return p(e),t}(o.ps),s.placeHolder=!1}),this.undoStack.push(s),t!==c&&y(this.ps)}},{key:"canUndo",value:function(){return this.undoStack.length>=2}},{key:"canRedo",value:function(){return!e.isEmpty(this.redoStack)}},{key:"clear",value:function(){this.clearUndoStack(),this.clearRedoStack()}},{key:"getUndoLastSnapshotParams",value:function(){return I(this.undoStack)}},{key:"getRedoLastSnapshotParams",value:function(){return I(this.redoStack)}},{key:"getUndoLastSnapshotLabel",value:function(){return S(this.undoStack)}},{key:"getRedoLastSnapshotLabel",value:function(){return S(this.redoStack)}},{key:"getUndoLastSnapshotId",value:function(){return h(this.undoStack)}},{key:"getRedoLastSnapshotId",value:function(){return h(this.redoStack)}},{key:"clearRedoStack",value:function(){this.redoStack=[]}},{key:"clearUndoStack",value:function(){this.add(c),this.undoStack=e.takeRight(this.undoStack)}}])&&r(n.prototype,o),i&&r(n,i),t}()}()},function(e,t,n){var r,o;e.exports=(r=n(6),o=n(61),{initMethod:function(){r.registerHook(r.HOOKS.WIX_CODE.FILE_CONTENT_CHANGED,function(e,t){var n=t.location;(function(e){return e.startsWith("public/custom-elements/")})(n)&&o.flush(e,{origin:"CUSTOM_ELEMENTS"}).then(function(){var t=e.pointers.customElements.getCacheKillerCounter(n),r=(e.dal.get(t)||0)+1;e.dal.set(t,r)})})}})},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e,t=n(0),o=n(3),i=n(11),a="FixedItemLayout",s="itemLayout",u=(r(e={},"componentLayout",["ComponentLayout"]),r(e,"containerLayout",["FlexContainerLayout","GridContainerLayout","StackContainerLayout","OrganizerContainerLayout"]),r(e,s,["FlexItemLayout","GridItemLayout","StackItemLayout","OrganizerItemLayout","FixedItemLayout"]),e),c=function(e){return"BreakpointRelation"!==e.type},l=function(e,n){return t(e).filter(function(e){return function(t){return"BreakpointRelation"===t.type&&t.breakpoint.replace("#","")===e}}(n)).map(function(e){return e.ref}).value()},p=function(e){return function(n){return t.includes(u[e],n.type)}},d=function(e){return t.get(e,"type")===a},g=function(e,n){return o.refArray.update(e,t.filter(o.refArray.extractValues(e),function(e){return n(o.breakpointRelation.extractRef(e)||e,o.breakpointRelation.extractBreakpoint(e))}))},f=function(e,t){var n=function(e){return e.type===a};if(e&&e.itemLayouts.length>0){var r=e.itemLayouts,o=function(e){return e.type!==a};if(t&&"fixed"===t?o=n:r[0].type===a&&(o=n),!r.every(o))throw new Error("given layout contains both fixed and non-fixed layouts")}return!0},m=function(e){return t.mapValues(u,function(n,r){return t.find(e,p(r))})},v=function(e,t){var n=y(e,t);return m(n)};function y(e,n){var r=o.refArray.extractValues(e);return n?l(r,n):t.filter(r,c)}function E(e,n){var r=v(e);if(t.has(n,"itemLayout.type")){var o=d(r.itemLayout),i=d(n.itemLayout);if(o){if(!i)throw new Error("Cannot update pinned component itemLayout to anything other then FixedItemLayout")}else if(i)throw new Error("Cannot update component itemLayout to FixedItemLayout when not pinned")}return!0}function I(e,n,r,i){var a=function(e,n,r){var o=y(e,r);return t.find(o,p(n))}(e,r,i),s=t.filter(o.refArray.extractValues(e),function(e){return(o.breakpointRelation.extractRef(e)||e)!==a});return n&&s.push(i?o.breakpointRelation.create(i,n):n),o.refArray.update(e,s)}return{init:function(){},get:function(e,t){return o.getComponentLayoutData(e,t)},update:function(e,t,n){f(n),o.updateComponentLayoutData(e,t,n)},measure:function(e,t){return e.siteAPI.responsive.getMeasuresByCompId(t.id)},getBoundingBox:function(e,t){return e.siteAPI.responsive.getBoundingBox(t.id)},getRelativeToViewportBoundingBox:function(e,t){return e.siteAPI.responsive.getRelativeToViewportBoundingBox(t.id)},getScrollHeight:function(e,t){return e.siteAPI.responsive.getScrollHeight(t.id)},getClientHeight:function(e,t){return e.siteAPI.responsive.getClientHeight(t.id)},getScrollWidth:function(e,t){return e.siteAPI.responsive.getScrollWidth(t.id)},getClientWidth:function(e,t){return e.siteAPI.responsive.getClientWidth(t.id)},getGridMeasures:function(e,t){return e.siteAPI.responsive.getGridMeasures(t.id)},detachLayout:function(e,t){var n=e.pointers.components.getParent(t);e.siteAPI.responsive.detach(t.id,n.id)},updateDetachedLayout:function(e,t,n){return e.siteAPI.responsive.updateDetached(t.id,n)},updateDetachedRotation:function(e,t,n){return e.siteAPI.responsive.updateDetachedRotation(t.id,n)},reattachLayout:function(e,t){e.siteAPI.responsive.clearDetached(t.id)},detachGridItem:function(e,t){var n=e.pointers.components.getParent(t);e.siteAPI.responsive.detachGridItem(t.id,n.id)},updateDetachedGridItem:function(e,t,n){return e.siteAPI.responsive.updateDetachedGridItem(t.id,n)},reattachGridItem:function(e,t){e.siteAPI.responsive.clearDetachedGridItem(t.id)},detachStackItem:function(e,t){var n=e.pointers.components.getParent(t);e.siteAPI.responsive.detachStackItem(t.id,n.id)},updateDetachedStackItem:function(e,t,n){return e.siteAPI.responsive.updateDetachedStackItem(t.id,n)},updateDetachedStackItemOrder:function(e,t,n){return e.siteAPI.responsive.updateDetachedStackItemOrder(t.id,n)},reattachStackItem:function(e,t){e.siteAPI.responsive.clearDetachedStackItem(t.id)},pin:function(e,t,n){return f(n,"fixed"),i.reparentComponentToPage(e,t,!1),o.updateComponentLayoutData(e,t,n)},unpin:function(e,t,n,r){return f(r,"not-fixed"),i.setContainer(e,null,t,n),o.updateComponentLayoutData(e,t,r)},pinComponent:function(e,n,r){if(t.get(r,"itemLayout.type")!==a)throw new Error("Given layout.itemLayout.type must be FixedItemLayout");i.reparentComponentToPage(e,n,!1);var u=o.getLayoutItem(e,n)||o.refArray.create(),c=g(u,function(e){return!p(s)(e)||d(e)}),l=t.reduce(r,function(e,t,n){return I(e,t,n)},c);return o.updateComponentLayoutData(e,n,l)},unpinComponent:function(e,n,r,a){var u=o.getLayoutItem(e,n)||o.refArray.create(),c=v(u);if(!d(c.itemLayout))throw new Error("Cannot unpin a component that is not pinned");if(d(a.itemLayout))throw new Error("Given layout.itemLayout.type must not be FixedItemLayout");i.setContainer(e,null,n,r);var l=g(u,function(e){return!p(s)(e)}),f=t.reduce(a,function(e,t,n){return I(e,t,n)},l);return o.updateComponentLayoutData(e,n,f)},getDefaultLayout:function(e,t){var n=o.getLayoutItem(e,t);return v(n)},updateDefaultLayout:function(e,n,r){var i=o.getLayoutItem(e,n)||o.refArray.create();E(i,r);var a=t.reduce(r,function(e,t,n){return I(e,t,n)},i);return o.updateComponentLayoutData(e,n,a)},getAllScopedLayouts:function(e,n){var r=o.getLayoutItem(e,n),i=o.refArray.extractValues(r),a=t(i).filter(function(e){return"BreakpointRelation"===e.type}).groupBy(function(e){return o.breakpointRelation.extractBreakpoint(e)}).mapValues(function(e){return t.map(e,o.breakpointRelation.extractRef)}).value();return t.mapValues(a,m)},getScopedLayouts:function(e,t,n){var r=o.getLayoutItem(e,t);return v(r,n)},updateScopedLayouts:function(e,n,r,i){var a=o.getLayoutItem(e,n)||o.refArray.create();E(a,i);var s=t.reduce(i,function(e,t,n){return I(e,t,n,r)},a);return o.updateComponentLayoutData(e,n,s)}}}()},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,s,u;e.exports=(a=n(3),s=n(6),u=n(18),{init:function(){s.registerHook(s.HOOKS.ADD_PAGE.AFTER,function(e,t){var n=e.siteAPI.getCurrentUrlPageId(),r=u.getPage(e,n),i=a.getComponentBreakpointsData(e,r);i&&i.values&&a.updateComponentBreakpointsData(e,t,o({},i,{id:"",values:i.values.map(function(e){return o({},e,{id:""})})}))})},update:function(e,t,n){a.updateComponentBreakpointsData(e,t,n)},get:function(e,t){return a.getComponentBreakpointsData(e,t)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(3),o=n(17),i=n(9),a=n(8),s=n(121),u=n(40),c=t.DATA_TYPES;function l(e,t){var n=r.getStyleItemPointer(e,t);return r.serializeDataItem(e,c.theme,n,!1)}function p(t,n,r,a){return r&&"system"!==e.get(r,"styleType")?(e.set(a,"style.propertiesSource",o.style.internal.generateStylePropertiesSource(t,a.style.properties)),i.styles.update(t,r.id,a,n),r.id):i.styles.internal.fork(t,a,n)}function d(e,t,n,r){var o=s.validateSetStyleIdParams(e,r,n);if(!o.success)throw new Error(o.error);e.dal.set(e.pointers.getInnerPointer(t,"styleId"),r)}var g=function(t,n){var i=o.style.get(t,n);if("RefArray"!==i.type)return i;var a=l(t,n);return e.find(r.refArray.extractValues(a),function(e){return"BreakpointRelation"!==e.type})},f=function(t,n,i){if("RefArray"!==o.style.get(t,n).type)return null;var a=l(t,n),s=e.find(r.refArray.extractValues(a),function(e){return"BreakpointRelation"===e.type&&r.breakpointRelation.extractBreakpoint(e)===i});return r.breakpointRelation.extractRef(s)};return{init:function(){},update:r.updateComponentStylesData,get:r.getComponentStylesData,getDefaultStyleId:function(t,n){return e.get(g(t,n),"id")},getDefaultStyle:g,updateDefaultStyle:function(t,n,i){var s=o.style.get(t,n);if("RefArray"!==s.type)return o.style.update(t,n,i);if(!e.isObject(i)||"TopLevelStyle"===e.get(i,"type")||"custom"!==e.get(i,"styleType"))throw new Error("Update only accepts custom component style, to update to a system style use connectToTheme");var u=t.pointers.components.getPageOfComponent(n).id;i.componentClassName=i.componentClassName||a.getComponentType(t,n);var c=l(t,n),d=e.find(r.refArray.extractValues(c),function(e){return"BreakpointRelation"!==e.type}),g=p(t,u,d,i),f=e.without(s.values,"#".concat(d.id));f.push(g),r.addDeserializedStyleItemToPage(t,u,r.refArray.update(s,f))},connectDefaultStyleToTheme:function(t,n,i){var a=o.style.get(t,n);if("RefArray"!==a.type)return o.style.connectToThemeStyle(t,n,i);if(!u(i))throw new Error("connectToThemeStyle called with custom style");var s=l(t,n),c=e.find(r.refArray.extractValues(s),function(e){return"BreakpointRelation"!==e.type}),p=e.without(a.values,"#".concat(c.id));p.push(i);var d=t.pointers.components.getPageOfComponent(n).id;r.addDeserializedStyleItemToPage(t,d,r.refArray.update(a,p))},getAllScopedStyles:function(t,n){if("RefArray"!==o.style.get(t,n).type)return{};var i=l(t,n),a=r.refArray.extractValues(i),s=e(a).filter(function(e){return"BreakpointRelation"===e.type}).groupBy(function(e){return r.breakpointRelation.extractBreakpoint(e)}).mapValues(function(e){return r.breakpointRelation.extractRef(e[0])}).value();return e.mapValues(s,function(e){return"system"===e.styleType?e.id:e})},getScopedStyleId:function(t,n,r){var o=f(t,n,r);return o?e.get(o,"id"):null},getScopedStyle:f,updateScopedStyle:function(t,n,i,s){if(!e.isObject(s)||"TopLevelStyle"===e.get(s,"type")||"custom"!==e.get(s,"styleType"))throw new Error("Update only accepts custom component style, to update to a system style use connectToTheme");var u=t.pointers.components.getPageOfComponent(n).id;s.componentClassName=s.componentClassName||a.getComponentType(t,n);var c=o.style.get(t,n);if("RefArray"!==c.type){var g=p(t,u,null,s),f=r.addDeserializedStyleItemToPage(t,u,r.breakpointRelation.create(i,"#".concat(g)));return d(t,n,u,r.addDeserializedStyleItemToPage(t,u,r.refArray.create([c.id,f])))}var m=l(t,n),v=e.find(r.refArray.extractValues(m),function(e){return"BreakpointRelation"===e.type&&r.breakpointRelation.extractBreakpoint(e)===i}),y=p(t,u,r.breakpointRelation.extractRef(v),s),E=r.addDeserializedStyleItemToPage(t,u,r.breakpointRelation.create(i,"#".concat(y))),I=e.without(c.values,"#".concat(e.get(v,"id")));I.push(E),r.addDeserializedStyleItemToPage(t,u,r.refArray.update(c,I))},connectScopedStyleToTheme:function(t,n,i,a){if(!u(a))throw new Error("connectToThemeStyle called with custom style");var s=t.pointers.components.getPageOfComponent(n).id,c=o.style.get(t,n);if("RefArray"!==c.type){var p=r.addDeserializedStyleItemToPage(t,s,r.breakpointRelation.create(i,"#".concat(a)));return d(t,n,s,r.addDeserializedStyleItemToPage(t,s,r.refArray.create([c.id,p])))}var g=l(t,n),f=e.find(r.refArray.extractValues(g),function(e){return"BreakpointRelation"===e.type&&r.breakpointRelation.extractBreakpoint(e)===i}),m=r.addDeserializedStyleItemToPage(t,s,r.breakpointRelation.create(i,"#".concat(a))),v=e.without(c.values,"#".concat(e.get(f,"id")));v.push(m),r.addDeserializedStyleItemToPage(t,s,r.refArray.update(c,v))},removeScopedStyle:function(t,n,i){var a=o.style.get(t,n);if("RefArray"===a.type){var s=l(t,n),u=e.find(r.refArray.extractValues(s),function(e){return"BreakpointRelation"===e.type&&r.breakpointRelation.extractBreakpoint(e)===i});a.values=e.without(a.values,"#".concat(e.get(u,"id")));var c=t.pointers.components.getPageOfComponent(n).id;r.addDeserializedStyleItemToPage(t,c,a)}}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(3),o=n(1),i=n(2),{init:function(){},getPageAnchors:function(e,t,n){var a=e.pointers.components.getPage(t,i.VIEW_MODES.DESKTOP),s=e.pointers.components.getChildrenRecursively(a).map(function(t){var n=r.getComponentAnchorData(e,t);return n&&(n.compId=t.id),n}).filter(Boolean);return[o.scrollAnchors.getPageTopAnchor(t,n)].concat(s)},update:r.updateComponentAnchorData,remove:r.removeComponentAnchorData,get:r.getComponentAnchorData})},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(0),o=n(5),i=n(7),a=n(2),s=n(22),u=n(39),c=n(1),{exec:function(e){if(o.isOpen("removeBadlyDuplicatedPages")){var t=c.loggingUtils.performance;t.start("Remove badly duplicated pages");var n=e.dal.getKeys(e.pointers.page.getAllPagesPointer()),l=0;r.forEach(n,function(t){var n=e.pointers.data.getDataItemFromMaster(t);if(!e.dal.get(n)){l++;var r=i.getComponentById(e,t,t,a.VIEW_MODES.DESKTOP),o=i.getComponentById(e,t,t,a.VIEW_MODES.MOBILE);e.dal.full.remove(e.pointers.page.getPagePointer(t)),e.dal.full.isExist(r)&&e.dal.full.remove(r),e.dal.full.isExist(o)&&e.dal.full.remove(o)}});var p=Math.trunc(t.finish("Remove badly duplicated pages").duration);if(l>0){var d={errorReason:"succeed",duration:p,dsOrigin:e.config.origin,numberOfInvalidPages:l};s.event(e,u.REMOVE_BADLY_DUPLICATED_PAGES,d)}}}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),n(1),o=n(10),i=n(11),a=n(7),{exec:function(e){if(function(e){var t=e.siteAPI.getClientSpecMap(),n=r.find(t,{type:"onboarding"});return!!n&&!1===n.inUse}(e)){var t=a.getAllComponentsFromFull(e,null,function(t){var n=e.dal.get(t);return n&&"wysiwyg.viewer.components.Group"===n.componentType});r.forEach(t,function(t){!function(e,t){var n=e.pointers.components.getChildren(t);r.forEach(n,function(t){o.public.isGroupable(e,t)||i.reparentComponentToPage(e,t,!0)})}(e,t)})}}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(7),i=n(3),{exec:function(e){var t=o.getComponentByType(e,"wysiwyg.viewer.components.FiveGridLine");r.forEach(t,function(t){var n=i.getPropertiesItem(e,t);n&&n.fullScreenModeOn&&function(e,t,n){var r=e.pointers.getInnerPointer(t,"layout"),o=e.dal.full.get(r);o.docked={left:{vw:0},right:{vw:0}},e.dal.full.set(r,o),n.fullScreenModeOn=!1,i.updatePropertiesItem(e,t,n)}(e,t,n)})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(5);var o=function(t,n){var r=[n].concat(t.pointers.components.getChildrenRecursively(n)),o=e.filter(r,function(e){var n=t.pointers.getInnerPointer(e,"layout.anchors");return t.dal.isExist(n)}),i=e.map(o,"id");return e.filter(o,function(n){var r=t.pointers.getInnerPointer(n,"layout.anchors"),o=t.dal.get(r);return e.some(o,function(t){return"BOTTOM_PARENT"!==t.type&&!e.includes(i,t.targetComponent)})})};function i(n){var r=n.pointers.page.getNonDeletedPagesPointers(!1);return e(r).map(function(e){return function(e,n){return e.pointers.components.getPage(n.id,t.VIEW_MODES.DESKTOP)}(n,e)}).filter(function(t){return function(t,n){return function n(r){var o=t.pointers.getInnerPointer(r,"layout.anchors");if(!t.dal.isExist(o))return!0;var i=t.pointers.components.getChildren(r);return e.some(i,n)}(n)}(n,t)}).value()}return{exec:function(t){if(r.isOpen("sv_fixBrokenAnchors")){var n=i(t);e.forEach(n,function(n){var r=o(t,n);e.isEmpty(r)||e.forEach(r,function(e){var n=t.pointers.getInnerPointer(e,"layout.anchors");t.dal.full.remove(n)})})}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(66),r=n(12),o={MediaContainerDesignData:["background"],BackgroundMedia:["mediaRef","imageOverlay"],MediaTransforms:[],WixVideo:["posterImageRef"],Image:["link","originalImageDataRef"]},i="VALID",a="INVALID",s="ONLY_REFS_INVALID",u=r.stripHashIfExists;function c(n,r,c){var p=n.pointers.page.getPageDesignData(r),d=n.dal.full.getKeys(p),g=function(n,r,c,p){var d=function(t,n,r,o){return e.filter(r,function(e){var r=t.pointers.data.getDesignItem(e,n),i=t.pointers.getInnerPointer(r,"type");return o[t.dal.full.get(i)]})}(n,r,c,o),g={},f={};return e.forEach(d,function(c){var d=c,m=function(n,r,c,p,d){var g=function(t,n,r,c){if(l(n,r,c))return a;return function(t,n,r,i){var a=t.pointers.data.getDesignItem(n,r),s=t.pointers.getInnerPointer(a,"type"),c=o[t.dal.full.get(s)];return e.some(c,function(e){var n=t.pointers.getInnerPointer(a,e);return l(u(t.dal.full.get(n),!1),r,i)})}(t,n,r,c)?s:i}(n,r,c,d);if(function(e,t,n){if(n.idToPageId[e]){if(n.idToPageId[e]!==t){var r=n.idToPageId[e],o=n.SKIPPED_PAGES_TO_FIX;o[r]=o[r]||{};var i=o[r][e];i||(i={id:e,isReferencedMoreThanOnce:!0},o[r][e]=i)}}else n.idToPageId[e]=t}(r,c,d),g===i)return null;var f=g===s,m=n.pointers.data.getDesignItem(r,c);return function(n,r,i,a){var s=n.dal.full.get(r);(function(n,r){var i=o[n.type];e.forEach(i,function(o){var i=n[o];if(!e.isEmpty(i)){var a=u(i,!1),s=r[a]||t.generateNewDesignId();n[o]="#".concat(s),r[a]=s}})})(s,i),a&&function(e,n){var r=u(e.id,!1),o=n[r]||t.generateNewDesignId();e.id=o,n[r]=o}(s,i);return s}(n,m,p,!f)}(n,c,r,g,p);m&&(f[d]=m)}),f}(n,r,d,c);e.forEach(g,function(e,t){var o=n.pointers.data.getDesignItem(t,r);n.dal.full.remove(o);var i=n.pointers.data.getDesignItem(e.id,r);n.dal.full.set(i,e)})}function l(t,n,r){var o=r.idToPageId;return o[t]&&o[t]!==n||e.get(r.SKIPPED_PAGES_TO_FIX,[n,t,"isReferencedMoreThanOnce"])}return{exec:function(t){var n=e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");!function(t,n,r){e.forEach(n,function(e){c(t,e,r)}),e.forEach(r.SKIPPED_PAGES_TO_FIX,function(e,n){c(t,n,r)})}(t,n,{idToPageId:{},SKIPPED_PAGES_TO_FIX:{}})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),r=n(7);function o(n,o,i){var a=r.getComponentByType(n,i);e.forEach(a,function(r){var i=n.dal.full.get(n.pointers.full.components.getParent(r));e.get(i,"componentType")!==o&&(n.dal.isExist(r)?t.remove(n,r):t.removeFromFull(n,r))})}return{exec:function(e){o(e,"wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainerSlideShowSlide"),o(e,"wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.BoxSlideShowSlide")}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(2),r=n(3),o=n(16);function i(t,n){var o=t.pointers.getInnerPointer(n,"componentType");return"wysiwyg.viewer.components.StripColumnsContainer"===t.dal.get(o)&&e.every(t.pointers.components.getChildren(n),function(t,n){return e.get(r.getMobileHintsItem(t,n),"hidden",!1)}.bind(null,t))}return{exec:function(n){var a=n.pointers.page.getNonDeletedPagesPointers(!0);e(a).map(function(e,n){return e.pointers.components.getPage(n.id,t.VIEW_MODES.DESKTOP)}.bind(null,n)).flatMap(function t(n,r){var o=n.pointers.components.getChildren(r),a=e.filter(o,i.bind(null,n)),s=e.flatMap(o,t.bind(null,n));return e.concat(a,s)}.bind(null,n)).forEach(function(e,t){o.removeComponentByDesktopComp(e,t,!1),r.updateMobileHintsItem(e,t,{hidden:!0})}.bind(null,n))}}}()},function(e,t,n){e.exports=function(){n(0);var e=n(1),t=(n(5),n(28));function r(t,n){var r=function(t){var n=t.pointers.data.getDataItemFromMaster(e.siteConstants.MASTER_PAGE_ID);return t.pointers.getInnerPointer(n,"smSettings")}(t);t.dal.isExist(r)?t.dal.merge(r,n):t.dal.set(r,n)}return{exec:function(e){t.isFirstSave(e)&&r(e,{socialLoginGoogleEnabled:!0,socialLoginFacebookEnabled:!0})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(17),r=n(9),o=n(7),i=n(4),a=n(16),s=n(583),u="wysiwyg.viewer.skins.WRichTextNewSkin",c="txtNew",l="txt1",p="wysiwyg.viewer.skins.WRichTextSkin",d="wysiwyg.viewer.components.WRichText";function g(n,o,a,s){var u=function(e){var t=r.fonts.getAll(e);return function(e){return t[e]}}(n);e(o).filter(function(e){return i.isExist(n,e)}).forEach(function(e){return function(e,n,r,o,i){var a=t.style.getId(r,e),s=function(e,t){var n=e.pointers.getInnerPointer(t,"skin");return e.dal.get(n)}(r,e);try{a===c?(i?s===p&&f(e,n,r):o&&f(e,n,r),s===p&&v(e,r)):(t.style.connectToThemeStyle(r,e,c),s===p&&(v(e,r),f(e,n,r)))}catch(n){!function(e,n){t.style.connectToThemeStyle(n,e,l),m(e,p,n)}(e,r)}}(e,u,n,a,s)})}function f(e,t,n){if(e){var r=i.data.get(n,e);r&&(r.text=s.utils.textComponentsUtils.applyTextStyleMigrationAdjustments(r.text,t),i.data.update(n,e,r))}}function m(e,t,n){var r=n.pointers.getInnerPointer(e,"skin");n.dal.set(r,t),a.syncMobileAndDesktopSkin(n,e,t)}function v(e,t){m(e,u,t)}return{exec:function(e){var n=o.getComponentByType(e,d),i=!1,a=!1,s=r.styles.get(e,c);s&&s.skin&&s.skin!==p||(s?(i=!0,s.skin||(a=!0)):a=!0,function(e,n){var o;if(n)n.skin=u,o=n;else{t.style.createSystemStyle(e,c,d);var i=r.styles.get(e,c);i&&i.metaData&&(i.metaData.isPreset=!0,o=i)}r.styles.update(e,c,o)}(e,s)),g(e,n,i,a)}}}()},function(e,t){e.exports=H},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(7),o=n(3),i=n(9),a=n(17),s=t.vectorImageConversionUtils.vectorImageDefaults;function u(e,n,r){var i=o.getDesignItem(e,n)||{};t.vectorImageConversionUtils.convertStyleToDesignData(i,r),o.updateDesignItem(e,n,i)}return{exec:function(n){var c=e.unionBy(function(e){return r.getAllComponentsFromFull(e,null,function(t){return"wysiwyg.viewer.components.VectorImage"===e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))})}(n),function(e){return r.getAllComponents(e,null,function(t){return"wysiwyg.viewer.components.VectorImage"===e.dal.get(e.pointers.getInnerPointer(t,"componentType"))})}(n),"id"),l=[];e.forEach(c,function(r){var c=o.getComponentStylesData(n,r);if(c){var p=o.getDataItem(n,r);if(e.isEmpty(c.style.properties)){var d=e.pick(p,["overrideColors","shapeStyle"]);e.isEmpty(d)||(e.defaults(d,{overrideColors:null}),function(t,n,r){var i=e.assign(o.getDesignItem(t,n),{type:"VectorImageDesignData"},r),a=e.omit(o.getDataItem(t,n),e.keys(r));o.updateDesignItem(t,n,i),o.deleteDataItem(t,n),o.updateDataItem(t,n,a)}(n,r,d))}else{var g=n.pointers.full.components.getPageOfComponent(r).id;l.push({styleId:c.id,pageId:g}),u(n,r,c)}}else{var f={type:"TopLevelStyle",style:{properties:s.style,propertiesSource:{}}};t.vectorImageConversionUtils.convertStyle(f,s),a.style.internal.update(n,r,f,!0),u(n,r,f)}!function(n,r,a){var s=n.pointers.full.components.getPageOfComponent(r).id,u=n.pointers.componentStructure.getModesOverrides(r),c=n.dal.full.isExist(u)&&n.dal.full.get(u),l=!1;e.forEach(c,function(r){if(r.styleId){var u=i.styles.get(n,r.styleId,s);if(!e.isEmpty(e.get(u,["style","properties"]))){var c=o.generateNewDesignItemId(),p={},d=n.pointers.data.getDesignItem(c,s);t.vectorImageConversionUtils.convertStyleToDesignData(p,u),p.id=c,r.designQuery="#".concat(c),n.dal.full.set(d,p),a.push({styleId:r.styleId,pageId:s}),e.unset(r,"styleId"),l=!0}}}),l&&n.dal.full.set(u,c)}(n,r,l)}),e.forEach(e.uniq(l),function(e){var t=e.styleId,r=e.pageId,o=i.styles.get(n,t,r);o.style.properties={},o.style.propertiesSource={},i.styles.update(n,t,o,r)})}}}()},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(5),i=n(1),{exec:function(e){var t=e.pointers.data.getDataItemFromMaster(i.siteConstants.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"accessibilitySettings");o.isOpen("sv_visualFocus")&&function(e,t){var n=r.get(e.dal.get(t),"visualFocusDisabled");return r.isUndefined(n)}(e,n)&&e.dal.set(n,{visualFocusDisabled:!1})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(28),o=n(36),i=n(7),a=n(3),s=n(2);function u(e){var n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"mobileSettings")}function c(t){return n=t,(!e.has(n,"action")||!e.has(n,"behavior"))&&"animation"===e.get(t,"type","animation");var n}function l(e,t){var n=u(e);e.dal.set(n,{animationsEnabled:t})}return{exec:function(t){var n=u(t);!function(e){return r.isFirstSave(e)}(t)?t.dal.isExist(n)||(l(t,!1),function(t){var n=i.getAllComponents(t);e.forEach(n,function(n){var r=e.map(o.getBehaviors(t,n),function(t){return c(t)&&!e.has(t,"viewMode")&&(t.viewMode=s.VIEW_MODES.DESKTOP),t});if(r.length){var i=JSON.stringify(r);a.updateBehaviorsItem(t,n,i)}})}(t)):l(t,!0)}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p;e.exports=(r=n(0),o=n(588),i=n(589),a=n(590),s=n(591),u=n(592),c=n(594),l=n(114),p=n(5),{exec:function(e){c.exec(e),r.get(e.config,"runStylesGC")&&s.exec(e);var t=l.isSiteMigrated(e),n=l.didRunDuplicateStylesFixer(e),d=!p.isOpen("revertStylesBackToMasterPage")&&e.runtimeConfig.stylesPerPage&&!t,g=!p.isOpen("revertStylesBackToMasterPage")&&e.runtimeConfig.stylesPerPage&&!n&&(d||t),f=p.isOpen("revertStylesBackToMasterPage")&&t;d&&o.exec(e),g&&i.exec(e),f&&a.exec(e),u.exec(e)}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,a,s,u,c,l,p,d,g,f,m,v,y,E,I;e.exports=(i=n(0),a=n(7),s=n(17),u=n(9),c=n(31),l=n(22),p=n(2),d=n(40),g=n(39),f=n(1),m=n(114),v=n(16),y={},E=function(e,t,n,r,o,a,l,g){var f=t===p.VIEW_MODES.DESKTOP,m=l[t];d(r)||(f||n[a.id]!==r)&&(m[function(e,t,n,r,o){var a=u.styles.get(e,t,n),l=u.styles.internal.fork(e,a,n,!0),p=c.overrides.getAllOverrides(e,r),d=i.find(p,["styleId",t]);return d?(d.styleId=l,c.overrides.updateComponentOverrides(e,r,p)):s.style.internal.setId(e,r,l,null,!0),o[t]||(o[t]=t),y[n]++,l}(e,r,o,a,g)]=a.id)},I=function(e,t,n,r){var o=p.VIEW_MODES.DESKTOP,u=a.getAllComponentsFromFull(e,null,function(e){return function(t){var n=s.style.internal.get(e,t,!0),r=n&&"custom"===n.styleType,o=i.some(c.overrides.getAllOverrides(e,t),function(e){return d(e.styleId)});return r||o}}(e),t),l=i.invert(n[o]),g=i.uniqBy(u,"id");i.forEach(g,function(o){var a=e.pointers.full.components.getPageOfComponent(o).id,s=e.pointers.getInnerPointer(o,"styleId"),u=e.dal.full.get(s),p=c.overrides.getAllOverrides(e,o),d=i.compact(i.map(p,"styleId"));i.includes(d,u)||d.push(u),i.forEach(d,function(i){E(e,t,l,i,a,o,n,r)})})},{exec:function(e){var t,n,a=f.loggingUtils.performance;a.start("Move Custom style fixer "),m.markSiteAsMigrated(e);var s=u.styles.getAllIds(e,p.MASTER_PAGE_ID).length;!function(e){i(e.pointers.page.getAllPagesPointer()).thru(e.dal.getKeys).reduce(function(e,t){return y[t]=0,e},{})}(e);var c=e.pointers.general.getOrphanPermanentDataNodes(),d=e.dal.get(c),E={},S=(o(t={},p.VIEW_MODES.DESKTOP,{}),o(t,p.VIEW_MODES.MOBILE,{}),t);v.getSupportedViewModes(e).forEach(function(t){return I(e,t,S,E)}),d=(n=d).concat.apply(n,r(i.keys(E))),function(e,t){i.forEach(i.keys(t),function(t){return u.styles.remove(e,t,"masterPage")})}(e,E),e.dal.set(c,d);var h=Math.trunc(a.finish("Move Custom style fixer ").duration);!function(e,t,n){y[p.MASTER_PAGE_ID]=u.styles.getAllIds(e,"masterPage").length;for(var r=e.dal.getKeys(e.pointers.page.getAllPagesPointer()),o=r.splice(0,100),a=e.config.origin;o.length;){var s=i.reduce(o,function(e,t){return e[t]=y[t],e},{}),c={mp_styles_before:t,mp_styles_after:y[p.MASTER_PAGE_ID],page_styles_after:JSON.stringify(s),errorReason:"succeed",duration:n,dsOrigin:a};l.event(e,g.MOVE_STYLE_TO_PAGES_MIGRATION,c),o=r.splice(0,100)}}(e,s,h)}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E;e.exports=(r=n(0),o=n(7),i=n(17),a=n(9),s=n(2),u=n(40),c=n(20),l=n(114),p=n(8),d=n(22),g=n(161),f=n(5),m=function(e,t){var n=p.getComponentType(e,t),o=c.services.schemasService.getDefinition(n),a=r.keys(o.styles).sort()[0];if(a)return i.style.internal.setId(e,t,a,r.noop,!0),a;var s=r.head(o.skins);if(s){var u=i.style.internal.createComponentStyleDef(e,s,n);return i.style.internal.fork(e,t,u,!0)}e.dal.remove(e.pointers.getInnerPointer(t,"styleId")),function(e,t,n){var r=e.pointers.components.getPageOfComponent(t).id;d.error(e,g.COMPONENT_WITHOUT_STYLES_AND_SKINS,{componentType:n,pageId:r})}(e,t,n)},v=function(e,t,n){var r=e.pointers.components.getPageOfComponent(t).id,o=a.styles.get(e,n,r);return i.style.internal.fork(e,t,o,!0)},y=function(e){return r.uniqBy(o.getAllComponentsFromFull(e,null,function(e){return function(t){var n=e.pointers.getInnerPointer(t,"styleId"),r=e.dal.full.get(n);return r&&!u(r)}}(e),s.VIEW_MODES.DESKTOP),"id")},E=function(e){return function(t,n){var r=function(e,t){var n=e.pointers.components.getPageOfComponent(t).id,r=e.dal.full.get(e.pointers.getInnerPointer(t,"styleId"));return a.styles.internal.get(e,r,n,!0)}(e,n);if(!r)return m(e,n),t;if(r.type===s.STYLES.TOP_LEVEL_STYLE)return t;var o=p.getComponentType(e,n);return r.componentClassName!==o?(m(e,n),t):(t[r.id]=t[r.id]||[],t[r.id].push(n),t)}},{exec:function(e){if(f.isOpen("ds_duplicateCustomStylesDataFixer")){l.markSiteAsRunDuplicateStylesFixer(e);var t=y(e),n=r.reduce(t,E(e),{});r(n).forEach(function(e){return function(t,n){if(t.length>1)return r.forEach(t,function(t){v(e,t,n)});var o=r.head(t),i=e.pointers.components.getPageOfComponent(o).id,a=e.pointers.data.getThemeItem(n,i);i!==e.pointers.data.getPageIdOfData(a)&&v(e,o,n)}}(e))}}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v;e.exports=(o=n(0),i=n(7),a=n(17),s=n(9),u=n(31),c=n(2),l=n(40),p=n(1),d=n(114),g=n(16),f=function(e,t){var n=o.pick(s.styles.get(e,t),["skin","style"]),i=p.hashUtils.SHA256.b64_sha256(JSON.stringify(n));r[i]=t},m=function(e,t,n,i,d){var g,m,v,y=e.pointers.getInnerPointer(d,"styleId");if(!l(n)){var E=n,I=s.styles.get(e,n,i);I.type!==c.STYLES.TOP_LEVEL_STYLE&&(d.id,g=I,m=o.pick(g,["skin","style"]),v=p.hashUtils.SHA256.b64_sha256(JSON.stringify(m)),(E=r[v])||(E=function(e,t,n,r){if(e.dal.full.isExist(t)){var o=e.pointers.data.getThemeItem(n,r),i=e.dal.full.get(o),a=s.styles.internal.fork(e,i,c.MASTER_PAGE_ID,!0);return e.dal.full.remove(o),f(e,a),a}}(e,y,n,i))),function(e,t,n,r){var i=u.overrides.getAllOverrides(e,r),s=o.find(i,["styleId",t]);s?(s.styleId=n,u.overrides.updateComponentOverrides(e,r,i)):a.style.internal.setId(e,r,n,null,!0)}(e,n,E,d)}},v=function(e,t){var n=i.getAllComponentsFromFull(e,null,function(e){return function(t){var n=a.style.internal.get(e,t,!0),r=n&&"custom"===n.styleType,i=o.some(u.overrides.getAllOverrides(e,t),function(e){return l(e.styleId)});return r||i}}(e),t),r=o.uniqBy(n,"id");o.forEach(r,function(t){var n=e.pointers.full.components.getPageOfComponent(t).id,r=e.pointers.getInnerPointer(t,"styleId"),i=e.dal.full.get(r),a=u.overrides.getAllOverrides(e,t),s=o.compact(o.map(a,"styleId"));o.includes(s,i)||s.push(i),o.forEach(s,function(r){m(e,0,r,n,t)})})},{exec:function(e){d.resetMigratedSiteFlag(e),e.runtimeConfig.stylesPerPage=!1,r={},g.getSupportedViewModes(e).forEach(function(t){return v(e,t)})}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(9),i=n(40),a=n(2),{exec:function(e){var t=e.pointers.page.getAllPagesPointer(),n=e.dal.getKeys(t),s=r.reduce(n,function(t,n){var r=e.pointers.page.getPagePointer(n);return t[n]=e.dal.full.get(r),t},{}),u=e.siteAPI.collectUsedStylesFromAllPages(s),c=e.dal.get(e.pointers.general.getOrphanPermanentDataNodes()),l={};r.forEach(n,function(t){var n,s=(n=o.styles.getAllIds(e,t),r.reject(r.without(n,a.STYLES.THEME_DATA_ID),function(e){return i(e)})),p=r.difference(s,r.keys(u));c=c.concat(p),p&&(l[t]=p)}),e.dal.set(e.pointers.general.getOrphanPermanentDataNodes(),c),r.forEach(l,function(t,n){return r.forEach(t,function(t){return o.styles.remove(e,t,n)})})}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(175),i=n(593),a=function(e){if(0!==e.indexOf("#")){var t=0===e.indexOf("r")?e:"rgba(".concat(e,")");return new o(t).hexString()}return e},{exec:function(e){var t=e.pointers.data.getThemeItem("THEME_DATA",i.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),o=e.dal.full.get(n),s=r.map(o,a);e.dal.full.set(n,s)}})},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(9),i=n(2),a=n(40),{exec:function(e){var t=r(e).thru(function(){return o.styles.getAllIds(e,i.MASTER_PAGE_ID)}).without(i.STYLES.THEME_DATA_ID).map(function(t){return r.merge(o.styles.get(e,t,i.MASTER_PAGE_ID),{id:t})}).filter(function(e){return e.styleType===i.STYLES.TYPES.SYSTEM&&!a(e.id)}).value();return r.forEach(t,function(t){t.styleType=i.STYLES.TYPES.CUSTOM,t.type=e.runtimeConfig.stylesPerPage?i.STYLES.COMPONENT_STYLE:i.STYLES.TOP_LEVEL_STYLE,e.dal.set(e.pointers.data.getThemeItem(t.id,i.MASTER_PAGE_ID),t)}),r.size(t)}})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(71),{exec:function(e){var t=e.pointers.data.getDataItemsWithPredicate({type:"BasicMenuItem"});r.forEach(t,function(t){!function(e,t){var n=e.dal.full.get(t);r.forEach(n.items,function(t){var n=t.replace("#",""),i=o.getMenuDataItemPointer(e,n),a=e.dal.get(i);if(a&&a.items.length>0){var s=r.cloneDeep(a);s.items.length=0,e.dal.set(i,s)}})}(e,t)})}})},function(e,t){e.exports=V},function(e,t,n){e.exports=function(){var e=n(0),t=n(5),r=n(7),o=n(3),i=n(17),a=n(2),s=n(75),u=s.isMobileComponentPropertiesSplit,c=s.splitMobileComponentProperties;function l(t,n,r,a){var s,u=i.style.get(t,n),c=e.get(u,["style","properties"],{}),l=c.iconSize,p=c.iconType;s=a?{iconSize:Number(l),hasArrow:!1,iconType:"circle",itemFormat:"iconOnly",alignTabs:"center"}:{iconSize:Number(l),iconType:p,hasArrow:!0},o.updatePropertiesItem(t,n,e.defaults(s,r))}return{EXPERIMENT_NAME:"se_multilingualMobileMenu",exec:function(n){if(t.isOpen("se_multilingualMobileMenu")){var i=r.getAllComponentsFromFull(n,null,function(e){return function(t){return"wysiwyg.viewer.components.LanguageSelector"===e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))}}(n),a.VIEW_MODES.DESKTOP);e.forEach(i,function(e){var t=o.getPropertiesItem(n,e);void 0===t.iconSize&&(function(e,t){var n=e.pointers.components.getMobilePointer(t);if(!e.dal.isExist(n))return!1;var r=o.getPropertiesItem(e,n);return u(e,n)||c(e,n),l(e,n,r,!0),!0}(n,e)&&l(n,e,t,!1))})}}}}()},function(e,t,n){e.exports={exec:n(144).meshLayoutReadySiteDataFixer}},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(150),i=n(18),{exec:function(e){!function(e){var t=i.getPageIdList(e),n=o.get.all(e);r.forEach(n,function(n){var i=o.getRouterRef.byPrefix(e,n.prefix);r.forEach(n.pages,function(n){r.includes(t,n)||o.pages.removePageFromRouter(e,i,n)})})}(e)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(130),r=n(68),o=n(119),i=n(7),a=n(4),s=n(15),u=n(31),c="wysiwyg.viewer.components.SiteRegionContainer";function l(t){var n=t.pointers.components.getMasterPage(s.getViewMode(t)),o=i.getComponentByType(t,c,n),l=e.map(r.getSOSPModes(t),"modeId");e(o).filter(function(n){return function(t,n,r){var o=u.overrides.getAllOverrides(t,r);return e(o).flatMap("modeIds").every(function(t){return!e.includes(n,t)})}(t,l,n)}).forEach(function(e){u.overrides.applyCurrentToAllModes(t,e),a.remove(t,e)})}return{exec:function(n){!function(n){var r=t.getAll(n);e(r).filter(function(r){return e.isEmpty(t.serializePagesGroup(n,r).pages)}).forEach(function(e){t.removePagesGroup(n,e)})}(n),function(n){var i=e.keyBy(t.getAll(n),"id"),a=r.getSOSPModes(n);e(a).filter(function(t){var n=e.get(t,"settings.pagesGroupId");return!n||!i[n.replace(/^#/,"")]}).forEach(function(e){o.removeSOSPMode(n,e.modeId)})}(n),l(n)}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(11),o=n(132),i=n(2),a=function(e,t){var n=e.pointers.components.getHeader(i.VIEW_MODES.MOBILE);r.addCompToContainer(e,t,n)},s=function(e,t){e.dal.remove(t),o.upgrade(e)},{exec:function(e){var t=i.VIEW_MODES.MOBILE,n=e.pointers.components.getMasterPage(t),r=o.get(e),u=o.toggle.get(e);r&&e.pointers.isSamePointer(e.pointers.components.getParent(r),n)?a(e,r):u&&!r&&s(e,u)}})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d;e.exports=(r=n(0),o=n(17),i=n(9),a=n(2),s=n(16),u=n(20),c=n(5),l=u.services.schemasService.getDefinition("mobile.core.components.Page").styles,p=function(e,t){var n=r.keys(l).sort()[0],s=e.pointers.data.getThemeItem(n,a.MASTER_PAGE_ID);if(!e.dal.isExist(s)){var u=l[n];i.styles.createAndAddStyleItem(e,{styleType:a.STYLES.TYPES.SYSTEM,skin:u},n,a.MASTER_PAGE_ID)}o.style.setId(e,t,n)},d=function(e,t,n){return e.dal.isExist(e.pointers.data.getThemeItem(t,n))||e.dal.isExist(e.pointers.data.getThemeItem(t,a.MASTER_PAGE_ID))},{exec:function(e){if(c.isOpen("enableAddMissingStyleFixer")){var t=e.dal.getKeys(e.pointers.page.getAllPagesPointer()),n=s.getSupportedViewModes(e);r.forEach(t,function(t){r.forEach(n,function(n){var r=e.pointers.components.getPage(t,n),i=o.style.getId(e,r);i&&!d(e,i,t)&&p(e,r)})})}}})},function(e,t,n){e.exports={classicDocument:n(242),responsiveDocument:n(604)}},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(19),i=n(2),{fix:function(e){var t=i.INTERACTIONS.DOCUMENT_SERVICES_DATA_FIXERS;o.utils.fedopsLogger.interactionStarted(t.ALL),r.forEach([],function(t){var n=r.get(t,["config","fedopsTag"]);o.utils.fedopsLogger.interactionStarted(n),t.fixer.exec(e),o.utils.fedopsLogger.interactionEnded(n)}),o.utils.fedopsLogger.interactionEnded(t.ALL)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(241),r=n(21),o=n(145),i=n(1),a=n(2),s=n(19),u=n(133),c=i.loggingUtils,l=c.performance,p=c.performanceMetrics;var d=function(e,t){return{onSuccess:function(n){n.success?e(n.payload):t(new Error("Failed to fetch diffs. error code: ".concat(n.errorCode)))},onError:function(e){t(new Error("Error while fetching diffs. status code: ".concat(e.status)))}}};function g(t,n,r,o){var a=t.dal.getLastSnapshotByTagName("before-autosave-apply");!function(t,n,r){e.forEach(r,function(r){var o=r.split(".");t.dal.full.setByPathToHostModel(o,e.get(n,o))})}(t,a,o.autosavePaths),i.log.error(n,n.patch),s.utils.fedopsLogger.breadcrumb("LOAD & APPLY ERROR",r),l.finish(p.AUTOSAVE.LOAD_APPLY,{additionalData:r,report:!0})}return{applyPatchIfExists:function(n,c,f,m){var v,y;(y=(v=n).dal.get(v.pointers.general.getAutosaveInfo()))&&y.shouldRestoreDiffs&&!function(e){return"false"===i.urlUtils.getParameterByName("autosaveRestore")||e.disableAutoSave}(c)?function(e,t,n){var r=d(t,n),o=r.onSuccess,i=r.onError;s.utils.fedopsLogger.interactionStarted(a.INTERACTIONS.AUTOSAVE.LOAD_AJAX),l.start(p.AUTOSAVE.LOAD_AJAX),u.sendWithPs(e,u.ENDPOINTS.GET_DIFFS,null,o,i)}(n,function(i){var u=e(i.diffPayloads).map("payload").map(JSON.parse).value(),d=u.length,v={patches:d,patchesSize:e.sumBy(u,"length"),pagesCount:r.getNumberOfPages(n)};s.utils.fedopsLogger.interactionEnded(a.INTERACTIONS.AUTOSAVE.LOAD_AJAX),l.finish(p.AUTOSAVE.LOAD_AJAX,{additionalData:v,report:!0}),s.utils.fedopsLogger.interactionStarted(a.INTERACTIONS.AUTOSAVE.LOAD_APPLY),l.start(p.AUTOSAVE.LOAD_APPLY),u=e.flatten(u),n.dal.takeSnapshot("before-autosave-apply"),n.dal.takeSnapshot(a.SNAPSHOT_TAGS.MOBILE_MERGE);try{n.dal.transaction(function(){t.applyPatchList(n.dal.full,u)});var y=n.dal.full.immutable.getLastSnapshotByTagName("before-autosave-apply");n.dal.takeSnapshot("autosave-apply-validate");var E=n.dal.full.immutable.getLastSnapshotByTagName("autosave-apply-validate"),I=null,S={error:function(e,t){I=t}};o.validateSite(y,E,function(){try{var e=n.pointers.general.getAutoSaveInnerPointer("previousDiffId");n.dal.set(e,i.latestDiffId);var t=n.pointers.general.getAutoSaveInnerPointer("autosaveCount");n.dal.set(t,d),v.success="true",f(null,{changesApplied:!0}),s.utils.fedopsLogger.interactionEnded(a.INTERACTIONS.AUTOSAVE.LOAD_APPLY),l.finish(p.AUTOSAVE.LOAD_APPLY,{additionalData:v,report:!0})}catch(e){v.success="false",g(n,e,v,c),m(e)}},function(t){v.success="false",g(n,t,v,c),m(e.merge(t,I))},S)}catch(e){v.success="false",g(n,e,v,c),m(e)}},m):f(null,{changesApplied:!1})}}}()},function(e,t,n){e.exports=function(){var e=n(0),t={START:"start",ON:"on",END:"end"},r={YES:"yes",NO:"no",DONT_CARE:"don't care"},o={NONE:"NONE",INNER:"INNER",FULL:"FULL",DONT_CARE:"DONT_CARE"};function i(e){switch(e){case r.YES:return o.NONE;case r.NO:return o.FULL;default:return o.DONT_CARE}}function a(e,n){return e===t.ON?n:o.NONE}function s(t,n,r){var o=r[1];return function(t,n,r){if(n&&(e.isFunction(r.singleComp)?r.singleComp(t,n):r.singleComp)){if(e.isArray(n)&&1===n.length&&(n=n[0]),n.id)return n.id;if(e.isString(n))return n}return!1}.bind(null,t,o,n)}function u(e,n,o,i){return i!==t.END?r.NO:c(e,n.updatingAnchorsAfterContinuous,o)}function c(t,n,o){var i=o[1],a=e.isFunction(n)?n(t,i,o):n;return e.isString(a)?a:a?r.YES:r.NO}return{CONTINUOUS_ACTION_TYPES:t,IS_UPDATING_ANCHORS:r,ENFORCE_TYPES:o,getDataManipulationParams:function(e,t,n,r){var o,a,u,l=c(e,t.isUpdatingAnchors,r);return{methodName:n,isContinuousAction:!1,asyncPreDataManipulation:t.asyncPreDataManipulation,noRefresh:t.noRefresh,noBatching:t.noBatching,noBatchingAfter:t.noBatchingAfter,shouldExecOp:t.shouldExecOp,isAsyncOperation:t.isAsyncOperation,waitingForTransition:t.waitingForTransition,lockedComp:(o=t,a=r,u=a[1],o.shouldLockComp&&u?u.id:null),singleComp:s(e,t,r),isUpdatingAnchors:l,enforceType:i(l)}},getContinuousActionParams:function(e,t,n,r,i){return{methodName:n,isContinuousAction:!0,continuousActionType:r,enforceType:a(r,t.enforceTypeDuringContinuous),singleComp:s(e,t,i),withOriginalValues:t.enforceTypeDuringContinuous!==o.NONE,isUpdatingAnchors:u(e,t,i,r)}}}}()},function(e,t,n){var r,o,i,a,s,u,c,l,p;e.exports=(r=n(0),o=n(5),i=n(1),a=n(13),l=function(e,t){var n=t.methodName,r=void 0===n?"":n;return c(e)&&!r.startsWith("debug.trace")},{initialize:function(e){var t=e.siteAPI.getQueryParam("dsQTrace"),n=o.isOpen("ds_recordActionsToCompareWithRC");(t||n)&&s(e)},startTrace:s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldLogConsoleTraces:!1},n=t.shouldLogConsoleTraces,r=void 0!==n&&n;e.runtimeConfig.trace.isTracing=!0,e.runtimeConfig.trace.shouldLogConsoleTraces=r},endTrace:function(e){e.runtimeConfig.trace.isTracing=!1},getActions:p=function(e){return r.reject(u(e),{type:"VIEWER RENDERED FROM Q"})},getCalledMethods:function(e){return r.groupBy(p(e).concat(u(e,!0)),"methodName")},get:u=function(e,t){return t?e.runtimeConfig.trace.readLog:e.runtimeConfig.trace.log},logReadTrace:function(e,t){if(l(e,t)){var n=window.performance?window.performance.now():r.now();e.runtimeConfig.trace.readLog.push(r.assign({type:"Q OPERATION READ",ts:n},t))}},logTrace:function(e,t,n){if(l(e,n)){var o=window.performance?window.performance.now():r.now();e.runtimeConfig.trace.log.push(r.merge({type:t,ts:o},n))}},shouldLogConsoleTrace:function(e){return e.runtimeConfig.trace.shouldLogConsoleTraces},isTracing:c=function(e){return e.runtimeConfig.trace.isTracing},cleanTrace:function(e){e.runtimeConfig.trace.log=[],e.runtimeConfig.trace.readLog=[]},upload:function(e){return new Promise(function(t,n){var s=o.isOpen("ds_recordActionsToCompareWithRC_local")?"http://localhost:3000/api/public":"".concat(e.dal.get(e.pointers.getInnerPointer(e.pointers.general.getServiceTopology(),["basePublicUrl"])).replace("http://","https://"),"_api/autopilot"),c=u(e).filter(function(e){return"Q OPERATION ADDED"===e.type}).filter(function(t){return t.handle>e.runtimeConfig.trace.lastRecordedUploadedHandleIndex});c.length>0?(i.ajaxLibrary.ajax({url:"".concat(s,"/recordings"),type:"POST",dataType:"json",data:{siteId:a.getProperty(e,a.PROPERTY_NAMES.SITE_ID),metaSiteId:a.getProperty(e,a.PROPERTY_NAMES.META_SITE_ID),initialSeed:i.guidUtils.getInitialSeed(),records:c.map(function(e){return{method:e.methodName,args:r.keys(e.args).sort().map(function(t){return e.args[t]})}})},success:function(e){i.guidUtils.setInitialSeed(Date.now()),t(e)},error:function(e){n(e)}}),e.runtimeConfig.trace.lastRecordedUploadedHandleIndex=r.get(r.last(c),"handle")||0):t()})}})},function(e,t,n){e.exports=(n(609),n(183),n(626),{})},function(e,t,n){var r,o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I,S,h;e.exports=(r=n(0),o=n(6),i=n(610),a=n(197),s=n(612),u=n(613),c=n(614),l=n(615),p=n(616),d=n(617),g=n(618),f=n(619),m=n(620),v=n(621),y=n(237),E=n(622),I=n(623),S=n(624),h=n(625),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,i,"wysiwyg.viewer.components.WPhoto"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,u,"wysiwyg.viewer.components.documentmedia.DocumentMedia"),r.forEach(["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],function(e){return o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,p,e)}),r.forEach(["wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip"],function(e){return o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,d,e)}),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,f,"wysiwyg.viewer.components.StripColumnsContainer"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,g,"wysiwyg.viewer.components.mobile.TinyMenu"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,I,"wysiwyg.viewer.components.WRichText"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,c.before,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,S,"wysiwyg.viewer.components.PopupContainer"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,a.positionBigPlay,"wysiwyg.viewer.components.MediaOverlayControls"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,a.positionControlsBar,"wysiwyg.viewer.components.MediaControls"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,E.updateChildLayout,"wysiwyg.viewer.components.Popover"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,h.applyLayoutToWidgetRootOnLayoutUpdate,"platform.components.AppWidget"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,h.applyLayoutToWidgetRootAfterLayoutUpdate,"platform.components.AppWidget"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,y.afterLayoutChanged,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,s,"wysiwyg.viewer.components.WFacebookComment"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,l.after,"wysiwyg.viewer.components.ExpandableMenu"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,v,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,m,"wysiwyg.viewer.components.Column"),void o.registerHook(o.HOOKS.LAYOUT.UPDATE_AFTER,a.layoutPlayerChildren,"wysiwyg.viewer.components.MediaPlayer"))},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(611),o=n(4),i=n(17);function a(e,t){var n=e.width-t.contentPaddingHorizontal,r=e.height-t.contentPaddingVertical;return{width:n>0?n:16,height:r>0?r:16}}return function(n,s,u){if(function(t,n,r){if(e.isUndefined(r.height)&&e.isUndefined(r.width))return!1;var o=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(o);return!e.isUndefined(r.height)&&r.height!==i.height||!e.isUndefined(r.width)&&r.width!==i.width}(n,s,u)){var c=o.properties.get(n,s),l=o.data.get(n,s),p=o.layout.get(n,s);if("fitWidth"===c.displayMode){var d={width:u.width?u.width:p.width,height:u.height?u.height:p.height},g={width:l.width,height:l.height},f=function(e,t,n){var r=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingLeft"),10)||0,o=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingRight"),10)||0,a=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingTop"),10)||0,s=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingBottom"),10)||0,u={},c=r+parseInt(n.contentPaddingLeft||0,10),l=o+parseInt(n.contentPaddingRight||0,10),p=a+parseInt(n.contentPaddingTop||0,10),d=s+parseInt(n.contentPaddingBottom||0,10);return u.contentPaddingHorizontal=c+l,u.contentPaddingVertical=p+d,u}(n,s,i.skin.getComponentSkinExports);if(u.height){var m=t.imageUtils.getContainerSize(r,a(d,f),g,r.fittingTypes.LEGACY_FIT_HEIGHT);u.width=m.width+f.contentPaddingHorizontal}else{var v=t.imageUtils.getContainerSize(r,a(d,f),g,r.fittingTypes.LEGACY_FIT_WIDTH);u.height=v.height+f.contentPaddingVertical}}}}}()},function(e,t){e.exports=W},function(e,t,n){var r,o;e.exports=(r=n(4),o=n(15),function(e,t,n){n.width&&!o.isMobileView(e)&&r.properties.update(e,t,{width:Math.max(n.width,400)})})},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(4),function(e,t,n){r.isUndefined(n.height)||o.properties.update(e,t,{height:n.height})})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(1),i=n(3),a=n(17),s=n(4),{before:function(e,t,n){if(!r.isUndefined(n.height)){var u=s.layout.get(e,t),c=r.get(u,"height");if(!r.isEqual(c,n.height)){var l=i.getDataItem(e,t),p=r.isString(l.menuRef)?l.menuRef.replace("#",""):l.menuRef.id,d=i.getDataItemById(e,p).items,g=r.filter(d,"isVisible").length;if(!(n.height<3*g)){var f=a.skin.getComponentSkinExports(e,t),m=parseInt(a.skin.getCompSkinParamValue(e,t,"sepw")||a.skin.getCompSkinParamValue(e,t,"separatorHeight"),10)||0,v=Math.max(o.verticalMenuCalculations.getItemHeight(n.height,m,g,f),1);s.properties.update(e,t,{menuItemHeight:v})}}}}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(1),i=n(3),a=n(17),s=n(4),{after:function(e,t,n,u,c,l){if(!r.isUndefined(n.height)&&l.height!==n.height){var p=i.getDataItem(e,t),d=r.isString(p.menuRef)?p.menuRef.replace("#",""):p.menuRef.id,g=i.getDataItemById(e,d).items,f=r.filter(g,"isVisible").length,m=a.skin.getComponentSkinExports(e,t),v=a.skin.getCompSkinParamValue(e,t,"brw"),y=parseInt(v,10)||0,E=Math.max(o.verticalMenuCalculations.getItemHeight(n.height,y,f,m),25);s.properties.update(e,t,{menuItemHeight:E})}}})},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(4),i=n(98),a=n(115),function(e,t,n,s){if(r.isFunction(s)){var u=o.layout.get(e,t);if(a.isCompResizing(u,n)){var c=i.getNonMasterChildren(e,t),l=r.pick(n,["width","height"]);r.forEach(c,function(t){return s(e,t,l)})}}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(4),i=n(98),a=n(159),s=n(115),u=n(123),function(e,t,n,c){if(r.isFunction(c)){var l=o.layout.get(e,t);if(s.isCompResizing(l,n)){var p=i.getNonMasterChildren(e,t),d=a.getRuntimeState(e,t).currentIndex,g=s.calculateDelta(n.y,l.y),f=s.calculateDelta(n.x,l.x),m=n.height,v=r.merge({},r.pick(n,["width","height"]),{x:f,y:g});p.forEach(function(t){var n=!r.eq(t,p[d]);u.constrainByChildrenLayout(e,t,v,!1,n)});var y=r.pick(v,["width","x","y"]),E=r.merge({},y,r.pick(v,["height"]));p.forEach(function(t){r.eq(t,p[d])?c(e,t,E):c(e,t,y)}),E.height>n.height&&(n.height=E.height,g>0&&(n.y-=v.height-m))}}})},function(e,t,n){var r;e.exports=(r=n(4),function(e,t){var n=r.properties.get(e,t)||{};n.metaData=n.metaData||{},n.metaData.schemaVersion="2.0",r.properties.update(e,t,n)})},function(e,t,n){e.exports=function(){var e=n(0),t=n(123),r=n(10),o=n(4);function i(e,t){return o.properties.get(e,t).rowMargin}function a(t,n){return e.isNumber(n.height)&&n.height<t.height}return function(n,s,u,c){var l=o.getChildren(n,s),p=o.layout.get(n,s),d=l.length>1;if(!(!(e.isNumber(u.height)&&u.height!==p.height)||d&&n.pointers.components.isMobile(s))){var g=a(p,u),f=function(t,n,r){var a=o.layout.get(t,n),s=i(t,n),u={height:r.height-2*s};return e.isNumber(r.y)&&(u.y=r.y-a.y+s),u}(n,s,u);f.y=e.isUndefined(f.y)?o.layout.get(n,l[0]).y:f.y,e.forEach(l,function(e){var o=r.public.isEnforcingContainerChildLimitationsByWidth(n,e),i=r.public.isEnforcingContainerChildLimitationsByHeight(n,e);t.constrainByChildrenLayout(n,e,f,!o,!i)}),e.forEach(l,function(t){if(c(n,t,f),g){var r=i(n,s);!function(t,n){return!!a(t,n)&&(!e.isNumber(n.y)||t.y===n.y)}(p,u)?c(n,t,{y:f.y-r}):c(n,t,{y:f.y+r})}})}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(4),i=["layout","y"],a=["layout","height"],s=function(e,t,n){return e.dal.get(e.pointers.getInnerPointer(t,i))+n},function(e,t,n,i,u,c){if(!u&&r.isNumber(n.height)&&n.height!==c.height){var l=o.getContainer(e,t);if(e.pointers.components.isMobile(t)){var p=n.height-c.height,d=e.pointers.components.getChildren(l);r(d).takeRightWhile(function(e){return e.id!==t.id}).forEach(function(t){return i(e,t,{y:s(e,t,p)},i,!0)});var g=r.reduce(d,function(t,n){return function(e,t){return e.dal.get(e.pointers.getInnerPointer(t,a))}(e,n)+t},0);e.dal.set(e.pointers.getInnerPointer(l,a),g)}else{var f=function(e,t){return o.properties.get(e,t).rowMargin}(e,l),m={height:n.height+2*f};i(e,l,m)}}})},function(e,t,n){var r;e.exports=(r=n(4),function(e,t,n){var o,i;n.docked?i=n.docked.right?"right":"left":(o=e.siteAPI.getSiteWidth()/2,i=n.x+n.width/2>o?"right":"left"),r.properties.update(e,t,{orientation:i})})},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i;e.exports=(o=n(0),i=n(115),{updateChildLayout:function(e,t,n,a,s,u){var c=r(e.pointers.components.getChildren(t),1)[0];if(c&&i.isCompResizing(u,n)&&o.isFunction(a)){var l=o.isUndefined(n.x)?0:n.x-u.x,p=o.isUndefined(n.y)?0:n.y-u.y;a(e,c,o.defaults({x:l,y:p},n))}}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(4),i=n(94),function(e,t,n){(function(e,t){if(e&&!r.isUndefined(e.height)&&t)return e.height!==t.height})(n,o.layout.get(e,t))&&!i.isGroupedComponent(e,t)&&o.properties.update(e,t,{minHeight:n.height,packed:0===n.height})})},function(e,t,n){e.exports=function(){var e=n(0),t=n(4),r={vertical:{names:["top","center","bottom"],offset:"verticalOffset",field:"verticalAlignment"},horizontal:{names:["left","center","right"],offset:"horizontalOffset",field:"horizontalAlignment"}};function o(t,n){var r=e.minBy(t,Math.abs),o=t.indexOf(r),i=n.names[o],a={};return a[n.field]=i,a[n.offset]=r,a}return function(n,i,a){var s=t.layout.get(n,i);if(a.width===s.width&&a.height===s.height){var u,c,l,p,d=t.properties.get(n,i),g=n.siteAPI.getScreenSize(),f=n.siteAPI.getSiteWidth();"nineGrid"!==d.alignmentType&&"fullWidth"!==d.alignmentType||e.assign(d,(u=a.y,c=a.height,l=g.height,p=u+c/2,o([Math.round(u),Math.round(p-l/2),Math.round(l-(u+c))],r.vertical))),"nineGrid"!==d.alignmentType&&"fullHeight"!==d.alignmentType||e.assign(d,function(e,t,n,i){var a=e+t/2,s=Math.round((i-n)/2);return o([Math.max(Math.round(e+s),0),Math.round(a-n/2),Math.max(Math.round(i-(e+t+s)),0)],r.horizontal)}(a.x,a.width,f,g.width)),t.properties.update(n,i,d)}}}()},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i,a,s;e.exports=(o=n(0),i=n(4),a=n(115),s=n(72),{applyLayoutToWidgetRootOnLayoutUpdate:function(e,t,n,u){var c=s.getComponentLayout(e,t),l=a.isCompResizing(c,n)||a.isCompRescaling(c,n);if(o.isFunction(u)&&l){var p=r(i.getChildren(e,t),1)[0],d=a.calculateDelta(n.x,c.x),g=a.calculateDelta(n.y,c.y);u(e,p,o.pickBy({x:d,y:g,width:n.width,height:n.height,scale:n.scale},o.isNumber))}},applyLayoutToWidgetRootAfterLayoutUpdate:function(e,t,n,o){o(e,r(i.getChildren(e,t),1)[0],{x:0,y:0,width:n.width,height:n.height})}})},function(e,t,n){e.exports=function(){var e=n(6),t=n(627),r=n(628),o=n(629);e.registerHook(e.HOOKS.METADATA.MOVE_DIRECTIONS,t.setMovableSidesForRepeaterItems),e.registerHook(e.HOOKS.METADATA.REMOVABLE,t.disableRemovalForRepeaterItems),e.registerHook(e.HOOKS.METADATA.DUPLICATABLE,t.disableDuplicationOfRepeaterItem),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,t.setResizableSidesForRepeaterItems);e.registerHook(e.HOOKS.METADATA.ROTATABLE,o.rotatable,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,o.resizableSides,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.LAYOUT_LIMITS,o.layoutLimits,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.CONTAINABLE,o.containable),e.registerHook(e.HOOKS.METADATA.MOVE_DIRECTIONS,r.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.DUPLICATABLE,r.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.CAN_REPARENT,r.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.FIXED_POSITION,r.disableForAllButRoot),e.registerHook(e.HOOKS.METADATA.CONTAINABLE,r.disableForAll),e.registerHook(e.HOOKS.METADATA.ROTATABLE,r.disableForAll),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,r.disableForAll),e.registerHook(e.HOOKS.METADATA.SHOULD_AUTO_SET_NICKNAME,r.disableForAllButWidgetRoot),e.registerHook(e.HOOKS.METADATA.A11Y_CONFIGURABLE,r.disableForAll),e.registerHook(e.HOOKS.METADATA.HIDE_AS_GHOST,r.enableForAllButRoot),e.registerHook(e.HOOKS.METADATA.REMOVABLE,r.isRemovable)}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(8),o=n(2),i=n(3),a=n(1),s="wysiwyg.viewer.components.Repeater",{setMovableSidesForRepeaterItems:function(e,t,n){var o=e.pointers.components.getParent(n);return o&&r.getComponentType(e,o)===s?[]:t},disableRemovalForRepeaterItems:function(e,t,n){var o=e.pointers.components.getParent(n);return(!o||r.getComponentType(e,o)!==s)&&t},disableDuplicationOfRepeaterItem:function(e,t,n){var o=e.pointers.components.getParent(n);return(!o||r.getComponentType(e,o)!==s)&&t},setResizableSidesForRepeaterItems:function(e,t,n){var u=e.pointers.components.getParent(n);if(u&&r.getComponentType(e,u)===s){var c=i.getPropertiesItem(e,u);return c&&c.alignment===a.constants.COMP_LAYOUT_OPTIONS.REPEATER.ALIGNMENTS.RIGHT?[o.RESIZE_SIDES.BOTTOM,o.RESIZE_SIDES.LEFT]:[o.RESIZE_SIDES.BOTTOM,o.RESIZE_SIDES.RIGHT]}return t}})},function(e,t,n){var r,o,i,a,s,u,c;e.exports=(r=n(1),o=n(5),i=n(4),a=n(10),s=n(202),u=r.displayedOnlyStructureUtil.isRefPointer,c=function(e,t){var n=i.getContainer(e,t);return!u(n)},{disableForAllButWidgetRoot:function(e,t,n){return!!(!u(n)||c(e,n)&&function(e,t){return"platform.components.AppWidget"===i.getType(e,t)}(e,n))&&t},disableForAllButRoot:function(e,t,n){return!(u(n)&&!c(e,n))&&t},disableForAll:function(e,t,n){return!u(n)&&t},enableForAllButRoot:function(e,t,n){return!(!u(n)||c(e,n))||t},isRemovable:function(e,t,n){return!(u(n)&&!o.isOpen("se_hideInnerElementsInCloseWidget"))&&(a.shouldRemoveAsGhost(e,n)?s.getAttributeFromManifest(e,"preventHide",n,!0,{false:!0,true:!1}):t)}})},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(4),o=n(10),i=n(53);function a(e,n,o){return o(e,r(t.getChildren(e,n),1)[0])}function s(t,n,r){return e.get(i.getControllerStageDataByControllerRef(t,r),["behavior",n])}return{rotatable:function(e,t,n){return a(e,n,o.public.isRotatable)&&!1!==s(e,"rotatable",n)},resizableSides:function(t,n,r){return e.intersection(a(t,r,o.public.getResizableSides),!1===s(t,"resizable",r)?[]:n)},layoutLimits:function(e,t,n){var r=a(e,n,o.public.getLayoutLimits);return!1===s(e,"resizable",n)&&delete r.aspectRatio,r},containable:function(n,r,i,a){if(!1===r)return!1;var s=t.getContainer(n,i);return!!n.pointers.isSamePointer(s,a)||("platform.components.AppWidget"===t.getType(n,a)?o.public.isContainable(n,i,e.head(t.getChildren(n,a))):"platform.components.AppWidget"!==t.getType(n,s))}}}()},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,i,a;e.exports=(o=n(0),i=n(631).siteAspectsRegistry,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.siteAPI=t,this.pageChangeCallbacks=[],this.siteAPI.registerToUrlPageChange(this.handlePageChange.bind(this)))}var t,n,i;return t=e,(n=[{key:"handlePageChange",value:function(e){o.forEach(this.pageChangeCallbacks,function(t){t(e)}),this.pageChangeCallbacks=[]}},{key:"registerToUrlPageChange",value:function(e){this.pageChangeCallbacks.push(e)}}])&&r(t.prototype,n),i&&r(t,i),e}(),i.registerSiteAspect("DocumentServicesAspect",a),a)},function(e,t){e.exports=G},function(e,t,n){e.exports=function(){var e=n(1),t=n(0);function r(t){var n=t.pointers.data.getDataItemFromMaster(e.siteConstants.MASTER_PAGE_ID);return t.pointers.getInnerPointer(n,"accessibilitySettings")}return{get:function(e){var n=e.dal.get(r(e)),o=t.get(n,"visualFocusDisabled");return!t.isUndefined(o)&&!o},set:function(e,n){if(!t.isBoolean(n))throw new Error("visualFocus.set accepts only boolean value");var o=r(e),i=e.dal.get(o)||{};e.dal.set(o,t.assign(i,{visualFocusDisabled:!n}))}}}()},function(e,t,n){var r,o;e.exports=(r=n(634),o=n(182),{loadAndRegisterAppStudioComponents:function(e){if(e.siteAPI.isExperimentOpen("sv_appStudioWithBaseUI")){var t=r.loadAll("".concat(requirejs.toUrl("wix-ui-santa"),"/")).then(function(t){return t.forEach(function(t){return o.registerComponent(e,t)})});return Promise.all([t]).catch(function(e){return"Error: could not load base ui DS components. ".concat(e)})}}})},function(e,t){e.exports=z},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&u(o,n.prototype),o}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),r=n(19),s=n(83),d=n(18),g=n(4),f=n(50),m=n(124),v=n(7),y=n(134),E=n(66),I=n(3),S=n(59),h=n(218),P=n(9),A=n(45),T=n(245),O=n(246),C=n(636),_=n(637),D=n(6),w=n(21),b=n(2),M=n(20),R=n(638),N=n(639),x=n(35),L=n(107),B=n(73),k=n(5),F=t.constants.DATA_TYPES,U="AppStudioData",H="WidgetDescriptor",V="VariationDescriptor",W="Widget",G="Variation",z=M.services.dataValidators,j=t.ajaxLibrary,Y=t.urlUtils,K=B.requestsUtil.fetchJson,q=s.build,Q=q.INVALID_VERSION_TYPE,X=q.NO_GRID_APP_ID,Z=q.NO_STUDIO_APP_APP_ID,J=q.USER_NOT_AUTHORIZED_FOR_APP,$=q.UNKNOWN_SERVER_ERROR,ee=s.save,te=ee.SAVE_DISABLED_IN_DOCUMENT_SERVICES,ne=ee.SESSION_EXPIRED,re=ee.NOT_LOGGED_IN,oe=ee.USER_NOT_AUTHORIZED_FOR_SITE;function ie(t,n){var r=g.getPage(t,n);if(r&&A.isWidgetPage(t,r.id)&&!A.isVariationPage(t,r.id)){var o=Ve(t,r.id),i=f.getNickname(t,n);if(i){var a=Le(t,o);return e(a).map(function(n){var r=He(t,n.pointer),o=v.getAllComponents(t,r);return e.filter(o,function(e){return f.getNickname(t,e)===i})}).flatten().value()}}}function ae(t,n){if(t.pointers.components.getViewMode(n)===b.VIEW_MODES.DESKTOP){var r=ie(t,n);e.forEach(r,function(e){return g.remove(t,e)})}}function se(t,n,r){var o=ie(t,n);e.forEach(o,function(e){return f.setNickname(t,e,r)})}var ue=["isCollapsed","isHidden","isDisabled"];function ce(t,n,r){var o=ie(t,n),i=e.pick(r,ue);e.isEmpty(i)||e.forEach(o,function(e){return I.updatePropertiesItem(t,e,i)})}function le(t,n){if("preview"===n){var r=Ve(t,t.siteAPI.getFocusedRootId()),i=He(t,r),a=fe(t,d.getPage(t,i)),s=g.serialize(t,a),u=p({},O.APP_BUILDER_PREVIEW_APP_ID,p({},i,function(t,n){var r={},i=o(e.get(n,["components"],[]));for(;i.length>0;){var a=i.shift(),s=v.getComponentById(t,a.id),u=f.getNickname(t,s);u&&(a.id=e.uniqueId("ghost-"),r[u]=a,i.push.apply(i,o(a.components||[])),a.components&&(r[u].children=e(a.components).map(function(e){return f.getNickname(t,v.getComponentById(t,e))}).compact().value(),delete r[u].components))}return r}(t,s)));x.setGhostStructure(t,u)}}var pe=function(){return k.isOpen("ds_newAppBuilderMigration")&&k.isOpen("se_appWidgetAsRoot")},de=function(t,n){var o=k.isOpen("se_appWidgetAsRoot"),i=C.validate(t,o);i.invalid&&r.utils.fedopsLogger.captureError(new Error("Invalid App Builder migration state"),{tags:{isWidgetAsRoot:o,errorType:"appBuilderMigration"},extra:e.assign({validationErrors:i.errors},n?{migrationError:n}:null)})};function ge(e,t){if(t){var n=g.isPageComponent(e,t)?t:g.getPage(e,t);if(e.pointers.components.isMasterPage(n))return null;if(n)return l(g.getChildren(e,n),1)[0]}return null}function fe(e,t){return l(g.getChildren(e,t),1)[0]}function me(e,n){var r=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),o=e.dal.get(r);o.appStudioData=n,I.addSerializedDataItemToPage(e,t.siteConstants.MASTER_PAGE_ID,o,t.siteConstants.MASTER_PAGE_ID)}function ve(e,n){var r=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),o=e.dal.get(r),i=A.getAppStudioData(e);i.widgets=n,o.appStudioData=i,I.addSerializedDataItemToPage(e,t.siteConstants.MASTER_PAGE_ID,o,t.siteConstants.MASTER_PAGE_ID)}function ye(t,n){var r=A.getAppStudioData(t);e.isUndefined(r)&&(r=function(t,n){var r=I.createDataItemByType(t,U);r.id=Ie();var o=t.dal.getByPath(["documentServicesModel","metaSiteData","siteName"])||"MyProject1";return r.name=e.replace(o,"mysite","MyProject"),e.defaults(r,n)}(t,n),me(t,r))}function Ee(t,n){var r=A.getAppStudioData(t);if(e.isUndefined(r))throw new Error("appStudio: there is no app studio to update");var o=e.assign({},r,n);!function(t,n){if(e.isEmpty(n.name))throw new Error("appStudio: name is required")}(0,o),me(t,o)}function Ie(){return E.generateNewId(F.data)}function Se(e){var t=Ie();return e.pointers.data.getDataItemFromMaster(t)}function he(e,t){var n=A.getAppStudioData(e).widgets;n.push(t),ve(e,n)}function Pe(e,t,n){var r=function(e,t){var n=y.getBlankPageStructure(e,t.id,d.serializePage),r=y.getBlankBackground();return r.desktop.ref.color="#f0f3f5",r.mobile.ref.color="#f0f3f5",n.data.pageBackgrounds=r,delete n.styleId,n.style=P.styles.createStyleItemToAdd(e,{styleType:"custom",skin:"wysiwyg.viewer.skins.page.BasicPageSkin"}),n.style.style.properties.bg="#f0f3f5",n.data.isLandingPage=!0,n.data.isMobileLandingPage=!0,n}(e,n);d.add(e,n,t,r)}function Ae(t,n,r,o){var i=I.createDataItemByType(t,H);return i.id=n,i.name=r,i.rootCompId="#".concat(e.get(o,"id")),i}function Te(t,n){if(e.isEmpty(n))throw new Error("appStudio.widgets: name is required");if(e.includes(e.map(A.getAllWidgets(t),"name"),n))throw new Error("appStudio.widgets: widget name already exists")}function Oe(t,n,r){if(e.isEmpty(n))throw new Error("appStudio.variations: name is required");if(e.includes(e.map(Le(t,r),"name"),n))throw new Error("appStudio.variations: variation name already exists")}function Ce(e,t,n){var r={type:n,behaviors:[]},o={controllerType:n,settings:JSON.stringify(r)};g.data.update(e,t,o)}function _e(t,n,r){var o=g.getComponentToAddRef(t,r);if(k.isOpen("se_appWidgetAsRoot")){var i=e.defaultsDeep({components:[n]},T);g.add(t,o,r,i),Ce(t,o,r.id)}else g.add(t,o,r,n)}function De(t,n,r,o,i,a){if(r){var s=a||function(e,t,n){return Ne(Le(e,n),t)}(t,G,r);Oe(t,s,r);var u=d.getPageIdToAdd(t),c=function(t,n,r,o){var i=I.createDataItemByType(t,V);return i.id=n.id,i.name=r,i.rootCompId="#".concat(e.get(o,"id")),t.dal.set(n,i),i}(t,n,s,u);!function(e,t,n){var r=e.dal.get(n);r&&(r.variations.push("#".concat(t.id)),e.dal.set(n,r))}(t,c,r),t.pointers.page.isExists(i)?(d.duplicate(t,u,i,void 0,!1),Be(t,u.id,s)):(Pe(t,s,u),o&&_e(t,o,u))}}function we(t){return e.forEach(t,function(t){var n=t.params;n&&e.set(t,"params",e.map(n,function(t){return function(t){return e.mapValues(t,function(t){return e.isNil(t)?"":t})}(t)}))})}function be(e){return JSON.parse(JSON.stringify(e))}function Me(t,n){var r=t.pointers.getInnerPointer(n,"widgetApi.propertiesSchemas");return e.map(t.dal.get(r),function(t){return e.assign(t.structure,e.omit(t,["structure","type"]))})}function Re(t,n,r,o){if("propertiesSchemas"===n){!function(t){if(!(e.uniqBy(t,function(e){return R.getSchemaStructureKey(e)}).length===t.length))throw new Error("appStudio.widgets: property name is already in use for this widget")}(o);var i=A.getAppStudioData(t).customDefinitions||[];R.validatePropertyDefaultValue(i,o),o=e.map(o,function(e){return{structure:e}})}else!function(t){if(!e.every(t,"name"))throw new Error("appStudio.widgets: can not set widget API without a name");if(!(e.uniqBy(t,"name").length===t.length))throw new Error("appStudio.widgets: API name is already in use for this widget")}(o),o=we(o);var a=t.dal.get(r);!function(e,t,n,r,o){n.widgetApi[r]=o,z.validateDataBySchema(n,"data"),e.dal.set(t,n)}(t,r,a,n,o)}function Ne(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=e(t).map("name").filter(function(e){return function(e,t){return!!new RegExp("^".concat(t,"[0-9]*$")).exec(e)}(e,n)}).map(function(t){return e.replace(t,n,"")}).map(Number).sortBy().value(),o=e.last(r)||0;return n+(o+1)}function xe(e,t){return Ne(A.getAllWidgets(e),t)}function Le(t,n){var r=t.dal.get(n)||{};return e.map(r.variations,function(n){var r=t.pointers.data.getDataItemFromMaster(e.replace(n,"#","")),o=t.dal.get(r);return{pointer:r,name:e.get(o,"name")}})}function Be(e,t,n){var r=w.getPageData(e,t);r.title=n,w.setPageData(e,t,r)}function ke(e,t,n){Be(e,He(e,t),n)}var Fe=function(e,t){var n=fe(e,t);n&&Ce(e,n,t.id)};function Ue(e,t,n){var r=e.dal.get(t);r.name=n,e.dal.set(t,r)}function He(t,n){var r=t.dal.get(n);if(r&&r.rootCompId)return e.replace(r.rootCompId,"#","")}function Ve(e,t){var n=A.findWidgetByPageId(e,t);return n&&n.pointer}function We(t,n,r){var o=R.getSchemaStructureKey(r),i=A.getAppStudioData(t),a=i.customDefinitions||[];R.validateDefinitionHasProperties(r);var s=n&&t.dal.get(n);if(s){var u=e.findIndex(a,["id",n.id]);R.getSchemaStructureKey(a[u].structure)!==o&&R.validateNewDefinitionName(a,o),a[u]=R.mergeExistingDefinitionWithDefinitionData(s,r),a[u].structure=R.setPropertiesOrder(a[u].structure)}else{R.validateNewDefinitionName(a,o),r=R.setPropertiesOrder(r);var c=R.createNewDefinitionWithData(t,I,r);a.push(c)}R.validateDefinitionDefaultValue(a,r),i.customDefinitions=a,Ee(t,i),s&&function(t,n,r,o){var i=R.getDefinitionPropertiesDifference(r,o);if(!e.isEmpty(i.addedProperties)||!e.isEmpty(i.removedProperties)||!e.isEmpty(i.restrictedProperties)){var a=Ge(t,n);e.forEach(a.definitions,function(e){We(t,e.definition.pointer,R.updateDefinitionDefault(t,e,i))}),e.forEach(a.widgets,function(e){Re(t,"propertiesSchemas",e.widget.pointer,R.updateWidgetPropertiesDefault(t,e,i,Me))})}}(t,n,s.structure,r)}function Ge(t,n){var r=t.dal.get(n),o=R.getSchemaStructureKey(r.structure),i=e.get(r,["structure",o,"$id"]);return{widgets:R.getDefinitionUsagesInWidgets(t,Me,i),definitions:R.getDefinitionUsagesInDefinitions(t,i)}}function ze(e,t){var n=Ge(e,t);if(n.widgets.length>0||n.definitions.length>0)throw new Error("appStudio.definitions: definition is in use, cannot remove")}var je=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,c(t).call(this,"Build Error"))).errorCode=e.errorCode,n.errorType=e.errorType,n.errorDescription=e.errorDescription,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a(Error)),t}();function Ye(n,r,o){return new Promise(function(i,a){if(h.canSave()){var s=n.dal.full.immutable.getCurrentSnapshot(),u=function(e,t){var n=e.getIn(["serviceTopology","editorServerRoot"]),r=e.getIn(["rendererModel","siteInfo","siteId"]),o=e.getIn(["rendererModel","metaSiteId"]),i=Xe(e),a=Y.toQueryString({metaSiteId:o,editorSessionId:i,esi:i,versionType:t});return"".concat(n,"/api/build/").concat(r,"?").concat(a)}(s,r),c=function(t){var n=A.getAllWidgets(t);return e.reduce(n,function(n,r){var o=He(t,r.pointer),i=e.map(r.variations,function(n){var r=t.pointers.data.getDataItemFromMaster(e.replace(n,"#",""));return He(t,r)});return n[o]=i,n},{})}(n),l=L.getCodeAppInfoFromPS(n).signedInstance;!function(e,n,r,o,i,a,s){j.ajax({type:"POST",url:n,headers:{"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":e.get("origin"),"X-Editor-Session-Id":Xe(e),Authorization:s,"X-XSRF-TOKEN":t.cookieUtils.getCookie("XSRF-TOKEN")},dataType:"json",xhrFields:{withCredentials:!0},data:{widgetsMap:r,appMarketingName:o,skipDataFor:[]},success:function(e){return e.success?i():a(Qe(e.errorCode,e.errorDescription))},error:function(e){return a(Qe(e.errorCode,e.errorDescription))}})}(s,u,c,o,i,a,l)}else a(Qe("-1","DocumentServices was created with parameter disableSave=true, so build is disabled.",te))})}var Ke={minor:"minor",major:"major",build:"build"};var qe={"-12":ne,"-15":re,"-17":oe,"-10198":X,"-15053":Z,"-15054":J},Qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$;return new je({errorCode:e,errorDescription:t,errorType:qe[e]||n})};function Xe(e){return e.getIn(["documentServicesModel","editorSessionId"])}return{initialize:function(e){e.dal.set(e.pointers.general.getMobileConversionHeuristicStrategy(),"appbuilder");var t=e.pointers.general.getAutosaveInfo(),n=e.dal.get(t)||{};n.shouldAutoSave=!1,e.dal.set(t,n),(pe()?C.migrateForward(e,_e):Promise.resolve()).then(function(){return de(e)}).catch(function(t){return de(e,t)}),k.isOpen("se_appBuilderVariations")&&(D.registerHook(D.HOOKS.REMOVE.BEFORE,ae),D.registerHook(D.HOOKS.WIX_CODE.SET_NICKNAME_BEFORE,se),D.registerHook(D.HOOKS.PROPERTIES.UPDATE_AFTER,ce),D.registerHook(D.HOOKS.CHANGE_PARENT.AFTER,ae),D.registerHook(D.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,le)),k.isOpen("se_appWidgetAsRoot")&&m.setContextProvider(ge)},getNewDataId:Ie,getNewDataItemPointer:Se,getAppStudioMetaData:A.getAppStudioMetaData,updateAppStudioMetaData:Ee,saveAppMetadata:N.saveMetadata,build:function(t,n,r,o,i){!function(e){return!!Ke[e]}(o)?r(Qe("-1",'Version type should be one of: "build", "minor" "major".',Q)):S.runFunctionInSaveQueue(e.partial(Ye,t,o,i)).then(n).catch(r)},getDevSiteAppDefId:function(e){var t=e.pointers.general.getDevSiteAppDefIdPointer();return e.dal.get(t)},setWixDataToken:function(n,r,o,i,a,s){(function(e,t){var n=L.getCodeAppInfoFromPS(e);return K("https://www.wix.com/_api/cloud-data-packaging/v1/package-data",{mode:"cors",method:"POST",credentials:"include",headers:new Headers({Authorization:n.signedInstance}),body:JSON.stringify({signedInstance:n.signedInstance,gridAppId:n.appId,appMarketingName:t,skipDataFor:[]})}).then(function(e){return e&&e.packageToken})})(n,i).then(function(e){return function(e,n,r,o){K("https://apps.wix.com/app-studio-server/setToken",{mode:"cors",method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json; charset=utf-8","X-XSRF-TOKEN":t.cookieUtils.getCookie("XSRF-TOKEN")}),body:JSON.stringify({token:r,appVersion:n,appDefId:e,appMarketingName:o})})}(o,r,e,i)}).then(a).catch(function(t){return t.json().then(function(t){e.get(t,"message","").contains("No collections to package")?a():s(t)})})},definitions:{getAllCustomDefinitions:A.getAllCustomDefinitions,getAllSerializedCustomDefinitions:A.getAllSerializedCustomDefinitions,getSerializedCustomDefinition:A.getSerializedCustomDefinition,setCustomDefinition:We,removeCustomDefinition:function(t,n){if(!t.dal.get(n))throw new Error("appStudio.definitions: cannot remove non existing definition");ze(t,n);var r=A.getAppStudioData(t);e.pullAt(r.customDefinitions,e.findIndex(r.customDefinitions,{id:n.id})),Ee(t,r)},getAllDefinitionUsages:Ge,validateDefinitionHasNoUsages:ze,validateNewDefinitionName:R.validateNewDefinitionName},widgets:{createWidget:function(t,n,r,o,i){r=r||xe(t,W),ye(t),Te(t,r);var a=d.getPageIdToAdd(t),s=Ae(t,n,r,a);he(t,s),Pe(t,r,a),o&&_e(t,o,a);var u=t.pointers.data.getDataItemFromMaster(s.id);return e.isFunction(i)&&i(u),u},getAllWidgets:A.getAllWidgets,getAllSerializedWidgets:A.getAllSerializedWidgets,getWidgetFunctions:function(e,t){var n=e.pointers.getInnerPointer(t,"widgetApi.functions");return e.dal.get(n)},getWidgetPropertiesSchema:Me,getWidgetEvents:function(e,t){var n=e.pointers.getInnerPointer(t,"widgetApi.events");return e.dal.get(n)},getSerializedWidgetStructure:function(e,t,n){var r=n||{},o=r.appDefinitionId,i=r.devCenterWidgetId,a=r.variationId,s=a||t,u=d.serializePage(e,s,!0);return _.getFixedAppWidgetStructure(u,{appDefinitionId:o,devCenterWidgetId:i,variationId:a})},setWidgetApiPart:Re,duplicateWidget:function(t,n,r){var o=t.dal.get(n);if(o){var i=xe(t,o.name),a=Ie(),s=d.getPageIdToAdd(t),u=Ae(t,a,i,s);u.widgetApi=e.cloneDeep(o.widgetApi),he(t,u);var c=t.pointers.data.getDataItemFromMaster(u.id);return d.duplicate(t,s,e.replace(o.rootCompId,"#","")),ke(t,c,i),function(t,n,r){e.forEach(n.variations,function(n){var o=t.dal.get(t.pointers.data.getDataItemFromMaster(e.replace(n,"#",""))),i=Se(t);De(t,i,r,null,e.replace(o.rootCompId,"#",""),o.name)})}(t,o,c),e.isFunction(r)&&r(c),k.isOpen("se_appWidgetAsRoot")&&Fe(t,s),c}},setWidgetName:function(e,t,n){Te(e,n),Ue(e,t,n),ke(e,t,n)},getWidgetName:function(t,n){var r=t.dal.get(n);return e.get(r,"name")},displayWidget:function(e,t,n){var r=He(e,t);r&&d.navigateTo(e,r,n)},removeWidget:function(t,n,r){var o=t.dal.get(n);if(o&&o.rootCompId){var i=A.getAppStudioData(t).widgets;e.pullAt(i,e.findIndex(i,{id:n.id}));var a=He(t,n);if(ve(t,i),a===d.homePage.get(t)){var s=e.head(i).rootCompId;d.homePage.set(t,e.replace(s,"#",""))}d.remove(t,o.rootCompId,r)}},isWidgetPage:A.isWidgetPage,getWidgetByRootCompId:Ve,getRootCompIdByPointer:He,getWidgetById:A.getWidgetPointerByWidgetId,notifyPropertiesUpdateToWorker:function(t,n,r,o){if(!e.isEqual(r,o)){var i=He(t,n);t.siteAPI.triggerAppStudioWidgetOnPropsChanged(i,be(r),be(o))}},variations:{createVariation:De,getVariationName:function(t,n){var r=t.dal.get(n);return e.get(r,"name")},setVariationName:function(e,t,n,r){Oe(e,r,n),Ue(e,t,r),ke(e,t,r)},removeVariation:function(t,n,r){var o=t.dal.get(r);if(o){var i=o.variations;e.remove(i,function(e){return e==="#".concat(n.id)}),o.variations=i,t.dal.set(r,o);var a=He(t,n);d.remove(t,a)}},isVariationPage:A.isVariationPage,getWidgetVariations:Le,getVariationByRootCompId:function(t,n){var r=A.findVariationByPageId(t,n).variationId;return r&&t.pointers.data.getDataItemFromMaster(e.replace(r,"#",""))}}}}}()},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i,a,s,u,c,l,p,d,g,f,m,v,y,E,I;e.exports=(o=n(0),i=n(2),a=n(11),s=n(4),u=n(18),c=n(246),l=n(45),p=n(35),d=n(154),g=n(60),f=n(245),m=function e(t,n){o.forEach(t,function(t){var r,i,a;r=t,i=n[t.id],a=o.pick(i,["layout","props"]),o.isEmpty(a)||(r.mobileStructure=o.assign(r.mobileStructure,a),r.mobileStructure.props&&!r.props&&(r.props=o.pick(r.mobileStructure.props,["id","metaData","type"]))),e(t.components,n)})},v=function(e,t){var n,r;m(e,(n=t,r={},o.forEach(n,function e(t){r[t.id]=o.omit(o.clone(t),"components"),o.forEach(t.components,e)}),r))},y=function(e,t){var n=o.map(e.pointers.page.getNonDeletedPagesPointers(),"id");return o(n).filter(function(t){return e.pointers.full.components.getPage(t,i.VIEW_MODES.DESKTOP)&&l.isWidgetPage(e,t)}).map(function(t){var n=e.pointers.full.components.getPage(t,i.VIEW_MODES.DESKTOP);return{widgetRoot:r(s.getChildren(e,n),1)[0],widgetPage:n}}).filter(function(e){var n=e.widgetRoot;return n&&t(n)}).value()},E=function(e,t,n,r,i){var a;s.remove(e,t),i(e,(a=r,o.omit(a,["layout.docked","layout.x","layout.y"])),n)},I=function(e,t){var n=y(e,function(t){return"platform.components.AppWidget"!==s.getType(e,t)}),r=function(e,t){var n=o(t).keyBy("widgetRoot.id").mapValues(function(t){var n=t.widgetPage;return u.serializePage(e,n.id,!0)}).value();return o.forEach(n,function(e){v(e.components,e.mobileComponents)}),o.mapValues(n,function(e){return e.components[0]})}(e,n);o.forEach(n,function(n){var i=n.widgetRoot,s=n.widgetPage;!function(e,t){var n=e.pointers.full.components.getMobilePointer(t);a.updateCompLayout(e,n,{y:0})}(e,i);var u=r[i.id];!function e(t){if(t.connections){var n=(o.find(t.connections.items,{type:"WixCodeConnectionItem"})||{}).role;if(n){var r=f.data.id;t.connections.items=[g.createConnectionItem(n,r,!0)]}}o.forEach(t.components,function(t){e(t)})}(u),E(e,i,s,u,t)})},{migrateForward:function(e,t){return I(e,t),new Promise(function(t,n){return p.registerToAppsCompleted(e,o.once(function(){return function(e){return d.provision(e,c.APP_BUILDER_PREVIEW_APP_ID)}(e).then(t).catch(n)}))})},validate:function(e,t){var n=t?function(t){return"platform.components.AppWidget"!==s.getType(e,t)}:function(t){return"platform.components.AppWidget"===s.getType(e,t)},r=o.map(y(e,n),"widgetPage.id"),i=!t||o.some(p.getInstalledEditorApps(e),{appDefinitionId:c.APP_BUILDER_PREVIEW_APP_ID});if(!o.isEmpty(r)||!i){var a=o.isEmpty(r)?null:{invalidWidgets:r},u=i?null:{missingPlatformApp:!0};return{invalid:!0,errors:o.assign({},a,u)}}return{invalid:!1}}})},function(e,t,n){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o,i,a,s,u,c,l,p;e.exports=(o=n(0),i=function e(t){return o.union([t],o.flatMap(t.components,e))},a=function e(t,n){o.forEach(t,function(t){var r,i,a;r=t,i=n[t.id],a=o.pick(i,["layout","props"]),o.isEmpty(a)||(r.mobileStructure=o.assign(r.mobileStructure,a),r.mobileStructure.props&&!r.props&&(r.props=o.pick(r.mobileStructure.props,["id","metaData","type"]))),e(t.components,n)})},s=function(e,t){a(e,o(t).flatMap(i).union().keyBy("id").value())},u=function(e){return o.includes(["runCode","runAppCode"],o.get(e,"behavior.name"))},c=function(e){var t=o.get(e,["behaviors","items"]);if(t){var n=o.reject(JSON.parse(t),u);e.behaviors.items=JSON.stringify(n)}},l=function(e){o.has(e,"connections")&&(e.connections.items=o.reject(e.connections.items,{type:"WixCodeConnectionItem"}))},p=function(e){o.unset(e,["custom","originalNicknameContext"])},{getFixedAppWidgetStructure:function(e,t){var n,i=t.appDefinitionId,a=t.devCenterWidgetId,u=t.variationId,d=r(e.components,1)[0];return function(e,t){var n=t.appDefinitionId,r=void 0===n?e.data.applicationId:n,i=t.devCenterWidgetId,a=t.variationId,s=e.data,u=o.get(s,"controllerType",""),c=JSON.parse(o.get(s,"settings","{}")),l=o.assign(c,{devCenterWidgetId:i,variationId:a});o.assign(s,{controllerType:"".concat(r,"-").concat(u),settings:JSON.stringify(l)},r?{applicationId:r}:null)}(d,{appDefinitionId:i,devCenterWidgetId:a,variationId:u}),(n=d).layout&&(n.layout.x=0,n.layout.y=0,o.unset(n.layout,"docked")),function e(t){c(t),l(t),p(t),o.forEach(t.components,e)}(e),s(e.components,e.mobileComponents),d}})},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),i=n(247),a=n(45),s=function(t){var n=u(t);return{name:n,data:e.get(t,[n]),default:e.get(t,[n,"default"]),properties:e.get(t,[n,"properties"])}},u=function(t){return e.head(e.keys(t))},c=function(t){return"array"===e.get(t,[u(t),"allOf",0,"type"])},l=function(t){return c(t)?e.get(t,[u(t),"allOf",0,"items","allOf",0,"$ref"]):e.get(t,[u(t),"allOf",0,"$ref"])},p=function(t){return e.pick(c(t)?e.get(t,[u(t),"allOf",0,"items","allOf",1]):e.get(t,[u(t),"allOf",1]),["minimum","maximum","multipleOf","minLength","maxLength"])},d=function(t,n){return e.reduce(t,function(t,r){var o=u(r);return(c(r)?e.get(r,[o,"allOf",0,"items","allOf",0,"$ref"],""):e.get(r,[o,"allOf",0,"$ref"],""))===n&&t.push({property:r,name:o}),t},[])},g=function(t,n,o,i,a){var s=e.mapValues(e.keyBy(a.addedProperties,"name"),"default"),u=e.map(a.removedProperties,"name");if(n)e.forEach(e.get(t,i,[]),function(n,o){var c=e.get(t,[].concat(r(i),[o]),{});e.set(t,[].concat(r(i),[o]),e.assign(f(e.omit(c,u),a.restrictedProperties),s))});else{var c=e.get(t,o,{});e.set(t,o,e.assign(f(e.omit(c,u),a.restrictedProperties),s))}return t},f=function(t,n){return e.forOwn(t,function(r,o){var i=e.get(e.find(n,["name",o]),"restrictions");e.has(i,"minimum")||e.has(i,"maximum")||e.has(i,"multipleOf")?t[o]=m(r,i):(e.has(i,"minLength")||e.has(i,"maxLength"))&&(t[o]=v(r,i))}),t},m=function(t,n){var r=e.get(n,"minimum",Number.MIN_SAFE_INTEGER),o=e.get(n,"maximum",Number.MAX_SAFE_INTEGER),i=E(t,r,o);return e.has(n,"multipleOf")&&((i=y(i,n.multipleOf))>o?i-=n.multipleOf:i<r&&(i+=n.multipleOf),i=y(i,n.multipleOf)),i},v=function(t,n){var r=e.get(n,"maxLength",Number.MAX_SAFE_INTEGER);if(e.size(t)>r)return e.truncate(t,{length:r,omission:""});var o=e.get(n,"minLength",-1);return e.size(t)<o?e.padEnd(t,o,"?"):t},y=function(e,t){return Math.round(e/t)*t},E=function(e,t,n){return Math.min(Math.max(e,t),n)};function I(e,t,n){if(!i.createValidator(e,t).validate(n))throw new Error("app studio: Data validation failed")}return{getSchemaStructureKey:u,mergeExistingDefinitionWithDefinitionData:function(t,n){var r=u(t.structure),i=u(n),a=e.assign({},t.structure[r],n[i]),s=e.omit(t,"structure");return e.assign({},s,{structure:o({},i,a)})},createNewDefinitionWithData:function(n,r,o){return o[u(o)].$id=t.guidUtils.getUniqueId(),e.assign(r.createDataItemByType(n,"CustomDefinitionDescriptor"),{structure:o})},getDefinitionPropertiesDifference:function(t,n){var r=s(t),i=s(n),a=e(i.properties).keys().difference(e.keys(r.properties)).map(function(t){return{name:t,default:e.get(n,[i.name,"default",t])}}).value(),u=e(r.properties).keys().difference(e.keys(i.properties)).map(function(e){return{name:e}}).value(),d=[];return e.forOwn(i.properties,function(t,s){if(!e.isUndefined(r.properties[s])){var g=l(o({},s,t))!==l(o({},s,r.properties[s])),f=c(o({},s,t))!==c(o({},s,r.properties[s]));(g||f)&&(a.push({name:s,default:e.get(n,[i.name,"default",s])}),u.push({name:s}));var m=p(o({},s,t)),v=p(o({},s,r.properties[s]));e.isEqual(m,v)||d.push({name:s,restrictions:m})}}),{addedProperties:a,removedProperties:u,restrictedProperties:d}},getDefinitionUsagesInWidgets:function(t,n,r){var o=a.getAllWidgets(t);return e.reduce(o,function(e,o){var i=n(t,o.pointer),a=d(i,r);return a.length>0&&e.push({widget:o,dependantProperties:a}),e},[])},getDefinitionUsagesInDefinitions:function(t,n){var r=a.getAllCustomDefinitions(t);return e.reduce(r,function(r,i){var u=a.getSerializedCustomDefinition(t,i.pointer),c=s(u),l=e.map(e.keys(c.properties),function(e){return o({},e,c.properties[e])}),p=d(l,n);return p.length>0&&r.push({definition:i,dependantProperties:p}),r},[])},updateDefinitionDefault:function(t,n,r){var o=a.getSerializedCustomDefinition(t,n.definition.pointer);return e.forEach(n.dependantProperties,function(e){var t=[n.definition.name,"default",e.name];o=g(o,c(e.property),t,t,r)}),o},updateWidgetPropertiesDefault:function(t,n,r,o){var i=o(t,n.widget.pointer);return e.forEach(n.dependantProperties,function(t){var n=e.findIndex(i,function(e){return u(e)===t.name}),o=i[n];if(o){var a=[t.name,"allOf",1,"default"],s=[t.name,"allOf",0,"default"];i[n]=g(o,c(o),a,s,r)}}),i},setPropertiesOrder:function(t){var n=u(t),r=e.keys(e.get(t,[n,"properties"],{})),o=e.get(t,[n,"propertiesOrder"],[]);return o=e(o).reject(function(t){return!e.includes(r,t)}).concat(e.difference(r,o)).uniq().value(),e.set(t,[n,"propertiesOrder"],o)},validatePropertyDefaultValue:function(t,n){var a=e.merge.apply(e,[{}].concat(r(e.map(t,"structure")))),s=e.merge.apply(e,[{}].concat(r(n))),u=i.createDriver(a);I(a,s,e.merge.apply(e,[{}].concat(r(e.map(n,function(e){return u.set.schema(e),o({},u.get.name(),u.get.default())})))))},validateDefinitionDefaultValue:function(t,n){var o=e.mapValues(n,"default");I(e.merge.apply(e,[{}].concat(r(e.map(t,"structure")))),n,o)},validateDefinitionHasProperties:function(t){var n=s(t);if(e.isEmpty(n.properties))throw new Error("app studio: Definition cannot be set without properties")},validateNewDefinitionName:function(t,n){var r=e.concat(e.map(t,function(e){return u(e.structure)}),["text","number","boolean","image","url","dateTime","array","object","string","widget","props"]);if(e.includes(r,n))throw new Error("appStudio.definitions: definition name is already in use for this app")}}}()},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o,i,a,s,u,c,l,p,d,g,f,m,v,y,E;e.exports=(o=n(0),i=n(5),a=n(247),s=n(73),u=n(12),c=n(7),l=n(36),p=n(4),d=n(50),g=n(45),f=n(61),m=s.eventsMap,v=["runCode","runAppCode"],y=function(e){var t=e.behavior,n=(t=void 0===t?{}:t).type,r=t.name;return"widget"===n&&v.includes(r)},{serializeWidgetAPI:E=function(e,t){var n=t.widgetApi,s=u.stripHashIfExists(t.rootCompId),f=o(n).pick(["functions","events"]).mapValues(function(e){return o.map(e,"name")}).value(),v=o.flatMap(n.propertiesSchemas,function(e){return o.keys(e.structure)});return i.isOpen("se_appWidgetAsRoot")&&(f.defaultValues=function(e,t){var n=o.assign.apply(o,[{}].concat(r(g.getAllSerializedCustomDefinitions(e)))),i=a.createResolver(a.baseDefinitions,n);return o(t).map(function(e){return i.resolve(e.structure)}).thru(function(e){return o.assign.apply(o,r(e))}).mapValues("default").value()}(e,n.propertiesSchemas),f.behaviors=function(e,t){var n=p.getChildrenFromFull(e,c.getComponentById(e,t),!0);return o.flatMap(n,function(t){var n=d.getNickname(e,t),r=l.getBehaviors(e,t);return o(r).filter(y).map(function(e){var t=e.action,r=e.behavior;return{role:n,event:m[t.name],callbackId:r.params.callbackId}}).value()})}(e,s)),o.defaults({properties:v},f)},saveMetadata:function(e){return new Promise(function(t,n){try{var r=f.getRoots(e).public.location,o="".concat(r,"app-metadata.json"),i=f.getVirtualDescriptor(e,o,!1),a=g.getAllSerializedWidgets(e),s={};a.forEach(function(t){var n=u.stripHashIfExists(t.rootCompId);s[n]=E(e,t)}),f.writeFile(e,i,JSON.stringify(s)).then(t).catch(function(e){n(e)})}catch(e){n(e)}})}})},function(e,t,n){var r,o,i;e.exports=(r=n(0),o=n(4),i=n(248),{changeVariation:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.noop,s=t;if("platform.components.AppWidget"===o.getType(e,s)&&(s=i.getComponentToCreateRef(e,t),i.closeWidgetToReferredComponent(e,s,t)),"wysiwyg.viewer.components.RefComponent"!==o.getType(e,s))throw new Error("Change variation is not available for this component");i.removeAllOverrides(e,s),o.data.update(e,s,{variationId:n}),a(s)}})},function(e,t,n){var r;e.exports=(r=n(712),{getSnapshot:function(e,t){var n=function(e){return"#".concat(e.id)}(t),o=document.querySelector(n);if(!o||!function(e){return e instanceof HTMLElement}(o))throw new Error("Couldn't find element for selector: '".concat(n,"' of comp id: '").concat(t.id,"'"));return r.createSnapshotString(o)}})},function(e,t,n){var r;e.exports=(r=n(17),{getStylableEditorInstance:function(e){return e.siteAPI.getStylableEditorInstance()},update:function(e,t,n){r.style.update(e,t,n),e.siteAPI.revertQuickChanges(t.id)},setQuickChange:function(e,t,n,r){e.siteAPI.setQuickChanges(t.id,n,r)},revertQuickChange:function(e,t){e.siteAPI.revertQuickChanges(t.id)},forceState:function(e,t,n){e.siteAPI.forceState(t.id,n)},revertForceState:function(e,t){e.siteAPI.revertForceState(t.id)}})},function(e,t){e.exports=function(){function e(e,t){return t=t?"balatamedia".concat(t):"",e[0].id+(t||"")}return{play:function(t,n,r){var o=e(n,r);return t.siteAPI.bgVideo.play(o)},stop:function(t,n,r){var o=e(n,r);return t.siteAPI.bgVideo.stop(o)},isPlaying:function(t,n,r){var o=e(n,r);return t.siteAPI.bgVideo.isPlaying(o)},getReadyState:function(t,n,r){var o=e(n,r);return t.siteAPI.bgVideo.getReadyState(o)},registerToPlayingChange:function(t,n,r,o){var i=e(n,r);return t.siteAPI.bgVideo.registerToPlayingChange(i,o)},unregisterToPlayingChange:function(t,n,r){var o=e(n,r);return t.siteAPI.bgVideo.unregisterToPlayingChange(o)},registerToQualityReady:function(e,t,n){return e.siteAPI.bgVideo.registerToQualityReady(t,n)},unregisterToQualityReady:function(e,t,n){return e.siteAPI.bgVideo.unregisterToQualityReady(t,n)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t="http://wixfeedbackserver.appspot.com",r="http://localhost:8888",o="/markSiteShared",i="/markAsRead",a="/list",s="/append",u="/delete",c="https://api-ssl.bitly.com/v3/shorten?access_token=6e283dc921f56df2eff5951bd2bf5bab041d8ac2&longUrl=",l="&utm_campaign=vir_wixad_feedback",p=["happy","sad","noMood"],d=!1;function g(){return d?r:t}function f(e,t,n,r){if(this._useMockedData)m(r,"onSuccess")&&r.onSuccess("MOCKED");else{var o=window.XDomainRequest,i=new window.XMLHttpRequest;"withCredentials"in i?i.open(e,t,!0):void 0!==o?(i=new o).open(e,t):i=null,i&&("POST"===e&&i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=function(){m(r,"onSuccess")&&r.onSuccess(i.responseText)},i.onerror=function(){m(r,"onError")&&r.onError({error:!0})},i.send(n||null))}}function m(t,n){return e.isFunction(e.get(t,n))}var v={enableMockedData:function(e){!0},disableMockedData:function(e){!1},enableLocalTestServer:function(e){d=!0},disableLocalTestServer:function(e){d=!1},getUnreadMockedComment:function(e,t){return{pageId:"mainPage",x:parseInt(500*Math.random(),10),y:parseInt(500*Math.random(),10),text:"title [".concat(Date.now(),"]"),submitter:t||"anonymous",time:Date.now(),face:p[parseInt(Math.random()*p.length,10)],unread:!0}},__sendCORSRequest:f};return e.merge({generateShareURL:function(t,n,r){var o=t.dal.getByPath(["rendererModel","siteInfo","siteId"]),i=t.dal.getByPath(["rendererModel","metaSiteId"]);n=n||"en",function(e,t,n){var r="//".concat(window.location.host);f("GET","http:".concat(r,"/html/editor/web/review/createToken/").concat(e,"?metaSiteId=").concat(t),null,{onSuccess:function(e){var t=JSON.parse(e);m(n,"onSuccess")&&n.onSuccess(t)},onError:function(){}})}(o,i,{onSuccess:function(t){var o=t.payload&&t.payload.url,i=e.includes(o,"?")?"&":"?";!function(e,t){f("GET",c+encodeURIComponent(e),null,{onSuccess:function(e){var n=JSON.parse(e);m(t,"onSuccess")&&t.onSuccess(n)},onError:function(){}})}("".concat(o+i,"feedback=true&lang=").concat(n).concat(l),{onSuccess:function(e){m(r,"onSuccess")&&r.onSuccess(e.data.url)},onError:function(){}})},onError:function(){}})},isSiteShared:function(e,t){var n=e.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("GET","".concat(g()+o,"?siteId=").concat(n),{},t)},markSiteAsShared:function(e,t){var n=e.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("POST",g()+o,JSON.stringify({siteId:n}),t)},comments:{create:function(e,t,n,r,o,i,a){return{pageId:t||"mainPage",x:n||"100px",y:r||"100px",text:o||"untitled",submitter:i||"anonymous",time:Date.now(),face:a||p[p.length-1],unread:!0}},add:function(e,t,n,r,o){var i=e.dal.getByPath(["rendererModel","siteInfo","siteId"]),a=e.dal.getByPath(["rendererModel","metaSiteId"]),u=e.dal.getByPath(["rendererModel","userId"]),c=e.dal.getByPath(["rendererModel","siteInfo","siteTitleSEO"]),l=JSON.stringify({siteId:i,data:t,generalComment:n,submitter:r,userGuid:u,metaSiteId:a,siteName:c});f("POST",g()+s,l,o)},get:function(t,n){var r=t.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("GET","".concat(g()+a,"?siteId=").concat(r),null,{onSuccess:function(t){var r,o=(r=JSON.parse(t),e.forEach(r,function(e){e.commentId=e.key.id,e.x=e.propertyMap.x.value,e.y=e.propertyMap.y.value,e.face=e.propertyMap.face.value,e.submitter=e.propertyMap.submitter.value,e.text=e.propertyMap.text.value.value,e.pageId=e.propertyMap.pageId,e.unread=e.propertyMap.unread,e.time=new Date(e.propertyMap.time)}),e.groupBy(r,"pageId"));m(n,"onSuccess")&&n.onSuccess(o)},onError:function(){}})},remove:function(e,t,n){f("POST",g()+u,JSON.stringify({commentId:t}),n)},markAsRead:function(e,t,n){f("POST",g()+i,JSON.stringify({commentId:t}),n)}}},v)}()},function(e,t,n){var r,o,i,a;e.exports=(r=n(23),o=n(9),i=n(28),a=r.fonts,{css:{getCssUrls:function(e){var t=i.getDocumentType(e),n=e.dal.get(e.pointers.general.getServiceTopology());return a.fontUtils.getCssUrls(t,n)}},getSiteFontsOptions:function(e){var t=i.getDocumentType(e),n=o.fonts.getCharacterSet(e);return a.fontUtils.getCurrentSelectablefontsWithParams(t,n)},getAllFontsOptions:function(e){var t=i.getDocumentType(e);return a.fontUtils.getCurrentSelectablefontsWithParams(t,["latin-ext","cyrillic","japanese","korean","arabic","hebrew","latin"])}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(11),o="left",i="right",a="fullScreen",s=function(e,t){if(r.setDock(e,t,{top:{px:0},right:{px:0},bottom:{px:0}}),!function(e,t){var n=r.getDock(e,t);return n&&n.top&&n.bottom&&n.left}(e,t)){var n=e.siteAPI.getScreenWidth()-200;r.updateCompLayout(e,t,{width:200,x:n})}},u=function(e,t){r.setDock(e,t,{top:{px:0},left:{px:0},bottom:{px:0}}),function(e,t){var n=r.getDock(e,t);return n&&n.top&&n.bottom&&n.right}(e,t)||r.updateCompLayout(e,t,{width:200})},{setAlignment:function(e,t,n){switch(n){case a:!function(e,t){r.setDock(e,t,{top:{px:0},left:{px:0},right:{px:0},bottom:{px:0}})}(e,t);break;case o:u(e,t);break;case i:s(e,t)}}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(13);function r(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_META_DATA)}function o(e){return r(e).browserThemeColor}function i(e,n){var o=r(e);o.browserThemeColor=n,t.setProperty(e,t.PROPERTY_NAMES.SITE_META_DATA,o)}return{getBrowserThemeColor:o,setBrowserThemeColor:function(e,t){!function(e){if(!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e))throw new Error("invalid color, should be an hex code")}(t),i(e,t)},resetBrowserThemeColor:function(e){return i(e,null)},isBrowserThemeColorSet:function(t){return!e.isEmpty(o(t))}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(3),r="IMAGE_QUALITY",o="GlobalImageQuality";function i(e){return e.pointers.data.getDataItem(r,"masterPage")}return{get:function(e){var t=i(e);return e.dal.get(t)},update:function(n,r){var a=i(n);if(!n.dal.isExist(a)){var s=t.createDataItemByType(n,o);s.id=a.id,t.setDataItemByPointer(n,a,s,"data")}!function(t){var n=e.get(t,"unsharpMask.radius");if(e.isNumber(n)&&n<.1&&(0!==t.unsharpMask.radius||0!==t.unsharpMask.amount||0!==t.unsharpMask.threshold))throw new Error("radius value must be in 0.1-500.0 range, unless all radius, amount and threshold values are 0")}(r);var u=n.dal.get(a);t.setDataItemByPointer(n,a,e.assign(u,r),"data")},reset:function(e){var n=i(e);if(e.dal.isExist(n)){var r=t.createDataItemByType(e,o);t.setDataItemByPointer(e,n,r,"data")}}}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o=[{name:"kennedy"},{name:"darken"},{name:"blur"},{name:"lighten"},{name:"faded"},{name:"kerouac"},{name:"orca"},{name:"sangria"},{name:"gotham"},{name:"nightrain"},{name:"whistler"},{name:"feathered"},{name:"soledad"},{name:"goldie"},{name:"3d"},{name:"ink"},{name:"manhattan"},{name:"greenwash"},{name:"organic"},{name:"elmo"},{name:"neptune"},{name:"candyfloss"},{name:"neonsky"},{name:"hulk"},{name:"bauhaus"},{name:"seaweed"},{name:"midnight"},{name:"unicorn"},{name:"blueray"},{name:"malibu"},{name:"redrum"},{name:"flamingo"},{name:"hydra"},{name:"koolaid"},{name:"pinkrinse"},{name:"pixie"},{name:"yellowstreak"},{name:"lucille"}],{getNames:function(){return r.map(o,"name")},getDefinitions:function(){return o}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(7),r=n(26),o=n(3),i=n(71),a="CUSTOM_MAIN_MENU",s=["wysiwyg.viewer.components.menus.DropDownMenu","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu","wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.ExpandableMenu"],u=e.template("Cannot link a menu data item to a component that is not one of: ".concat(s.join(", "),". Given component type was <%= compType %>."));function c(t){return t.items&&e.some(t.items,function(e){return e.items&&e.items.length>0})}var l="Currently, components do not support menus which are more than 2 levels deep.";function p(t){if(t.items&&e.some(t.items,c))throw new Error("You cannot add a menu which is more than 2 levels deep (a subitem cannot have subitems). ".concat(l))}function d(t){e.forEach(t.items,function(t){!function t(n,r){e.forEach(n,function(e){e(r)}),r.items&&e.forEach(r.items,function(e){t(n,e)})}([g,f,m],t)})}var g=e.partialRight(e.unset,"id"),f=e.partialRight(e.unset,["link","id"]),m=e.partialRight(e.set,"type","BasicMenuItem");function v(e,t,n){p(n),y(e,t);o.addSerializedDataItemToPage(e,"masterPage",n,t,!0),i.updateTranslatedMenuItems(e,n)}function y(e,t){var n=e.pointers.data.getDataItemFromMaster(t);if(!t||!e.dal.full.isExist(n))throw new Error("Menu with id ".concat(t," does not exist."))}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.pointers.data.getDataItemFromMaster(t);return e.dal.isExist(r)?o.getDataItemById(e,t,void 0,void 0,n):null}function I(n,r){var i=t.getComponentByType(n,"wysiwyg.viewer.components.menus.DropDownMenu"),a=t.getComponentByType(n,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu");if(e.some(i.concat(a),function(e,t){return function(n){return o.getDataItem(e,n).menuRef==="#".concat(t)}}(n,r)))throw new Error("Cannot remove menu with id ".concat(r,", there are components connected to this menu. Please connect the other components to a differnt menu first."))}return{update:v,create:function(t,n,r){if(E(t,n))throw new Error("Menu with id ".concat(n," already exist."));var i=o.createDataItemByType(t,"CustomMenu");d(r=e.assign(i,r,{id:n})),p(r),o.addSerializedDataItemToPage(t,"masterPage",r,n);var a=t.pointers.getInnerPointer(t.pointers.data.getDataItem("CUSTOM_MENUS","masterPage"),"menus");return t.dal.push(a,"#".concat(n)),n},getMenuIdToCreate:function(e,t,n){return n||o.generateNewDataItemId()},getAll:function(e){return o.getDataItemById(e,"CUSTOM_MENUS","masterPage").menus},getById:E,remove:function(t,n){if(n===a)throw new Error("You cannot delete the CUSTOM_MAIN_MENU.");y(t,n),I(t,n);var r=t.pointers.data.getDataItemFromMaster("CUSTOM_MENUS"),i=t.dal.full.get(r);e.pull(i.menus,"#".concat(n)),t.dal.set(r,i),o.removeDataItemRecursively(t,t.pointers.data.getDataItemFromMaster(n))},connect:function(t,n,i){!function(t,n,o){var i=r.getType(t,n);if(!e.includes(s,i))throw new Error(u({compType:i}));y(t,o)}(t,n,i),o.updateDataItem(t,n,{menuRef:"#".concat(i),type:"CustomMenuDataRef"})},addItem:function(t,n,r,i){var a={items:[i]};p(a),d(a);var s=o.createDataItemByType(t,"BasicMenuItem");o.addSerializedDataItemToPage(t,"masterPage",e.assign(s,i,{id:n}),n);var u=t.pointers.data.getDataItemFromMaster(r),c=t.pointers.getInnerPointer(u,"items");t.dal.push(c,"#".concat(n))},removeItem:function(t,n,r,o){y(t,n);var i=E(t,n);i.items=e.reduce(i.items,function(t,n){return n.id!==r?(n.items&&e.remove(n.items,{id:r}),t.push(n)):n.items&&o&&(t=t.concat(n.items)),t},[]),v(t,n,i)},updateItem:function(t,n,r,i){y(t,n);var a=t.pointers.data.getDataItemFromMaster(r);if(!t.dal.isExist(a))throw new Error("Menu item with id ".concat(r," does not exist."));if(i.items&&i.items.length){var s=E(t,n);if(!e.find(s.items,{id:r}))throw new Error("Updating menu item with id ".concat(r," with items will cause the menu to be more than 2 levels deep. ").concat(l))}o.addSerializedDataItemToPage(t,t.pointers.data.getPageIdOfData(a),e.assign(i,{id:r,type:"BasicMenuItem"}),r)}}}()},function(e,t,n){var r,o;e.exports=(r=n(0),o=n(128),{initialize:function(e){o.setSiteMetaData(e,o.getSiteMetaData(e))},PRELOADER_PROPS:{COMPANEY_NAME:"companyName",LOGO_URL:"logoUrl"},enableOptimizedView:function(e,t){var n=o.getSiteMetaData(e);n.adaptiveMobileOn=t,o.setSiteMetaData(e,n)},isOptimized:function(e){return o.getSiteMetaData(e).adaptiveMobileOn},preloader:{enable:function(e,t){var n=o.getSiteMetaData(e);n.preloader.enabled=t,o.setSiteMetaData(e,n)},isEnabled:function(e){return o.getSiteMetaData(e).preloader.enabled},update:function(e,t){!function(e){var t=r.difference(r.keys(e),["companyName","logoUrl"]);if(r.some(t))throw new Error('"['.concat(t,']" are unsupported.'))}(t);var n=o.getSiteMetaData(e);n.contactInfo.companyName=r.get(t,"companyName",n.contactInfo.companyName),n.preloader.uri=r.get(t,"logoUrl",n.preloader.uri),o.setSiteMetaData(e,n)},get:function(e){var t=o.getSiteMetaData(e);return{companyName:t.contactInfo.companyName,logoUrl:t.preloader.uri}}}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(76),i=n(128),a=n(653),s=n(127),{revert:function(e){o.removeQuickActionBar(e)},upgrade:function(e){var t=i.getSiteMetaData(e),n=a.createFromSiteMetaData(t);r.isEmpty(n)&&(n=s.defaultQuickActionItems),o.addQuickActionBar(e,s.defaultSerializedMAB,n)},getVersion:function(e){return o.hasQuickActionBar(e)?2:1}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(127),r=n(1).linkTypes;function o(n){return e.isEmpty(n.contactInfo.phone)?null:{itemType:"phone",link:{type:r.PHONE_LINK,phoneNumber:n.contactInfo.phone},text:"Phone",icon:e.get(t.quickActionIconsData,"phone.hash"),color:e.get(t.quickActionIconsData,"phone.color")}}function i(n){return e.isEmpty(n.contactInfo.email)?null:{itemType:"email",link:{type:r.EMAIL_LINK,recipient:n.contactInfo.email,subject:""},text:"Email",icon:e.get(t.quickActionIconsData,"email.hash"),color:e.get(t.quickActionIconsData,"email.color")}}function a(n){return e.isEmpty(n.contactInfo.address)?null:{itemType:"address",link:{type:r.EXTERNAL_LINK,target:"_blank",url:"http://www.google.co.il/maps/search/".concat(encodeURI(n.contactInfo.address))},text:"Address",icon:e.get(t.quickActionIconsData,"address.hash"),color:e.get(t.quickActionIconsData,"address.color")}}function s(n){return e(n.quickActions.socialLinks).filter(function(n){return e.includes(t.actionTypesMap,n.id)}).map(function(n){return{itemType:n.id,link:{type:r.EXTERNAL_LINK,target:"_blank",url:n.url},text:e.get(t.socialLinkTexts,n.id,n.id),icon:e.get(t.quickActionIconsData,"".concat(n.id,".hash")),color:e.get(t.quickActionIconsData,"".concat(n.id,".color"))}}).value()}return{createFromSiteMetaData:function(t){return e([o(t),i(t),a(t),s(t)]).flatten().compact().value()}}}()},function(e,t,n){var r;e.exports=(r=n(0),{setConnectedComponents:function(e,t,n){var o=r.cloneDeep(t);return r.isEmpty(n)?function(e){var t=r.omit(r.get(e,"custom"),"relatedConnections");return r.isEmpty(t)?r.omit(e,"custom"):r.assign({},e,{custom:t})}(o):(r.set(o,"custom.relatedConnections",n),o)},getConnectedComponents:function(e,t){return r.get(t,"custom.relatedConnections")}})},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(12),i=n(7),a=n(32),s=new Set(a.SESSION_STATE_TYPES),{getSessionState:function(e,t){return e.dal.full.get(e.pointers.getInnerPointer(e.pointers.platform.getAppStatePointer(),[t.id]))},updateSessionState:function(e,t){r.forEach(t,function(t,n){var r=i.getComponentById(e,n),a=o.getComponentType(e,r);if(!s.has(a))throw new Error("Component of type ".concat(a," does not support session state"));e.dal.full.set(e.pointers.getInnerPointer(e.pointers.platform.getAppStatePointer(),[n]),t)})}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(32),r={};function o(e){return r[e.siteAPI.getSiteId()]||[]}return{register:function(t,n,i){var a=function(t,n,o){var i=t.siteAPI.getSiteId(),a={appId:n,callback:o};return r[i]=e.compact([a].concat(r[i])),a}(t,n,i);return function(){e.pull(o(t),a)}},emit:function(e,n){o(e).forEach(function(e){e.callback({eventType:t.MessageTypes.VIEWER_INFO_CHANGED,eventPayload:n})})}}}()},function(e,t,n){e.exports=function(){var e=n(1);function t(e,t,n){var r=e.pointers.general.getRenderFlag(t);e.dal.set(r,n)}return{setCompsToShowWithOpacity:function(e,t,n){var r=e.pointers.general.getRenderRealtimeConfigItem("compsToShowWithOpacity");e.dal.set(r,{opacity:n,compIds:t})},setCompsToShowOnTop:function(e,t){var n=e.pointers.general.getRenderRealtimeConfigItem("compsToShowOnTop");e.dal.set(n,t)},checkCompsToShowOnTop:function(t,n){var r=t.pointers.general.getRenderRealtimeConfigItem("compsToShowOnTop");return e.objectUtils.isDifferent(n,t.dal.get(r))},hideComp:function(e,t){var n=e.pointers,r=e.dal,o=n.components.getViewMode(t),i=n.general.getIsCompHiddenPointer(t.id,o);r.set(i,!0)},showComp:function(e,t){var n=e.pointers,r=e.dal,o=n.components.getViewMode(t),i=n.general.getIsCompHiddenPointer(t.id,o);r.isExist(i)&&r.remove(i)},isCompHidden:function(e,t){var n=e.pointers;return!!e.dal.get(n.general.getIsCompHiddenPointer(t.id,n.components.getViewMode(t)))},setCompsToHide:function(e,t){var n=e.pointers.general.getRenderRealtimeConfigItem("compsToHide_deprecated"),r=t.length>0?t[0]:"";e.dal.set(n,r)},setHideTextComponent:function(e,t){var n=e.pointers.general.getRenderRealtimeConfigItem("hideTextComponent");e.dal.set(n,t)},checkHideTextComponent:function(t,n){var r=t.pointers.general.getRenderRealtimeConfigItem("hideTextComponent");return e.objectUtils.isDifferent(n,t.dal.get(r))},allowSiteOverflow:function(e,n){t(e,"allowSiteOverflow",n)},setExtraSiteHeight:function(e,n){t(e,"extraSiteHeight",n)},setPreviewTooltipCallback:function(e,t){e.siteAPI.setPreviewTooltipCallback(t)},setErrorPagesPopUp:function(e,t){e.siteAPI.setErrorPagesPopUp(t)},setBlockingLayer:function(e,n){t(e,"blockingLayer",n)},setBlockingPopupLayer:function(e,n){t(e,"blockingPopupLayer",n)},setPremiumNavigationHandler:function(e,t){e.siteAPI.setPremiumNavigationHandler(t)}}}()},function(e,t,n){e.exports=function(){var e=n(64),t=n(236),r="routers",o=e.pointerGeneratorsRegistry;o.registerPointerType(r,function(){return null},function(){return!0});var i={getRoutersPointer:function(e,n){return n.getPointer("routers",r,t.paths.ROUTERS_PATH)},getRoutersConfigMapPointer:function(e,n){return n.getPointer("routers_config_map",r,t.paths.ROUTERS_CONFIG_MAP)},getRouterPointer:function(e,n,o){return n.getPointer(o,r,t.paths.ROUTERS_CONFIG_MAP.concat(o))}};o.registerDataAccessPointersGenerator(r,i)}()},function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports=function(){var e=n(0),t=n(6),r=n(22),i=n(19),u=n(59),c=n(210),l=n(108),p=n(660),d=n(61),g=n(194),f=n(249),m=n(105),v=function(e){var t=e.pointers.general.getAutosaveInfo(),n=e.dal.get(t)||{};n.shouldAutoSave=!1,e.dal.set(t,n)};function y(e,t,n){var r=d.getVirtualDescriptor(e,t,!1);return d.writeFile(e,r,n)}function E(e,t){return Promise.all(t.map(function(t){var n=t.path,r=t.content;return y(e,n,r)}))}var I=function(e){return g.createNewWriteableApp(e)},S=c(p);var h=function(e,t){return E(e,t.filter(function(e){return m.isSchemaFile(e.path)}))},P=function(e,t){var n=t.modifiedFiles,r=t.deletedFiles,o=n.map(function(t){var n=t.path,r=t.content;return y(e,n,r)}),i=r.map(function(t){var n=t.path;return function(e,t){var n=d.getVirtualDescriptor(e,t,!1);return d.deleteItem(e,n)}(e,n)});return Promise.all([].concat(a(o),a(i)))},A=function(e){throw i.utils.fedopsLogger.captureError(e,{tags:{localMode:!0}}),console.error("".concat("[CORVID]",": ").concat(JSON.stringify({message:e.message,stack:e.stack,type:e.type}))),e};S.asyncInitMethod=function(n){return n.socketAPI.isCloneMode().then(function(t){return t?f.clone(n):function(t){return Promise.all([t.socketAPI.getCodeFiles(),I(t)]).then(function(t){return s(t,1)[0].filter(function(t){var n=t.content;return e.isString(n)&&""!==n})}).then(function(e){return E(t,e).then(function(){return d.flush(t,{origin:d.FLUSH_ORIGINS.LOCAL_MODE_INIT_EDIT})}).then(function(){return h(t,e)}).then(function(){return d.flush(t,{origin:d.FLUSH_ORIGINS.LOCAL_MODE_INIT_EDIT})})})}(n)}).then(function(){t.registerHook(t.HOOKS.WIX_CODE.FLUSH,function(t){return function(){var n,o={primaryTask:p.getSaveTasksConfig(t).primaryTask,secondaryTasks:[]},i=e.noop,a=e.noop,s=[o,t.dal,i,a,(n=t,{event:e.partial(r.event,n),error:e.partial(r.error,n)})];u.runPartialSaveTasks.apply(u,s)}}(n)),n.socketAPI.registerToMessages(function(e){"LOCAL_CODE_UPDATED"===e.event&&P(n,e.data)})}).catch(A)};var T=S.initMethod;S.initMethod=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(e,o({},t,{settleInServer:!1})),v(e)};return S.localMode={push:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=function(){return S.save(e,t,n,!1,o)};if(r)return l.save(e,i,n,!0,o);var a=Object.assign(o,{fullPayload:!0});return l.save(e,i,n,!1,a)},publish:l.publish,registerToMessages:function(e,t){e.socketAPI.registerToMessages(function(e){return function(t){var n;n=t.event,["SOCKET_DISCONNECT","LOCAL_DOCUMENT_UPDATED","SOCKET_RECONNECTING","SOCKET_RECONNECTED"].includes(n)&&e(t)}}(t))},isConnected:function(e){return e.socketAPI.isConnected()}},S}()},function(e,t,n){var r,o,i,a,s,u,c,l,p;e.exports=(r=n(661),o=n(109),i=n(221),a=n(106),s=n(223),u=n(225),c=n(226),l=n(227),p=n(5),{getSaveTasksConfig:function(e){return{requiredTasks:p.isOpen("atomicSaveCode")?[a]:[],primaryTask:r(e),secondaryTasks:[s,o,u,c,l,i.create(e)]}}})},function(e,t,n){var r,o,i,a,s,u,c,l,p;e.exports=(r=n(19),o=n(249),i=n(215),a=i.getSaveableSnapshot,s=i.extendSavableSnapshotWithFullSnapshot,u=function(e){return a(e).set("wixCode",e.get("wixCode"))},c=function(e){return function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return e.apply(void 0,[s(u(t),t),s(u(n),n)].concat(o))}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c(function(n,r,i,a){o.save(e,t?null:n,r).then(i).catch(a)})},p=function(e,t,n){if("partialSave"===n){var o=u(e),i=!u(t).equals(o);return r.utils.fedopsLogger.breadcrumb("shouldRun",{didSnapShotsChangeFromLastSave:i}),i}return!0},function(e){return{partialSave:l(e),fullSave:l(e,!0),firstSave:function(e,t,n,r){r(new Error("no first save in local mode!"))},saveAsTemplate:function(e,t,n){n()},publish:function(e,t){t()},autosave:function(e,t,n){n()},getTaskName:function(){return"localSave"},shouldRun:p,getSnapshotTags:function(){return["primary"]}}})},function(e,t){e.exports=j},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(13),o=n(34),i=n(3);n(5);var a={google:"socialLoginGoogleEnabled",facebook:"socialLoginFacebookEnabled"},s={termsOfUse:"termsOfUse",privacyPolicy:"privacyPolicy",codeOfConduct:"codeOfConduct"},u="joinCommunityCheckedByDefault",c="customSignUpPageId",l="customNoPermissionsPageId";function p(e){var t=r.generalInfo.getMetaSiteId(e);return"/_api/member-permissions-server/metasite/".concat(t,"/siteMemberSettings")}function d(t){return e.head(o.filterAppsDataByType(t,"sitemembers"))}function g(e){var n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"smSettings")}function f(n,r){var o=n.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),a=n.dal.get(o);a.smSettings=e.merge(a.smSettings,r),i.addSerializedDataItemToPage(n,"masterPage",a,"masterPage")}return{setAutoApproval:function(n,r,i,a){t.ajaxLibrary.ajax({type:"POST",url:p(n),dataType:"json",headers:{Authorization:n.siteDataAPI.siteData.getClientSpecMap()[-666].instance,"X-XSRF-TOKEN":t.cookieUtils.getCookie("XSRF-TOKEN")},data:{siteMemberSettings:{autoApprove:r}},success:function(){var t=d(n);t.collectionType=r?"Open":"ApplyForMembership",o.registerAppData(n,t),e.isFunction(i)&&i()},error:a||e.noop})},isAutoApproval:function(e){return"Open"===d(e).collectionType},setLoginDialogFirst:function(e,t){f(e,{smFirstDialogLogin:!!t})},isLoginDialogFirst:function(e){var t=e.dal.get(g(e));return!(!t||!t.smFirstDialogLogin)},setSocialLoginVendorStatus:function(t,n,r){var o=a[n];o&&f(t,e.set({},o,!!r))},isSocialLoginEnabled:function(t,n){var r=a[n],o=t.dal.get(g(t));return!!e.get(o,r)},setJoinCommunityStatus:function(t,n){f(t,e.set({},u,!!n))},isJoinCommunityEnabled:function(t){var n=t.dal.get(g(t));return!(!1===e.get(n,u))},isSignupPoliciesFieldEnabled:function(t,n){var r=s[n],o=t.dal.get(g(t));return!!e.get(o,[r,"enabled"])},setSignupPoliciesFieldStatus:function(t,n,r){var o=s[n];o&&f(t,e.set({},[o,"enabled"],!!r))},getSignupPoliciesLink:function(t,n){var r=s[n],o=t.dal.get(g(t));return e.get(o,[r,"link"],null)},setSignupPoliciesLink:function(t,n,r){var o=s[n];if(o){var a=i.addLink(t,r.type,r);f(t,e.set({},[o,"link"],"#".concat(a)))}},setCustomSignupPageId:function(t,n){f(t,e.set({},c,n))},getCustomSignupPageId:function(t){var n=t.dal.get(g(t));return e.get(n,c,null)},setCustomNoPermissionsPageId:function(t,n){f(t,e.set({},l,n))},getCustomNoPermissionsPageId:function(t){var n=t.dal.get(g(t));return e.get(n,l,null)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(15),r=n(2),o=n(16);function i(e,n){return o.getViewMode(e,n,t)}var a={pagesToFooterGap:0,headerToPagesGap:0},s=e.keys(a);function u(t,n){var r=function(t){return e(t).pick(s).defaults(a).value()}(t);return e(n).pick(s).mapValues(function(e,t){return Math.min(r[t],Math.max(e,0))}).defaults(r).pickBy(e.identity).value()}return{getGaps:function(t){var n=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),r=t.dal.get(n);return r?e.pick(r,s):{}},updateGaps:function(t,n){var r=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=t.dal.get(r);if(o){var i=u(o,n),a=e(o).omit(s).assign(i).value();t.dal.set(r,a),t.siteAPI.createPageAnchors("masterPage")}},isUsingSectionsLayout:function(t){var n=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),r=t.dal.get(n);return e.get(r,"useDesktopSectionsLayout",!1)},getFooter:function(e,t){return e.pointers.components.getFooter(i(e,t))},getHeader:function(e,t){return e.pointers.components.getHeader(i(e,t))},getPagesContainer:function(e,t){return e.pointers.components.getPagesContainer(i(e,t))},getSiteStructure:function(e,t){return e.pointers.components.getMasterPage(i(e,t))},getSiteStructureId:function(){return r.MASTER_PAGE_ID}}}()},function(e,t,n){e.exports=function(){n(0);var e=n(4),t=(n(11),n(160)),r=n(10),o=n(18);return{alignInContainer:function(n,i,a){if(!r.public.isAlignable(n,i))throw new Error("cannot align component");var s,u,c=e.getContainer(n,i);if(e.isPageComponent(n,c))u=o.getLayout(n,c.id),s=!0;else if("masterPage"!==c.id)u=e.layout.get(n,c),s=!0;else{var l=n.pointers.components.getViewMode(i),p=n.pointers.components.getPagesContainer(l);u=e.layout.get(n,p),s=!1}t.alignComponentsToOuterLayout(n,[i],u,a,s)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(6),o=n(4),i=n(11),a=n(160),s=n(94),u=n(131),c=n(89),l=["wysiwyg.viewer.components.HoverBox"];function p(e,t,n,r,i,a,u){n||(r&&r.isReplacingComp||u&&e.dal.isExist(u)&&s.isGroup(e,u)&&(o.getChildren(e,u).length>=2||d(e,o.getChildren(e,u),u)))}function d(t,n,r){var a=o.getContainer(t,r),s=e.findIndex(o.getChildren(t,a),{id:r.id});e.forEach(n,function(e){i.setContainer(t,void 0,e,a)}),e.forEach(n.reverse(),function(e){c.moveToIndex(t,e,s)}),t.pointers.components.isMobile(r)?u.hiddenComponents.hide(t,r):o.deleteComponent(t,r,!1)}return{initialize:function(){r.registerHook(r.HOOKS.REMOVE.AFTER,p)},groupComponents:function(t,n,r){if(r&&!(r.length<2)&&!e.some(r,s.isGroupedComponent.bind(this,t))){var u=e.clone(r);e.forEach(u,function(n){if(s.isGroup(t,n)){var i=o.getChildren(t,n);r=r.concat(i),d(t,o.getChildren(t,n),n),r=e.reject(r,{id:n.id})}});var c=a.getSnugLayout(t,r),p=function(t,n){var r=o.getContainer(t,e.head(n));for(;r&&e.includes(l,o.getType(t,r));)r=o.getContainer(t,r);return r}(t,r);!function(t,n,r,i){var a={type:"Container",components:[],skin:"wysiwyg.viewer.components.GroupSkin",layout:{width:void 0,height:void 0,x:void 0,y:void 0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:s.getGroupComponentType(),id:"i5zga2e4"};e.assign(a.layout,n),o.add(t,i,r,a)}(t,c,p,n),r=a.sortComponentsByZOrder(t,r),e.forEach(r,function(e){i.setContainer(t,void 0,e,n)})}},addToGroup:function(t,n,r){e.forEach(n,function(e){i.setContainer(t,void 0,e,r)})},ungroup:d,genGroupPointer:function(n,r){var i=o.generateNewComponentId(),a=n.pointers.components,s=t.displayedOnlyStructureUtil,u=e.head(r),c=a.getViewMode(u);if(s.isRepeatedComponent(u.id)){var l=s.getRepeaterItemId(u.id);return n.pointers.components.getUnattached(s.getUniqueDisplayedId(i,l),c)}return a.getUnattached(i,c)},getUngroupedComponents:function(e,t){return o.getChildren(e,t)}}}()},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(){var e=n(0),t=n(1),o=n(2),i=n(18),a=n(4),s=n(159),u=n(158),c=n(144),l=n(243),p=n(41),d=n(16),g=n(5),f=n(19),m=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],v={CANCELLED:"CANCELLED",DONE:"DONE",INIT:"INIT",RUNNING:"RUNNING"},y=v.INIT;function E(t,n,r){return function(e,t,n){return new Promise(function(r){s.executeBehavior(e,t,"moveToSlide",{slide:n},r)})}(t,n,r.pop()).then(function(o){return e.isEmpty(r)?o:E(t,n,r)})}var I=function(t,n,r){var o=t.pointers.components.getChildrenRecursively(n),i=r?o:o.filter(e.partial(A,t));return e.isEmpty(i)?[]:i.map(function(e){var n=S(t,e);return{pointer:e,hasSlides:n,slides:n?h(t,e):null}})},S=function(t,n){return e.includes(m,a.getType(t,n))},h=function(t,n){var r=t.pointers.components.getChildren(n),o=e.map(r,e.partial(A,t));return P(o)},P=function(t){return e.reduce(t,function(e,t,n){return t&&e.push(n),e},[])},A=function t(n,r){var o=n.pointers.getInnerPointer(r,"layout"),i=n.dal.full.get(o);return!e.isEmpty(e.get(i,"anchors"))||e.some(n.pointers.components.getChildren(r),e.partial(t,n))},T=function(t,n){return Promise.all(n.map(function(t,n){var r=n.slides;return e.isEmpty(r)?Promise.resolve():E(t,n.pointer,r)}.bind(null,t)))},O=function(e){return new Promise(function(t){return e.setOperationsQueue.waitForChangesApplied(t)})};var C=function(t){return e.filter(t,{hasSlides:!0})},_=function(){return new Promise(function(e,t){y===v.RUNNING?e():t(y)})};function D(e,t){return e.setOperationsQueue.runSetOperation(i.navigateTo,[e,t],{methodName:"page.navigateTo",allowInReadOnly:!0,waitingForTransition:!0,noBatchingAfter:!0}),O(e)}function w(t,n,r,o){return u.setViewMode(t,n),O(t).then(function(){return _()}).then(function(){return o({status:"view-mode",viewMode:n})}).then(function(){return O(t)}).then(function(){return function(t,n,r){return e.isEmpty(n)?Promise.resolve():function o(i,a){return D(t,e.head(a)).then(function(){return T(t,C(n[e.head(a)]))}).then(function(){return r({status:"page-migrated",pageId:e.head(a)})}).then(function(){return O(t)}).then(function(){return a.shift()}).then(function(){return _()}).then(function(){return e.isEmpty(a)?Promise.resolve():o(i,a)})}(e.size(n),e.keys(n))}(t,r,o)})}function b(e,t){var n=t.pageId,r=t.viewMode;return u.setViewMode(e,r),O(e).then(function(){return D(e,n)})}var M=function(e,t){return u.enableRenderTPAsIframe(e,t),O(e)},R=function(e,t){return u.enableComponentTransitions(e,t),u.enableStubifyComponents(e,t),u.enablePlaying(e,t),u.enablePageTransitions(e,t),O(e)},N=function(e,t){return u.enableFetchDynamicPageInnerRoutes(e,t),O(e)},x=function(n){return e.get(function(e){return e.dal.get(e.pointers.getInnerPointer(function(e){return e.pointers.data.getDataItemFromMaster("masterPage")}(e),"layoutSettings"))}(n),"mechanism")===t.constants.LAYOUT_MECHANISMS.MESH},L=function(e){return!x(e)},B=function(e){return function(e){return M(e,!0)}(e).then(function(){return function(e){return R(e,!0)}(e)}).then(function(){return function(e){return N(e,!0)}(e)})},k=function(e,t,n,r){return b(e,t).then(function(){return B(e)}).then(function(){return r(n)})},F=function(e){return{viewMode:o.VIEW_MODES.DESKTOP,pageId:e.siteAPI.getFocusedRootId()}},U=function(t){u.isMobileView(t)||(!function(t){var n=t.pointers.full.components.getMasterPage(o.VIEW_MODES.MOBILE),r=n&&t.pointers.full.components.getComponent(o.MOBILE_ONLY_COMPONENTS.TINY_MENU,n),i=r&&t.pointers.full.components.getParent(r),a=t.pointers.full.components.getHeader(o.VIEW_MODES.MOBILE);if(t.dal.full.isExist(r)&&i&&a&&!e.isEqual(i,a)){var s=t.pointers.full.components.getChildrenContainer(a),u=t.dal.full.get(r);t.dal.full.remove(r),t.dal.full.push(s,u,r)}}(t),p.runPartialConversionAllPages(t,!0))},H=function(t,n,a,s,u,p){y=v.RUNNING,f.utils.fedopsLogger.interactionStarted(o.INTERACTIONS.MESH_SITE_MIGRATION);var m=function(t){var n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.reduce(i.getPageIdList(t,!1,!0),function(n,r){return d.getSupportedViewModes(t).forEach(function(o){var i=t.pointers.components.getPage(r,o),s=I(t,i,a);e.isEmpty(s)||(n[o][r]=s)}),n},(r(n={},o.VIEW_MODES.DESKTOP,{}),r(n,o.VIEW_MODES.MOBILE,{}),n))}(t,u);(function(e){return R(e,!1)})(t).then(function(){return function(e){return M(e,!1)}(t)}).then(function(){return function(e){return N(e,!1)}(t)}).then(function(){return function(t,n,r){return Promise.resolve().then(function(){return r({status:"init",maxValue:e.size(n[o.VIEW_MODES.DESKTOP])+e.size(n[o.VIEW_MODES.MOBILE]),value:0})}).then(function(){return w(t,o.VIEW_MODES.DESKTOP,n[o.VIEW_MODES.DESKTOP],r)}).then(function(){return w(t,o.VIEW_MODES.MOBILE,n[o.VIEW_MODES.MOBILE],r)}).then(function(){return O(t)})}(t,m,p)}).then(function(){return b(t,n)}).then(function(){return function(e){return l.exec(e)}(t)}).then(function(){return U(t)}).then(function(){return B(t)}).then(function(){return function(e){return new Promise(function(t,n){c.meshLayoutReadySiteDataFixerAfterMeshWizard(e,t,n)})}(t)}).then(function(){return function(e,t){t.forEach(e.siteAPI.createPageAnchors.bind(e.siteAPI))}(t,["masterPage",n.pageId])}).then(function(){return function(e){if(g.isOpen("sv_meshcors")&&!x(e))throw new Error("Failed to migrate to mesh")}(t)}).then(function(){return p({status:"done"})}).then(function(){return f.utils.fedopsLogger.interactionEnded(o.INTERACTIONS.MESH_SITE_MIGRATION)}).then(function(){return y=v.DONE,a("migration finished successfully")}).catch(function(e){k(t,n,e,s)})};return{migrateSiteToMesh:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.isMigrationForced,a=o.updateCallback,s=void 0===a?e.noop:a;if(y!==v.RUNNING){var u=F(t);try{L(t)||i?H(t,u,n,r,i,s):n("site is already mesh or mesh eligible")}catch(e){k(t,u,e,r)}}},cancel:function(){return y=v.CANCELLED,!0}}}()},function(e,t,n){e.exports=function(){n(64);var e=n(233),t=n(14),r=(n(33),n(222));return{handlers:function(t,n,r){e.callHandler(t,n,r)},initEditor:function(e,n,o){t.setIsInDevMode(n),r.setExperiments(o)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(181),r=n(670),o=n(671),i=n(180),a=n(673),s=n(674),u=n(122),c=n(17),l=n(7),p=n(3);function d(e,t){var n=e.dal.get(t),r=e.pointers.components.getPageOfComponent(t),o=p.getDataItem(e,t);return{id:t.id,pageId:r&&r.id,componentType:n.componentType||n.documentType,skin:c.skin.get(e,t),dataType:o&&o.type}}var g={mobileHints:u.validateComponentMobileHints,data:a.validateCompData,properties:i.validateCompProps,layout:t.validateLayout,skin:o.validateComponentSkin,style:r.validateComponentStyle,json:s.validateCompJSONpaths};function f(t,n,r){return e.reduce((o=n,e.isArray(o)?o:[o]),function(n,o){var i=e(r).mapValues(function(e){try{e(t,o)}catch(e){return e.message||e.toString()}return null}).omitBy(e.isNull).value();return e.isEmpty(i)||n.push({comp:d(t,o),invalidations:i}),n},[]);var o}function m(e,t,n,r){var o=l.getAllComponents(e,n,function(t){return!e.pointers.components.isMasterPage(t)},r);return f(e,o,t)}return{initialize:function(e){u.initialize(e)},validateComponentData:g.data,validateComponentProperties:g.properties,validateComponentLayout:g.layout,validateComponentSkin:g.skin,validateStyle:g.style,validateMobileHints:g.mobileHints,validateComponents:function(e,t){return f(e,t,g)},validateAllComponents:function(e){return m(e,g)},validateAllComponentsWithValidators:m,validateAllMobileHints:function(t){var n=e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");try{u.validateMobileHintsOnPages(t,n)}catch(e){return e}return null}}}()},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;e.exports=(o=n(17),{validateComponentStyle:function(e,t){!function(e,t){if(e){if(!t)throw new Error("There is no existing style for styleId [".concat(e,"]"));if("object"!==r(t))throw new Error("The given style for for styleId [".concat(e,"] is not an object"));if(!t.skin)throw new Error("The given style for for styleId [".concat(e,"] does not contain a skin"));if(!t.type)throw new Error("The given style for for styleId [".concat(e,"] does not contain a type"))}}(o.style.getId(e,t),o.style.get(e,t))}})},function(e,t,n){var r,o,i,a,s,u;e.exports=(r=n(0),o=n(17),i=n(672),a=n(20),s={"wysiwyg.viewer.components.svgshape.SvgShape":!0,"wysiwyg.viewer.components.PopupCloseIconButton":!0},u={"wysiwyg.viewer.components.StripContainerSlideShowSlide":{"wysiwyg.common.components.boxSlideShowSlide.viewer.skins.boxSlideShowSlideSkin":!0}},{validateComponentSkin:function(e,t){var n=o.skin.get(e,t),c=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),l=function(e){var t=a.schemas.componentTypeAliases.getAlias(e),n=a.services.getComponentSkins(t)||[],r=i[t]||[];return n.concat(r)}(c);if(!(s[c]||r.get(u,[c,n],!1)||r.includes(l,n)))throw new Error("The skin [".concat(n,"] is not valid for component type [").concat(c,"]"))}})},function(e,t){e.exports={"core.components.Container":["wysiwyg.viewer.skins.area.ForkedRightRibbon","wysiwyg.viewer.skins.area.CustomRibbonArea","wysiwyg.viewer.skins.area.LinesAreaSkin","wysiwyg.viewer.skins.area.RoundArea","wysiwyg.viewer.skins.area.RoundShadowArea","wysiwyg.viewer.skins.area.BlankAreaSkin","wysiwyg.viewer.skins.area.TransparentArea","wysiwyg.viewer.skins.area.BubbleAreaLeft","wysiwyg.viewer.skins.area.LeftTriangleArea","wysiwyg.viewer.skins.area.RightTriangleArea","wysiwyg.viewer.skins.area.BubbleAreaRight","wysiwyg.viewer.skins.area.IronBox","wysiwyg.viewer.skins.area.PhotoArea"],"wysiwyg.viewer.components.WPhoto":["wysiwyg.viewer.skins.photo.DoubleBorderCirclePhoto","wysiwyg.viewer.skins.photo.VintagePhoto","wysiwyg.viewer.skins.photo.DefaultPhoto","wysiwyg.viewer.skins.photo.RoundShadowPhoto","wysiwyg.viewer.skins.photo.ScotchTapePhoto","wysiwyg.viewer.skins.photo.PaperclipPhoto","wysiwyg.viewer.skins.photo.ScotchDoubleHorizontal","wysiwyg.viewer.skins.photo.ScotchDoubleVertical","wysiwyg.viewer.skins.photo.ScotchTopPhoto","wysiwyg.viewer.skins.photo.IronPhoto","wysiwyg.viewer.skins.photo.GlowLinePhoto","wysiwyg.viewer.skins.photo.NewPolaroidPhoto"],"wysiwyg.viewer.components.mobile.TinyMenu":["wysiwyg.viewer.skins.mobile.TinyMenuSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin"],"wysiwyg.viewer.components.HorizontalMenu":["wysiwyg.viewer.skins.menu.SeparateArrowDownMenuSkin","wysiwyg.viewer.skins.menu.ArrowsMenuSkin","wysiwyg.viewer.skins.menu.SeparatedArrowsMenuSkin","wysiwyg.viewer.skins.menu.CirclesMenuSkin","wysiwyg.viewer.skins.horizontalmenu.BevelMenu","wysiwyg.viewer.skins.horizontalmenu.ArrowsMenu","wysiwyg.viewer.skins.horizontalmenu.DefaultMenu","wysiwyg.viewer.skins.horizontalmenu.AppleMenu","wysiwyg.viewer.skins.horizontalmenu.RectangleMenu","wysiwyg.viewer.skins.horizontalmenu.TabsMenu","wysiwyg.viewer.skins.horizontalmenu.OverlinesMenu","wysiwyg.viewer.skins.horizontalmenu.Overlines2Menu","wysiwyg.viewer.skins.horizontalmenu.PillMenu","wysiwyg.viewer.skins.horizontalmenu.BaseMenu","wysiwyg.viewer.skins.horizontalmenu.BevelMenu","wysiwyg.viewer.skins.horizontalmenu.CirclesMenu","wysiwyg.viewer.skins.horizontalmenu.Lines2Menu","wysiwyg.viewer.skins.horizontalmenu.LinesMenu","wysiwyg.viewer.skins.horizontalmenu.PointerMenu","wysiwyg.viewer.skins.horizontalmenu.RibbonsMenu","wysiwyg.viewer.skins.horizontalmenu.Ribbons2Menu","wysiwyg.viewer.skins.horizontalmenu.TextOnlyMenu"],"wysiwyg.viewer.components.ScreenWidthContainer":["wysiwyg.viewer.skins.screenwidthcontainer.GridScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TwoColorScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen","wysiwyg.viewer.skins.screenwidthcontainer.ShadowScreen"],"wysiwyg.viewer.components.HeaderContainer":["wysiwyg.viewer.skins.screenwidthcontainer.IronScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.SolidScreen","wysiwyg.viewer.skins.screenwidthcontainer.NoiseScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen"],"wysiwyg.viewer.components.FooterContainer":["wysiwyg.viewer.skins.screenwidthcontainer.IronScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.SolidScreen","wysiwyg.viewer.skins.screenwidthcontainer.NoiseScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineTopScreen"],"wysiwyg.viewer.components.PagesContainer":["wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen","wysiwyg.viewer.skins.screenwidthcontainer.BevelScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.LiftedShadowScreen","wysiwyg.viewer.skins.screenwidthcontainer.AppleScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.GridScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TwoColorScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen","wysiwyg.viewer.skins.screenwidthcontainer.ShadowScreen"],"wysiwyg.viewer.components.FiveGridLine":["wysiwyg.viewer.skins.line.FadeLine","wysiwyg.viewer.skins.line.DoubleLine2","wysiwyg.viewer.skins.line.DoubleLine3"],"wysiwyg.viewer.components.VerticalLine":["wysiwyg.viewer.skins.VerticalLineSkin"],"wysiwyg.viewer.components.SiteButton":["wysiwyg.viewer.skins.button.ButtonDoubleArrowLeft","wysiwyg.viewer.skins.button.ButtonDoubleArrowRight","wysiwyg.viewer.skins.button.ButtonSandclock","wysiwyg.viewer.skins.button.ButtonForkedRight","wysiwyg.viewer.skins.button.ButtonForkedLeft","wysiwyg.viewer.skins.button.IronButton","wysiwyg.viewer.skins.button.ShineButton","wysiwyg.viewer.skins.button.BorderButton","wysiwyg.viewer.skins.button.PillButton","wysiwyg.viewer.skins.button.ShinyPillButton","wysiwyg.viewer.skins.button.ShinyGradientButton","wysiwyg.viewer.skins.button.SiteButtonSkin","wysiwyg.viewer.skins.button.PlasticButton"],"wysiwyg.viewer.components.MatrixGallery":["wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextBelowSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryPolaroidSkin","wysiwyg.viewer.skins.gallery.CircleMatrixGallery","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryVintage"],"wysiwyg.viewer.components.SlideShowGallery":["wysiwyg.viewer.skins.gallery.SlideShowGallerySimple","wysiwyg.viewer.skins.gallery.RibbonsSlideShow","wysiwyg.viewer.skins.gallery.FrameShowGallery","wysiwyg.viewer.skins.gallery.RoundSlideShowGallery"],"wysiwyg.viewer.components.SliderGallery":["wysiwyg.viewer.skins.gallery.SliderGalleryMinimal","wysiwyg.viewer.skins.gallery.SliderGalleryBorder","wysiwyg.viewer.skins.galleryslider.SliderGalleryVintageSkin"],"wysiwyg.viewer.components.AudioPlayer":["wysiwyg.viewer.skins.AudioPlayerMinimalSkin"],"core.components.Page":["wysiwyg.viewer.skins.area.RectangleArea","skins.core.VerySimpleSkin"]}},function(e,t,n){var r,o,i,a;e.exports=(r=n(0),o=n(3),i=n(20),a=i.services.schemasService,{validateCompData:function(e,t){var n=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),s=o.getDataItemPointer(e,t),u=s&&e.dal.get(s);if(!function(e,t){var n=a.getDefinition(e);return r.isArray(n.dataTypes)?r.isPlainObject(t)?t.type&&r.includes(n.dataTypes,t.type):r.isString(t)?r.includes(n.dataTypes,t):r.includes(n.dataTypes,""):!t}(n,u))throw new Error("".concat(u.type,"] is not valid for component type [").concat(n,"]"));u&&i.services.dataValidators.validateDataBySchema(u,"data")}})},function(e,t,n){e.exports=function(){var e=n(675);function t(e){return e.replace(/^#/,"")}function r(t,n,r,o,i){if(!t.dal.full.isPathExistInHostModel(["pagesData",n,"data",o,i]))throw new e.DataPathError({pageId:n,query:i,type:o,compId:r})}return{validateCompJSONpaths:function(e,n){var o=e.dal.full.get(n),i=e.pointers.components.getPageOfComponent(n).id;!function(e,n,o){n.dataQuery&&r(e,o,n.id,"document_data",t(n.dataQuery))}(e,o,i),function(e,n,o){n.propertyQuery&&r(e,o,n.id,"component_properties",t(n.propertyQuery))}(e,o,i),function(e,n,o){n.designQuery&&r(e,o,n.id,"design_data",t(n.designQuery))}(e,o,i),function(e,n,o){n.connectionQuery&&r(e,o,n.id,"connections_data",t(n.connectionQuery))}(e,o,i)}}}()},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c;e.exports=(c=n(0).template("Expected comp {id: <%= compId %>} to have {id: <%= query %>} in the <%= type %> map, in page <%= pageId %>"),{DataPathError:function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=o(this,u(t).call(this))).name="DataPathError",n.message=c(e),n.stack=(new Error).stack,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,i(Error)),t}()})},function(e,t,n){e.exports={items:n(85),types:n(51),lists:n(70),selection:n(110),listTemplates:n(251),fieldsLayout:n(678),appbuilder:n(255),classics:n(679),clientSpecMap:n(258),savePublish:n(109),listsLayout:n(682),metadata:n(172),initializer:n(683),repoFixer:n(687),migrationUtils:n(688),blogUtils:n(92)}},function(e,t){e.exports={LIST_VERSION:"2.0"}},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=(n(51),n(86)),o=n(70),i=n(252),a=n(253),s=n(254),u="View definition not found",c="Type definition not found",l="Field schema not found",p="Field not found in view",d="Given value is invalid",g=["name","displayName","type"],f="wysiwyg.viewer.components.WRichText";function m(e){throw new Error(e)}function v(e){return e.comp&&("Field"===e.comp.name||"TextField"===e.comp.name)}function y(t,n){var r=s.getCompProxyClass(t).getPropDefs(n),o="compProp"===n?t.comp:t;return e.mapValues(r,function(e,t){return o[t]||e.defaultValue})}function E(e){return t.objectUtils.resolvePath(e,["comp","items","0"])}function I(t){var n=y(t,"viewProp"),r=y(t,"compProp");return e.assign({},r,n)}function S(n,r){return e.head(t.objectUtils.filter(n,function(e){return e&&e.data===r&&v(e)}))||m(p)}function h(t,n,r){var o=I(r),a=E(r),u=e.omit(I(a),"hidden"),c=e.pick(n,g),l=e.assign({},c,o,u,{componentType:s.getCompProxyClass(a).componentType,style:s.getStyle(t,a)});return l.componentType===f?i.convertViewDefPropsToFieldProps(t,l):l}function P(t,n,r){var o=s.getCompProxyClass(t),i=e.difference(e.keys(o.getPropDefs("viewProp")),r),a=e.difference(e.keys(o.getPropDefs("compProp")),r);e.assign(t,e.pick(n,i)),e.assign(t.comp,e.pick(n,a))}function A(t,n,r,i){var a=o.getItemView(t,n,i);return a?h(t,function(t,n,r){var i=o.getType(t,n)||m(c);return e.find(i.fields,{name:r})||m(l)}(t,n,r),S(a,r)):null}return{getField:A,getAll:function(n,r,i){var a=o.getItemView(n,r,i);if(!a)return null;var s=o.getType(n,r)||m(c),u=e.map(s.fields,"name"),l=t.objectUtils.filter(a,function(t){return t&&e.includes(u,t.data)&&v(t)}),p=e.map(l,function(t){var r=e.find(s.fields,{name:t.data});return h(n,r,t)});return e.sortBy(p,function(e){return u.indexOf(e.name)})},set:function(n,s,l,p,g){var y=p.name||m(d),I=A(n,l,y,g),h=e.omitBy(p,function(t,n){return e.isEqual(t,I[n])});I.componentType===f&&(h=i.convertFieldPropsToViewDefProps(h,I));var T=o.getItemView(n,l,g)||m(u),O=S(T,y),C=o.getType(n,l)||m(c);P(O,h,["layout","style"]);var _=E(O);P(_,h,["hidden","style"]),e.isUndefined(h.style)||(_.comp.style=h.style);var D=function(e,n){return t.objectUtils.findPath(e,function(e){return e&&e.data===n&&v(e)})}(T,y);r.setValueInView(n,C.name,T.name,D,O,g),a.updateAppPart2MinWidth(n,s,h,T),o.markDataAsUpdated(n,l)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=n(43),o=n(117),i=n(3),a=n(2),s=n(34),u=n(13),c=n(111),l=n(680),p=n(256),d=n(147),g=n(257),f=n(7),m=n(4),v=n(18),y=n(21),E=n(6),I=n(681),S=n(171),h=n(92),P=n(9),A=n(5),T=r.FunctionLibrary,O=t.blogAppPartNames,C=r.expression;function _(t,n){var r=t.pointers.general.getClientSpecMap(),o=t.dal.get(r),i=e.findLast(o,{packageName:n});return i?"".concat(i.applicationId):null}function D(e,t,n,r){var o=z.getApplicationId(e,t);o?r({applicationId:o}):b(e)?c.provisionAppAfterSave(e,n,r):c.provisionAppBeforeSave(e,n,r),V(e,"true")}function w(e,t,n,r,o,i){var a=z.getApplicationId(e,t);a?o({applicationId:a}):b(e)?c.provisionAppFromSourceTemplate(e,n,r,o,i):i({success:!1}),V(e,"true")}function b(e){return!u.generalInfo.isFirstSave(e)}function M(t){t.setOperationsQueue.runSetOperation(function(){var n=function(t){var n=v.getPagesDataItems(t);return e(n).compact().reject({appPageType:"AppPage"}).value()}(t);e.forEach(n,function(n){var r=v.getPage(t,n.id),o=f.getComponentByType(t,"wixapps.integration.components.AppPart",r);e(o).union(f.getComponentByType(t,"wysiwyg.common.components.rssbutton.viewer.RSSButton",r)).forEach(function(e){m.remove(t,e)})});var r=v.getPage(t,"masterPage"),o=f.getComponentByType(t,"wixapps.integration.components.AppPart",r);e(o).union(f.getComponentByType(t,"wysiwyg.common.components.rssbutton.viewer.RSSButton",r)).forEach(function(e){m.remove(t,e)}),V(t,"false")})}function R(t,n){var r=i.getDataItem(t,n),o=[O.FEED,O.SINGLE_POST];if(A.isOpen("sv_blogHeroImage")&&o.push(O.HERO_IMAGE),A.isOpen("sv_blogStudioExperiment")&&e.pull(o,O.HERO_IMAGE),e.includes(o,r.appPartName))return!1}function N(t,n,r){var o=e.isString(n)?S.getDescriptor(t,n):n;return e.find(o.viewDescriptions,{id:r}).comps.filter(function(e){return void 0===e.experiment||e.experiment.value==={}[e.experiment.name]})}function x(t,n,r){return t.views.filter(function(t){var o=e.isArray(t.name)?t.name:[t.name];return e.includes(o,n)&&e.includes([t.format||"","*"],r)})}function L(t,n,r,o,i){var a=S.getDescriptor(t,n),s=e(x(a,r,o)).map(function(t){return e.map(t.customizations,function(n){return e.merge({},n,{view:r,forType:n.forType||t.forType,format:n.format||o})})}).flattenDeep().filter(function(e){return i?e.panelType===i:e}).value();return"design"!==i?s:s.concat(function(t,n,r,o){return e.flattenDeep(N(t,n,r).map(function(t){return t.hasNoStyleCustomization||!e.isUndefined(t.format)&&t.format!==o?[]:t.rules?e(t.rules).filter(function(t){return""===o||e.isUndefined(t.format)||t.format===o}).map(function(e){return{fieldId:e.fieldId,forType:e.forType,format:o,key:"comp.style",view:e.view}}).value():[{fieldId:t.compId||t.id,forType:"Post",format:o,key:"comp.style",view:r}]}))}(t,a,r,o))}function B(t){if(void 0===t||e.includes([t.view,t.forType,t.format,t.fieldId,t.key],void 0))throw new Error("illegal rule")}function k(t,n,r){return B(r),e.find(n,function(t){return function(t,n){return(t.format===n.format||"*"===n.format&&e.isUndefined(t.format))&&["fieldId","forType","key","view"].every(function(e){return t[e]===n[e]})}(t,r)})}function F(t,n,r){var o=S.getDescriptor(t,n).customizations,i=k(0,o,r)||k(0,o,e.merge({},r,{format:"*"}));return i&&i.value}function U(t,n,r){var o;return x(S.getDescriptor(t,n),r.view,r.format).some(function(t){return"vars"===r.fieldId?void 0!==(o=t.vars&&t.vars[r.key]):void 0!==(o=function t(n,r){var o;return n.id===r.fieldId&&void 0!==(o=e.get(n,r.key))?o:void 0!==n.comp?(e([n.comp.items,e.values(n.comp.cases),e.values(n.comp.templates)]).flattenDeep().compact().some(function(e){return void 0!==(o=t(e,r))}),o):void 0}(t,r))}),o}function H(t,n,r){var o=L(t,n,r.view,r.format),i=e.find(o,{fieldId:r.fieldId,key:r.key});if(void 0!==i)return i.input.defaultVal}function V(t,n){for(var r=t.pointers.page.getPageData("masterPage"),o=["appVars_61f33d50-3002-4882-ae86-d319c1a249ab","vars","applicationActiveState"];!e.isEmpty(o);)r=t.pointers.getInnerPointer(r,o.splice(0,1)[0]),t.dal.isExist(r)||t.dal.set(r,{});t.dal.set(r,{type:"AppPartParam",value:n})}function W(e){return C.evaluate(function(){},e,function(){G||(G=new T);return G}())}var G=null;var z={blog:{addBlog:function(t,n,r,o,i){var a=function(n){var a=v.getPageIdToAdd(t),s=l.getBlogFeedPageJson(t,r,n.applicationId);s.data.pageUriSEO=y.getValidPageUriSEO(t,"",s.data.pageUriSEO);var u=l.getSinglePostPageJson(t,o,n.applicationId);u.data.pageUriSEO=y.getValidPageUriSEO(t,"",u.data.pageUriSEO),t.setOperationsQueue.runSetOperation(v.add,[t,a,"Blog",s],{isUpdatingAnchors:!0}),t.setOperationsQueue.runSetOperation(v.add,[t,v.getPageIdToAdd(t),"Single Post",u],{isUpdatingAnchors:!0}),e.isFunction(i)&&i(a.id)};n?w(t,"blog","61f33d50-3002-4882-ae86-d319c1a249ab",n,function(){c.provisionAppAfterSave(t,"61f33d50-3002-4882-ae86-d319c1a249ab",a)}):D(t,"blog","61f33d50-3002-4882-ae86-d319c1a249ab",a)},deleteAllAppParts:M,getBlogSinglePostPageData:function(t){var n,r=v.getPageIdList(t);return e.forEach(r,function(e){z.blog.isSinglePost(t,e)&&(n=y.getPageData(t,e))}),n},isFeed:h.isFeed,isSinglePost:h.isSinglePost,replaceBlogPages:function(t,n,r,o){var i=t.pointers.page.getNonDeletedPagesPointers(),a=e(i).chain().find(function(e){return h.isSinglePost(t,e.id)}).thru(t.pointers.components.getDesktopPointer).value(),s=o||e(i).chain().find(function(e){return h.isFeed(t,e.id)}).thru(t.pointers.components.getDesktopPointer).value(),u=e(a.id).thru(t.pointers.data.getDataItem).thru(t.dal.get).get("appInnerID"),c=l.blogComponentBuilder(u);return p(a,r.map(c)),p(s,n.map(c));function p(e,n){var r=[];return t.pointers.components.getChildren(e).forEach(function(e){t.setOperationsQueue.runSetOperation(m.remove,[t,e],{isUpdatingAnchors:!0})}),n.forEach(function(n){var o=m.getComponentToAddRef(t,e,n);r.push(o),t.setOperationsQueue.runSetOperation(m.add,[t,o,e,n],{isUpdatingAnchors:!0})}),r}}},blogFeedOrCustomFeedHasPagination:I.blogFeedOrCustomFeedHasPagination,canDeleteComp:R,findCustomizationDefaultValueFromDescriptor:function(e,t,n){var r;return B(n),[F,U,H].some(function(o){return void 0!==(r=o(e,t,n))}),C.isExpression(r)?W(r.$expr):r},findCustomizationOverride:k,getAllAppPartComps:function(t,n){var r=n&&_(t,n);return e.isNull(r)?[]:f.getComponentByType(t,"wixapps.integration.components.AppPart").map(function(e){return i.getDataItem(t,e)}).filter(function(e){return e.appInnerID===r||!r})},getApplicationId:_,getAppPartExtraData:function(e,t){var n=e.dal.get(t),r="".concat(n.dataQuery.replace("#",""),"_extraData"),o=d.getAppPartDataPath("blog",r);return e.dal.getByPath(o)},getAppPartRole:S.getAppPartRole,getAppPartViewFieldKeyValue:function(t,n,o,a,s,u){var c,l=i.getDataItem(t,n),p=S.getDescriptor(t,S.getPackageName(t,l.appInnerID)),d=r[A.isOpen("wixappsViewsCaching")?"memoizedViewsUtils":"viewsUtils"].findViewInDescriptorByNameTypeAndFormat(p,l.viewName,o,a),g=e.cloneDeep(d);g.name=l.viewName,r.viewsCustomizer.customizeView(g,p.customizations,l.appLogicCustomizations),"vars"===s?c=g.vars[u]:r.viewsUtils.traverseViews(g,function(t){if(t.id===s)return c=e.get(t,u),!1});var f=C.isExpression(c)?W(c.$expr):c;if(void 0!==f)return f.toString()},getAvailableCustomizations:L,getAvailableViewNames:function(e,t,n){return S.getAppPartDefinition(e,t,n).views},getBlogCategories:function(t,n){var r=d.getCategoriesPath("blog"),o=t.dal.getByPath(r)||[],i=[];return e.forEach(o,function(t){i.push({name:t.name}),e.forEach(t.subcategories,function(e){i.push({isSubcategory:!0,name:e.name})})}),n&&!e.find(i,{name:n})&&i.unshift({name:n}),i},getBlogInstanceId:function(e){return function(e){return s.getAppData(e,_(e,"blog"))}(e).datastoreId},getBlogNewSocialShareButtonsCustomizationForView:function(e,t){return g(t)},getBlogPaginationCustomizationsByAppPartName:function(e,t){return p.getBlogPaginationCustomizationsByAppPartName(t)},getComponentTypeByProxyName:function(e,t){return o.componentTypeUtil.getComponentTypeByProxyName(t)},getDataStoreId:function(e,t){return s.getAppData(e,_(e,t)).datastoreId},getInnerComps:N,getPackageName:S.getPackageName,getSinglePostId:function(e,t){var n=d.getAppPartDataPath("blog",t),r=e.dal.getByPath(n);return r?r[1]:""},getStyleCustomizations:function(t,n,r,o){var i=S.getDescriptor(t,n);return e.filter(i.customizations,function(e){return!("comp.style"!==e.key||void 0!==r&&e.fieldId!==r||void 0!==o&&e.view!==o)})},getTagNames:function(e){var t=d.getBlogTagNamesPath();return e.dal.getByPath(t)},getUserId:function(){return""},invalidateComponentViewCache:function(e,t){e.setOperationsQueue.waitForChangesApplied(function(){o.viewCacheUtils.removeComponentViewDefs(t)})},isBlogPage:h.isBlogPage,isRTLAllowed:function(e,t,n){return S.getAppPartDefinition(e,t,n).allowRtl},loadTagNames:function(){return[]},provision:D,provisionFromTemplate:w,registerHooks:function(){E.registerHook(E.HOOKS.REMOVE.AFTER,M,"wixapps.integration.components.AppPage"),E.registerHook(E.HOOKS.REMOVE.IS_OPERATION_ALLOWED,R,"wixapps.integration.components.AppPart"),E.registerHook(E.HOOKS.DUPLICATE.IS_OPERATION_ALLOWED,R,"wixapps.integration.components.AppPart")},reloadApp:function(t,n){if(e.size(z.getAllAppPartComps(t,n))>0){var r=d.getPackageDescriptorPath(n),o=t.dal.getByPath(r),i=d.getPackagePath(n);t.dal.full.setByPath(i,{}),t.dal.full.setByPath(r,o),"blog"===n&&z.loadTagNames()}},styleMapping:{fontClassToStyle:function(e,t){return r.styleMapping.fontClassToStyle(t)},styleToFontClass:function(e,t){return r.styleMapping.styleToFontClass(t)}},style:{createItemToFork:function(t,n){var r={styleType:a.STYLES.TYPES.CUSTOM,type:a.STYLES.TOP_LEVEL_STYLE},o=e(n).omit(["id"]).assign(r).value();return P.styles.createStyleItemToAdd(t,o)}},convertAppPage:function(t,n){if("AppPage"===y.getPageData(t,n.id).appPageType){var r=e.assign({innerPath:["componentType"]},n);t.dal.set(r,"mobile.core.components.Page")}}};return z}()},function(e,t,n){e.exports=function(){var e=n(18),t=n(0);return{getBlogFeedPageJson:function(t,n,o){var i=r(o);return{type:"Page",components:n.map(i),skin:"wysiwyg.viewer.skins.page.BasicPageSkin",layout:{width:980,height:968,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wixapps.integration.components.AppPage",data:{type:"AppPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blog",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"blog",hidePage:!1,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1},indexable:!0,isLandingPage:!1,pageBackgrounds:e.serializePage(t,t.siteAPI.getPrimaryPageId()).data.pageBackgrounds,appPageId:"79f391eb-7dfc-4adf-be6e-64434c4838d9",appPageType:"AppPage",appInnerID:o.toString(),repeaterPage:!1},style:"p2"}},getSinglePostPageJson:function(t,n,o){var i=r(o);return{type:"Page",components:n.map(i),skin:"wysiwyg.viewer.skins.page.BasicPageSkin",layout:{width:980,height:895,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wixapps.integration.components.AppPage",data:{type:"AppPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Single Post",hideTitle:!0,descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"single-post",hidePage:!0,mobileHidePage:!0,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1,passwordDigest:""},indexable:!0,isLandingPage:!1,pageBackgrounds:e.serializePage(t,t.siteAPI.getPrimaryPageId()).data.pageBackgrounds,appPageId:"7326bfbb-4b10-4a8e-84c1-73f776051e10",appPageType:"AppPage",appInnerID:o.toString(),repeaterPage:!0},style:"p2"}},blogComponentBuilder:r};function r(e){return function n(r){var o=function(n){if("wixapps.integration.components.AppPart"===n.componentType)return r=n,t.merge(r,{data:{appInnerID:e.toString()}});var r;return n}(r);return t.isArray(r.components)&&(o.components=r.components.map(n)),o}}}()},function(e,t,n){e.exports=function(){var e=n(3),t=n(147),r=n(0),o=n(1),i=n(117),a=o.blogAppPartNames,s=i.numberOfPostsPerPageGetter;return{blogFeedOrCustomFeedHasPagination:function(n,o){var i=e.getDataItem(n,o);switch(i.appPartName){case a.FEED:return function(e,n){var o=t.getAppPartExtraDataPath("blog",n.id),i=e.dal.getByPath(o);return r.get(i,"totalCount")>10}(n,i);case a.CUSTOM_FEED:return function(e,n){var o=t.getAppPartDataPath("blog",n.id),i=e.dal.getByPath(o),a=s.getNumberOfPostsPerPage(n);return r.get(i,"length")>a}(n,i)}}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(1),r=(n(51),n(86)),o=n(70),i=(n(9),n(43)),a=(n(252),n(253),n(254)),s=["comp","name"],u=["comp","hidden"],c=["comp","hidePagination"],l=["comp","itemsPerPage"],p=["comp","style"],d=["vars","itemSpacing"],g={itemSpacing:function(){return d},hidePagination:function(e){return f(e).concat(c)},itemsPerPage:function(e){return f(e).concat(l)},hideSeparator:function(e){return m(e).concat(u)},separatorStyle:function(e){return m(e).concat(p)}};function f(n){return t.objectUtils.findPath(n,function(t){return"PaginatedList"===e.get(t,s)})}function m(n){return t.objectUtils.findPath(n,function(t){return"HorizontalLine"===e.get(t,s)})}return{get:function(t,n,s){var u=o.getListDef(t,n).viewName,c=r.getView(t,"Array",u,s),l=m(c),p=e.get(c,l);return{itemSpacing:i.convertStringToPrimitive(e.get(c,g.itemSpacing())),hidePagination:i.convertStringToPrimitive(e.get(c,g.hidePagination(c))),itemsPerPage:i.convertStringToPrimitive(e.get(c,g.itemsPerPage(c))),hideSeparator:i.convertStringToPrimitive(e.get(c,g.hideSeparator(c)))||!1,separatorStyle:a.getStyle(t,p),separatorComponentType:a.getCompProxyClass(p).componentType}},set:function(t,n,i,a){var s=o.getListDef(t,n).viewName,u=r.getView(t,"Array",s,a);e(g).pick(e.keys(i)).forEach(function(e,n){r.setValueInView(t,"Array",s,e(u),i[n].toString(),a)}),o.markDataAsUpdated(t,n)}}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(13),o=n(684),i=n(685),a=n(25),s=n(686),{initialize:function(e){a.initBasePaths(e),o.registerHooks(),i.switchOnBlogPaginationIfSiteIsNew(e),r.generalInfo.isFirstSave(e)&&s(e)}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(25),r=n(6),o=n(3),i=n(251),a=n(70),s=n(258),u="wixapps.integration.components.AppPart2",c="template";function l(e,n,r){var a=i.createListFromTemplate(e,r.custom[c]),u=s.getApplicationId(e);return e.dal.full.pushByPath(t.getAppbuilderMetadataPath("requestedPartNames"),a),e.dal.full.setByPath(t.getAppPart2MetadataPath(a),{loading:!1}),o.updateDataItem(e,n,{appPartName:a,appInnerID:u}),{success:!0,description:"New list was added with id [".concat(a,"]")}}function p(t,n,r){var a=o.getDataItem(t,n);return e.isEmpty(a)?{success:!0,description:"compData is empty"}:(r[c]=i.generateTemplate(t,a.appPartName),{success:!0,description:"Added template to the custom component structure"})}function d(n,r,o,i,s,u){if("MOBILE"===r.type)return{success:!0,description:"Skipped deleting part views when deleting mobile component"};var c=u.appPartName,l=a.getListDef(n,c);if(!l)return{success:!0,description:"Missing Part definition: views were not deleted"};var p=n.dal.getByPath(t.getBaseViewsPath());return e(p).pickBy({name:l.viewName}).forEach(function(e,r){n.dal.full.removeByPath(t.getViewPath(r))}),{success:!0,description:"Deleted Part views"}}return{registerHooks:function(){r.registerHook(r.HOOKS.ADD.AFTER,l,u),r.registerHook(r.HOOKS.SERIALIZE.SET_CUSTOM,p,u),r.registerHook(r.HOOKS.REMOVE.AFTER,d,u)},afterDeleteList:d}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(7),r=n(3),o=n(13),i=n(256),a=n(1);return{switchOnBlogPaginationIfSiteIsNew:function(e){(function(e){return o.generalInfo.isFirstSave(e)})(e)&&(function(e){s(e,a.blogAppPartNames.FEED)}(e),function(e){s(e,a.blogAppPartNames.CUSTOM_FEED)}(e))}};function s(n,o){e.forEach(function(n,o){return e.filter(function(e){return t.getComponentByType(e,"wixapps.integration.components.AppPart")}(n),function(e){return r.getDataItem(n,e).appPartName===o})}(n,o),e.partial(u,n,o))}function u(e,t,n){var o=r.getDataItem(e,n);o.appLogicCustomizations=o.appLogicCustomizations.concat(i.getBlogPaginationCustomizationsByAppPartName(t)),r.updateDataItem(e,n,o)}}()},function(e,t,n){e.exports=function(){var e=n(7),t=n(3),r=n(257),o=n(0),i=n(1);return function(n){o(e.getComponentByType(n,"wixapps.integration.components.AppPart")).filter(function(e){return t.getDataItem(n,e).appPartName===i.blogAppPartNames.SINGLE_POST}).forEach(function(e){var o=t.getDataItem(n,e),i=r(o.viewName);o.appLogicCustomizations.push(i),t.updateDataItem(n,e,o)})}}()},function(e,t,n){var r,o,i,a,s;e.exports=(r=n(0),o=n(4),i=n(7),a=n(25),s=n(255),{cleanRepoViews:function(e,t,n){var u=e.dal.full.getByPath(a.getRepoPath()),c=r(u.parts).pick(function(e){var t=i.getAllComponents(e,null,function(t){return"wixapps.integration.components.AppPart2"===o.getType(e,t)});return r.map(t,function(t){return o.data.get(e,t).appPartName})}(e)).map("viewName").transform(function(e,t){var n=r.pickBy(u.views,{name:t});return r.assign(e,n)},{}).value();r.keys(c).length!==r.keys(u.views).length?(e.dal.full.removeByPath(a.getBaseViewsPath()),e.dal.full.setByPath(a.getBaseViewsPath(),c),s.save(e,t,n)):t&&t()}})},function(e,t,n){e.exports=function(){var e=n(0),t=n(43),r=n(1),o=n(689),i=(n(25),n(85)),a=n(86),s=n(70),u={"wix:RichText":o};function c(n){var r={};return t.viewsUtils.traverseViews(n,function(t){var n=e.get(t,"comp.name");"TextField"!==n&&"Field"!==n||(r[t.data]=t)}),r}function l(e,t){return r.objectUtils.findPath(e,function(e){return e&&e.data===t})}function p(t,n,r,o,i){var a=c(t),s=c(n),p=e(o).filter(function(t){return e.has(u,t.type)}).groupBy("type").value(),d=e.map(p,function(t,n){return e.map(t,function(t){var o=t.name,c=a[o],l=s[t.name],p=e.mapValues(r,function(t){return e.pick(t,o)});return{fieldName:o,result:u[n].migrate(c,l,p,i)}})});return e(d).flatten().reduce(function(t,n){var r=l(t.viewDef,n.fieldName),o=l(t.mobileViewDef,n.fieldName);return{viewDef:e.set(t.viewDef,r,n.result.viewDef),mobileViewDef:e.set(t.mobileViewDef,o,n.result.mobileViewDef),items:e.defaultsDeep(n.result.data,t.items)}},{viewDef:t,mobileViewDef:n,items:r})}return{migrate:p,migrateList:function(e,t){var n=s.getItemView(e,t),r=s.getItemView(e,t,"Mobile"),o=s.getType(e,t),u=i.getAllItemsOfType(e,o.name),c=s.getVersion(e,t),l=p(n,r,u,o.fields,c);a.setValueInView(e,o.name,n.name,[],l.viewDef),a.setValueInView(e,o.name,n.name,[],l.mobileViewDef,"Mobile"),i.setAllItemsOfType(e,o.name,l.items)}}}()},function(e,t,n){e.exports=function(){var e=n(0),t=n(43),r=["color","backgroundColor","bold","italic","lineThrough","underline","fontSize","line-height","fontFamily"],o="comp.items.0.layout".split(".");function i(t){return function(t){var n=e.get(t,"comp.items[0].comp");e.forEach(r,function(e){delete n[e]})}(t),function(t){var n=e.get(t,o);n&&delete n["text-align"]}(t),t}return{compPropsToRemove:r,migrate:function(n,r,a,s){var u=e.get(n,o.concat("text-align")),c=u?"text-align:".concat(u):"";return{data:e.mapValues(a,function(r){return e.mapValues(r,function(r){var o=function(n,r,o,i){return t.richTextUtils.getDataWithDefaultStyleForRichText(e.partialRight(t.viewsUtils.getCompProp,n),r,void 0,o,i)}(e.get(n,"comp.items[0]"),r,s,c);return e.defaults({text:o},r)})}),viewDef:i(n),mobileViewDef:i(r)}}}}()},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){var t="";return e.forEach(function(e,n){t+=n+":"+e+";"}),"{"+t+"}"}function o(e){for(var t="",n=0,o=e;n<o.length;n++){var i=o[n];t+=""+i.selector,t+=r(i.node),i.before&&(t+=i.selector+":before",t+=r(i.before)),i.after&&(t+=i.selector+":after",t+=r(i.after))}return t}function i(e){return Number(e.replace("px",""))}function a(e,t){return"snap_"+t+"_"+e}function s(e,t){return"snap_"+t+"_"+e}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function c(e,t){if(!e)return null;var n=new Map;return e.forEach(function(e,r){e!==t.get(r)&&n.set(r,e)}),0===n.size?null:n}n.r(t);var l={background:{name:"background",longhand:["background-image","background-position","background-position-x","background-position-y","background-size","background-repeat","background-repeat-x","background-repeat-y","background-attachment","background-origin","background-clip","background-color"]},border:{name:"border",longhand:["border-left","border-right","border-bottom","border-top","border-color","border-style","border-width","border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width"]},borderRadius:{name:"border-radius",longhand:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"]},borderImage:{name:"border-image",longhand:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"]},columns:{name:"columns",longhand:["column-width","column-count"]},columnRule:{name:"column-rule",longhand:["column-rule-width","column-rule-style","column-rule-color"]},flex:{name:"flex",longhand:["flex-grow","flex-shrink","flex-basis"]},flexFlow:{name:"flex-flow",longhand:["flex-direction","flex-wrap"]},font:{name:"font",longhand:["font-family","font-size","font-style","font-variant","font-weight","line-height"]},grid:{name:"grid",longhand:["grid-template-columns","grid-template-rows","grid-template-areas","grid-auto-rows","grid-auto-columns","grid-auto-flow","grid-column-gap","grid-row-gap","column-gap","row-gap"]},gridArea:{name:"grid-area",longhand:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"]},gridColumn:{name:"grid-column",longhand:["grid-column-start","grid-column-end"]},listStyle:{name:"list-style",longhand:["list-style-type","list-style-position","list-style-image"]},margin:{name:"margin",longhand:["margin-top","margin-right","margin-bottom","margin-left"]},offset:{name:"offset",longhand:["offset-position","offset-path","offset-distance","offset-anchor","offset-rotate"]},outline:{name:"outline",longhand:["outline-color","outline-style","outline-width"]},overflow:{name:"overflow",longhand:["overflow-x","overflow-y"]},padding:{name:"padding",longhand:["padding-top","padding-right","padding-bottom","padding-left"]},textDecoration:{name:"text-decoration",longhand:["text-decoration-line","text-decoration-style","text-decoration-color"]}},p={"animation-delay":!0,"animation-direction":!0,"animation-duration":!0,"animation-fill-mode":!0,"animation-iteration-count":!0,"animation-name":!0,"animation-play-state":!0,"animation-timing-function":!0,"caret-color":!0,cursor:!0,hyphens:!0,"overflow-anchor":!0,"pointer-events":!0,resize:!0,"scroll-behavior":!0,speak:!0,"touch-action":!0,"transition-delay":!0,"transition-duration":!0,"transition-property":!0,"transition-timing-function":!0,"unicode-bidi":!0,"user-select":!0,widows:!0,"will-change":!0,"alignment-baseline":!0,"buffered-rendering":!0,"color-interpolation":!0,"color-interpolation-filters":!0,"color-rendering":!0,"dominant-baseline":!0,"flood-color":!0,"flood-opacity":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,"mask-type":!0,"paint-order":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"text-anchor":!0,"text-rendering":!0,"vector-effect":!0,"writing-mode":!0,d:!0,cx:!0,cy:!0,x:!0,y:!0,r:!0,rx:!0,ry:!0},d={STYLE:!0,SCRIPT:!0,IFRAME:!0},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};function f(e){Object.keys(e.dataset).forEach(function(t){e.removeAttribute("data-"+t.split(/(?=[A-Z])/).join("-").toLowerCase())}),e.removeAttribute("class"),e.removeAttribute("style")}function m(e,t,n){void 0===n&&(n=!1);var r=e.ownerDocument.defaultView.getComputedStyle(e,t),o=r.getPropertyValue("content");return!t||o&&"none"!==o||n?function(e){for(var t=new Map,n=0,r=e;n<r.length;n++){var o=r[n];p[o]||/^-(webkit|moz|ms)-/.test(o)||t.set(o,e[o])}for(var i in l)if(e[i]){var a=l[i].name;t.set(a,e[i]),l[i].longhand.forEach(function(e){t.delete(e)})}return t}(r):null}function v(e,t,n){var r=n.ownerDocument.createElement(e);n.contentWindow.document.body.appendChild(r);var o={selector:t,node:m(r,null),before:m(r,":before",!0),after:m(r,":after",!0)};return n.contentWindow.document.body.removeChild(r),o}function y(e,t,n){return{selector:t,node:c(m(e,null),n.node),before:c(m(e,":before"),n.before),after:c(m(e,":after"),n.after)}}var E=function(e){if(!e||!function(e){return e instanceof HTMLElement}(e))throw new Error("Argument is not HTML Element");var t,n=u(),r=[],o=new Map,i=e.getElementsByTagName("*"),c=g([e],i),l=e.cloneNode(!0),p=l.getElementsByTagName("*"),m=g([l],p),E=e.ownerDocument.createElement("iframe");e.ownerDocument.body.appendChild(E);for(var I=0;I<c.length;I++){var S=c[I],h=m[I],P=h.tagName;if(d[P])h.remove();else{var A=a(I,n),T=s(P,n);o.has(P)||o.set(P,v(P,"."+T,E)),r.push(y(S,"#"+A,o.get(P))),f(h),h.setAttribute("id",A),h.setAttribute("class",T)}}return o.forEach(function(e){r.push(e)}),(t=r[0].node).set("position","relative"),t.set("top","auto"),t.set("right","auto"),t.set("bottom","auto"),t.set("left","auto"),t.set("margin",0),E.parentNode.removeChild(E),{node:l,css:r}};var I=function(e){var t=E(e),n=t.node,r=t.css,i=document.createElement("style");return i.innerHTML=o(r),n.appendChild(i),n};var S=function(e){var t=E(e),n=t.node,r=t.css;return n.outerHTML+"<style>"+o(r)+"</style>"},h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})},P=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},A=function(e){if(!e.style.height||!e.style.width)throw new Error("Cant conclude img element dimensions");var t=i(e.style.height);return{width:i(e.style.width),height:t}},T=function(e,t,n){return'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+n+'">\n    <foreignObject width="100%" height="100%">\n      '+O(e)+"\n    </foreignObject>\n  </svg>"},O=function(e){var t=document.implementation.createHTMLDocument("");if(t.write(e),!t.documentElement.namespaceURI)throw new Error("Unable to parse HTML to XML");return t.documentElement.setAttribute("xmlns",t.documentElement.namespaceURI),(new XMLSerializer).serializeToString(t.body)},C=function(e,t,n,r){var o=new Image;o.crossOrigin="Anonymous",o.onload=function(){var e=function(e,t,n){var r=document.createElement("canvas"),o=r.getContext("2d");if(!o)throw new Error("couldn't create context for canvas element");return r.height=t,r.width=e,o&&o.drawImage(n,0,0),r}(t,n,o);r(e)},o.src=e,(o.complete||void 0===o.complete)&&(o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o.src=e)},_=function(e,t,n,r){C(e,n,r,function(e){return function(e,t){e.toBlob(function(e){return h(void 0,void 0,void 0,function(){var n;return P(this,function(r){try{if(!e)throw new Error("couldn't convert html canvas element to blob data");t(e)}catch(e){throw n="Failed to upload image: "+e,console.error(n),e}return[2]})})})}(e,t)})},D=function(e){return h(void 0,void 0,void 0,function(){var t,n,r,o;return P(this,function(i){switch(i.label){case 0:t=0,n=e.childNodes,i.label=1;case 1:return t<n.length?(r=n[t],[4,D(r)]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return"IMG"!==e.nodeName?[3,6]:[4,new Promise(function(t){return h(void 0,void 0,void 0,function(){var n,r,o;return P(this,function(i){return n=A(e),r=n.width,o=n.height,function(e,t,n,r){C(e,n,r,function(e){return t(e.toDataURL())})}(e.src,t,r,o),[2]})})})];case 5:o=i.sent(),e.setAttribute("src",o),i.label=6;case 6:return[2]}})})};var w=function(e){return h(this,void 0,void 0,function(){var t,n,r,o,i;return P(this,function(a){switch(a.label){case 0:return t=I(e),[4,D(t)];case 1:return a.sent(),n=A(t),r=n.width,o=n.height,i=t.outerHTML,[2,new Promise(function(e){var t=T(i,r,o);_(t,e,r,o)})]}})})};n.d(t,"createSnapshotHTML",function(){return I}),n.d(t,"createSnapshotString",function(){return S}),n.d(t,"createSnapshotBlob",function(){return w})}])});
//# sourceMappingURL=document-services-implementation.min.js.map